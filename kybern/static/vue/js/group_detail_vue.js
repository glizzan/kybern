(function(e){function t(t){for(var i,r,a=t[0],c=t[1],l=t[2],m=0,u=[];m<a.length;m++)r=a[m],Object.prototype.hasOwnProperty.call(s,r)&&s[r]&&u.push(s[r][0]),s[r]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(e[i]=c[i]);_&&_(t);while(u.length)u.shift()();return o.push.apply(o,l||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],i=!0,a=1;a<n.length;a++){var c=n[a];0!==s[c]&&(i=!1)}i&&(o.splice(t--,1),e=r(r.s=n[0]))}return e}var i={},s={group_detail_vue:0},o=[];function r(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=i,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],c=a.push.bind(a);a.push=t,a=a.slice();for(var l=0;l<a.length;l++)t(a[l]);var _=c;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("d8c3")},"07bb":function(e,t,n){n("c975"),n("d3b7"),n("25f0"),e.exports={props:["message","dismissable"],data:function(){return{unique_identifier:null,styleclass:"text-danger",show_dismissible_alert:!0}},created:function(){this.unique_identifier=Math.random().toString(),this.render_html()},watch:{message:function(){this.render_html(),this.show_dismissible_alert=!0}},methods:{render_html:function(){if(this.message&&-1!==this.message.indexOf("href")){var e=document.getElementById(this.unique_identifier);e&&(e.innerHTML=this.message,this.styleclass="text-secondary")}}}}},"1e2a":function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return s}));var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:e.styleclass,attrs:{id:e.unique_identifier}},[e.dismissable&&e.message?n("span",{staticClass:"error-message"},[n("b-alert",{staticClass:"my-2 error-alert",attrs:{variant:"danger",dismissible:"",show:e.show_dismissible_alert},on:{dismissed:function(t){e.show_dismissible_alert=!1}}},[e._v(" "+e._s(e.message))])],1):n("span",{staticClass:"error-message"},[e._v(" "+e._s(e.message)+" ")])])},s=[]},4360:function(e,t,n){"use strict";n("b64b"),n("d3b7"),n("96cf");var i=n("1da1"),s=n("2b0e"),o=n("2f62"),r=n("583c"),a=(n("7db0"),n("a434"),{state:{actions:{}},getters:{getActionData:function(e,t){return function(t){for(var n in e.actions){var i=e.actions[n].find((function(e){return e.action_pk==t}));if(i)return i}}}},mutations:{REPLACE_ACTIONS_FOR_ITEM:function(e,t){s["default"].set(e.actions,t.item_key.toLowerCase(),t.action_data)},ADD_OR_UPDATE_ACTION:function(e,t){var n=t.item_key.toLowerCase();for(var i in e.actions[n]||s["default"].set(e.actions,n,[]),e.actions[n])if(e.actions[n][i].action_pk==t.action_data.action_pk)return void e.actions[n].splice(i,1,t.action_data);e.actions[n].push(t.action_data)}},actions:{updateActions:function(e,t){e.state,e.commit,e.rootState;var n=e.dispatch,i=t.response.data;if(i.multiple_actions)for(var s in i.actions)n("addOrUpdateAction",{action_pk:i.actions[s].action_pk});else n("addOrUpdateAction",{action_pk:i.action_pk})},loadActions:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var i,s,o,r,a,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.state,i=e.commit,e.rootState,s=e.dispatch,o=e.getters,n.next=3,o.url_lookup("get_action_data_for_target");case 3:return r=n.sent,a={item_id:t.item_id,item_model:t.item_model},c=function(e){var n=t.item_id+"_"+t.item_model;i("REPLACE_ACTIONS_FOR_ITEM",{action_data:e.data.action_data,item_key:n})},n.abrupt("return",s("getAPIcall",{url:r,params:a,implementationCallback:c}));case 7:case"end":return n.stop()}}),n)})))()},addOrUpdateAction:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var i,s,o,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.state,i=e.commit,e.rootState,e.dispatch,s=e.getters,n.next=3,s.url_lookup("get_action_data");case 3:o=n.sent,a={action_pk:t.action_pk},r["a"].post(o,a).then((function(e){var t=e.data.action_data,n=t.action_target_pk+"_"+t.action_target_model;i("ADD_OR_UPDATE_ACTION",{action_data:t,item_key:n})})).catch((function(e){throw console.log(e),e}));case 6:case"end":return n.stop()}}),n)})))()}}}),c=a,l=(n("c975"),{state:{item_comments:{},comments:{}},getters:{getCommentsForItem:function(e,t){return function(t){var n=[];for(var i in e.item_comments[t]){var s=e.item_comments[t][i];n.push(e.comments[s])}return n}}},mutations:{REPLACE_ITEM_COMMENTS:function(e,t){var n=t.item_id+"_"+t.item_model;s["default"].set(e.item_comments,n,t.pks)},ADD_COMMENT_TO_ITEM:function(e,t){var n=t.item_id+"_"+t.item_model,i=e.item_comments[n].indexOf(t.comment_pk);-1==i&&e.item_comments[n].push(parseInt(t.comment_pk))},REMOVE_COMMENT_FROM_ITEM:function(e,t){var n=t.item_id+"_"+t.item_model,i=e.item_comments[n].indexOf(t.comment_pk);i>-1&&e.item_comments[n].splice(i,1)},ADD_OR_UPDATE_COMMENT:function(e,t){s["default"].set(e.comments,t.pk,t.data)},DELETE_COMMENT:function(e,t){s["default"].delete(e.comments,t.pk)}},actions:{getCommentData:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var i,s,o,r,a,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=e.commit,e.state,s=e.dispatch,o=e.getters,n.next=3,o.url_lookup("get_comment_data");case 3:return r=n.sent,a={item_id:t.item_id,item_model:t.item_model},c=function(e){for(var t in e.data.comments)i("ADD_OR_UPDATE_COMMENT",{pk:t,data:e.data.comments[t]});i("REPLACE_ITEM_COMMENTS",{item_id:e.data.item_id,item_model:e.data.item_model,pks:e.data.comment_pks})},n.abrupt("return",s("getAPIcall",{url:r,params:a,implementationCallback:c}));case 7:case"end":return n.stop()}}),n)})))()},addComment:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var i,s,o,r,a,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=e.commit,e.state,s=e.dispatch,o=e.getters,n.next=3,o.url_lookup("add_comment");case 3:return r=n.sent,a={item_id:t.item_id,item_model:t.item_model,text:t.text},c=function(e){var n=Object.keys(e.data.comment)[0],s=e.data.comment[n];i("ADD_OR_UPDATE_COMMENT",{pk:n,data:s}),i("ADD_COMMENT_TO_ITEM",{comment_pk:n,item_id:t.item_id,item_model:t.item_model})},n.abrupt("return",s("actionAPIcall",{url:r,params:a,implementationCallback:c}));case 7:case"end":return n.stop()}}),n)})))()},editComment:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var i,s,o,r,a,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=e.commit,e.state,s=e.dispatch,o=e.getters,n.next=3,o.url_lookup("edit_comment");case 3:return r=n.sent,a={text:t.text,comment_pk:t.comment_pk},c=function(e){var t=Object.keys(e.data.comment)[0],n=e.data.comment[t];i("ADD_OR_UPDATE_COMMENT",{pk:t,data:n})},n.abrupt("return",s("actionAPIcall",{url:r,params:a,implementationCallback:c}));case 7:case"end":return n.stop()}}),n)})))()},deleteComment:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var i,s,o,r,a,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=e.commit,e.state,s=e.dispatch,o=e.getters,n.next=3,o.url_lookup("delete_comment");case 3:return r=n.sent,a={comment_pk:t.comment_pk},c=function(e){i("REMOVE_COMMENT_FROM_ITEM",{item_id:t.item_id,item_model:t.item_model,comment_pk:e.data.deleted_comment_pk}),i("DELETE_COMMENT",{pk:e.data.deleted_comment_pk})},n.abrupt("return",s("actionAPIcall",{url:r,params:a,implementationCallback:c}));case 7:case"end":return n.stop()}}),n)})))()}}}),_=l,m=(n("a4d3"),n("e01a"),n("4de4"),n("b0c0"),{state:{forums:[],posts:[]},getters:{getForumData:function(e,t){return function(t){return e.forums.find((function(e){return e.pk==parseInt(t)}))}},getPostsDataForForum:function(e,t){return function(t){return e.posts.filter((function(e){return e.forum_pk==t}))}},getPostData:function(e,t){return function(t){return e.posts.find((function(e){return e.pk==t}))}}},mutations:{SET_FORUMS:function(e,t){s["default"].set(e,"forums",t.forums)},ADD_OR_UPDATE_FORUM:function(e,t){for(var n in e.forums)if(e.forums[n].pk==t.forum_data.pk)return void e.forums.splice(n,1,t.forum_data);e.forums.push(t.forum_data)},DELETE_FORUM:function(e,t){for(var n in e.forums)e.forums[n].pk==t.pk&&e.forums.splice(n,1)},ADD_POST:function(e,t){for(var n in e.posts)if(e.posts[n].pk==t.post_data.pk)return;e.posts.push(t.post_data)},EDIT_POST:function(e,t){for(var n in e.posts)e.posts[n].pk==t.post_data.pk&&s["default"].set(e.posts,n,t.post_data)},DELETE_POST:function(e,t){for(var n in e.posts)e.posts[n].pk==t.pk&&e.posts.splice(n,1)}},actions:{getForumData:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function t(){var n,i,s,o,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,e.state,i=e.dispatch,s=e.getters,t.next=3,s.url_lookup("get_forum_data");case 3:return o=t.sent,r=function(e){n("SET_FORUMS",{forums:e.data.forums})},t.abrupt("return",i("getAPIcall",{url:o,implementationCallback:r}));case 6:case"end":return t.stop()}}),t)})))()},getForum:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var i,s,o,r,a,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=e.commit,e.state,s=e.dispatch,o=e.getters,n.next=3,o.url_lookup("get_forum");case 3:return r=n.sent,a={forum_pk:t.forum_pk},c=function(e){i("ADD_OR_UPDATE_FORUM",{forum_data:e.data.forum_data})},n.abrupt("return",s("getAPIcall",{url:r,params:a,implementationCallback:c}));case 7:case"end":return n.stop()}}),n)})))()},addForum:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var i,s,o,r,a,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=e.commit,e.state,s=e.dispatch,o=e.getters,n.next=3,o.url_lookup("add_forum");case 3:return r=n.sent,a={name:t.name,description:t.description},c=function(e){i("ADD_OR_UPDATE_FORUM",{forum_data:e.data.forum_data})},n.abrupt("return",s("actionAPIcall",{url:r,params:a,implementationCallback:c}));case 7:case"end":return n.stop()}}),n)})))()},editForum:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var i,s,o,r,a,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=e.commit,e.state,s=e.dispatch,o=e.getters,n.next=3,o.url_lookup("edit_forum");case 3:return r=n.sent,a={pk:t.pk,name:t.name,description:t.description},c=function(e){i("ADD_OR_UPDATE_FORUM",{forum_data:e.data.forum_data})},n.abrupt("return",s("actionAPIcall",{url:r,params:a,implementationCallback:c}));case 7:case"end":return n.stop()}}),n)})))()},deleteForum:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var i,s,o,r,a,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=e.commit,e.state,s=e.dispatch,o=e.getters,n.next=3,o.url_lookup("delete_forum");case 3:return r=n.sent,a={pk:t.pk},c=function(e){i("DELETE_FORUM",{pk:e.data.deleted_forum_pk})},n.abrupt("return",s("actionAPIcall",{url:r,params:a,implementationCallback:c}));case 7:case"end":return n.stop()}}),n)})))()},getPosts:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var i,s,o,r,a,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=e.commit,e.state,s=e.dispatch,o=e.getters,n.next=3,o.url_lookup("get_posts_for_forum");case 3:return r=n.sent,a={forum_pk:t.forum_pk},c=function(e){for(var t in e.data.posts)i("ADD_POST",{post_data:e.data.posts[t]})},n.abrupt("return",s("getAPIcall",{url:r,params:a,implementationCallback:c}));case 7:case"end":return n.stop()}}),n)})))()},getPost:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var i,s,o,r,a,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=e.commit,e.state,s=e.dispatch,o=e.getters,n.next=3,o.url_lookup("get_post");case 3:return r=n.sent,a={post_pk:t.post_pk},c=function(e){i("ADD_POST",{post_data:e.data.post})},n.abrupt("return",s("getAPIcall",{url:r,params:a,implementationCallback:c}));case 7:case"end":return n.stop()}}),n)})))()},addPost:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var i,s,o,r,a,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=e.commit,e.state,s=e.dispatch,o=e.getters,n.next=3,o.url_lookup("add_post");case 3:return r=n.sent,a={forum_pk:t.forum_pk,title:t.title,content:t.content},c=function(e){i("ADD_POST",{post_data:e.data.post_data})},n.abrupt("return",s("actionAPIcall",{url:r,params:a,implementationCallback:c}));case 7:case"end":return n.stop()}}),n)})))()},editPost:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var i,s,o,r,a,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=e.commit,e.state,s=e.dispatch,o=e.getters,n.next=3,o.url_lookup("edit_post");case 3:return r=n.sent,a={pk:t.pk,title:t.title,content:t.content},c=function(e){i("EDIT_POST",{post_data:e.data.post_data})},n.abrupt("return",s("actionAPIcall",{url:r,params:a,implementationCallback:c}));case 7:case"end":return n.stop()}}),n)})))()},deletePost:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var i,s,o,r,a,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=e.commit,e.state,s=e.dispatch,o=e.getters,n.next=3,o.url_lookup("delete_post");case 3:return r=n.sent,a={pk:t.pk,forum_pk:t.forum_pk},c=function(e){i("DELETE_POST",{pk:e.data.deleted_post_pk})},n.abrupt("return",s("actionAPIcall",{url:r,params:a,implementationCallback:c}));case 7:case"end":return n.stop()}}),n)})))()}}}),u=m,d=(n("99af"),n("c740"),n("4160"),n("caad"),n("d81d"),n("2532"),n("159b"),{state:{members:[],roles:[],users:[],current_membership_option:"",membership_config_data:{permission:null,condition:null},governance_info:"",owners:{},governors:{}},getters:{memberNames:function(e,t){return e.members.map((function(e){return t.getUserName(e)}))},roleNames:function(e){var t=[];return e.roles.forEach((function(e){t.push(e.name)})),t},allRoles:function(e,t){return[{name:"members",current_members:e.members}].concat(e.roles)},rolesAsOptions:function(e,t){return t.allRoles.map((function(e){return{name:e.name}}))},getUser:function(e){return function(t){return e.users.find((function(e){return e.pk==t}))}},getUserName:function(e,t){return function(e){return t.getUser(e).name}},membersInRole:function(e,t){return function(t){return e.roles.find((function(e){return e.name==t})).current_members}},role_to_options:function(e,t){return function(e){return e?(Array.isArray(e)||(e=[e]),e.map((function(e){return{name:e}}))):[]}},user_pk_to_options:function(e,t){return function(e){return e?e.map((function(e){return{pk:e,name:t.getUser(e).name}})):[]}},groupMembersAsOptions:function(e,t){return t.user_pk_to_options(e.members)},roleMembersAsOptions:function(e,t){return function(e){var n=t.membersInRole(e);return t.user_pk_to_options(n)}},membersAsOptions:function(e,t){return function(e){return"members"==e?t.groupMembersAsOptions:t.roleMembersAsOptions(e)}},nonmembersAsOptions:function(e,t){return e.users.filter((function(t){return-1==e.members.indexOf(t.pk)}))},leadershipAsOptions:function(e,t){return{owner_role_options:e.owners.roles.map((function(e){return{name:e}})),owner_actor_options:t.user_pk_to_options(e.owners.actors),governor_role_options:e.governors.roles.map((function(e){return{name:e}})),governor_actor_options:t.user_pk_to_options(e.governors.actors)}}},mutations:{SET_CURRENT_USER_AS_ONLY_GROUP_MEMBER:function(e,t){s["default"].set(e,"users",t.users),s["default"].set(e,"members",[t.user_pk])},SET_USERS:function(e,t){s["default"].set(e,"users",t.users)},SET_ROLES:function(e,t){s["default"].set(e,"roles",t.roles)},SET_LEADERS:function(e,t){s["default"].set(e,"owners",t.owners),s["default"].set(e,"governors",t.governors)},SET_GOVERNANCE_INFO:function(e,t){s["default"].set(e,"governance_info",t.governance_info)},ADD_ROLE:function(e,t){var n=e.roles.find((function(e){return e.name==t.role_name}));n||e.roles.push({name:t.role_name,current_members:[]})},REMOVE_ROLE:function(e,t){var n=e.roles.findIndex((function(e){return e.name==t.role_name}));n>-1&&e.roles.splice(n,1)},ADD_MEMBERS:function(e,t){for(var n in t.user_pks){var i=t.user_pks[n],s=e.members.indexOf(i);-1==s&&e.members.push(i)}},REMOVE_MEMBERS:function(e,t){for(var n in t.user_pks){var i=t.user_pks[n],s=e.members.indexOf(i);s>-1&&e.members.splice(s,1)}},ADD_USERS_TO_ROLE:function(e,t){var n=e.roles.find((function(e){return e.name==t.role_name}));for(var i in t.user_pks){var s=t.user_pks[i],o=n.current_members.indexOf(s);-1==o&&n.current_members.push(s)}},REMOVE_USERS_FROM_ROLE:function(e,t){var n=e.roles.find((function(e){return e.name==t.role_name}));for(var i in t.user_pks){var s=t.user_pks[i],o=n.current_members.indexOf(s);o>-1&&n.current_members.splice(o,1)}},REMOVE_USERS_FROM_ALL_ROLES:function(e,t){e.roles.forEach((function(e){t.user_pks.forEach((function(t){var n=e.current_members.indexOf(t);n>-1&&e.current_members.splice(n,1)}))}))},ADD_OWNERS:function(e,t){t.roles_to_add.forEach((function(t){e.owners.roles.includes(t)||e.owners.roles.push(t)})),t.actors_to_add.forEach((function(t){e.owners.actors.includes(t)||e.owners.actors.push(t)}))},REMOVE_OWNERS:function(e,t){t.roles_to_remove.forEach((function(t){var n=e.owners.roles.indexOf(t);n>-1&&e.owners.roles.splice(n,1)})),t.actors_to_remove.forEach((function(t){var n=e.owners.actors.indexOf(t);n>-1&&e.owners.actors.splice(n,1)}))},ADD_GOVERNORS:function(e,t){t.roles_to_add.forEach((function(t){e.governors.roles.includes(t)||e.governors.roles.push(t)})),t.actors_to_add.forEach((function(t){e.governors.actors.includes(t)||e.governors.actors.push(t)}))},REMOVE_GOVERNORS:function(e,t){t.roles_to_remove.forEach((function(t){index=e.governors.roles.indexOf(t),index>-1&&e.governors.roles.splice(index,1)})),t.actors_to_remove.forEach((function(t){index=e.governors.actors.indexOf(t),index>-1&&e.governors.actors.splice(index,1)}))},SET_MEMBERSHIP_OPTION_SELECTED:function(e,t){e.current_membership_option=t.selection},SET_MEMBERSHIP_CONFIG_DATA:function(e,t){s["default"].set(e.membership_config_data,"condition",t.condition_data),s["default"].set(e.membership_config_data,"permission",t.permission_data)}},actions:{initialize_members_with_current_user:function(e,t){var n=e.commit;e.state,e.dispatch,e.getters;n("SET_CURRENT_USER_AS_ONLY_GROUP_MEMBER",{users:[t.user],user_pk:t.user.pk})},getGovernanceData:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function t(){var n,i,s,o,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,e.state,i=e.dispatch,s=e.getters,t.next=3,s.url_lookup("get_governance_data");case 3:return o=t.sent,r=function(e){n("SET_USERS",{users:e.data.governance_data.users}),n("SET_ROLES",{roles:e.data.governance_data.roles}),n("SET_LEADERS",{owners:e.data.governance_data.owners,governors:e.data.governance_data.governors}),n("ADD_MEMBERS",{user_pks:e.data.governance_data.current_members}),n("SET_GOVERNANCE_INFO",{governance_info:e.data.governance_data.governance_info})},t.abrupt("return",i("getAPIcall",{url:o,implementationCallback:r}));case 6:case"end":return t.stop()}}),t)})))()},addMembers:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var i,s,o,r,a,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=e.commit,e.state,s=e.dispatch,o=e.getters,n.next=3,o.url_lookup("add_members");case 3:return r=n.sent,a={user_pks:t.user_pks},c=function(){i("ADD_MEMBERS",{user_pks:t.user_pks})},n.abrupt("return",s("actionAPIcall",{url:r,params:a,implementationCallback:c}));case 7:case"end":return n.stop()}}),n)})))()},removeMembers:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var i,s,o,r,a,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=e.commit,e.state,s=e.dispatch,o=e.getters,n.next=3,o.url_lookup("remove_members");case 3:return r=n.sent,a={user_pks:t.user_pks},c=function(){i("REMOVE_USERS_FROM_ALL_ROLES",{user_pks:t.user_pks}),i("REMOVE_MEMBERS",{user_pks:t.user_pks})},n.abrupt("return",s("actionAPIcall",{url:r,params:a,implementationCallback:c}));case 7:case"end":return n.stop()}}),n)})))()},addUsersToRole:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var i,s,o,r,a,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=e.commit,e.state,s=e.dispatch,o=e.getters,n.next=3,o.url_lookup("add_people_to_role");case 3:return r=n.sent,a={role_name:t.role_name,user_pks:t.user_pks},c=function(){i("ADD_USERS_TO_ROLE",{role_name:t.role_name,user_pks:t.user_pks})},n.abrupt("return",s("actionAPIcall",{url:r,params:a,implementationCallback:c}));case 7:case"end":return n.stop()}}),n)})))()},removeUsersFromRole:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var i,s,o,r,a,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=e.commit,e.state,s=e.dispatch,o=e.getters,n.next=3,o.url_lookup("remove_people_from_role");case 3:return r=n.sent,a={role_name:t.role_name,user_pks:t.user_pks},c=function(){i("REMOVE_USERS_FROM_ROLE",{role_name:t.role_name,user_pks:t.user_pks})},n.abrupt("return",s("actionAPIcall",{url:r,params:a,implementationCallback:c}));case 7:case"end":return n.stop()}}),n)})))()},addRole:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var i,s,o,r,a,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=e.commit,e.state,s=e.dispatch,o=e.getters,n.next=3,o.url_lookup("add_role_to_group");case 3:return r=n.sent,a={role_name:t.role_name},c=function(){i("ADD_ROLE",{role_name:t.role_name})},n.abrupt("return",s("actionAPIcall",{url:r,params:a,implementationCallback:c}));case 7:case"end":return n.stop()}}),n)})))()},removeRole:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var i,s,o,r,a,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=e.commit,e.state,s=e.dispatch,o=e.getters,n.next=3,o.url_lookup("remove_role_from_group");case 3:return r=n.sent,a={role_name:t.role_name},c=function(){i("REMOVE_ROLE",{role_name:t.role_name})},n.abrupt("return",s("actionAPIcall",{url:r,params:a,implementationCallback:c}));case 7:case"end":return n.stop()}}),n)})))()},updateOwners:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var i,s,o,r,a,c,l;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=e.commit,s=e.state,o=e.dispatch,r=e.getters,n.next=3,r.url_lookup("update_owners");case 3:return a=n.sent,c={owner_roles:t.roles,owner_actors:t.actors},l=function(){roles_to_add=t.roles.filter((function(e){return!s.owners.roles.includes(e)})),actors_to_add=t.actors.filter((function(e){return!s.owners.actors.includes(e)})),roles_to_remove=s.owners.roles.filter((function(e){return!t.roles.includes(e)})),actors_to_remove=s.owners.actors.filter((function(e){return!t.actors.includes(e)})),i("ADD_OWNERS",{roles_to_add:roles_to_add,actors_to_add:actors_to_add}),i("REMOVE_OWNERS",{roles_to_remove:roles_to_remove,actors_to_remove:actors_to_remove})},n.abrupt("return",o("actionAPIcall",{url:a,params:c,implementationCallback:l}));case 7:case"end":return n.stop()}}),n)})))()},updateGovernors:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var i,s,o,r,a,c,l;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=e.commit,s=e.state,o=e.dispatch,r=e.getters,n.next=3,r.url_lookup("update_governors");case 3:return a=n.sent,c={governor_roles:t.roles,governor_actors:t.actors},l=function(){roles_to_add=t.roles.filter((function(e){return!s.governors.roles.includes(e)})),actors_to_add=t.actors.filter((function(e){return!s.governors.actors.includes(e)})),roles_to_remove=s.governors.roles.filter((function(e){return!t.roles.includes(e)})),actors_to_remove=s.governors.actors.filter((function(e){return!t.actors.includes(e)})),i("ADD_GOVERNORS",{roles_to_add:roles_to_add,actors_to_add:actors_to_add}),i("REMOVE_GOVERNORS",{roles_to_remove:roles_to_remove,actors_to_remove:actors_to_remove})},n.abrupt("return",o("actionAPIcall",{url:a,params:c,implementationCallback:l}));case 7:case"end":return n.stop()}}),n)})))()}}}),p=d,f=n("ade3"),h={state:{permission_options:{},permission_configuration_options:{},condition_options:[],condition_configuration_options:{},dependent_field_options:[],permissions:{},permission_overrides:{},current_user_permissions:{},role_permissions:{},item_permissions:{},owner_condition:null,governor_condition:null},getters:{get_permission_given_pk:function(e,t){return function(t,n){var i=e.permissions[t];if(i)return n?Object(f["a"])({},t,e.permissions[t]):(i["pk"]=t,i);console.log("No permission found for ",t)}},get_list_of_permissions_given_pks:function(e,t){return function(e){var n=[];for(var i in e)n.push(t.get_permission_given_pk(e[i]));return n}},permissionsForRole:function(e,t){return function(n){var i=e.role_permissions[n];return t.get_list_of_permissions_given_pks(i)}},permissionsForItem:function(e,t){return function(n){var i=e.item_permissions[n];return t.get_list_of_permissions_given_pks(i)}},getPermissionConfigurationFields:function(e,t){return function(t){return JSON.parse(JSON.stringify(e.permission_configuration_options[t]))}},getConditionConfigurationFields:function(e,t){return function(t){for(var n in e.condition_configuration_options)if(n.toLowerCase()==t.toLowerCase()){var i=e.condition_configuration_options[n];break}return JSON.parse(JSON.stringify(i))}},fix_permission_field_values:function(e,t){return function(e){return"string"==typeof e.value&&e.value.indexOf("{{")>-1||("RoleField"==e.type||"RoleListField"==e.type?e.value=t.role_to_options(e.value):"ActorField"!=e.type&&"ActorListField"!=e.type||(e.value=t.user_pk_to_options(e.value))),e}},mapPermissionDataToFields:function(e,t){return function(e,n){var i=Object.keys(e).map((function(i){return n[i]?(e[i].value=n[i],e[i]=t.fix_permission_field_values(e[i]),e[i]):e[i]}));return i}},getPermissionConditionConfigurationFieldsWithData:function(e,t){return function(n,i){var s=e.permissions[n]["condition"][i]["fields"];for(var o in s)s[o]=t.fix_permission_field_values(s[o]);return s}},getLeadershipConditionConfigurationFieldsWithData:function(e,t){return function(n,i){for(var s in"owner"==n?fields=e.owner_condition[i]["fields"]:"governor"==n&&(fields=e.governor_condition[i]["fields"]),fields)fields[s]=t.fix_permission_field_values(fields[s]);return fields}},getPermissionConfigurationFieldsWithData:function(e,t){return function(n){var i=e.permissions[n],s=t.getPermissionConfigurationFields(i.change_type);return t.mapPermissionDataToFields(s,i["fields"])}},getFoundationalForItem:function(e,t){return function(t){if(e.permission_overrides[t])return e.permission_overrides[t].foundational}},getGoverningForItem:function(e,t){return function(t){if(e.permission_overrides[t])return e.permission_overrides[t].governing}}},mutations:{SET_PERMISSION_OPTIONS:function(e,t){s["default"].set(e,"permission_options",t.options)},SET_PERMISSION_CONFIGURATION_OPTIONS:function(e,t){s["default"].set(e,"permission_configuration_options",t.options)},SET_CONDITION_OPTIONS:function(e,t){s["default"].set(e,"condition_options",t.options)},SET_CONDITION_CONFIGURATION_OPTIONS:function(e,t){s["default"].set(e,"condition_configuration_options",t.options)},SET_DEPENDENT_FIELD_OPTIONS:function(e,t){s["default"].set(e,"dependent_field_options",t.options)},ADD_OR_UPDATE_PERMISSION:function(e,t){s["default"].set(e.permissions,t.pk,t.data)},ADD_PERMISSION_TO_ROLE:function(e,t){var n=e.role_permissions[t.role].indexOf(t.pk);-1==n&&e.role_permissions[t.role].push(t.pk)},REMOVE_PERMISSION_FROM_ROLES:function(e,t){for(var n in e.role_permissions){var i=e.role_permissions[n].indexOf(t.pk);i>-1&&e.role_permissions[n].splice(i,1)}},UPDATE_ROLE_WITH_PERMISSION:function(e,t){for(var n in t.permission.roles){var i=t.permission.roles[n];if(e.role_permissions[i]){var o=e.role_permissions[i].indexOf(t.permission.pk);o<0&&e.role_permissions[i].push(t.permission.pk)}else s["default"].set(e.role_permissions,i,[t.permission.pk])}},REPLACE_ROLE_PERMISSIONS:function(e,t){s["default"].set(e.role_permissions,t.role,t.pks)},DELETE_PERMISSION:function(e,t){s["default"].delete(e.permissions,t.pk)},REPLACE_ITEM_PERMISSIONS:function(e,t){var n=t.item_id+"_"+t.item_model;s["default"].set(e.item_permissions,n,t.pks)},ADD_PERMISSION_TO_ITEM:function(e,t){var n=t.item_id+"_"+t.item_model,i=e.item_permissions[n].indexOf(t.permission_pk);-1==i&&e.item_permissions[n].push(t.permission_pk)},REMOVE_PERMISSION_FROM_ITEM:function(e,t){var n=t.item_id+"_"+t.item_model,i=e.item_permissions[n].indexOf(t.pk);i>-1&&e.item_permissions[n].splice(i,1)},ADD_OR_UPDATE_CURRENT_USER_PERMISSIONS:function(e,t){for(var n in t.user_permissions)s["default"].set(e.current_user_permissions,n,t.user_permissions[n])},ADD_OR_UPDATE_PERMISSION_OVERRIDE_DATA:function(e,t){var n=t.item_id+"_"+t.item_model;s["default"].set(e.permission_overrides,n,{foundational:t.foundational,governing:t.governing})},SET_PERMISSION_CONDITION:function(e,t){s["default"].set(e.permissions[t.pk],"condition",t.condition_data)},SET_LEADERSHIP_CONDITION:function(e,t){"owner"==t.leadership_type?s["default"].set(e,"owner_condition",t.condition_data):"governor"==t.leadership_type&&s["default"].set(e,"governor_condition",t.condition_data)}},actions:{getPermissionData:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function t(){var n,i,s,o,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,e.state,i=e.dispatch,s=e.getters,t.next=3,s.url_lookup("get_permission_data");case 3:return o=t.sent,r=function(e){n("SET_PERMISSION_OPTIONS",{options:e.data.permission_options}),n("SET_PERMISSION_CONFIGURATION_OPTIONS",{options:e.data.permission_configuration_options}),n("SET_CONDITION_OPTIONS",{options:e.data.condition_options}),n("SET_CONDITION_CONFIGURATION_OPTIONS",{options:e.data.condition_configuration_options}),n("SET_DEPENDENT_FIELD_OPTIONS",{options:e.data.dependent_field_options}),n("SET_LEADERSHIP_CONDITION",{leadership_type:"owner",condition_data:e.data.owner_condition}),n("SET_LEADERSHIP_CONDITION",{leadership_type:"governor",condition_data:e.data.governor_condition})},t.abrupt("return",i("getAPIcall",{url:o,implementationCallback:r}));case 6:case"end":return t.stop()}}),t)})))()},fetchMissingPermission:function(e,t){e.commit,e.state;var n=e.getters,i=e.dispatch;return new Promise((function(e,s){var o=parseInt(t.pk);isNaN(o)&&s("pk "+t.pk+" is not a number");var r=n.get_permission_given_pk(o);r&&e(r),i("getPermission",{permission_pk:o}).then((function(t){return e(n.get_permission_given_pk(o))})).catch((function(e){return s("Couldn't find permission matching "+t.pk)}))}))},addPermission:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var i,s,o,r,a,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=e.commit,e.state,s=e.dispatch,o=e.getters,n.next=3,o.url_lookup("add_permission");case 3:return r=n.sent,a={item_or_role:t.item_or_role,item_id:t.item_id,item_model:t.item_model,permission_type:t.permission_selected,permission_roles:t.roles,permission_actors:t.actors,permission_configuration:t.configuration},c=function(e){var n=e.data.permission.pk,s=e.data.permission.permission_data[0];i("ADD_OR_UPDATE_PERMISSION",{pk:n,data:s}),"role"==t.item_or_role?i("ADD_PERMISSION_TO_ROLE",{pk:n,role:t.roles}):i("ADD_PERMISSION_TO_ITEM",{permission_pk:n,item_id:t.item_id,item_model:t.item_model})},n.abrupt("return",s("actionAPIcall",{url:r,params:a,implementationCallback:c}));case 7:case"end":return n.stop()}}),n)})))()},updatePermission:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var i,s,o,r,a,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=e.commit,e.state,s=e.dispatch,o=e.getters,n.next=3,o.url_lookup("update_permission");case 3:return r=n.sent,a={permission_id:t.permission_id,permission_roles:t.roles,permission_actors:t.actors,permission_configuration:t.configuration},c=function(e){pk=e.data.permission.pk,permission_data=e.data.permission.permission_data[0],i("ADD_OR_UPDATE_PERMISSION",{pk:pk,data:permission_data})},n.abrupt("return",s("actionAPIcall",{url:r,params:a,implementationCallback:c}));case 7:case"end":return n.stop()}}),n)})))()},removePermission:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var i,s,o,r,a,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=e.commit,s=e.dispatch,o=e.getters,n.next=3,o.url_lookup("delete_permission");case 3:return r=n.sent,a={permission_id:t.permission_id},c=function(e){i("REMOVE_PERMISSION_FROM_ROLES",{pk:e.data.removed_permission_pk}),"item"==t.item_or_role&&i("REMOVE_PERMISSION_FROM_ITEM",{pk:e.data.removed_permission_pk,item_id:t.item_id,item_model:t.item_model}),i("DELETE_PERMISSION",{pk:e.data.removed_permission_pk})},n.abrupt("return",s("actionAPIcall",{url:r,params:a,implementationCallback:c}));case 7:case"end":return n.stop()}}),n)})))()},addCondition:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var i,s,o,r,a,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=e.commit,e.state,s=e.dispatch,o=e.getters,n.next=3,o.url_lookup("add_condition");case 3:return r=n.sent,a={condition_type:t.condition_type,permission_or_leadership:t.permission_or_leadership,target_permission_id:t.permission_id,leadership_type:t.leadership_type,combined_condition_data:t.combined_condition_data},c=function(e){"permission"==e.data.permission_or_leadership?i("SET_PERMISSION_CONDITION",{pk:e.data.target_permission_id,condition_data:e.data.condition_info}):i("SET_LEADERSHIP_CONDITION",{leadership_type:e.data.leadership_type,condition_data:e.data.condition_info})},n.abrupt("return",s("actionAPIcall",{url:r,params:a,implementationCallback:c}));case 7:case"end":return n.stop()}}),n)})))()},editCondition:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var i,s,o,r,a,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=e.commit,e.state,s=e.dispatch,o=e.getters,n.next=3,o.url_lookup("edit_condition");case 3:return r=n.sent,a={permission_or_leadership:t.permission_or_leadership,element_id:t.element_id,target_permission_id:t.permission_id,leadership_type:t.leadership_type,combined_condition_data:t.combined_condition_data},c=function(e){"permission"==e.data.permission_or_leadership?i("SET_PERMISSION_CONDITION",{pk:e.data.target_permission_id,condition_data:e.data.condition_info}):i("SET_LEADERSHIP_CONDITION",{leadership_type:e.data.leadership_type,condition_data:e.data.condition_info})},n.abrupt("return",s("actionAPIcall",{url:r,params:a,implementationCallback:c}));case 7:case"end":return n.stop()}}),n)})))()},removeCondition:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var i,s,o,r,a,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=e.commit,e.state,s=e.dispatch,o=e.getters,n.next=3,o.url_lookup("remove_condition");case 3:return r=n.sent,a={permission_or_leadership:t.permission_or_leadership,target_permission_id:t.permission_id,leadership_type:t.leadership_type,element_id:t.element_id},c=function(e){"permission"==e.data.permission_or_leadership?i("SET_PERMISSION_CONDITION",{pk:e.data.target_permission_id,condition_data:e.data.condition_info}):i("SET_LEADERSHIP_CONDITION",{leadership_type:e.data.leadership_type,condition_data:e.data.condition_info})},n.abrupt("return",s("actionAPIcall",{url:r,params:a,implementationCallback:c}));case 7:case"end":return n.stop()}}),n)})))()},getPermission:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var i,s,o,r,a,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=e.commit,e.state,s=e.dispatch,o=e.getters,n.next=3,o.url_lookup("get_permission");case 3:return r=n.sent,a={permission_pk:t.permission_pk},c=function(e){i("ADD_OR_UPDATE_PERMISSION",{pk:t.permission_pk,data:e.data.permission_data})},n.abrupt("return",s("getAPIcall",{url:r,params:a,implementationCallback:c}));case 7:case"end":return n.stop()}}),n)})))()},getPermissionsForItem:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var i,s,o,r,a,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=e.commit,e.state,s=e.dispatch,o=e.getters,n.next=3,o.url_lookup("get_permissions");case 3:return r=n.sent,a={item_id:t.item_id,item_model:t.item_model},c=function(e){for(var t in i("REPLACE_ITEM_PERMISSIONS",{item_id:e.data.item_id,item_model:e.data.item_model,pks:e.data.permission_pks}),e.data.permissions)i("ADD_OR_UPDATE_PERMISSION",{pk:t,data:e.data.permissions[t]}),i("UPDATE_ROLE_WITH_PERMISSION",{permission:e.data.permissions[t]});i("ADD_OR_UPDATE_PERMISSION_OVERRIDE_DATA",{item_id:e.data.item_id,item_model:e.data.item_model,foundational:e.data.foundational,governing:e.data.governing})},n.abrupt("return",s("getAPIcall",{url:r,params:a,implementationCallback:c}));case 7:case"end":return n.stop()}}),n)})))()},changePermissionOverride:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var i,s,o,r,a,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=e.commit,e.state,s=e.dispatch,o=e.getters,n.next=3,o.url_lookup("change_item_permission_override");case 3:return r=n.sent,a={item_id:t.item_id,item_model:t.item_model,enable_or_disable:t.enable_or_disable,governing_or_foundational:t.governing_or_foundational},c=function(e){i("ADD_OR_UPDATE_PERMISSION_OVERRIDE_DATA",{item_id:e.data.item_id,item_model:e.data.item_model,foundational:e.data.foundational,governing:e.data.governing})},n.abrupt("return",s("actionAPIcall",{url:r,params:a,implementationCallback:c}));case 7:case"end":return n.stop()}}),n)})))()},toggleAnyone:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var i,s,o,r,a,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=e.commit,s=e.getters,o=e.dispatch,n.next=3,s.url_lookup("toggle_anyone");case 3:return r=n.sent,a={permission_id:t.permission_id,enable_or_disable:t.enable_or_disable},c=function(e){var t=e.data.permission.pk,n=e.data.permission.permission_data[0];i("ADD_OR_UPDATE_PERMISSION",{pk:t,data:n})},n.abrupt("return",o("actionAPIcall",{url:r,params:a,implementationCallback:c}));case 7:case"end":return n.stop()}}),n)})))()},checkPermissions:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var i,s,o,r,a,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=e.commit,e.state,s=e.dispatch,o=e.getters,n.next=3,o.url_lookup("check_permissions");case 3:return r=n.sent,a={permissions:t.permissions},c=function(e){i("ADD_OR_UPDATE_CURRENT_USER_PERMISSIONS",{user_permissions:e.data.user_permissions})},n.abrupt("return",s("getAPIcall",{url:r,params:a,implementationCallback:c}));case 7:case"end":return n.stop()}}),n)})))()},refreshRoleData:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var i,s,o,r,a,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=e.commit,e.state,s=e.dispatch,o=e.getters,n.next=3,o.url_lookup("get_data_for_role");case 3:return r=n.sent,a={role_name:t.role},c=function(e){for(var n in i("REPLACE_ROLE_PERMISSIONS",{role:t.role,pks:e.data.role_permissions}),e.data.permissions)i("ADD_OR_UPDATE_PERMISSION",{pk:n,data:e.data.permissions[n]})},n.abrupt("return",s("getAPIcall",{url:r,params:a,implementationCallback:c}));case 7:case"end":return n.stop()}}),n)})))()}}},g=h,b={state:{lists:[]},getters:{getListData:function(e,t){return function(t){return e.lists.find((function(e){return e.pk==t}))}}},mutations:{ADD_OR_UPDATE_LIST:function(e,t){for(var n in e.lists)if(e.lists[n].pk==t.list_data.pk)return void e.lists.splice(n,1,t.list_data);e.lists.push(t.list_data)},DELETE_LIST:function(e,t){for(var n in e.lists)e.lists[n].pk==t.deleted_list_pk&&e.lists.splice(n,1)},ADD_ROW:function(e,t){var n=e.lists.find((function(e){return e.pk==t.list_pk}));t.index||0==t.index?n.rows.splice(t.index,0,t.row_content):n.rows.push(t.row_content)},EDIT_ROW:function(e,t){var n=e.lists.find((function(e){return e.pk==t.list_pk}));n.rows.splice(t.index,1,t.row_content)},MOVE_ROW:function(e,t){var n=e.lists.find((function(e){return e.pk==t.list_pk})),i=n.rows.splice(t.old_index,1);n.rows.splice(t.new_index,0,i[0])},DELETE_ROW:function(e,t){var n=e.lists.find((function(e){return e.pk==t.list_pk}));n.rows.splice(t.index,1)}},actions:{getLists:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function t(){var n,i,s,o,r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,e.state,i=e.dispatch,s=e.getters,t.next=3,s.url_lookup("get_lists");case 3:return o=t.sent,r={},a=function(e){for(var t in e.data.lists)n("ADD_OR_UPDATE_LIST",{list_data:e.data.lists[t]})},t.abrupt("return",i("getAPIcall",{url:o,params:r,implementationCallback:a}));case 7:case"end":return t.stop()}}),t)})))()},addList:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var i,s,o,r,a,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=e.commit,e.state,s=e.dispatch,o=e.getters,n.next=3,o.url_lookup("add_list");case 3:return r=n.sent,a={name:t.name,description:t.description,configuration:t.configuration},c=function(e){i("ADD_OR_UPDATE_LIST",{list_data:e.data.list_data})},n.abrupt("return",s("actionAPIcall",{url:r,params:a,implementationCallback:c}));case 7:case"end":return n.stop()}}),n)})))()},editList:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var i,s,o,r,a,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=e.commit,e.state,s=e.dispatch,o=e.getters,n.next=3,o.url_lookup("edit_list");case 3:return r=n.sent,a={name:t.name,description:t.description,list_pk:t.list_pk,configuration:t.configuration},c=function(e){i("ADD_OR_UPDATE_LIST",{list_data:e.data.list_data})},n.abrupt("return",s("actionAPIcall",{url:r,params:a,implementationCallback:c}));case 7:case"end":return n.stop()}}),n)})))()},deleteList:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var i,s,o,r,a,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=e.commit,e.state,s=e.dispatch,o=e.getters,n.next=3,o.url_lookup("delete_list");case 3:return r=n.sent,a={list_pk:t.list_pk},c=function(e){i("DELETE_LIST",{deleted_list_pk:e.data.deleted_list_pk})},n.abrupt("return",s("actionAPIcall",{url:r,params:a,implementationCallback:c}));case 7:case"end":return n.stop()}}),n)})))()},addRow:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var i,s,o,r,a,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=e.commit,e.state,s=e.dispatch,o=e.getters,n.next=3,o.url_lookup("add_row");case 3:return r=n.sent,a={list_pk:t.list_pk,row_content:t.row_content,index:t.index},c=function(e){i("ADD_ROW",{list_pk:t.list_pk,row_content:t.row_content,index:t.index})},n.abrupt("return",s("actionAPIcall",{url:r,params:a,implementationCallback:c}));case 7:case"end":return n.stop()}}),n)})))()},editRow:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var i,s,o,r,a,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=e.commit,e.state,s=e.dispatch,o=e.getters,n.next=3,o.url_lookup("edit_row");case 3:return r=n.sent,a={list_pk:t.list_pk,row_content:t.row_content,index:t.index},c=function(e){i("EDIT_ROW",{list_pk:t.list_pk,row_content:t.row_content,index:t.index})},n.abrupt("return",s("actionAPIcall",{url:r,params:a,implementationCallback:c}));case 7:case"end":return n.stop()}}),n)})))()},moveRow:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var i,s,o,r,a,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=e.commit,e.state,s=e.dispatch,o=e.getters,n.next=3,o.url_lookup("move_row");case 3:return r=n.sent,a={list_pk:t.list_pk,old_index:t.old_index,new_index:t.new_index,index:t.index},c=function(e){i("MOVE_ROW",{list_pk:t.list_pk,old_index:t.old_index,new_index:t.new_index})},n.abrupt("return",s("actionAPIcall",{url:r,params:a,implementationCallback:c}));case 7:case"end":return n.stop()}}),n)})))()},deleteRow:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var i,s,o,r,a,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=e.commit,e.state,s=e.dispatch,o=e.getters,n.next=3,o.url_lookup("delete_row");case 3:return r=n.sent,a={list_pk:t.list_pk,index:t.index},c=function(e){i("DELETE_ROW",{list_pk:t.list_pk,index:t.index})},n.abrupt("return",s("actionAPIcall",{url:r,params:a,implementationCallback:c}));case 7:case"end":return n.stop()}}),n)})))()}}},v=b,k={state:{templates:{}},getters:{scopeTemplates:function(e,t){return function(t){return e.templates[t]}}},mutations:{REPLACE_SCOPE_TEMPLATES:function(e,t){s["default"].set(e.templates,t.scope,t.templates)}},actions:{getTemplatesForScope:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var i,s,o,r,a,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=e.commit,e.state,s=e.dispatch,o=e.getters,n.next=3,o.url_lookup("get_templates_for_scope");case 3:return r=n.sent,a={scope:t.scope},c=function(e){i("REPLACE_SCOPE_TEMPLATES",{scope:e.data.scope,templates:e.data.templates})},n.abrupt("return",s("getAPIcall",{url:r,params:a,implementationCallback:c}));case 7:case"end":return n.stop()}}),n)})))()},applyTemplate:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var i,s,o,r,a,c,l,_;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.commit,e.state,i=e.dispatch,s=e.getters,o=e.rootState,r=null,a=null,t.target_model&&t.target_pk?(r=t.target_model,a=t.target_pk):(r="group",a=o.group_pk),n.next=6,s.url_lookup("apply_template");case 6:return c=n.sent,l={supplied_fields:t.supplied_fields,target_pk:a,target_model:r,template_model_pk:t.template_model_pk},_=function(e){},n.abrupt("return",i("actionAPIcall",{url:c,params:l,implementationCallback:_}));case 10:case"end":return n.stop()}}),n)})))()}}},y=k;s["default"].use(o["a"]);t["a"]=new o["a"].Store({modules:{concord_actions:c,forums:u,permissions:g,governance:p,comments:_,templates:y,simplelists:v},state:{group_pk:null,group_name:"",group_description:"",user_pk:null,user_name:"",urls:{}},getters:{url_lookup:function(e,t){return function(t){return new Promise((function(n,i){var s=setInterval((function(){0!=Object.keys(e.urls).length&&(clearInterval(s),n("/"+e.urls[t]))}),1e3)}))}}},mutations:{UPDATE_GROUP_PK:function(e,t){e.group_pk=t.group_pk},UPDATE_GROUP_NAME:function(e,t){e.group_name=t.group_name},UPDATE_GROUP_DESCRIPTION:function(e,t){e.group_description=t.group_description},SET_URL_MAP:function(e,t){e.urls=t.urls},UPDATE_USER_PK:function(e,t){e.user_pk=t.user_pk},UPDATE_USER_NAME:function(e,t){e.user_name=t.user_name}},actions:{initialize_url_data:function(e,t){var n=e.commit;e.state,e.dispatch;n("SET_URL_MAP",{urls:t.urls})},initialize_group_data:function(e,t){var n=e.commit;e.state,e.dispatch;n("SET_URL_MAP",{urls:t.urls}),n("UPDATE_GROUP_NAME",{group_name:t.group_name}),n("UPDATE_GROUP_DESCRIPTION",{group_description:t.group_description}),n("UPDATE_GROUP_PK",{group_pk:t.group_pk}),n("UPDATE_USER_PK",{user_pk:t.user_pk}),n("UPDATE_USER_NAME",{user_name:t.user_name})},get_url_data:function(e,t){var n=e.commit,i=e.state,s=(e.dispatch,"/groups/api/get_urls/"+i.group_pk+"/");return r["a"].post(s).then((function(e){n("SET_URL_MAP",{urls:t.urls})})).catch((function(e){throw console.log(e),e}))},changeGroupName:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var i,s,o,r,a,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=e.commit,s=e.getters,e.state,o=e.dispatch,n.next=3,s.url_lookup("change_group_name");case 3:return r=n.sent,a={group_pk:t.group_pk,new_name:t.new_name},c=function(e){i("UPDATE_GROUP_NAME",{group_name:e.data.group_name})},n.abrupt("return",o("actionAPIcall",{url:r,params:a,implementationCallback:c}));case 7:case"end":return n.stop()}}),n)})))()},changeGroupDescription:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var i,s,o,r,a,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=e.commit,s=e.getters,e.state,o=e.dispatch,n.next=3,s.url_lookup("change_group_description");case 3:return r=n.sent,a={group_pk:t.group_pk,group_description:t.group_description},c=function(e){i("UPDATE_GROUP_DESCRIPTION",{group_description:e.data.group_description})},n.abrupt("return",o("actionAPIcall",{url:r,params:a,implementationCallback:c}));case 7:case"end":return n.stop()}}),n)})))()},actionAPIcall:function(e,t){e.commit;var n=e.state,i=e.dispatch,s=t.url,o=t.params,a=t.implementationCallback;return r["a"].post(s,o).then((function(e){var t="";if("invalid"!=e.data.action_status&&i("updateActions",{response:e}),"implemented"!=e.data.action_status){if("waiting"==e.data.action_status){var s="/groups/"+n.group_pk+"/#/actions/detail/"+e.data.action_pk;t="<span>There is a <a id='condition_link' href='"+s+"'>condition</a> on your action which must be  resolved before your action can be implemented.</span>"}else console.log("Not implemented due to: ",e.data.action_developer_log),t=e.data.action_log;throw t}a(e)})).catch((function(e){throw console.log("Error: ",e),e}))},getAPIcall:function(e,t){e.commit,e.state,e.dispatch;var n=t.url,i=t.params,s=t.implementationCallback;return r["a"].post(n,i).then((function(e){s(e)})).catch((function(e){throw console.log(e),e}))}}})},"4ae4":function(e,t,n){"use strict";var i=n("1e2a"),s=n("f7bd"),o=n("2877"),r=Object(o["a"])(s["default"],i["a"],i["b"],!1,null,null,null);t["default"]=r.exports},"583c":function(e,t,n){"use strict";var i=n("bc3a"),s=n.n(i);s.a.defaults.xsrfCookieName="csrftoken",s.a.defaults.xsrfHeaderName="X-CSRFTOKEN",s.a.defaults.headers={headers:{"Content-Type":"application/json"}},t["a"]=s.a},a18c:function(e,t,n){"use strict";var i=n("2b0e"),s=n("8c4f"),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[n("div",{staticClass:"card"},[n("h5",{staticClass:"card-header"},[e._v(e._s(e.group_name))]),n("div",{staticClass:"card-body"},[n("p",{staticClass:"card-text"},[e._v(e._s(e.group_description))])])]),n("error-component",{attrs:{message:e.error_message}}),e.user_permissions.join_group?n("b-button",{staticClass:"mt-3",attrs:{block:"",id:"join_group_button",variant:"outline-secondary"},on:{click:function(t){return e.join_group()}}},[e._v("join group")]):e._e(),e.user_permissions.leave_group?n("b-button",{staticClass:"mt-3",attrs:{block:"",id:"leave_group_button",variant:"outline-secondary"},on:{click:function(t){return e.leave_group()}}},[e._v("leave group")]):e._e(),n("router-link",{attrs:{to:{name:"edit-group"}}},[n("b-button",{staticClass:"mt-3",attrs:{id:"edit_group_button",block:"",variant:"edit-group"===e.$route.meta.highlight?"secondary":"outline-secondary"}},[e._v(" edit group")])],1),n("router-link",{attrs:{to:{name:"home"}}},[n("b-button",{staticClass:"mt-3",attrs:{id:"resources_button",block:"",variant:e.$route.meta.highlight?"outline-secondary":"secondary"}},[e._v(" resources")])],1),n("router-link",{attrs:{id:"group_history_button",to:{name:"action-history",params:{item_id:e.group_pk,item_model:"group",item_name:e.group_name}}}},[n("b-button",{staticClass:"mt-3",attrs:{block:"",variant:"history"==e.$route.meta.highlight?"secondary":"outline-secondary"}},[e._v(" history")])],1),n("router-link",{attrs:{to:{name:"governance"}}},[n("b-button",{staticClass:"mt-3",attrs:{id:"governance_button",block:"",variant:"governance"==e.$route.meta.highlight?"secondary":"outline-secondary"}},[e._v(" governance")])],1),n("router-link",{staticClass:"button",attrs:{to:{name:"item-permissions",params:{item_id:e.group_pk,item_model:"group",item_name:e.group_name}}}},[n("b-button",{staticClass:"mt-3",attrs:{id:"group_permissions_button",block:"",variant:"permissions"==e.$route.meta.highlight?"secondary":"outline-secondary"}},[e._v(" permissions")])],1)],1)},r=[],a=n("5530"),c=n("2f62"),l=n("4360"),_=n("4ae4"),m={store:l["a"],components:{ErrorComponent:_["default"]},data:function(){return{error_message:null}},created:function(){this.checkPermissions({permissions:{join_group:{member_pk_list:[l["a"].state.user_pk]},leave_group:{member_pk_list:[l["a"].state.user_pk]}}})},computed:Object(a["a"])({},c["a"].mapState({group_name:function(e){return e.group_name},group_description:function(e){return e.group_description},group_pk:function(e){return e.group_pk},user_permissions:function(e){return e.permissions.current_user_permissions}})),methods:Object(a["a"])(Object(a["a"])({},c["a"].mapActions(["checkPermissions","addMembers","removeMembers"])),{},{join_group:function(){var e=this;this.addMembers({user_pks:[l["a"].state.user_pk]}).then((function(e){return window.location.reload()})).catch((function(t){e.error_message=t,console.log(t)}))},leave_group:function(){var e=this;this.removeMembers({user_pks:[l["a"].state.user_pk]}).then((function(e){return window.location.reload()})).catch((function(t){e.error_message=t,console.log(t)}))}})},u=m,d=n("2877"),p=Object(d["a"])(u,o,r,!1,null,null,null),f=p.exports,h=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[n("ForumListComponent"),n("hr"),n("SimpleListListComponent")],1)},g=[],b=n("a209"),v=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[n("h4",{staticClass:"text-secondary pb-3"},[e._v("Forums "),n("router-link",{attrs:{to:{name:"add-new-forum"}}},[e.user_permissions.add_forum?n("b-button",{staticClass:"btn-sm ml-3",attrs:{variant:"outline-secondary",id:"new_forum_button"}},[e._v("+ add new")]):e._e()],1)],1),e.governance_forum?n("b-card",{staticClass:"bg-light text-info border-secondary mb-3"},[n("router-link",{attrs:{to:{name:"forum-detail",params:{forum_id:e.governance_forum.pk}}}},[n("b-card-title",{staticClass:"forum-link"},[e._v(e._s(e.governance_forum.name)),n("b-icon-star-fill",{staticClass:"ml-2"})],1)],1),n("p",{staticClass:"mb-1 text-secondary forum-description"},[e._v(" "+e._s(e.governance_forum.description))])],1):e._e(),e._l(e.regular_forums,(function(t){var i=t.pk,s=t.name,o=t.description;return n("span",{key:i},[n("b-card",{staticClass:"bg-light text-info border-secondary mb-3"},[n("router-link",{attrs:{to:{name:"forum-detail",params:{forum_id:i}}}},[n("b-card-title",{staticClass:"forum-link"},[e._v(e._s(s))])],1),n("p",{staticClass:"mb-1 text-secondary forum-description"},[e._v(" "+e._s(o)+" ")])],1)],1)})),0===Object.keys(e.forums).length?n("span",[e._v("You do not have any forums yet.")]):e._e()],2)},k=[],y={store:l["a"],computed:Object(a["a"])(Object(a["a"])({},c["a"].mapState({forums:function(e){return e.forums.forums},user_permissions:function(e){return e.permissions.current_user_permissions},group_name:function(e){return e.group_name}})),{},{regular_forums:function(){var e=[];for(var t in this.forums)"Gov"!=this.forums[t].special&&e.push(this.forums[t]);return e},governance_forum:function(){for(var e in this.forums)if("Gov"==this.forums[e].special)return this.forums[e];return null}}),created:function(){var e=this;this.checkPermissions({permissions:{add_forum:null}}).catch((function(t){e.error_message=t,console.log(t)}))},methods:Object(a["a"])({},c["a"].mapActions(["checkPermissions"]))},O=y,w=Object(d["a"])(O,v,k,!1,null,null,null),C=w.exports,x=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[n("h4",{staticClass:"text-secondary pb-3"},[e._v("Lists "),n("router-link",{attrs:{to:{name:"add-new-list"}}},[n("b-button",{staticClass:"btn-sm ml-3",attrs:{variant:"outline-secondary",id:"new_list_button"}},[e._v("+ add new")])],1)],1),e._l(e.lists,(function(t,i){var s=t.pk,o=t.name,r=t.description,a=t.rows;return n("router-link",{key:s,attrs:{to:{name:"list-detail",params:{list_id:s}},id:"link_to_list_"+i}},[n("b-card",{key:s,staticClass:"bg-light text-info border-secondary mb-3"},[n("b-card-title",[e._v(e._s(o)),n("span",{staticClass:"text-dark ml-2"},[n("small",[e._v(" "+e._s(a.length)+" items")])])]),n("p",{staticClass:"mb-1 text-secondary list-description"},[e._v(" "+e._s(r)+" ")])],1)],1)})),0===Object.keys(e.lists).length?n("span",[e._v("You do not have any lists yet.")]):e._e()],2)},E=[],R={store:l["a"],data:function(){return{}},computed:Object(a["a"])({},c["a"].mapState({lists:function(e){return e.simplelists.lists},user_permissions:function(e){return e.permissions.current_user_permissions},group_name:function(e){return e.group_name}})),created:function(){var e=this;this.getLists(),this.checkPermissions({permissions:{add_list:null}}).catch((function(t){e.error_message=t,console.log(t)}))},methods:Object(a["a"])({},c["a"].mapActions(["checkPermissions","getLists"]))},A=R,P=Object(d["a"])(A,x,E,!1,null,null,null),S=P.exports,j={store:l["a"],mixins:[b["b"]],components:{ForumListComponent:C,SimpleListListComponent:S},data:function(){return{}}},I=j,D=Object(d["a"])(I,h,g,!1,null,null,null),T=D.exports,M=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-modal",{attrs:{id:"edit_group_modal",size:"md",visible:!0},on:{hide:function(t){return e.$router.go(-1)}},scopedSlots:e._u([{key:"modal-header",fn:function(){return[n("h5",[e._v("Edit Your Group")])]},proxy:!0},{key:"modal-footer",fn:function(){return[n("b-button",{staticClass:"btn-sm",attrs:{variant:"outline-secondary"},on:{click:e.save_edited_group}},[e._v(" save")]),n("router-link",{staticClass:"button",attrs:{to:{name:"home"}}},[n("b-button",{staticClass:"btn-sm",attrs:{variant:"outline-secondary"}},[e._v("close")])],1)]},proxy:!0}])},[n("b-form-group",{attrs:{id:"name",label:"Group name:","label-for":"group_name"}},[n("b-form-input",{attrs:{id:"group_name",required:""},model:{value:e.edited_group_name,callback:function(t){e.edited_group_name=t},expression:"edited_group_name"}})],1),n("b-form-group",{attrs:{id:"description",label:"Group description:","label-for":"group_description"}},[n("b-form-textarea",{attrs:{id:"group_description",required:"",placeholder:"Add a group description"},model:{value:e.edited_group_description,callback:function(t){e.edited_group_description=t},expression:"edited_group_description"}})],1),n("error-component",{attrs:{message:e.error_message}})],1)},N=[],F={store:l["a"],components:{ErrorComponent:_["default"]},data:function(){return{item_model:"group",edited_group_name:"",edited_group_description:"",error_message:""}},created:function(){this.edited_group_name=this.group_name,this.edited_group_description=this.group_description},computed:Object(a["a"])({},c["a"].mapState({group_name:function(e){return e.group_name},group_description:function(e){return e.group_description},item_id:function(e){return e.group_pk}})),methods:Object(a["a"])(Object(a["a"])({},c["a"].mapActions(["changeGroupName","changeGroupDescription"])),{},{save_edited_group:function(){var e=this;this.group_name!=this.edited_group_name&&this.changeGroupName({group_pk:this.item_id,new_name:this.edited_group_name}).catch((function(t){e.error_message=t})),this.group_description!=this.edited_group_description&&this.changeGroupDescription({group_pk:this.item_id,group_description:this.edited_group_description}).catch((function(t){e.error_message=t}))}})},L=F,U=Object(d["a"])(L,M,N,!1,null,null,null),$=U.exports,G=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[n("h5",[e._v(e._s(e.title_string))]),n("b-container",{attrs:{fluid:"",id:"action_history_table"}},[n("b-row",[n("b-col",{staticClass:"my-4",attrs:{lg:"6"}},[n("b-form-group",{staticClass:"mb-0",attrs:{label:"Filter","label-cols-sm":"3","label-align-sm":"left","label-size":"sm","label-for":"filterInput"}},[n("b-input-group",{attrs:{size:"sm"}},[n("b-form-input",{attrs:{type:"search",id:"filterInput",placeholder:"Type to Search"},model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}})],1)],1)],1),n("b-col",{staticClass:"my-4",attrs:{lg:"6"}},[n("b-form-group",{staticClass:"mb-0",attrs:{label:"Sort","label-cols-sm":"3","label-align-sm":"right","label-size":"sm","label-for":"sortBySelect"}},[n("b-input-group",{attrs:{size:"sm"}},[n("b-form-select",{staticClass:"w-75",attrs:{id:"sortBySelect",options:e.sortOptions},scopedSlots:e._u([{key:"first",fn:function(){return[n("option",{attrs:{value:""}})]},proxy:!0}]),model:{value:e.sortBy,callback:function(t){e.sortBy=t},expression:"sortBy"}}),n("b-form-select",{staticClass:"w-25",attrs:{size:"sm",disabled:!e.sortBy},model:{value:e.sortDesc,callback:function(t){e.sortDesc=t},expression:"sortDesc"}},[n("option",{domProps:{value:!1}},[e._v("Asc")]),n("option",{domProps:{value:!0}},[e._v("Desc")])])],1)],1)],1)],1),n("b-table",{attrs:{hover:"",fixed:"",items:e.item_actions,fields:e.action_fields,"sort-by":e.sortBy,"sort-desc":e.sortDesc,filter:e.filter,filterIncludedFields:e.filterOn,id:"action_history_table_element"},on:{"update:sortBy":function(t){e.sortBy=t},"update:sort-by":function(t){e.sortBy=t},"update:sortDesc":function(t){e.sortDesc=t},"update:sort-desc":function(t){e.sortDesc=t}},scopedSlots:e._u([{key:"cell(description)",fn:function(t){return[n("router-link",{staticClass:"text-info",attrs:{to:{name:"user-permissions",params:{user_pk:t.item.actor_pk}}}},[e._v(" "+e._s(t.item.actor)+" ")]),e._v(" "+e._s(t.item.description)+" "),n("router-link",{attrs:{to:{name:"action-detail",params:{action_id:t.item.action_pk}}}},[n("b-button",{staticClass:"btn-sm action-link-button float-right",attrs:{variant:"outline-secondary"}},[e._v("link")])],1),n("br"),n("small",[n("b",[e._v("Status: "+e._s(t.item.status)+" "),"implemented"==t.item.status?n("span",[e._v(" (passed via "+e._s(t.item.resolution_passed_by)+" permission)")]):e._e()]),e._v(" "+e._s(t.item.display_date)+" ")]),t.item.has_condition.exists?n("b-badge",{attrs:{variant:"info"}},[e._v("has condition")]):e._e(),t.item.is_template?n("b-badge",{attrs:{variant:"warning"}},[e._v("template action")]):e._e()]}}])})],1)],1)},q=[],z={props:["item_id","item_model","item_name"],store:l["a"],data:function(){return{action_fields:[{key:"description",label:"Actions",sortable:!1}],sortBy:"created",sortDesc:!0,sortOptions:[{text:"Date created",value:"created"},{text:"Status",value:"status"},{text:"Actor",value:"actor"}],filter:null,filterOn:[]}},created:function(){this.loadActions({item_id:this.final_item_id,item_model:this.final_item_model}).catch((function(e){console.log(e)}))},computed:Object(a["a"])(Object(a["a"])({},c["a"].mapState({actions:function(e){return e.concord_actions.actions}})),{},{final_item_id:function(){return"undefined"===typeof this.item_id?l["a"].state.group_pk:this.item_id},final_item_model:function(){return"undefined"===typeof this.item_model?"group":this.item_model},final_item_name:function(){return"undefined"===typeof this.item_name?l["a"].state.group_name:this.item_name},item_actions:function(){var e=this.final_item_id+"_"+this.final_item_model;return this.actions[e]?this.actions[e]:[]},modal_id:function(){return"action_history_modal_"+this.final_item_id+"_"+this.final_item_model},title_string:function(){return"Action history for "+this.final_item_model+" "+this.final_item_name}}),methods:Object(a["a"])({},c["a"].mapActions(["loadActions"]))},V=z,W=Object(d["a"])(V,G,q,!1,null,null,null),B=W.exports,Y=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.ready_to_render?n("span",[n("h5",[e._v("Details for action "+e._s(e.action.action_pk)+": "+e._s(e.action.description))]),n("b-card",{staticClass:"my-3",attrs:{"border-variant":"secondary"}},[e._v(" Action "+e._s(e.action.action_pk)+" ("+e._s(e.action.description)+") was taken by "+e._s(e.action.actor)+" on "+e._s(e.action.display_date)+". ")]),e.action.is_template?n("b-card",{staticClass:"my-3",attrs:{"bg-variant":"light",header:"This is a template action"}},[n("b-card-text",[n("p",[e._v("When a template action is implemented, it applies a series of other actions. Here are the actions implemented by "),e.action.template_description.name?n("span",[e._v("the "+e._s(e.action.template_description.name))]):n("span",[e._v("this")]),e._v(" template:")]),n("ul",{staticClass:"my-2"},e._l(e.action.template_description.actions,(function(t){return n("li",{key:t},[e._v(e._s(t))])})),0),n("p",[e._v("The user has added the following information:")]),n("ul",{staticClass:"my-2"},[e._l(e.action.template_description.supplied_fields.fields,(function(t){return n("li",{key:t},[e._v(" "+e._s(t))])})),0==e.action.template_description.supplied_fields.fields.length?n("li",[e._v(" There are no user-supplied fields for this template.")]):e._e()],2),n("p",[e._v(e._s(e.action.template_description.foundational))])])],1):e._e(),e.action.has_condition?n("b-card",{staticClass:"my-3",attrs:{"border-variant":"secondary","no-body":""}},[n("b-card-title",{staticClass:"bg-light text-center pt-2 m-0 text-muted"},[n("h5",[e._v("Conditions on Action")])]),n("b-tabs",{attrs:{card:""}},e._l(e.ordered_conditions,(function(t){return n("b-tab",{key:t.pk,attrs:{title:t.type+" "+t.pk}},[n("b-card-text",[n(t.type,{tag:"component",attrs:{condition_pk:t.pk,condition_type:t.type,action_details:e.action}})],1)],1)})),1)],1):e._e(),n("b-card",{staticClass:"my-3",attrs:{"border-variant":"secondary"}},[n("CommentListComponent",{staticClass:"my-3",attrs:{item_id:e.action_id,item_model:"action"}})],1)],1):e._e()},H=[],J=(n("fb6a"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[e.user_permissions.add_comment?n("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.edit_comment_modal",modifiers:{edit_comment_modal:!0}}],staticClass:"btn-sm add-comment"},[e._v(" Add a comment")]):e._e(),e.item_comments.length>0&&0==e.show_comments?n("b-button",{staticClass:"btn-sm show-comments",on:{click:function(t){e.show_comments=!0}}},[e._v(" Show comments")]):e._e(),e.item_comments.length>0&&1==e.show_comments?n("b-button",{staticClass:"btn-sm hide-comments",on:{click:function(t){e.show_comments=!1}}},[e._v(" Hide comments")]):e._e(),e.show_comments?n("span",e._l(e.item_comments,(function(t){return n("comment-component",{key:t.pk,attrs:{comment:t,item_id:e.item_id,item_model:e.item_model}})})),1):e._e(),n("b-modal",{attrs:{id:"edit_comment_modal",title:"Edit comment","hide-footer":""}},[n("b-form-group",{attrs:{id:"comment_text_group"}},[n("b-form-textarea",{attrs:{id:"comment_text",name:"comment_text",placeholder:"Write your comment here"},model:{value:e.comment_text,callback:function(t){e.comment_text=t},expression:"comment_text"}})],1),n("b-button",{staticClass:"btn-sm",attrs:{variant:"outline-secondary",id:"submit_comment_button"},on:{click:e.add_comment}},[e._v("submit")]),n("error-component",{attrs:{message:e.error_message}})],1)],1)}),K=[],Q=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[n("b-card",{staticClass:"my-3",scopedSlots:e._u([{key:"footer",fn:function(){return[e.user_permissions.edit_comment?n("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal",value:e.comment_modal_id,expression:"comment_modal_id"}],staticClass:"btn-sm",attrs:{variant:"outline-secondary"}},[e._v(" edit")]):e._e(),e.user_permissions.delete_comment?n("b-button",{staticClass:"btn-sm",attrs:{variant:"outline-secondary"},on:{click:function(t){return e.delete_comment(e.comment.pk)}}},[e._v("delete")]):e._e(),n("router-link",{attrs:{to:{name:"action-history",params:{item_id:e.comment.pk,item_model:"comment",item_name:e.comment_name(e.comment.text)}}}},[n("b-button",{staticClass:"btn-sm",attrs:{variant:"outline-secondary"}},[e._v("comment history")])],1),n("router-link",{attrs:{to:{name:"item-permissions",params:{item_id:e.comment.pk,item_model:"comment",item_name:e.comment_name(e.comment.text)}}}},[n("b-button",{staticClass:"btn-sm",attrs:{variant:"outline-secondary"}},[e._v("comment permissions")])],1),n("br"),n("small",{staticClass:"text-muted"},[e._v("Posted "+e._s(e.display_date(e.comment.created_at))+" by "+e._s(e.getUserName(e.comment.commentor_pk)))])]},proxy:!0}])},[n("b-card-text",[e._v(e._s(e.comment.text))])],1),n("b-modal",{attrs:{id:e.comment_modal_id,title:e.title_string,"hide-footer":""}},[n("b-form-group",{attrs:{id:"comment_text_group"}},[n("b-form-textarea",{attrs:{id:"comment_text",name:"comment_text",placeholder:"Write your comment here"},model:{value:e.comment_text,callback:function(t){e.comment_text=t},expression:"comment_text"}})],1),n("b-button",{staticClass:"btn-sm",attrs:{variant:"outline-secondary",id:"sumbit_comment_button"},on:{click:e.edit_comment}},[e._v("submit")]),n("error-component",{attrs:{message:e.error_message}})],1)],1)},X=[],Z={components:{ErrorComponent:_["default"]},props:["item_id","item_model","comment"],store:l["a"],data:function(){return{comment_text:"",error_message:""}},created:function(){var e=this,t="comment_"+this.comment.pk;this.checkPermissions({permissions:{edit_comment:{alt_target:t},delete_comment:{alt_target:t}}}).catch((function(t){e.error_message=t,console.log(t)})),this.comment_text=this.comment.text},computed:Object(a["a"])(Object(a["a"])(Object(a["a"])({},c["a"].mapState({user_permissions:function(e){return e.permissions.current_user_permissions}})),c["a"].mapGetters(["getUserName"])),{},{title_string:function(){return"Edit "+this.comment_name(this.comment_text)},comment_modal_id:function(){return"item_comment_modal_"+this.item_id+"_"+this.item_model}}),methods:Object(a["a"])(Object(a["a"])({},c["a"].mapActions(["checkPermissions","editComment","deleteComment"])),{},{display_date:function(e){return Date(e)},comment_name:function(e){return e.length>50?"Comment: "+e.substr(0,50)+"...'":"Comment: '"+e+"'"},edit_comment:function(){var e=this;this.editComment({text:this.comment_text,comment_pk:this.comment.pk}).then((function(t){e.mode="add",e.comment_pk=null})).catch((function(t){e.error_message=t}))},delete_comment:function(e){this.deleteComment({item_id:this.item_id,item_model:this.item_model,comment_pk:e}).catch((function(e){console.log(e)}))}})},ee=Z,te=Object(d["a"])(ee,Q,X,!1,null,null,null),ne=te.exports,ie={components:{ErrorComponent:_["default"],CommentComponent:ne},props:["item_id","item_model"],store:l["a"],data:function(){return{show_comments:!0,comment_text:"",error_message:""}},created:function(){var e=this;this.getCommentData({item_id:this.item_id,item_model:this.item_model}).catch((function(e){console.log("Error getting comment data")}));var t=this.item_model+"_"+this.item_id;this.checkPermissions({permissions:{add_comment:{alt_target:t}}}).catch((function(t){e.error_message=t,console.log(t)}))},computed:Object(a["a"])(Object(a["a"])(Object(a["a"])({},c["a"].mapState({user_permissions:function(e){return e.permissions.current_user_permissions}})),c["a"].mapGetters(["getCommentsForItem","getUserName"])),{},{item_comments:function(){return this.item_id&&this.item_model?this.getCommentsForItem(this.item_id+"_"+this.item_model):[]}}),methods:Object(a["a"])(Object(a["a"])({},c["a"].mapActions(["checkPermissions","getCommentData","addComment"])),{},{display_date:function(e){return Date(e)},comment_name:function(e){return e.length>50?"Comment: "+e.substr(0,50)+"...'":"Comment: '"+e+"'"},add_comment:function(){var e=this;this.addComment({item_id:this.item_id,item_model:this.item_model,text:this.comment_text}).catch((function(t){e.error_message=t}))}})},se=ie,oe=Object(d["a"])(se,J,K,!1,null,null,null),re=oe.exports,ae=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",["waiting"!=e.condition_status||e.user_has_taken_action?e._e():n("span",{staticClass:"my-5"},[e.can_approve?n("span",[e._m(0),n("b-form-radio-group",{attrs:{id:"btn-radios-1",options:e.button_options,buttons:"",name:"radios-btn-default","button-variant":"outline-primary"},model:{value:e.button_selected,callback:function(t){e.button_selected=t},expression:"button_selected"}}),n("b-button",{attrs:{id:"save_approve_choice"},on:{click:e.update_conditional}},[e._v("Save")])],1):n("span",[e._m(1)])]),e.user_has_taken_action?n("span",["approved"==e.condition_status||"rejected"==e.condition_status?n("span",{staticClass:"my-5"},[e._v(" You have "+e._s(e.condition_status)+" "+e._s(e.action_details.actor)+"'s action. Nothing further is needed from you. ")]):e._e()]):e._e(),e.user_has_taken_action?e._e():n("span",["approved"==e.condition_status||"rejected"==e.condition_status?n("span",{staticClass:"my-5"},[e._v(" "+e._s(e.action_details.actor)+"'s action has been "+e._s(e.condition_status)+". ")]):e._e()]),e.error_message?n("span",{staticClass:"text-danger mt-3"},[e._v(e._s(e.error_message))]):e._e()])},ce=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("p",{staticClass:"mb-3"},[n("b",[e._v("Please approve or reject this action.")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("p",{staticClass:"mb-3"},[n("b",[e._v("You do not have permission to approve or reject this action.")])])}],le=(n("4160"),n("159b"),n("96cf"),n("1da1")),_e=n("583c"),me={props:["condition_type","condition_pk","action_details"],store:l["a"],data:function(){return{user_has_taken_action:!1,button_options:["approve","reject"],button_selected:null,error_message:null,permission_details:null,condition_details:null}},created:function(){this.get_conditional_data()},computed:Object(a["a"])(Object(a["a"])({},c["a"].mapGetters(["url_lookup"])),{},{can_approve:function(){if(1==this.permission_details["concord.conditionals.state_changes.ApproveStateChange"][0]){var e=null;if(this.condition_details.fields.forEach((function(t){"self_approval_allowed"==t.field_name&&(e=t.field_value)})),1==e)return!0;if(l["a"].state.user_name!=this.action_details.actor)return!0}return!1},condition_status:function(){return this.condition_details?this.condition_details.status:null}}),methods:Object(a["a"])(Object(a["a"])({},c["a"].mapActions(["addOrUpdateAction"])),{},{get_conditional_data:function(){var e=this;return Object(le["a"])(regeneratorRuntime.mark((function t(){var n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.url_lookup("get_conditional_data");case 2:return n=t.sent,i={condition_pk:e.condition_pk,condition_type:e.condition_type},t.abrupt("return",_e["a"].post(n,i).then((function(t){e.permission_details=t.data.permission_details,e.condition_details=t.data.condition_details})).catch((function(e){console.log(e)})));case 5:case"end":return t.stop()}}),t)})))()},update_conditional:function(){var e=this;return Object(le["a"])(regeneratorRuntime.mark((function t(){var n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.url_lookup("update_approval_condition");case 2:n=t.sent,i={condition_pk:e.condition_pk,action_to_take:e.button_selected},_e["a"].post(n,i).then((function(t){var n=t.data.action_pk;e.user_has_taken_action=!0,e.get_conditional_data().then((function(t){"waiting"==e.condition_status?e.error_message="Before your decision to "+e.button_selected+" can be implemented, a condition must be satisfied.":(e.addOrUpdateAction({action_pk:e.action_details["action_pk"]}),e.addOrUpdateAction({action_pk:n}))})).catch((function(t){console.log("Error refreshing condition data:",t),e.error_message=t}))})).catch((function(t){console.log("Error updating condition: ",t),e.error_message=t}));case 5:case"end":return t.stop()}}),t)})))()}})},ue=me,de=Object(d["a"])(ue,ae,ce,!1,null,null,null),pe=de.exports,fe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[n("h5",{staticClass:"my-2"},[e._v("Discussion Status")]),e.is_resolved?n("span",[e._v("The condition was resolved with resolution "+e._s(e.condition_resolution_status)+". "),e.response_selected?n("span",[e._v("Your response was "),n("b",[e._v(e._s(e.response_selected))]),e._v(".")]):e._e()]):n("span",[e.can_be_resolved?n("span",[e._v("The minimum duration of "+e._s(e.minimum_duration)+" has passed. If the discussion was resolved right now, the result would be: "+e._s(e.current_result)+". "),e.can_resolve?n("b-button",{staticClass:"btn-sm",attrs:{variant:"outline-secondary",id:"resolve_button"},on:{click:function(t){return e.resolve_condition()}}},[e._v("Resolve this discussion?")]):e._e()],1):n("span",[e._v("The discussion cannot be resolved until the minimum duration of "+e._s(e.minimum_duration)+" has passed. This will happen in "+e._s(e.time_remaining)+". ")])]),n("b-container",{staticClass:"bv-example-row border border-info my-2 p-2",attrs:{id:"consensus_responses"}},[n("b-row",[n("b-col",{staticClass:"text-center my-2"},[e._v("Current Responses")])],1),n("b-row",{staticClass:"font-weight-bold"},[n("b-col",[e._v("Support")]),n("b-col",[e._v("Support With Reservations")]),n("b-col",[e._v("Stand Aside")]),n("b-col",[e._v("Block")]),n("b-col",[e._v("No Response")])],1),n("b-row",[n("b-col",{attrs:{id:"support_names"}},[e._v(e._s(e.get_names(e.response_data.support)))]),n("b-col",{attrs:{id:"reservatiions_names"}},[e._v(e._s(e.get_names(e.response_data.support_with_reservations)))]),n("b-col",{attrs:{id:"stand_aside_names"}},[e._v(e._s(e.get_names(e.response_data.stand_aside)))]),n("b-col",{attrs:{id:"block_names"}},[e._v(e._s(e.get_names(e.response_data.block)))]),n("b-col",{attrs:{id:"no_response_names"}},[e._v(e._s(e.get_names(e.response_data.no_response)))])],1)],1),e.is_resolved?e._e():n("div",{staticClass:"my-3"},[e.can_respond?n("span",[n("b-form-group",{attrs:{label:"Your Response"}},[n("b-form-radio-group",{attrs:{id:"user_response_radio_buttons",options:e.response_options,"button-variant":"outline-info",buttons:"",name:"user_response_radio_buttons"},model:{value:e.response_selected,callback:function(t){e.response_selected=t},expression:"response_selected"}})],1),n("b-button",{staticClass:"btn-sm",attrs:{id:"submit_response"},on:{click:function(t){return e.submit_response()}}},[e._v("Submit")])],1):n("span",[e._v("You are not a participant in this consensus decision.")])]),e.error_message?n("span",{staticClass:"text-danger"},[e._v(e._s(e.error_message))]):e._e()],1)},he=[],ge=(n("caad"),n("c975"),n("a15b"),n("ac1f"),n("5319"),{props:["condition_type","condition_pk","action_details"],store:l["a"],data:function(){return{error_message:null,permission_details:null,condition_details:null,response_selected:null,minimum_duration:null,time_remaining:null,can_be_resolved:null,responses:null,response_options:null,current_result:null}},computed:Object(a["a"])(Object(a["a"])({},c["a"].mapGetters(["getUserName","url_lookup"])),{},{can_respond:function(){if(this.permission_details)return this.permission_details["concord.conditionals.state_changes.RespondConsensusStateChange"][0]},can_resolve:function(){if(this.permission_details)return this.permission_details["concord.conditionals.state_changes.ResolveConsensusStateChange"][0]},is_resolved:function(){if(this.condition_details)return!!["approved","rejected","implemented"].includes(this.condition_details.status)},response_data:function(){var e={};if(this.response_options)for(var t in this.response_options.forEach((function(t){return e[t.replace(/\s/g,"_")]=[]})),this.responses)e[this.responses[t].replace(/\s/g,"_")].push(t);return e},condition_resolution_status:function(){if(this.condition_details)return this.condition_details.status}}),created:function(){this.get_conditional_data()},methods:Object(a["a"])(Object(a["a"])({},c["a"].mapActions(["addOrUpdateAction"])),{},{get_conditional_data:function(){var e=this;return Object(le["a"])(regeneratorRuntime.mark((function t(){var n,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.url_lookup("get_conditional_data");case 2:return n=t.sent,s={condition_pk:e.condition_pk,condition_type:e.condition_type},t.abrupt("return",_e["a"].post(n,s).then((function(t){for(var n in e.permission_details=t.data.permission_details,e.condition_details=t.data.condition_details,e.condition_details.fields){var s=e.condition_details.fields[n]["field_name"],o=e.condition_details.fields[n]["field_value"];i["default"].set(e,s,o)}e.set_user_response()})).catch((function(e){console.log(e)})));case 5:case"end":return t.stop()}}),t)})))()},get_names:function(e){var t=this;if(e){var n=[];return e.forEach((function(e){return n.push(t.getUserName(parseInt(e)))})),n.join(", ")}return""},set_user_response:function(){for(var e in this.responses)e==l["a"].state.user_pk&&(this.response_selected=this.responses[e])},update_action:function(e){this.addOrUpdateAction({action_pk:this.action_details["action_pk"]}),this.addOrUpdateAction({action_pk:e})},submit_response:function(){var e=this;return Object(le["a"])(regeneratorRuntime.mark((function t(){var n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.response_selected||(e.error_message="Please select a response"),e.response_selected!=e.user_response){t.next=4;break}return e.error_message="Your response has not changed",t.abrupt("return");case 4:return t.next=6,e.url_lookup("update_consensus_condition");case 6:n=t.sent,i={condition_pk:e.condition_pk,action_to_take:"respond",response:e.response_selected},_e["a"].post(n,i).then((function(t){["implemented","waiting"].indexOf(t.data.action_status)>-1?(e.update_action(t.data.action_pk),e.get_conditional_data().catch((function(t){e.error_message=t}))):e.error_message=t.data.action_log})).catch((function(t){console.log("Error updating condition: ",t),e.error_message=t}));case 9:case"end":return t.stop()}}),t)})))()},resolve_condition:function(){var e=this;return Object(le["a"])(regeneratorRuntime.mark((function t(){var n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.url_lookup("update_consensus_condition");case 2:n=t.sent,i={condition_pk:e.condition_pk,action_to_take:"resolve"},_e["a"].post(n,i).then((function(t){["implemented","waiting"].indexOf(t.data.action_status)>-1?(e.update_action(t.data.action_pk),e.get_conditional_data().catch((function(t){e.error_message=t}))):e.error_message=t.data.action_log})).catch((function(t){console.log("Error updating condition: ",t),e.error_message=t}));case 5:case"end":return t.stop()}}),t)})))()}})}),be=ge,ve=Object(d["a"])(be,fe,he,!1,null,null,null),ke=ve.exports,ye=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[e.is_resolved?n("span",[e._v(" This vote ended on "+e._s(e.voting_deadline_display)+". The results were "+e._s(e.vote_results)+", which means the action was "+e._s(e.condition_details.status)+". It required a "+e._s(e.majority_or_plurality)+" vote and abstentions were "),e.allow_abstain?e._e():n("span",[e._v("not")]),e._v(" allowed. ")]):n("span",[e._v(" This vote will end on "+e._s(e.voting_deadline_display)+". The results so far are "+e._s(e.vote_results)+". It requires a "+e._s(e.majority_or_plurality)+" vote and abstentions are "),e.allow_abstain?e._e():n("span",[e._v("not")]),e._v(" allowed. ")]),e.is_resolved||e.user_has_taken_action?e._e():n("span",{staticClass:"my-5"},[e.can_vote&&e.not_yet_voted?n("span",[e._m(0),n("b-form-radio-group",{attrs:{id:"btn-radios-1",options:e.button_options,buttons:"",name:"radios-btn-default","button-variant":"outline-primary"},model:{value:e.button_selected,callback:function(t){e.button_selected=t},expression:"button_selected"}}),n("b-button",{attrs:{id:"save_vote_choice"},on:{click:e.update_condition}},[e._v("Submit")])],1):e.can_vote&&!e.not_yet_voted?n("span",[e._m(1)]):n("span",[e._m(2)])]),e.user_has_taken_action?n("span",[e._v(" Thank you for voting! No further action from you is needed. ")]):e._e(),e.error_message?n("span",{staticClass:"text-danger"},[e._v(e._s(e.error_message))]):e._e()])},Oe=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("p",{staticClass:"mb-3"},[n("b",[e._v("Please cast your vote")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("p",{staticClass:"mb-3"},[n("b",[e._v("You have already voted.")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("p",{staticClass:"mb-3"},[n("b",[e._v("You are not eligible to vote.")])])}],we={props:["condition_type","condition_pk","action_details"],store:l["a"],data:function(){return{user_has_taken_action:!1,button_selected:null,error_message:null,permission_details:null,condition_details:null,allow_abstain:null,require_majority:null,voting_deadline:null}},computed:Object(a["a"])(Object(a["a"])({},c["a"].mapGetters(["url_lookup"])),{},{voting_deadline_display:function(){if(this.voting_deadline)return Date(this.voting_deadline)},button_options:function(){return this.allow_abstain?1==this.allow_abstain?["yea","nay","abstain"]:["yea","nay"]:[]},majority_or_plurality:function(){return 1==this.require_majority?"majority (as opposed to plurality)":0==this.require_majority?"plurality (as opposed to majority)":void 0},vote_results:function(){if(this.condition_details){var e=this.current_yeas+" yeas and "+this.current_nays+" nays";return this.allow_abstain&&(e+=" with "+this.current_abstains+"  abstentions"),e}},can_vote:function(){if(this.permission_details)return this.permission_details["concord.conditionals.state_changes.AddVoteStateChange"][0]},not_yet_voted:function(){if(this.permission_details)return this.permission_details["user_condition_status"][0]},is_resolved:function(){if(this.condition_details)return!!["approved","rejected","implemented"].includes(this.condition_details.status)}}),created:function(){this.get_conditional_data()},methods:Object(a["a"])(Object(a["a"])({},c["a"].mapActions(["addOrUpdateAction"])),{},{get_conditional_data:function(){var e=this;return Object(le["a"])(regeneratorRuntime.mark((function t(){var n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.url_lookup("get_conditional_data");case 2:return n=t.sent,i={condition_pk:e.condition_pk,condition_type:e.condition_type},t.abrupt("return",_e["a"].post(n,i).then((function(t){for(var n in e.condition_details=t.data.condition_details,e.permission_details=t.data.permission_details,e.condition_details.fields){var i=e.condition_details.fields[n]["field_name"],s=e.condition_details.fields[n]["field_value"];e[i]=s}})).catch((function(e){console.log("Error calling get_conditional_data in vote condition: ",e)})));case 5:case"end":return t.stop()}}),t)})))()},update_condition:function(){var e=this;return Object(le["a"])(regeneratorRuntime.mark((function t(){var n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.url_lookup("update_vote_condition");case 2:n=t.sent,i={condition_pk:e.condition_pk,action_to_take:e.button_selected},_e["a"].post(n,i).then((function(t){var n=t.data.action_pk;e.user_has_taken_action=!0,e.get_conditional_data().then((function(t){"waiting"==e.condition_details.status||(e.addOrUpdateAction({action_pk:e.action_details["action_pk"]}),e.addOrUpdateAction({action_pk:n}))})).catch((function(t){console.log("Error refreshing condition data:",t),e.error_message=t}))})).catch((function(t){console.log("Error updating condition: ",t),e.error_message=t}));case 5:case"end":return t.stop()}}),t)})))()}})},Ce=we,xe=Object(d["a"])(Ce,ye,Oe,!1,null,null,null),Ee=xe.exports,Re={props:["action_id"],components:{CommentListComponent:re,ApprovalCondition:pe,ConsensusCondition:ke,VoteCondition:Ee},store:l["a"],data:function(){return{ready_to_render:!1,action:null}},created:function(){this.action=this.getActionData(this.action_id),"undefined"===typeof this.action?this.addOrUpdateAction({action_pk:this.action_id}).catch((function(e){console.log(e)})):this.ready_to_render=!0},watch:{actions:function(e){this.action=this.getActionData(this.action_id),"undefined"!==typeof this.action&&(this.ready_to_render=!0)}},computed:Object(a["a"])(Object(a["a"])(Object(a["a"])({},c["a"].mapGetters(["getActionData"])),c["a"].mapState({actions:function(e){return e.concord_actions.actions}})),{},{ordered_conditions:function(){return this.action.has_condition.conditions.slice().sort((function(e,t){return e.pk<t.pk?-1:e.pk>t.pk?1:0}))}}),methods:Object(a["a"])({},c["a"].mapActions(["addOrUpdateAction"]))},Ae=Re,Pe=Object(d["a"])(Ae,Y,H,!1,null,null,null),Se=Pe.exports,je=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[n("b-card-group",{staticClass:"mb-4",attrs:{deck:""}},[e.governance_forum?n("b-card",{staticClass:"bg-light border-secondary",attrs:{"no-body":""}},[n("b-card-header",[e.governance_forum?n("router-link",{staticClass:"text-info",attrs:{to:{name:"governance-forum-detail",params:{forum_id:e.governance_forum.pk}}}},[e._v(" "+e._s(e.governance_forum.name)+" ")]):e._e()],1),n("b-card-text",{staticClass:"text-muted p-3",attrs:{id:"forum-description"}},[e._v(" "+e._s(e.governance_forum.description)+" of "+e._s(e.group_name)+" ")])],1):e._e(),n("b-card",{staticClass:"bg-light border-secondary",attrs:{"no-body":""}},[n("b-card-header",[n("router-link",{staticClass:"text-info",attrs:{to:{name:"templates",params:{scope:"community"}}}},[e._v(" Community Templates ")])],1),n("b-card-text",{staticClass:"text-muted p-3",attrs:{id:"community_templates_link"}},[e._v(" Browse pre-existing governance setups and apply them to your community. ")])],1)],1),n("leadership-component"),n("group-membership-component"),n("role-component")],1)},Ie=[],De=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-card",{staticClass:"my-3",attrs:{"no-body":""}},[n("b-card-header",[n("span",{staticClass:"float-left"},[e._v("Leadership")]),n("span",{staticClass:"float-right"},[n("router-link",{attrs:{to:{name:"change-leadership"}}},[n("b-button",{staticClass:"btn-sm btn-seconday",attrs:{id:"change_leadership_button"}},[e._v("change leadership")])],1)],1)]),n("b-card-text",{staticClass:"p-3"},[n("p",{staticClass:"card-text"},[e._v(" Groups can have different leadership structures. This group's basic structure is: ")]),n("p",{staticClass:"card-text mt-2 mx-5"},[e._v(" "+e._s(e.governance_info_display)+" ")])])],1)},Te=[],Me={store:l["a"],computed:Object(a["a"])(Object(a["a"])(Object(a["a"])({},c["a"].mapState({governance_info:function(e){return e.governance.governance_info}})),c["a"].mapGetters(["getUserName"])),{},{governance_info_display:function(){var e=this;function t(t){var n=/\d+/g,i=t.replace(n,(function(t){return e.getUserName(t)}));return i}var n=/individual\s\d+(\s|\.|\s)/g,i=/individuals(\s\d+,)*\s\d+\sand\s\d+(\s|\.|\s)/g,s=this.governance_info.replace(n,t);return s=s.replace(i,t),s}})},Ne=Me,Fe=Object(d["a"])(Ne,De,Te,!1,null,null,null),Le=Fe.exports,Ue=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[n("b-card",{staticClass:"my-3",attrs:{"no-body":""}},[n("b-card-header",[n("span",{staticClass:"float-left"},[e._v("Members")]),n("span",{staticClass:"float-right"},[n("router-link",{attrs:{to:{name:"membership-settings"}}},[n("b-button",{staticClass:"btn-sm btn-seconday",attrs:{id:"group_membership_settings_button"}},[e._v(" membership settings")])],1),n("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.group_membership_display",modifiers:{group_membership_display:!0}}],staticClass:"btn-sm btn-secondary",attrs:{id:"group_membership_display_button"}},[e._v(" change members")])],1)]),n("b-card-text",{staticClass:"p-3"},[n("b-container",{attrs:{id:"current_member_list"}},[n("b-row",{attrs:{cols:"4"}},e._l(e.groupMembersAsOptions,(function(t){return n("b-col",{key:t.pk},[n("router-link",{staticClass:"text-info",attrs:{to:{name:"user-permissions",params:{user_pk:t.pk}}}},[e._v(" "+e._s(t.name)+" ")])],1)})),1)],1)],1)],1),n("b-modal",{staticClass:"modal fade",attrs:{id:"group_membership_display",title:"Group Membership",size:"lg","hide-footer":""}},[n("error-component",{attrs:{message:e.error_message}}),n("b",[e._v("Current Members:")]),n("span",{attrs:{id:"current_member_list"}},e._l(e.groupMembersAsOptions,(function(t){return n("b-badge",{key:t.pk,staticClass:"mx-1",attrs:{pill:"",variant:"info"}},[e._v(e._s(t.name))])})),1),n("hr"),e.user_permissions.add_members_to_community?n("span",[e.add_member_button_selected?n("span",[n("vue-multiselect",{attrs:{options:e.nonmembersAsOptions,multiple:!0,"close-on-select":!0,"clear-on-select":!1,placeholder:"No one selected",label:"name","track-by":"name"},model:{value:e.members_to_add_selected,callback:function(t){e.members_to_add_selected=t},expression:"members_to_add_selected"}}),n("b-button",{staticClass:"btn-sm mb-3",attrs:{id:"save_add_member_button"},on:{click:function(t){return e.add_members()}}},[e._v("Save")]),n("b-button",{staticClass:"btn-sm mb-3",on:{click:function(t){e.add_member_button_selected=!1}}},[e._v("Discard")])],1):n("span",[e.remove_member_button_selected?e._e():n("span",[n("b-button",{staticClass:"btn-sm mb-3",attrs:{id:"add_member_button"},on:{click:function(t){e.add_member_button_selected=!0}}},[e._v("Add Members")])],1)])]):e._e(),e.user_permissions.remove_members_from_community?n("span",[e.remove_member_button_selected?n("span",[n("vue-multiselect",{attrs:{options:e.groupMembersAsOptions,multiple:!0,"close-on-select":!0,"clear-on-select":!1,placeholder:"No one selected",label:"name","track-by":"name"},model:{value:e.members_to_remove_selected,callback:function(t){e.members_to_remove_selected=t},expression:"members_to_remove_selected"}}),n("b-button",{staticClass:"btn-sm mb-3",attrs:{id:"save_remove_member_button"},on:{click:function(t){return e.remove_members()}}},[e._v("Save")]),n("b-button",{staticClass:"btn-sm mb-3",on:{click:function(t){e.remove_member_button_selected=!1}}},[e._v("Discard")])],1):n("span",[e.add_member_button_selected?e._e():n("span",[n("b-button",{staticClass:"btn-sm mb-3",attrs:{id:"remove_member_button"},on:{click:function(t){e.remove_member_button_selected=!0}}},[e._v("Remove Members")])],1)])]):e._e()],1)],1)},$e=[],Ge=(n("d81d"),n("8e5f")),qe=n.n(Ge),ze={store:l["a"],components:{ErrorComponent:_["default"],"vue-multiselect":qe.a},data:function(){return{item_model:"group",add_member_button_selected:!1,remove_member_button_selected:!1,members_to_add_selected:[],members_to_remove_selected:[],error_message:null}},created:function(){var e=this;this.checkPermissions({permissions:{add_members_to_community:null,remove_members_from_community:null}}).catch((function(t){e.error_message=t,console.log(t)})),this.getPermissionsForItem({item_id:this.item_id,item_model:this.item_model}).catch((function(t){e.error_message=t,console.log(t)}))},computed:Object(a["a"])(Object(a["a"])({},c["a"].mapState({permissions:function(e){return e.permissions.permissions},user_permissions:function(e){return e.permissions.current_user_permissions},item_id:function(e){return e.group_pk}})),c["a"].mapGetters(["groupMembersAsOptions","nonmembersAsOptions"])),methods:Object(a["a"])(Object(a["a"])({},c["a"].mapActions(["getPermissionsForItem","checkPermissions","addMembers","removeMembers"])),{},{add_members:function(){var e=this,t=this.members_to_add_selected.map((function(e){return e.pk}));this.addMembers({user_pks:t}).catch((function(t){return e.error_message=t}))},remove_members:function(){var e=this,t=this.members_to_remove_selected.map((function(e){return e.pk}));this.removeMembers({user_pks:t}).catch((function(t){return e.error_message=t}))}})},Ve=ze,We=Object(d["a"])(Ve,Ue,$e,!1,null,null,null),Be=We.exports,Ye=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[n("b-card",{staticClass:"my-3",attrs:{"no-body":""}},[n("b-card-header",[n("span",{staticClass:"float-left"},[e._v("Roles")]),n("span",{staticClass:"float-right"},[e.user_permissions.add_role_to_community?n("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.add_role_modal",modifiers:{add_role_modal:!0}}],staticClass:"btn-sm",attrs:{id:"add_role_button"}},[e._v("add a role")]):e._e(),e.user_permissions.apply_template?n("router-link",{attrs:{to:{name:"item-templates",params:{scope:"role",target_id:e.group_pk,target_model:"group"}}}},[n("b-button",{staticClass:"btn-sm",attrs:{id:"apply_role_templates"}},[e._v("role templates")])],1):e._e()],1)]),n("b-card-text",{staticClass:"p-3"},[n("p",[e._v("Each group has a variety of roles which different people can be assigned to. Each role has different rights and responsibilities within the community.")]),n("error-component",{attrs:{message:e.error_message}}),n("b-list-group",[n("b-list-group-item",{staticClass:"d-flex justify-content-between align-items-center",attrs:{id:"members_role"}},[n("span",{staticClass:"role_info"},[n("span",{staticClass:"role_name_display"},[e._v("members")]),n("small",{staticClass:"ml-2",attrs:{id:"members_member_count"}},[e._v(" "+e._s(e.group_members.length)+" people ")])]),n("div",{staticClass:"role_interactions"},[n("router-link",{attrs:{to:{name:"role-permissions",params:{role_to_edit:"members"}}}},[n("b-button",{attrs:{variant:"info",pill:"",id:"members_editrole"}},[e._v("permissions")])],1)],1)]),e._l(e.roles,(function(t){return n("b-list-group-item",{key:t.id,staticClass:"d-flex justify-content-between align-items-center",attrs:{id:t.name+"_role"}},[n("span",{staticClass:"role_info"},[n("span",{staticClass:"role_name_display"},[e._v(e._s(t.name))]),n("small",{staticClass:"ml-2",attrs:{id:t.name+"_member_count"}},[e._v(" "+e._s(t.current_members.length)+" people ")])]),n("div",{staticClass:"role_interactions"},[n("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.role_membership_modal",modifiers:{role_membership_modal:!0}}],attrs:{variant:"secondary",pill:"",id:t.name+"_changemembers"},on:{click:function(n){e.role_to_change_membership=t.name}}},[e._v(" change members")]),n("router-link",{attrs:{to:{name:"role-permissions",params:{role_to_edit:t.name}}}},[n("b-button",{attrs:{variant:"info",pill:"",id:t.name+"_editrole"}},[e._v(" permissions")])],1),n("b-button",{attrs:{variant:"danger",pill:""},on:{click:function(n){return e.remove_role(t.name)}}},[e._v(" remove")])],1)])}))],2)],1)],1),n("add-role-component"),n("role-membership-component",{attrs:{role_selected:e.role_to_change_membership}})],1)},He=[],Je=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-modal",{attrs:{id:"add_role_modal",title:"Add a new role","hide-footer":""}},[n("div",{staticClass:"input-group mb-3"},[n("div",{staticClass:"input-group-prepend"},[n("span",{staticClass:"input-group-text",attrs:{id:"role_name_prompt"}},[e._v("Role Name")])]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.new_role_name,expression:"new_role_name"}],staticClass:"form-control",attrs:{type:"text","aria-label":"role_name","aria-describedby":"role_name_prompt",name:"role_name"},domProps:{value:e.new_role_name},on:{input:function(t){t.target.composing||(e.new_role_name=t.target.value)}}})]),n("error-component",{attrs:{message:e.error_message}}),n("b-button",{attrs:{size:"sm",variant:"success",id:"save_role_button"},on:{click:function(t){return e.submitRoleName()}}},[e._v("Save")])],1)},Ke=[],Qe={store:l["a"],components:{ErrorComponent:_["default"]},data:function(){return{error_message:"",new_role_name:""}},computed:Object(a["a"])({},c["a"].mapState({roles:function(e){return e.governance.roles}})),methods:Object(a["a"])(Object(a["a"])({},c["a"].mapActions(["addRole"])),{},{submitRoleName:function(){var e=this;this.addRole({role_name:this.new_role_name}).catch((function(t){e.error_message=t}))}})},Xe=Qe,Ze=Object(d["a"])(Xe,Je,Ke,!1,null,null,null),et=Ze.exports,tt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-modal",{attrs:{id:"role_membership_modal",title:e.title_string,"hide-footer":""}},[n("span",{staticClass:"font-weight-bold"},[e._v(e._s(e.permission_string))]),e.can_edit?n("div",[n("span",{attrs:{id:"change_membership_multiselect"}},[n("vue-multiselect",{staticClass:"mt-3",attrs:{options:e.people_to_choose_from,multiple:!0,"close-on-select":!0,"clear-on-select":!1,placeholder:"No one selected",label:"name","track-by":"pk"},model:{value:e.people_selected,callback:function(t){e.people_selected=t},expression:"people_selected"}})],1),n("b-button",{staticClass:"btn-sm mt-3",attrs:{id:"save_member_changes"},on:{click:function(t){return e.updateMembers()}}},[e._v("Save your changes")]),e.add_error_message||e.remove_error_message?n("div",{staticClass:"mb-3"},[e._v(" "+e._s(e.add_error_message)+" "+e._s(e.remove_error_message)+" ")]):e._e()],1):n("div",{staticClass:"mt-3"},[n("span",{staticClass:"font-weight-bold"},[e._v("Current Members in Role")]),n("br"),e._l(e.people_selected,(function(t){return n("b-badge",{key:t.pk,staticClass:"mx-1",attrs:{pill:"",variant:"info"}},[e._v(" "+e._s(t.name))])}))],2)])},nt=[],it=(n("4de4"),n("2532"),{props:["role_selected"],store:l["a"],components:{"vue-multiselect":qe.a},data:function(){return{add_error_message:"",remove_error_message:"",people_selected:[]}},created:function(){var e=this;this.checkPermissions({permissions:{add_people_to_role:{role_name:this.role_selected},remove_people_from_role:{role_name:this.role_selected}}}).catch((function(t){e.error_message=t,console.log(t)}))},computed:Object(a["a"])(Object(a["a"])(Object(a["a"])({},c["a"].mapState({user_permissions:function(e){return e.permissions.current_user_permissions}})),c["a"].mapGetters(["membersAsOptions"])),{},{people_to_choose_from:function(){return this.membersAsOptions("members")},people_in_role:function(){return this.role_selected?this.membersAsOptions(this.role_selected):[]},title_string:function(){return"Change members with role '"+this.role_selected+"'"},can_edit:function(){return!(!this.user_permissions.add_people_to_role&&!this.user_permissions.remove_people_from_role)},permission_string:function(){return this.user_permissions.add_people_to_role&&this.user_permissions.remove_people_from_role?"You have permission to add and remove people from this role.":this.user_permissions.add_people_to_role?"You have permission to add people to this role, but not to remove people from it.":this.user_permissions.remove_people_from_role?"You have permission to remove people from this role, but not to add people to it.":"You do not have permission to add people to or remove people from this role."}}),watch:{role_selected:function(){console.log(this.people_in_role),this.people_selected=this.people_in_role}},methods:Object(a["a"])(Object(a["a"])({},c["a"].mapActions(["checkPermissions","addUsersToRole","removeUsersFromRole"])),{},{updateMembers:function(){var e=this,t=this.people_in_role.map((function(e){return e.pk})),n=this.people_selected.map((function(e){return e.pk})),i=t.filter((function(e){return!n.includes(e)})),s=n.filter((function(e){return!t.includes(e)}));s.length>0&&this.addUsersToRole({role_name:this.role_selected,user_pks:s}).catch((function(t){e.add_error_message=t,e.people_selected=e.people_in_role})),i.length>0&&this.removeUsersFromRole({role_name:this.role_selected,user_pks:i}).catch((function(t){e.remove_error_message=t,e.people_selected=e.people_in_role}))}})}),st=it,ot=Object(d["a"])(st,tt,nt,!1,null,null,null),rt=ot.exports,at={store:l["a"],components:{ErrorComponent:_["default"],AddRoleComponent:et,RoleMembershipComponent:rt},data:function(){return{role_to_change_membership:"",error_message:null}},created:function(){var e=this;this.checkPermissions({permissions:{add_role_to_community:null,apply_template:null}}).catch((function(t){e.error_message=t,console.log(t)}))},computed:Object(a["a"])({},c["a"].mapState({roles:function(e){return e.governance.roles},group_members:function(e){return e.governance.members},user_permissions:function(e){return e.permissions.current_user_permissions},group_pk:function(e){return e.group_pk}})),methods:Object(a["a"])(Object(a["a"])({},c["a"].mapActions(["checkPermissions","removeRole"])),{},{remove_role:function(e){var t=this;this.removeRole({role_name:e}).catch((function(e){t.error_message=e}))}})},ct=at,lt=Object(d["a"])(ct,Ye,He,!1,null,null,null),_t=lt.exports,mt={components:{LeadershipComponent:Le,GroupMembershipComponent:Be,RoleComponent:_t},store:l["a"],data:function(){return{error_message:null}},computed:Object(a["a"])(Object(a["a"])({},c["a"].mapState({forums:function(e){return e.forums.forums},group_name:function(e){return e.group_name}})),{},{governance_forum:function(){var e=null;return this.forums.forEach((function(t){"Gov"==t.special&&(e=t)})),e}})},ut=mt,dt=Object(d["a"])(ut,je,Ie,!1,null,null,null),pt=dt.exports,ft=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[n("h3",[e._v("Change leadership of "+e._s(e.group_name))]),n("p",{staticClass:"font-weight-bold"},[e._v("Owners")]),n("p",[e._v("Groups can be owned by a combination of individuals and people with specific roles. There must always be at least one person who is an owner. Here are the current individuals and roles who are owners:")]),n("edit-leadership-component",{attrs:{leadership_type:"owner"}}),n("p",{staticClass:"mt-3"},[e._v("If owners have \"unconditional\" power this means any one owner - whether matched as an individual, or matched through roles - can make arbitrary changes to the community, including deleting it. Unless you have a small, new group, you probably don't want this, so we recommend setting a condition. Here's the condition currently set:")]),n("div",{staticClass:"border m-2 p-2 text-center"},[e.owner_condition_display?n("span",[e._v(e._s(e.owner_condition_display))]):n("span",[e._v("No condition set")]),e.user_permissions.add_owner_condition||e.user_permissions.remove_owner_condition?n("router-link",{attrs:{to:{name:"conditions",params:{conditioned_on:"owner"}}}},[n("span",{staticClass:"badge badge-secondary ml-1 edit-condition"},[e._v("edit")])]):e._e()],1),n("p",{staticClass:"font-weight-bold"},[e._v("Governors")]),n("p",[e._v('Often we want to give people power in a community without granting it to them completely or permanently. For instance, if our owners are a large collective of people who take action by voting, we may want to give a small number of people the ability to "manage" the community so they can take action quickly. But if they abuse that power, we want the ability to remove them.')]),n("p",[e._v('We call these people "governors". By default, they can do most things in the community, although the group can always override their power to do specific things. If the owners are unhappy with the governors, they can remove or change them.')]),n("p",[e._v("Governors are optional. Here are the current individuals and roles who are governors:")]),n("edit-leadership-component",{attrs:{leadership_type:"governor"}}),n("p",{staticClass:"mt-3"},[e._v("Just as with owners, you can set a condition on governors. This is less common, as the main point of appointing governors is so they can act efficiently, but can still be useful. Here's the condition currently set:")]),n("div",{staticClass:"border m-2 p-2 text-center"},[e.governor_condition_display?n("span",[e._v(e._s(e.governor_condition_display))]):n("span",[e._v("No condition set")]),e.user_permissions.add_governor_condition||e.user_permissions.remove_governor_condition?n("router-link",{attrs:{to:{name:"conditions",params:{conditioned_on:"governor"}}}},[n("span",{staticClass:"badge badge-secondary ml-1 edit-condition"},[e._v("edit")])]):e._e()],1),n("p",{staticClass:"font-weight-bold"},[e._v("Just so you know")]),n("p",[e._v("There are some actions that owners can't delegate to governors - in order to make these changes, the owners will have to take the action. These changes are:")]),e._m(0)],1)},ht=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ul",[n("li",[e._v("adding and removing owners, both individuals and roles")]),n("li",[e._v("adding and removing governors, both individuals and roles")]),n("li",[e._v("making it so only owners can change a specific resource, or removing that restriction from a specific resource")]),e._v(" "),n("li",[e._v("making it so governors cannot change a specific resource, or removing that restriction from a specific resource")])])}],gt={store:l["a"],mounted:function(){this.checkPermissions({permissions:{add_owner_condition:null,remove_owner_condition:null,add_governor_condition:null,remove_governor_condition:null}}).catch((function(e){console.log(e)}))},computed:Object(a["a"])(Object(a["a"])(Object(a["a"])({},c["a"].mapState({owner_condition:function(e){return e.permissions.owner_condition},governor_condition:function(e){return e.permissions.governor_condition},user_permissions:function(e){return e.permissions.current_user_permissions},group_name:function(e){return e.group_name}})),c["a"].mapGetters(["rolesAsOptions","groupMembersAsOptions","leadershipAsOptions"])),{},{owner_condition_display:function(){return this.owner_condition?this.owner_condition.how_to_pass_overall:"No condition has been set on owners."},governor_condition_display:function(){return this.governor_condition?this.governor_condition.how_to_pass_overall:"No condition has been set on governors."}}),methods:Object(a["a"])({},c["a"].mapActions(["checkPermissions"]))},bt=gt,vt=Object(d["a"])(bt,ft,ht,!1,null,null,null),kt=vt.exports,yt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[n("h3",[e._v("Group Membership Settings")]),e.user_permissions.apply_template?n("router-link",{attrs:{to:{name:"templates",params:{scope:"membership"}}}},[n("b-card",{staticClass:"bg-light text-info border-secondary my-4",attrs:{title:"Membership Templates"}},[n("p",{staticClass:"mb-1 text-secondary",attrs:{id:"membership_templates_link"}},[e._v("Browse pre-existing membership setups and apply them to your community.")])])],1):e._e(),n("error-component",{attrs:{message:e.error_message}}),n("span",{attrs:{id:"add_member_permissions"}},[n("p",{staticClass:"pb-1 font-weight-bold"},[e._v("Permissions for Adding Members")]),e._l(e.addmember_permissions,(function(t){return n("edit-permission-component",{key:t.pk,attrs:{permission:t,item_id:e.item_id,item_model:e.item_model}})})),e.addmember_permissions.length?e._e():n("p",[e._v("No permissions for adding members have been set yet. This means only people with foundational or governing permission can add members.")]),n("add-permission-component",{attrs:{default_selection:e.add_member_state_change,item_id:e.item_id,item_model:e.item_model}})],2),n("span",{attrs:{id:"remove_member_permissions"}},[n("p",{staticClass:"pt-4 pb-1 font-weight-bold"},[e._v("Permissions for Removing Members")]),e._l(e.removemember_permissions,(function(t){return n("edit-permission-component",{key:t.pk,attrs:{permission:t,item_id:e.item_id,item_model:e.item_model}})})),e.removemember_permissions.length?e._e():n("p",[e._v("No permissions for removing members have been set yet. This means only people with foundational or governing permission can remove members.")]),n("add-permission-component",{attrs:{default_selection:e.remove_member_state_change,item_id:e.item_id,item_model:e.item_model}})],2)],1)},Ot=[],wt=(n("07ac"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[n("error-component",{attrs:{message:e.error_message}}),e.add_permission_button_clicked?e._e():n("span",[e.user_permissions.add_permission?n("b-button",{staticClass:"my-2",attrs:{size:"sm",variant:"outline-dark",id:"add_permission_button"},on:{click:function(t){e.add_permission_button_clicked=!0}}},[e._v("Add Permission")]):e._e()],1),e.add_permission_button_clicked?n("div",[e.permission_selected?n("div",[e.role_to_edit?e._e():n("span",{staticClass:"mb-3"},[n("p",{staticClass:"mt-3 font-weight-bold"},[e._v("Give people this permission")]),n("span",{staticClass:"text-left"},[e.anyone_can_take_permission?n("span",[e._v(" Anyone can take the action described by this permission. "),e.user_permissions.give_anyone_permission?n("span",[e._v(" You can remove the permission from anyone, and give it to the previous roles and/or actors specified. "),n("b-button",{attrs:{variant:"outline-secondary",size:"sm"},on:{click:function(t){return e.toggle_anyone("disable")}}},[e._v(" Remove from anyone")])],1):e._e()]):n("span",[e._v(" Currently, only the roles and actors below have this permission. "),e.user_permissions.remove_anyone_from_permission?n("span",[e._v(" You can give permission to everyone. "),n("b-button",{attrs:{variant:"outline-secondary",size:"sm"},on:{click:function(t){return e.toggle_anyone("enable")}}},[e._v(" Give to everyone")]),n("p")],1):e._e()])]),e.anyone_can_take_permission?e._e():n("span",{staticClass:"text-left"},[n("div",{staticClass:"input-group mb-3 permissionrolefield"},[e._v(" Roles who have this permission "),n("vue-multiselect",{attrs:{multiple:!0,options:e.rolesAsOptions,"allow-empty":!0,"close-on-select":!0,placeholder:"Select roles",label:"name","track-by":"name",name:"permission_role_select",disabled:e.permission_exists&&!(e.user_permissions.add_role_to_permission||e.user_permissions.remove_role_from_permission)},model:{value:e.permission_roles_selected,callback:function(t){e.permission_roles_selected=t},expression:"permission_roles_selected"}})],1),n("div",{staticClass:"input-group mb-3 permissionactorfield"},[e._v(" Actors who have this permission "),n("vue-multiselect",{attrs:{multiple:!0,options:e.groupMembersAsOptions,"allow-empty":!0,"close-on-select":!0,placeholder:"Select actors",label:"name","track-by":"pk",name:"permission_actor_select",disabled:e.permission_exists&&!(e.user_permissions.add_actor_to_permission||e.user_permissions.remove_actor_from_permission)},model:{value:e.permission_actors_selected,callback:function(t){e.permission_actors_selected=t},expression:"permission_actors_selected"}})],1)])]),e.configuration_fields.length>0?n("span",{staticClass:"mb-3"},[n("p",{staticClass:"mt-3 font-weight-bold"},[e._v("Configure your permission")]),e._l(e.configuration_fields,(function(t){return n("field-component",{key:t.field_name,attrs:{initial_field:t},on:{"field-changed":e.change_field}})}))],2):e._e(),n("b-button",{staticClass:"mt-3",attrs:{size:"sm",id:"save_permission_button"},on:{click:function(t){return e.add_permission()}}},[e._v(" Save permission")]),n("b-button",{staticClass:"mt-3",attrs:{size:"sm",id:"discard_permission_button"},on:{click:function(t){return e.clearState()}}},[e._v(" Discard")])],1):n("div",{staticClass:"my-3"},[n("b",[e._v("Select permission to add")]),n("vue-multiselect",{attrs:{options:e.permission_options_to_use,"allow-empty":!0,"close-on-select":!0,placeholder:"Select permission",label:"text","track-by":"value","max-height":200,name:"permission_select","group-values":"permissions","group-label":"section"},model:{value:e.permission_selected,callback:function(t){e.permission_selected=t},expression:"permission_selected"}})],1)]):e._e()],1)}),Ct=[],xt=(n("a630"),n("4ec9"),n("d3b7"),n("3ca3"),n("ddb0"),n("53ca")),Et=n("da66"),Rt={props:["default_selection","role_to_edit","item_id","item_model"],components:{"vue-multiselect":qe.a,ErrorComponent:_["default"],FieldComponent:Et["a"]},mixins:[b["a"]],store:l["a"],data:function(){return{permission_exists:!1,add_permission_button_clicked:!1,permission_selected:"",configuration_fields:[],error_message:"",permission_roles_selected:[],permission_actors_selected:[],anyone_can_take_permission:!1}},created:function(){var e=this;this.default_selection&&(this.permission_selected=this.get_full_selection(this.default_selection));var t=this.item_model+"_"+this.item_id;this.checkPermissions({permissions:{add_permission:{alt_target:t}}}).catch((function(t){e.error_message=t,console.log(t)}))},watch:{default_selection:function(e){return this.get_full_selection(e)},permission_selected:function(e){this.permission_selected&&(this.configuration_fields=Object.values(this.getPermissionConfigurationFields(this.permission_selected.value)))},permission_options:function(e){this.default_selection&&(this.permission_selected=this.get_full_selection(this.default_selection))}},computed:Object(a["a"])(Object(a["a"])(Object(a["a"])({},c["a"].mapState({permissions:function(e){return e.permissions.permissions},permission_options:function(e){return e.permissions.permission_options},user_permissions:function(e){return e.permissions.current_user_permissions}})),c["a"].mapGetters(["rolesAsOptions","groupMembersAsOptions","getPermissionConfigurationFields","role_to_options","user_pk_to_options"])),{},{item_or_role:function(){return this.role_to_edit?"role":this.item_id&&this.item_model?"item":void 0},item_permission_options:function(){return this.permission_options[this.item_model]},permission_options_to_use:function(){var e=this;if(!this.role_to_edit)return this.create_permission_groups(this.item_permission_options);var t=function(){var t=new Map;for(var n in e.permission_options)e.permission_options[n].forEach((function(e){t.has(e.value)||t.set(e.value,e)}));return{v:e.create_permission_groups(Array.from(t.values()))}}();return"object"===Object(xt["a"])(t)?t.v:void 0}}),methods:Object(a["a"])(Object(a["a"])({},c["a"].mapActions(["checkPermissions","addPermission"])),{},{clearState:function(){this.default_selection||(this.permission_selected=""),this.add_permission_button_clicked=!1,this.permission_actors_selected=[],this.permission_roles_selected=[],this.configuration_fields=[]},get_full_selection:function(e){for(var t in this.permission_options_to_use)for(var n in this.permission_options_to_use[t].permissions)if(this.permission_options_to_use[t].permissions[n].value==e)return this.permission_options_to_use[t].permissions[n]},create_permission_groups:function(e){var t={};for(var n in e){var i=e[n];i.group in t?t[i.group].push(i):t[i.group]=[i]}var s=[];for(var o in t)["Leadership","Community","Permissions","Miscellaneous"].indexOf(o)>-1?s.push({section:o,permissions:t[o]}):s.unshift({section:o,permissions:t[o]});return s},get_roles:function(){return"role"==this.item_or_role?[this.role_to_edit]:"item"==this.item_or_role?this.permission_roles_selected:void 0},add_permission:function(){var e=this;this.addPermission({item_or_role:this.item_or_role,item_id:this.item_id,item_model:this.item_model,permission_selected:this.permission_selected.value,configuration:this.configuration_fields,roles:this.get_roles(),actors:this.permission_actors_selected,anyone:this.anyone}).then((function(t){e.clearState()})).catch((function(t){e.error_message=t}))},toggle_anyone:function(e){this.anyone_can_take_permission="enable"==e}})},At=Rt,Pt=Object(d["a"])(At,wt,Ct,!1,null,null,null),St=Pt.exports,jt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[n("error-component",{attrs:{message:e.error_message}}),n("b-button-group",{staticClass:"my-2",attrs:{id:e.pair_element_id}},[n("b-button",{staticClass:"rounded-left btn-sm",attrs:{variant:"light"}},[n("span",{staticClass:"permission-display",attrs:{id:"display_"+e.pair_element_id}},[e._v(e._s(e.permission.display))]),e.can_edit_permission?n("span",{staticClass:"badge badge-light ml-1 edit-permission",on:{click:function(t){e.edit_permission=!0}}},[e._v("🖉")]):e._e(),e.user_permissions.remove_permission?n("span",{staticClass:"badge badge-light ml-1 delete-permission",on:{click:function(t){return e.delete_permission()}}},[e._v("🗑")]):e._e()]),n("b-button",{staticClass:"rounded-right btn-sm"},[e.permission.condition?n("span",{attrs:{id:"condition_"+e.pair_element_id+"_existing"}},[n("span",[e._v("on the condition that "+e._s(e.permission.condition.how_to_pass_overall))]),e.user_permissions.remove_permission_condition?n("router-link",{attrs:{to:{name:"conditions",params:{conditioned_on:e.permission.pk,dependency_scope:e.item_model}}}},[n("span",{staticClass:"badge badge-secondary ml-1 edit-condition",class:e.css_name(e.permission.change_name)},[e._v("🖉")])]):e._e()],1):n("span",{attrs:{id:"condition_"+e.pair_element_id}},[e.user_permissions.add_permission_condition?n("router-link",{attrs:{to:{name:"conditions",params:{conditioned_on:e.permission.pk,dependency_scope:e.item_model}}}},[n("b-button",{staticClass:"add-condition btn-sm"},[e._v("add condition")])],1):n("span",[e._v("no condition")])],1)])],1),e.edit_permission?n("span",[n("div",{staticClass:"p-3"},[e.role_to_edit?e._e():n("span",[n("p",{staticClass:"mt-3 font-weight-bold"},[e._v("Give people this permission")]),n("span",{staticClass:"text-left"},[e.anyone_can_take_permission?n("span",[e._v(" Anyone can take the action described by this permission. "),e.user_permissions.give_anyone_permission?n("span",[e._v(" You can remove the permission from anyone, and give it to the previous roles and/or actors specified. "),n("b-button",{attrs:{variant:"outline-secondary",size:"sm"},on:{click:function(t){return e.toggle_anyone("disable")}}},[e._v(" Remove from anyone")])],1):e._e()]):n("span",[e._v(" Currently, only the roles and actors below have this permission. "),e.user_permissions.remove_anyone_from_permission?n("span",[e._v(" You can give permission to everyone. "),n("b-button",{attrs:{variant:"outline-secondary",size:"sm"},on:{click:function(t){return e.toggle_anyone("enable")}}},[e._v(" Give to everyone")]),n("p")],1):e._e()])]),e.anyone_can_take_permission?e._e():n("span",{staticClass:"text-left"},[n("div",{staticClass:"input-group mb-3 permissionrolefield"},[e._v(" Roles who have this permission "),n("vue-multiselect",{attrs:{multiple:!0,options:e.rolesAsOptions,"allow-empty":!0,"close-on-select":!0,placeholder:"Select roles",label:"name","track-by":"name",name:"permission_role_select",disabled:e.permission_exists&&!(e.user_permissions.add_role_to_permission||e.user_permissions.remove_role_from_permission)},model:{value:e.permission_roles_selected,callback:function(t){e.permission_roles_selected=t},expression:"permission_roles_selected"}})],1),n("div",{staticClass:"input-group mb-3 permissionactorfield"},[e._v(" Actors who have this permission "),n("vue-multiselect",{attrs:{multiple:!0,options:e.groupMembersAsOptions,"allow-empty":!0,"close-on-select":!0,placeholder:"Select actors",label:"name","track-by":"pk",name:"permission_actor_select",disabled:e.permission_exists&&!(e.user_permissions.add_actor_to_permission||e.user_permissions.remove_actor_from_permission)},model:{value:e.permission_actors_selected,callback:function(t){e.permission_actors_selected=t},expression:"permission_actors_selected"}})],1)])]),e.configuration_fields.length>0?n("span",[n("p",{staticClass:"mt-3 font-weight-bold"},[e._v("Configure your permission")]),e._l(e.configuration_fields,(function(t){return n("field-component",{key:t.field_name,attrs:{initial_field:t},on:{"field-changed":e.change_field}})}))],2):e._e(),n("div",{staticClass:"block"},[n("b-button",{staticClass:"mt-3",attrs:{size:"sm",id:"update_permission_button"},on:{click:function(t){return e.update_permission()}}},[e._v(" Update permission")]),n("b-button",{staticClass:"mt-3",attrs:{size:"sm",id:"discard_permission_button"},on:{click:function(t){e.edit_permission=!1}}},[e._v(" Discard changes")])],1)])]):e._e()],1)},It=[],Dt={props:["permission","role_to_edit","item_id","item_model"],store:l["a"],components:{"vue-multiselect":qe.a,ErrorComponent:_["default"],FieldComponent:Et["a"]},mixins:[b["a"]],data:function(){return{permission_exists:!0,edit_permission:!1,edit_condition:!1,configuration_fields:[],permission_roles_selected:[],permission_actors_selected:[],error_message:""}},created:function(){var e=this,t="permissionsitem_"+this.permission.pk;this.checkPermissions({permissions:{remove_permission:{alt_target:t},add_permission_condition:{alt_target:t},remove_permission_condition:{alt_target:t},add_actor_to_permission:{alt_target:t},remove_actor_from_permission:{alt_target:t},add_role_to_permission:{alt_target:t},remove_role_from_permission:{alt_target:t},give_anyone_permission:{alt_target:t},remove_anyone_from_permission:{alt_target:t},change_configuration_of_permission:{alt_target:t}}}).catch((function(t){e.error_message=t,console.log(t)}))},watch:{permission:function(e){this.refresh_permission_data(e)},edit_permission:function(e){1==e&&this.refresh_permission_data(this.permission)}},computed:Object(a["a"])(Object(a["a"])(Object(a["a"])({},c["a"].mapState({permissions:function(e){return e.permissions.permissions},user_permissions:function(e){return e.permissions.current_user_permissions}})),c["a"].mapGetters(["rolesAsOptions","groupMembersAsOptions","getPermissionConfigurationFields","getPermissionConfigurationFieldsWithData","role_to_options","user_pk_to_options"])),{},{anyone_can_take_permission:function(){return this.permission.anyone},item_or_role:function(){return this.role_to_edit?"role":this.item_id&&this.item_model?"item":void 0},pair_element_id:function(){return"permission_element_"+this.permission.pk},can_edit_permission:function(){return!!(this.user_permissions.add_actor_to_permission||this.user_permissions.remove_actor_from_permission||this.user_permissions.add_role_to_permission||this.user_permissions.remove_role_from_permission||this.user_permissions.give_anyone_permission||this.user_permissions.remove_anyone_from_permission||this.user_permissions.change_configuration_of_permission)}}),methods:Object(a["a"])(Object(a["a"])({},c["a"].mapActions(["checkPermissions","removePermission","updatePermission","toggleAnyone"])),{},{get_roles:function(){return"role"==this.item_or_role?[this.role_to_edit]:"item"==this.item_or_role?this.permission_roles_selected:void 0},refresh_permission_data:function(e){e&&(this.configuration_fields=Object.values(this.getPermissionConfigurationFieldsWithData(e.pk)),this.item_id&&this.item_model&&(this.permission_roles_selected=this.role_to_options(e.roles),this.permission_actors_selected=this.user_pk_to_options(e.actors)))},clearState:function(){this.edit_permission=!1,this.edit_condition=!1,this.configuration_fields=[],this.permission_roles_selected=[],this.permission_actors_selected=[]},css_name:function(e){return e.replace(" ","_")},delete_permission:function(){var e=this;this.removePermission({permission_id:this.permission.pk,item_id:this.item_id,item_model:this.item_model,item_or_role:this.item_or_role}).then((function(t){e.clearState()})).catch((function(t){e.error_message=t.message}))},update_permission:function(){var e=this;this.updatePermission({permission_id:this.permission.pk,configuration:this.configuration_fields,roles:this.get_roles(),actors:this.permission_actors_selected}).then((function(t){e.clearState()})).catch((function(t){e.error_message=t}))},toggle_anyone:function(e){var t=this;this.toggleAnyone({permission_id:this.permission.pk,enable_or_disable:e}).catch((function(e){t.error_message=e}))}})},Tt=Dt,Mt=Object(d["a"])(Tt,jt,It,!1,null,null,null),Nt=Mt.exports,Ft={store:l["a"],components:{ErrorComponent:_["default"],AddPermissionComponent:St,EditPermissionComponent:Nt},data:function(){return{item_model:"group",add_member_state_change:"concord.communities.state_changes.AddMembersStateChange",remove_member_state_change:"concord.communities.state_changes.RemoveMembersStateChange",error_message:null}},created:function(){var e=this;this.checkPermissions({permissions:{apply_template:null}}).catch((function(t){e.error_message=t,console.log(t)})),this.getPermissionsForItem({item_id:this.item_id,item_model:this.item_model}).catch((function(t){e.error_message=t,console.log(t)}))},computed:Object(a["a"])(Object(a["a"])({},c["a"].mapState({permissions:function(e){return e.permissions.permissions},user_permissions:function(e){return e.permissions.current_user_permissions},item_id:function(e){return e.group_pk}})),{},{addmember_permissions:function(){var e=this;return Object.values(this.permissions).filter((function(t){return t.change_type==e.add_member_state_change}))},removemember_permissions:function(){var e=this;return Object.values(this.permissions).filter((function(t){return t.change_type==e.remove_member_state_change}))}}),methods:Object(a["a"])({},c["a"].mapActions(["getPermissionsForItem","checkPermissions"]))},Lt=Ft,Ut=Object(d["a"])(Lt,yt,Ot,!1,null,null,null),$t=Ut.exports,Gt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[n("h5",{staticClass:"mb-3"},[e._v(e._s(e.title_string))]),n("router-link",{attrs:{to:{name:"advanced-permissions",params:{item_id:e.final_item_id,item_model:e.final_item_model}}}},[n("b-button",{staticClass:"mb-1 btn-sm"},[e._v("View Advanced Permissions")])],1),e.user_permissions.apply_template?n("router-link",{attrs:{to:{name:"item-templates",params:{scope:e.final_item_model,target_id:e.final_item_id,target_model:e.final_item_model}}}},[n("b-button",{staticClass:"mb-1 btn-sm",attrs:{id:"apply_templates"}},[e._v("Apply Templates")])],1):e._e(),n("add-permission-component",{attrs:{item_id:e.final_item_id,item_model:e.final_item_model}}),e.item_permission_objects.length?e._e():n("p",{staticClass:"mt-3"},[e._v("No permissions have been set yet.")]),e._l(e.item_permission_objects,(function(t){return n("edit-permission-component",{key:t.pk,staticClass:"mt-3",attrs:{permission:t,item_id:e.final_item_id,item_model:e.final_item_model}})})),n("error-component",{attrs:{message:e.error_message}})],2)},qt=[],zt={props:["item_id","item_model","item_name"],components:{ErrorComponent:_["default"],EditPermissionComponent:Nt,AddPermissionComponent:St},store:l["a"],data:function(){return{error_message:""}},created:function(){var e=this,t=this.final_item_model+"_"+this.final_item_id;this.checkPermissions({permissions:{apply_template:{alt_target:t}}}).catch((function(t){e.error_message=t,console.log(t)})),this.getPermissionsForItem({item_id:this.final_item_id,item_model:this.final_item_model}).catch((function(t){e.error_message=t}))},computed:Object(a["a"])(Object(a["a"])(Object(a["a"])({},c["a"].mapState({user_permissions:function(e){return e.permissions.current_user_permissions}})),c["a"].mapGetters(["permissionsForItem"])),{},{final_item_id:function(){return"undefined"===typeof this.item_id?l["a"].state.group_pk:this.item_id},final_item_model:function(){return"undefined"===typeof this.item_model?"group":this.item_model},final_item_name:function(){return"undefined"===typeof this.item_name?l["a"].state.group_name:this.item_name},title_string:function(){return"Permissions for "+this.final_item_name},item_key:function(){return this.final_item_id+"_"+this.final_item_model},modal_id:function(){return"item_permission_modal_"+this.item_key},item_permission_objects:function(){return this.permissionsForItem(this.item_key)}}),methods:Object(a["a"])({},c["a"].mapActions(["checkPermissions","getPermissionsForItem"]))},Vt=zt,Wt=Object(d["a"])(Vt,Gt,qt,!1,null,null,null),Bt=Wt.exports,Yt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",{attrs:{id:"edit_role_section"}},[n("h3",[e._v(e._s(e.title_string))]),n("b",[e._v("People with this role can...")]),e.role_permissions.length?e._e():n("p",{staticClass:"mx-2 my-2"},[e._v("This role has no permissions yet.")]),e._l(e.role_permissions,(function(t){return n("edit-permission-component",{key:t.pk,attrs:{permission:t,role_to_edit:e.role_to_edit}})})),n("add-permission-component",{attrs:{role_to_edit:e.role_to_edit,item_model:"group",item_id:e.group_id}}),n("error-component",{attrs:{message:e.error_message}})],2)},Ht=[],Jt={props:["role_to_edit"],components:{ErrorComponent:_["default"],EditPermissionComponent:Nt,AddPermissionComponent:St},store:l["a"],data:function(){return{error_message:""}},created:function(){this.role_to_edit&&this.prepEditRole()},computed:Object(a["a"])(Object(a["a"])(Object(a["a"])({},c["a"].mapGetters(["permissionsForRole"])),c["a"].mapState({group_id:function(e){return e.group_pk}})),{},{title_string:function(){return"Permissions for role '"+this.role_to_edit+"'"},role_permissions:function(){return this.role_to_edit?this.permissionsForRole(this.role_to_edit):[]}}),watch:{role_to_edit:function(){this.prepEditRole()}},methods:Object(a["a"])(Object(a["a"])({},c["a"].mapActions(["refreshRoleData"])),{},{prepEditRole:function(){var e=this;this.refreshRoleData({role:this.role_to_edit}).catch((function(t){e.error_message=t}))}})},Kt=Jt,Qt=Object(d["a"])(Kt,Yt,Ht,!1,null,null,null),Xt=Qt.exports,Zt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[n("div",[n("b-card",{attrs:{title:e.title,"body-class":"text-center","header-tag":"nav"},scopedSlots:e._u([{key:"header",fn:function(){return[n("b-nav",{attrs:{"card-header":"",tabs:""}},[n("b-nav-item",{attrs:{"link-classes":"text-info",active:"roles"==e.tab},on:{click:function(t){e.tab="roles"}}},[e._v(" Roles")]),n("b-nav-item",{attrs:{"link-classes":"text-info",active:"user_permissions"==e.tab},on:{click:function(t){e.tab="user_permissions"}}},[e._v(" "+e._s(e.user.name)+"'s Permissions")]),n("b-nav-item",{attrs:{"link-classes":"text-info",active:"quick_add"==e.tab},on:{click:function(t){e.tab="quick_add"}}},[e._v(" Quick Add to Permissions")])],1)]},proxy:!0}])},[n("b-card-text",["roles"==e.tab?n("div",{staticClass:"my-3 mx-5"},[n("h4",{staticClass:"font-weight-bold"},[e._v("Roles")]),n("error-component",{attrs:{message:e.error_message}}),n("p",{staticClass:"text-left mt-4 mb-2"},[e._v("Roles "+e._s(e.user.name)+" is in:")]),n("b-container",e._l(e.in_roles,(function(t){return n("b-row",{key:t.name,staticClass:"my-2"},[n("b-col",{staticClass:"text-left",attrs:{cols:"9"}},[n("span",{staticClass:"font-weight-bold"},[e._v(e._s(t.name))]),n("span",{staticClass:"ml-2 text-muted"},[e._v("permissions: "+e._s(e.to_list(t.permissions)))])]),n("b-col",[n("b-button",{staticClass:"btn-sm ml-3 float-right ",attrs:{variant:"outline-secondary"},on:{click:function(n){return e.remove_role(t)}}},[e._v("remove from role")])],1)],1)})),1),n("p",{staticClass:"text-left mt-4 mb-2"},[e._v("Roles "+e._s(e.user.name)+" is not part of:")]),n("b-container",e._l(e.out_roles,(function(t){return n("b-row",{key:t.name,staticClass:"my-2"},[n("b-col",{staticClass:"text-left",attrs:{cols:"9"}},[n("span",{staticClass:"font-weight-bold"},[e._v(e._s(t.name))]),n("span",{staticClass:"ml-2 text-muted"},[e._v("permissions: "+e._s(e.to_list(t.permissions)))])]),n("b-col",[n("b-button",{staticClass:"btn-sm ml-3 float-right ",attrs:{variant:"outline-secondary"},on:{click:function(n){return e.add_role(t)}}},[e._v("add to role")])],1)],1)})),1)],1):e._e(),"user_permissions"==e.tab?n("div",{staticClass:"my-3"},[n("h4",{staticClass:"font-weight-bold"},[e._v("User Permissions")]),e._v(" Coming soon! ")]):e._e(),"quick_add"==e.tab?n("div",{staticClass:"my-3"},[n("h4",{staticClass:"font-weight-bold"},[e._v("Quick Add User to Existing Permissions")]),e._v(" Coming soon! ")]):e._e()])],1)],1)])},en=[],tn=(n("b0c0"),{props:["user_pk"],components:{ErrorComponent:_["default"]},store:l["a"],data:function(){return{tab:"roles",error_message:""}},created:function(){var e=this;this.getPermissionsForItem({item_id:this.group_pk,item_model:"group"}).catch((function(t){e.error_message=t,console.log(t)}))},computed:Object(a["a"])(Object(a["a"])(Object(a["a"])({},c["a"].mapState({user_permissions:function(e){return e.permissions.current_user_permissions},group_name:function(e){return e.group_name},group_pk:function(e){return e.group_pk},roles:function(e){return e.governance.roles}})),c["a"].mapGetters(["permissionsForItem","getUser","permissionsForRole"])),{},{title:function(){return this.user?this.user.name+"'s privileges in "+this.group_name:"user "+self.user_pk+"'s privileges in "+this.group_name},user:function(){return this.getUser(this.user_pk)},in_roles:function(){return this.user_annotated_roles.filter((function(e){return 1==e.user_is_member}))},out_roles:function(){return this.user_annotated_roles.filter((function(e){return 0==e.user_is_member}))},user_annotated_roles:function(){var e=[];for(var t in this.roles){var n=this.roles[t];n["user_is_member"]=n.current_members.indexOf(parseInt(this.user_pk))>-1,n["permissions"]=this.permissionsForRole(n.name),e.push(n)}return this.roles}}),methods:Object(a["a"])(Object(a["a"])({},c["a"].mapActions(["checkPermissions","getPermissionsForItem","addUsersToRole","removeUsersFromRole"])),{},{to_list:function(e){var t=Array.from(e,(function(e){return e.name}));return t.join(", ")},add_role:function(e){var t=this;this.addUsersToRole({role_name:e.name,user_pks:[parseInt(this.user_pk)]}).catch((function(e){t.error_message=e}))},remove_role:function(e){var t=this;this.removeUsersFromRole({role_name:e.name,user_pks:[parseInt(this.user_pk)]}).catch((function(e){t.error_message=e}))}})}),nn=tn,sn=Object(d["a"])(nn,Zt,en,!1,null,null,null),on=sn.exports,rn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[n("h4",[e._v("Advanced Permissions for "+e._s(e.item_model)+" "+e._s(e.item_id))]),n("div",{staticClass:"my-3"},[n("p",[e._v("When the governing permission is turned on, any governor can take any action on this item, unless it is an action reserved only for owners. Governing permissions are typically turned on by default.")]),e.governing_permission_enabled?n("span",[e._v("The governing permission is "),n("b",[e._v("turned on")]),e._v(".")]):n("span",[e._v("The governing permission is "),n("b",[e._v("turned off")]),e._v(".")]),e.governing_permission_enabled&&e.user_permissions.disable_governing_permission?n("b-button",{staticStyle:{"font-size":"0.7em"},attrs:{size:"sm",pill:"",variant:"outline-secondary"},on:{click:function(t){return e.change_permission_override("governing","disable")}}},[e._v("Turn it off.")]):e._e(),!e.governing_permission_enabled&&e.user_permissions.enable_governing_permission?n("b-button",{staticStyle:{"font-size":"0.7em"},attrs:{size:"sm",pill:"",variant:"outline-secondary"},on:{click:function(t){return e.change_permission_override("governing","enable")}}},[e._v("Turn it on.")]):e._e()],1),n("div",{staticClass:"mt-3 mb-2"},[n("p",[e._v("When the foundational permission is turned on, only owners can act on the object. Any specific permissions set below will not apply, and neither will the governing permission. Foundational permissions are typically turned off by default.")]),e.foundational_permission_enabled?n("span",[e._v("The foundational permission is "),n("b",[e._v("turned on")]),e._v(", meaning all changes to this object must be approved by the group's owners. The permissions set below "),n("span",{staticClass:"text-danger"},[e._v("will not apply")]),e._v(".")]):n("span",[e._v("The foundational permission is "),n("b",[e._v("turned off")]),e._v(".")]),e.foundational_permission_enabled&&e.user_permissions.disable_foundational_permission?n("b-button",{staticStyle:{"font-size":"0.7em"},attrs:{size:"sm",pill:"",variant:"outline-secondary"},on:{click:function(t){return e.change_permission_override("foundational","disable")}}},[e._v("Turn it off.")]):e._e(),!e.foundational_permission_enabled&&e.user_permissions.enable_foundational_permission?n("b-button",{staticStyle:{"font-size":"0.7em"},attrs:{size:"sm",pill:"",variant:"outline-secondary"},on:{click:function(t){return e.change_permission_override("foundational","enable")}}},[e._v("Turn it on.")]):e._e()],1),n("error-component",{attrs:{message:e.error_message}})],1)},an=[],cn={props:["item_id","item_model","item_name"],components:{ErrorComponent:_["default"]},store:l["a"],data:function(){return{error_message:""}},created:function(){var e=this;this.getFoundationalForItem()||this.getPermissionsForItem({item_id:this.item_id,item_model:this.item_model}).catch((function(t){e.error_message=t}));var t=this.item_model+"_"+this.item_id;this.checkPermissions({permissions:{enable_governing_permission:{alt_target:t},disable_governing_permission:{alt_target:t},enable_foundational_permission:{alt_target:t},disable_foundational_permission:{alt_target:t}}}).catch((function(t){e.error_message=t,console.log(t)}))},computed:Object(a["a"])(Object(a["a"])(Object(a["a"])({},c["a"].mapState({user_permissions:function(e){return e.permissions.current_user_permissions}})),c["a"].mapGetters(["permissionsForItem","getFoundationalForItem","getGoverningForItem"])),{},{item_key:function(){return this.item_id+"_"+this.item_model},governing_permission_enabled:function(){return this.item_key?this.getGoverningForItem(this.item_key):void 0},foundational_permission_enabled:function(){return this.item_key?this.getFoundationalForItem(this.item_key):void 0}}),methods:Object(a["a"])(Object(a["a"])({},c["a"].mapActions(["checkPermissions","getPermissionsForItem","changePermissionOverride"])),{},{change_permission_override:function(e,t){var n=this;this.changePermissionOverride({item_id:this.item_id,item_model:this.item_model,enable_or_disable:t,governing_or_foundational:e}).catch((function(e){n.error_message=e.message}))}})},ln=cn,_n=Object(d["a"])(ln,rn,an,!1,null,null,null),mn=_n.exports,un=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[n("h5",[e._v("Conditions for "),e.leadership_type?n("span",{staticClass:"text-info"},[e._v(e._s(e.group_name)+"'s "+e._s(e.leadership_type)+"s")]):e._e(),e.permission?n("span",[e._v("permission "),n("span",{staticClass:"text-info"},[e._v("'"+e._s(e.permission.display)+"'")])]):e._e()]),n("span",{attrs:{id:"existing_condition"}},[e._l(e.conditions,(function(t,i){return n("div",{key:t.element_id,staticClass:"mx-auto"},[n("div",{staticClass:"rounded bg-light border p-3 mt-3 text-center edit-condition-text"},[n("p",[e._v(e._s(t.how_to_pass)+" "),n("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal",value:"edit_condition_modal_"+t.element_id,expression:"'edit_condition_modal_'+condition.element_id"}],staticClass:"btn-sm btn-light border edit-condition-button"},[e._v("edit")])],1),n("edit-condition-component",{attrs:{element_id:t.element_id},on:{finished:e.clear_state}})],1),i<e.conditions.length-1?n("p",{staticClass:"text-center p-1"},[e._v("AND")]):e._e()])})),e.conditions&&0!=e.conditions.length?e._e():n("span",[e._v("There are no conditions set.")])],2),n("hr"),e.condition_selected?e._e():n("span",[e.show_select?e._e():n("b-button",{staticClass:"btm-sm mt-3",attrs:{id:"new_condition"},on:{click:function(t){e.show_select=!0}}},[e._v(" Add new condition")]),e.show_select&&!e.condition_selected?n("span",[n("b",[e._v("Select condition to add")]),[n("div",[n("b-form-select",{attrs:{options:e.condition_options,"select-size":4,name:"condition_select"},model:{value:e.condition_selected,callback:function(t){e.condition_selected=t},expression:"condition_selected"}})],1)]],2):e._e(),n("error-component",{attrs:{message:e.error_message}})],1),e.condition_selected?n("edit-condition-component",{attrs:{condition_selected:e.condition_selected},on:{finished:e.clear_state}}):e._e()],1)},dn=[],pn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-modal",{attrs:{id:e.modal_id,size:"lg",title:e.modal_title,"hide-footer":""},on:{hide:function(t){return e.wrap_up()}}},[e.element_id?n("b-button",{attrs:{id:"delete_condition_button"},on:{click:function(t){return e.remove_condition()}}},[e._v("delete condition")]):e._e(),e._l(e.configuration_fields,(function(t){return n("complex-configurable-field-component",{key:t.field_name,attrs:{field:t,conditioned_on:e.conditioned_on},on:{"field-changed":e.change_field}})})),n("error-component",{attrs:{message:e.error_message}}),e.condition_selected?n("b-button",{staticClass:"mt-3",attrs:{size:"sm",id:"save_condition_button"},on:{click:function(t){return e.add_condition()}}},[e._v(" add condition")]):e._e(),e.element_id?n("b-button",{staticClass:"mt-3",attrs:{size:"sm",id:"save_edit_condition_button"},on:{click:function(t){return e.edit_condition()}}},[e._v(" edit condition")]):e._e()],2)},fn=[],hn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"my-3"},[e.can_be_dependency_field(e.field)?e._e():n("span",[n("field-component",{attrs:{initial_field:e.field},on:{"field-changed":e.change_field}})],1),e.can_be_dependency_field(e.field)&&!e.is_dependency_field(e.field.value)?n("span",[n("b-container",[n("b-row",[n("b-col",{attrs:{cols:"8"}},[n("field-component",{attrs:{initial_field:e.field},on:{"field-changed":e.change_field}})],1),n("b-col",[n("dependent-field-manager-component",{attrs:{field:e.field},on:{"field-changed":e.change_field}})],1)],1)],1)],1):e._e(),e.can_be_dependency_field(e.field)&&e.is_dependency_field(e.field.value)?n("span",[n("dependent-field-manager-component",{attrs:{field:e.field},on:{"field-changed":e.change_field}})],1):e._e()])},gn=[],bn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[e.model_selected?n("span",[e.field.display?n("span",[e._v(e._s(e.field.display))]):e._e(),e.field.label?n("span",[e._v(e._s(e.field.label))]):e._e(),n("b-button",{staticClass:"btn-sm btn-info"},[n("small",[n("b",[e._v("set as: "+e._s(e.model_selected)),e.field_selected?n("span",[e._v("'s "+e._s(e.field_selected))]):e._e()])]),n("span",{directives:[{name:"b-modal",rawName:"v-b-modal",value:e.dependent_field_modal_id,expression:"dependent_field_modal_id"}],staticClass:"badge badge-info ml-1 edit-dependent-field"},[e._v("🖉")]),n("span",{staticClass:"badge badge-info ml-1 delete-dependent-field",on:{click:function(t){return e.remove_dependent_field()}}},[e._v("🗑")])])],1):n("span",[n("span",{directives:[{name:"b-modal",rawName:"v-b-modal",value:e.dependent_field_modal_id,expression:"dependent_field_modal_id"}],staticClass:"badge badge-info add-dependent-field"},[e._v(" add dependency")])]),n("dependent-field-component",{attrs:{modal_id:e.dependent_field_modal_id,field:e.field,initial_model_selected:e.model_selected,initial_field_selected:e.field_selected},on:{"change-dependent-field":e.change_dependent_field}})],1)},vn=[],kn=(n("1276"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-modal",{attrs:{size:"lg",title:"Configure your dependent field","hide-footer":"",id:e.modal_id}},[e._v(" Instead of providing a value now, you can make the value of this field depend on something related, for instance the action which is being evaluated by the permission/condition. "),n("hr"),e._v(" Choose object to depend on: "),n("span",{staticClass:"my-3",attrs:{id:"model_options"}},e._l(e.model_options,(function(t){return n("b-button",{key:t,staticClass:"mr-2",attrs:{id:"depend_on_model_"+t,variant:e.button_variant(t)},on:{click:function(n){e.model_selected=t}}},[e._v(e._s(t))])})),1),e.model_selected?n("div",{staticClass:"block my-2",attrs:{id:"model_config"}},[e._v(" Select field on "+e._s(e.model_selected)+" (leave blank to use "+e._s(e.model_selected)+" itself):"),n("br"),n("b-form-select",{staticClass:"dependent-field-select",attrs:{options:e.field_options,name:"dependent-field-select"},model:{value:e.field_selected,callback:function(t){e.field_selected=t},expression:"field_selected"}})],1):e._e(),n("error-component",{attrs:{message:e.error_message}}),n("hr"),n("div",{staticClass:"block mt-3"},[n("b-button",{attrs:{id:"save-dependent-field"},on:{click:function(t){return e.change_dependent_field()}}},[e._v("save "),e.model_selected?n("span",[e._v(" '"+e._s(e.model_selected)),e.field_selected?n("span",[e._v(" "+e._s(e.field_selected))]):e._e(),e._v("'")]):e._e()]),n("b-button",{on:{click:function(t){return e.remove_dependent_field()}}},[e._v("remove dependent field")])],1)],1)}),yn=[],On={props:["modal_id","field","initial_model_selected","initial_field_selected"],components:{ErrorComponent:_["default"]},store:l["a"],data:function(){return{model_selected:null,field_selected:null,field_options:[],permission:null,error_message:null}},inject:["dependency_scope"],created:function(){this.model_selected=this.initial_model_selected,this.field_selected=this.initial_field_selected,this.permission=this.$parent.$parent.$parent.$parent.$parent.$parent.permission},watch:{initial_model_selected:function(e){this.model_selected=e},initial_field_selected:function(e){this.field_selected=e},model_selected:function(e){this.field_options=this.get_field_options(e),this.field_selected=null}},computed:Object(a["a"])(Object(a["a"])({},c["a"].mapState({model_and_field_options_unprocessed:function(e){return e.permissions.dependent_field_options}})),{},{model_options:function(){var e=this,t=[];return this.permission.dependent_field_options.forEach((function(n){t.push(e.replace_generic_models(n))})),t},field_option_selected:function(){var e=this,t=null;return this.field_options.forEach((function(n){n.text==e.field_selected&&(t=n)})),t}}),methods:{get_field_options:function(e){var t=this,n=this.model_and_field_options_unprocessed[e],i=[];return"action"==e&&this.permission.change_field_options.forEach((function(e){return n.push(e)})),n.forEach((function(e){t.match_field_types(t.field.type,e.type)&&i.push(e)})),i},match_field_types:function(e,t){var n=["ActorListField","ActorPKField","ActorField"],i=["RoleListField","RoleField"];return n.indexOf(e)>-1&&n.indexOf(t)>-1||(i.indexOf(e)>-1&&i.indexOf(t)>-1||e==t)},replace_generic_models:function(e){var t={forum:{commented_object:"post",post:"commented_object"}};return this.dependency_scope in t&&e in t[this.dependency_scope]?t[this.dependency_scope][e]:e},get_transform_string:function(){if(!this.field_selected)return"";if("ActorListField"==this.field.type){if("ActorPKField"==this.field_option_selected.type)return"||to_list";if("ActorField"==this.field_option_selected.type)return"||to_pk_in_list"}if("ActorPKField"==this.field.type){if("ActorListField"==this.field_option_selected.type)return"||from_list";if("ActorField"==this.field_option_selected.type)return"||to_pk"}return"RoleListField"==this.field.type&&"RoleField"==this.field_option_selected.type?"||to_list":"RoleField"==this.field.type&&"RoleListField"==this.field_option_selected.type?"||from_list":void 0},is_change_field:function(){var e=this,t=!1;return this.permission.change_field_options.forEach((function(n){n.text==e.field_selected&&(t=!0)})),t},button_variant:function(e){return e==this.model_selected?"info":"secondary"},validate_selection:function(){return!(!this.field_selected&&"ObjectField"!=this.field.type)||(this.error_message="This field cannot be set to an object. You must chose a field on an object.",!1)},change_dependent_field:function(){this.validate_selection()&&(this.$emit("change-dependent-field",{model_selected:this.model_selected,field_selected:this.field_option_selected.text,transform_string:this.get_transform_string(),field_is_change_field:this.is_change_field()}),this.$bvModal.hide(this.modal_id))},remove_dependent_field:function(){this.$emit("change-dependent-field",{model_selected:null}),this.$bvModal.hide(this.modal_id)}}},wn=On,Cn=Object(d["a"])(wn,kn,yn,!1,null,null,null),xn=Cn.exports,En={components:{DependentFieldComponent:xn},store:l["a"],props:["field"],data:function(){return{model_selected:null,field_selected:null}},created:function(){this.parse_string(this.field.value)},watch:{field:function(e){this.parse_string(e.value)}},computed:{dependent_field_modal_id:function(){var e="configure_dependent_field_"+Math.random();return e.replace(".","")}},methods:{change_dependent_field:function(e){this.model_selected=e.model_selected,this.field_selected=e.field_selected;var t=this.reform_string(e.transform_string,e.field_is_change_field);this.$emit("field-changed",{field_name:this.field.field_name,new_value:t})},parse_string:function(e){if(e&&"string"==typeof e){var t=e.substring(2,e.length-2);t=t.split("||")[0];var n=t.split(".");"context"==n[0]?(this.model_selected=n[1],this.field_selected=null,n.length>=3&&("action"==n[1]&&"change"==n[2]?this.field_selected=n[3]:this.field_selected=n[2])):console.log("problem with "+e)}},reform_string:function(e,t){if(this.model_selected){var n="{{context."+this.model_selected.toLowerCase();return this.field_selected&&(t&&(n+=".change"),n+="."+this.field_selected),e&&(n+=e),n+="}}",n}return null}}},Rn=En,An=Object(d["a"])(Rn,bn,vn,!1,null,null,null),Pn=An.exports,Sn={store:l["a"],props:["field","conditioned_on"],components:{FieldComponent:Et["a"],DependentFieldManagerComponent:Pn},methods:{can_be_dependency_field:function(e){return!(!this.conditioned_on||"leadership"==this.conditioned_on)&&e.can_depend},is_dependency_field:function(e){return!(!e||"string"!=typeof e||"}}"!=e.substring(e.length-2,e.length)||"{{"!=e.substring(0,2))},change_field:function(e){this.$emit("field-changed",e)}}},jn=Sn,In=Object(d["a"])(jn,hn,gn,!1,null,null,null),Dn=In.exports,Tn={components:{ErrorComponent:_["default"],ComplexConfigurableFieldComponent:Dn},store:l["a"],mixins:[b["a"]],props:["element_id","condition_selected"],data:function(){return{configuration_fields:[],error_message:""}},computed:Object(a["a"])(Object(a["a"])({},c["a"].mapGetters(["getConditionConfigurationFields","getPermissionConditionConfigurationFieldsWithData","getLeadershipConditionConfigurationFieldsWithData"])),{},{modal_id:function(){return this.element_id?"edit_condition_modal_"+this.element_id:this.condition_selected?"edit_condition_modal_new":void 0},modal_title:function(){return this.element_id?"Configuring "+this.params.condition_type+" (id: "+this.element_id+")":this.condition_selected?"Configuring "+this.params.condition_type+" (new)":void 0},conditioned_on:function(){return"permission"in this.$parent&&this.$parent.permission?"permission":"leadership"},condition_type:function(){return this.condition_selected?this.condition_selected:this.element_id?this.$parent.conditions_with_keys[this.element_id]["type"]:void 0},params:function(){var e={condition_type:this.condition_type};return this.element_id&&Object.assign(e,{element_id:this.element_id}),"permission"==this.conditioned_on?Object.assign(e,{permission_or_leadership:"permission",permission_id:this.$parent.permission.pk}):Object.assign(e,{permission_or_leadership:"leadership",leadership_type:this.$parent.leadership_type}),e}}),created:function(){var e=this;this.configuration_fields=this.get_configuration_fields(),this.condition_selected&&this.$nextTick((function(){e.$bvModal.show(e.modal_id)}))},methods:Object(a["a"])(Object(a["a"])({},c["a"].mapActions(["addCondition","editCondition","removeCondition"])),{},{get_configuration_fields:function(){var e=[];if(this.condition_selected)return e=this.getConditionConfigurationFields(this.condition_selected),Object.values(e);if(this.element_id){if(this.$parent.permission)return e=this.getPermissionConditionConfigurationFieldsWithData(this.$parent.permission.pk,this.element_id),Object.values(e);if(this.$parent.leadership_type)return e=this.getLeadershipConditionConfigurationFieldsWithData(this.$parent.leadership_type,this.element_id),Object.values(e)}return[]},wrap_up:function(){this.$emit("finished"),this.$bvModal.hide(this.modal_id)},add_condition:function(){var e=this,t=this.params;t["combined_condition_data"]=this.configuration_fields,this.addCondition(t).then((function(t){return e.wrap_up()})).catch((function(t){return e.error_message=t}))},edit_condition:function(){var e=this,t=this.params;t["combined_condition_data"]=this.configuration_fields,this.editCondition(t).then((function(t){return e.wrap_up()})).catch((function(t){return e.error_message=t}))},remove_condition:function(){var e=this;this.removeCondition(this.params).then((function(t){return e.wrap_up()})).catch((function(t){return e.error_message=t}))}})},Mn=Tn,Nn=Object(d["a"])(Mn,pn,fn,!1,null,null,null),Fn=Nn.exports,Ln={store:l["a"],props:["conditioned_on","dependency_scope"],components:{ErrorComponent:_["default"],EditConditionComponent:Fn},data:function(){return{show_select:!1,leadership_type:null,condition_selected:"",error_message:""}},provide:function(){var e=this.dependency_scope?this.dependency_scope:"group";return{dependency_scope:e}},created:function(){["owner","governor"].indexOf(this.conditioned_on)>-1?this.leadership_type=this.conditioned_on:this.fetchMissingPermission({pk:this.conditioned_on}).catch((function(e){return console.log(e)}))},computed:Object(a["a"])(Object(a["a"])({},c["a"].mapState({owner_condition:function(e){return e.permissions.owner_condition},governor_condition:function(e){return e.permissions.governor_condition},condition_options:function(e){return e.permissions.condition_options},permissions:function(e){return e.permissions.permissions},group_name:function(e){return e.group_name}})),{},{permission:function(){if(!this.leadership_type)return this.permissions[this.conditioned_on]},conditions_with_keys:function(){return this.permission&&this.permission.condition?this.permission.condition:"owner"==this.leadership_type&&this.owner_condition?this.owner_condition:"governor"==this.leadership_type&&this.governor_condition?this.governor_condition:void 0},conditions:function(){if(this.conditions_with_keys){var e=this.conditions_with_keys;return delete e.how_to_pass_overall,Object.values(e).sort((function(e,t){return e.how_to_pass<t.how_to_pass?-1:e.how_to_pass>t.how_to_pass?1:0}))}return[]}}),methods:Object(a["a"])(Object(a["a"])({},c["a"].mapActions(["fetchMissingPermission"])),{},{clear_state:function(){this.condition_selected=null,this.show_select=!1}})},Un=Ln,$n=Object(d["a"])(Un,un,dn,!1,null,null,null),Gn=$n.exports,qn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-modal",{attrs:{id:"forum_modal",title:e.title_string,size:"md",visible:!0,"hide-footer":""},on:{hide:function(t){return e.$router.go(-1)}}},[n("b-form-group",{attrs:{id:"name_form_group",label:"Forum name:","label-for":"forum_name"}},[n("b-form-input",{attrs:{id:"forum_name",name:"forum_name",required:"",placeholder:"Please pick a name"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),n("b-form-group",{attrs:{id:"description_form_group",label:"Forum description:","label-for":"forum_description"}},[n("b-form-textarea",{attrs:{id:"forum_description",name:"forum_description",placeholder:"Add a description"},model:{value:e.description,callback:function(t){e.description=t},expression:"description"}})],1),e.forum_id?e._e():n("b-button",{staticClass:"btn-sm",attrs:{variant:"outline-secondary",id:"add_forum_button"},on:{click:e.add_forum}},[e._v("submit")]),e.forum_id?n("b-button",{staticClass:"btn-sm",attrs:{variant:"outline-secondary",id:"edit_forum_save_button"},on:{click:e.edit_forum}},[e._v("submit")]):e._e(),n("error-component",{attrs:{message:e.error_message}})],1)},zn=[],Vn=(n("a4d3"),n("e01a"),{props:["forum_id"],components:{ErrorComponent:_["default"]},store:l["a"],data:function(){return{name:null,description:null,error_message:null}},created:function(){this.forum_id&&(forum=this.getForumData(this.forum_id),this.name=forum.name,this.description=forum.description)},computed:Object(a["a"])(Object(a["a"])(Object(a["a"])({},c["a"].mapState({forums:function(e){return e.forums.forums}})),c["a"].mapGetters(["getForumData"])),{},{title_string:function(){return this.forum_id?"Edit forum '"+this.name+"'":"Add a new forum"}}),methods:Object(a["a"])(Object(a["a"])({},c["a"].mapActions(["addForum","editForum"])),{},{add_forum:function(){var e=this;this.addForum({name:this.name,description:this.description}).catch((function(t){console.log(t),e.error_message=t}))},edit_forum:function(){var e=this;this.editForum({pk:parseInt(this.forum_id),name:this.name,description:this.description}).catch((function(t){e.error_message=t}))}})}),Wn=Vn,Bn=Object(d["a"])(Wn,qn,zn,!1,null,null,null),Yn=Bn.exports,Hn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.forum_name?n("span",[n("h3",{staticClass:"mt-3"},[e._v(e._s(e.forum_name))]),n("p",[e._v(e._s(e.forum_description))]),e.user_permissions.edit_forum?n("router-link",{attrs:{to:{name:"edit-forum",params:{forum_id:e.forum_id}}}},[n("b-button",{staticClass:"btn-sm",attrs:{variant:"outline-secondary",id:"edit_forum_button"}},[e._v(" edit forum info")])],1):e._e(),e.user_permissions.delete_forum&&!e.is_governance_forum?n("b-button",{staticClass:"btn-sm",attrs:{variant:"outline-secondary",id:"delete_forum_button"},on:{click:function(t){return e.delete_forum(e.forum_id)}}},[e._v("delete forum")]):e._e(),n("router-link",{attrs:{to:{name:"action-history",params:{item_id:e.forum_id,item_model:"forum",item_name:e.forum_name}}}},[n("b-button",{staticClass:"btn-sm",attrs:{variant:"outline-secondary",id:"forum_history_button"}},[e._v("forum history")])],1),n("router-link",{attrs:{to:{name:"item-permissions",params:{item_id:e.forum_id,item_model:"forum",item_name:e.forum_name}}}},[n("b-button",{staticClass:"btn-sm",attrs:{variant:"outline-secondary",id:"forum_permissions_button"}},[e._v("forum permissions")])],1),n("error-component",{attrs:{message:e.delete_error_message}}),n("hr"),e.user_permissions.add_post?n("router-link",{attrs:{to:{name:"add-new-post"}}},[n("b-button",{staticClass:"btn-sm mr-3 mb-3",attrs:{variant:"outline-secondary",id:"add_post_button"}},[e._v(" + add post")])],1):e._e(),n("error-component",{attrs:{message:e.list_post_error_message}}),e._l(e.posts,(function(t){var i=t.pk,s=t.title,o=t.content,r=t.author,a=t.created;return n("b-card",{key:i,staticClass:"bg-light text-info border-secondary mb-3"},[n("router-link",{attrs:{to:{name:"post-detail",params:{forum_id:e.forum_id,post_id:i}}}},[n("b-card-title",{staticClass:"post-link"},[e._v(e._s(s))])],1),n("p",{staticClass:"mb-1 text-secondary post-content"},[e._v(" "+e._s(e.shorten_text(o,100))+" ")]),n("small",{staticClass:"text-muted"},[e._v("Posted by "+e._s(r)+" on "+e._s(e.display_date(a)))])],1)})),0===Object.keys(e.posts).length?n("span",[e._v("There are no posts yet in this forum.")]):e._e()],2):e._e()},Jn=[],Kn={props:["forum_id"],store:l["a"],components:{ErrorComponent:_["default"]},mixins:[b["b"]],data:function(){return{delete_error_message:null,add_post_error_message:null,list_post_error_message:null}},created:function(){var e=this;this.getPosts({forum_pk:parseInt(this.forum_id)}).catch((function(t){e.list_post_error_message="Error getting post data from server "}));var t="forum_"+this.forum_id;this.checkPermissions({permissions:{edit_forum:{alt_target:t},delete_forum:{alt_target:t},add_post:{alt_target:t}}}).catch((function(t){e.error_message=t,console.log(t)}))},computed:Object(a["a"])(Object(a["a"])(Object(a["a"])({},c["a"].mapState({user_permissions:function(e){return e.permissions.current_user_permissions}})),c["a"].mapGetters(["getForumData","getPostsDataForForum","getUserName"])),{},{posts:function(){var e=this.get_forum();if(e)return this.getPostsDataForForum(this.forum_id)},forum_name:function(){var e=this.get_forum();if(e)return e.name},forum_description:function(){var e=this.get_forum();if(e)return e.description},is_governance_forum:function(){var e=this.get_forum();if(e)return"Gov"==e.special}}),methods:Object(a["a"])(Object(a["a"])({},c["a"].mapActions(["checkPermissions","getPosts","addPost","deleteForum"])),{},{display_date:function(e){return Date(e)},get_forum:function(){if(this.forum_id){var e=this.getForumData(this.forum_id);if(e)return e}},delete_forum:function(e){var t=this;this.deleteForum({pk:e}).then((function(e){console.log(e),t.$router.push({name:"home"})})).catch((function(e){t.delete_error_message=e}))},add_post:function(){var e=this;this.addPost({forum_pk:this.forum_id,title:this.post_title,content:this.post_content}).catch((function(t){e.add_post_error_message=t}))}})},Qn=Kn,Xn=Object(d["a"])(Qn,Hn,Jn,!1,null,null,null),Zn=Xn.exports,ei=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[n("h3",[e._v(e._s(e.post.title))]),n("small",{staticClass:"text-muted"},[e._v("Posted in "+e._s(e.forum_name)+" on "+e._s(e.display_date(e.post.created))+" by "+e._s(e.post.author))]),n("div",{staticClass:"my-3"},[e.user_permissions.edit_post?n("router-link",{attrs:{to:{name:"edit-post",params:{forum_id:e.forum_id,post_id:e.post_id}}}},[n("b-button",{staticClass:"btn-sm",attrs:{variant:"outline-secondary",id:"edit_post_button"}},[e._v(" edit post")])],1):e._e(),e.user_permissions.delete_post?n("b-button",{staticClass:"btn-sm",attrs:{variant:"outline-secondary",id:"delete_post_button"},on:{click:function(t){return e.delete_post(e.post_id)}}},[e._v("delete post")]):e._e(),n("router-link",{attrs:{to:{name:"action-history",params:{item_id:e.post_id,item_model:"post",item_name:e.post.title}}}},[n("b-button",{staticClass:"btn-sm",attrs:{variant:"outline-secondary",id:"post_history_button"}},[e._v("post history")])],1),n("router-link",{attrs:{to:{name:"item-permissions",params:{item_id:e.post_id,item_model:"post",item_name:e.post.title}}}},[n("b-button",{staticClass:"btn-sm",attrs:{variant:"outline-secondary"}},[e._v("post permissions")])],1),n("error-component",{attrs:{message:e.delete_error_message}})],1),n("error-component",{attrs:{message:e.get_post_error_message}}),n("p",{staticClass:"mb-3 text-secondary"},[e._v(" "+e._s(e.post.content)+" ")]),n("CommentListComponent",{staticClass:"mt-3",attrs:{item_id:e.post_id,item_model:"post"}})],1)},ti=[],ni={props:["forum_id","post_id"],store:l["a"],components:{ErrorComponent:_["default"],CommentListComponent:re},mixins:[b["b"]],data:function(){return{delete_error_message:null,get_post_error_message:null,post:{title:"",created:"",author:""},forum_name:"a forum"}},created:function(){var e=this;this.getPost({post_pk:this.post_id}).then((function(t){e.post=e.getPostData(e.post_id),e.post.author=e.getUserName(e.post.author)})).catch((function(t){console.log("Failed to get post: ",e.post_id,t)})),this.getForum({forum_pk:parseInt(this.forum_id)}).then((function(t){e.forum_name=e.getForumData(e.forum_id).name})).catch((function(t){console.log("Failed to get forum: ",e.forum_id,t)}));var t="post_"+this.post_id;this.checkPermissions({permissions:{edit_post:{alt_target:t},delete_post:{alt_target:t}}}).catch((function(t){e.error_message=t,console.log(t)}))},computed:Object(a["a"])(Object(a["a"])({},c["a"].mapState({user_permissions:function(e){return e.permissions.current_user_permissions}})),c["a"].mapGetters(["getUserName","getPostData","getForumData"])),methods:Object(a["a"])(Object(a["a"])({},c["a"].mapActions(["checkPermissions","deletePost","getPost","getForum"])),{},{display_date:function(e){return Date(e)},delete_post:function(e){var t=this;this.deletePost({pk:e,forum_pk:this.forum_id}).then((function(e){t.$router.push({name:"forum-detail",params:{forum_id:t.forum_id}})})).catch((function(e){t.delete_error_message=e}))}})},ii=ni,si=Object(d["a"])(ii,ei,ti,!1,null,null,null),oi=si.exports,ri=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-modal",{attrs:{id:"post_modal",title:e.title_string,size:"md",visible:!0,"hide-footer":""},on:{hide:function(t){return e.$router.go(-1)}}},[n("b-form-group",{attrs:{id:"title",label:"Post title:","label-for":"post_title"}},[n("b-form-input",{attrs:{id:"post_title",name:"post_title",required:"",placeholder:"Add a title"},model:{value:e.title,callback:function(t){e.title=t},expression:"title"}})],1),n("b-form-group",{attrs:{id:"content",label:"Post content:","label-for":"post_content"}},[n("b-form-textarea",{attrs:{id:"post_content",name:"post_content",placeholder:"Add some content"},model:{value:e.content,callback:function(t){e.content=t},expression:"content"}})],1),e.post_id?e._e():n("b-button",{staticClass:"btn-sm",attrs:{variant:"outline-secondary",id:"add_post_save_button"},on:{click:e.add_post}},[e._v("submit")]),e.post_id?n("b-button",{staticClass:"btn-sm",attrs:{variant:"outline-secondary",id:"edit_post_save_button"},on:{click:e.edit_post}},[e._v("submit")]):e._e(),n("error-component",{attrs:{message:e.error_message}})],1)},ai=[],ci={props:["forum_id","post_id"],store:l["a"],components:{ErrorComponent:_["default"]},data:function(){return{title:null,content:null,error_message:null}},created:function(){this.post_id&&(post=this.getPostData(this.post_id),this.title=post.title,this.content=post.content)},computed:Object(a["a"])(Object(a["a"])({},c["a"].mapGetters(["getPostData"])),{},{title_string:function(){return this.post_id?"Edit post '"+this.title+"'":"Add a new post"}}),methods:Object(a["a"])(Object(a["a"])({},c["a"].mapActions(["addPost","editPost"])),{},{add_post:function(){var e=this;this.addPost({forum_pk:this.forum_id,title:this.title,content:this.content}).then((function(t){e.$router.go(-1)})).catch((function(t){e.error_message=t}))},edit_post:function(){var e=this;this.editPost({pk:this.post_id,title:this.title,content:this.content}).then((function(t){e.$router.go(-1)})).catch((function(t){e.error_message=t}))}})},li=ci,_i=Object(d["a"])(li,ri,ai,!1,null,null,null),mi=_i.exports,ui=n("a669"),di=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-modal",{attrs:{id:"list_modal",title:e.title_string,size:"lg",visible:!0,"hide-footer":""},on:{hide:function(t){return e.$router.go(-1)}}},[n("b-form-group",{attrs:{id:"name_form_group",label:"List name:","label-for":"list_name"}},[n("b-form-input",{attrs:{id:"list_name",name:"list_name",required:"",placeholder:"Please pick a name"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),n("b-form-group",{attrs:{id:"description_form_group",label:"List description:","label-for":"list_description"}},[n("b-form-textarea",{attrs:{id:"list_description",name:"list_description",placeholder:"Add a description"},model:{value:e.description,callback:function(t){e.description=t},expression:"description"}})],1),n("span",{staticClass:"my-4",attrs:{id:"list_columns"}},[n("b-table-lite",{attrs:{striped:"",items:e.columns,"caption-top":""},scopedSlots:e._u([{key:"table-caption",fn:function(){return[e._v("Existing columns")]},proxy:!0},{key:"cell(delete)",fn:function(t){return[n("b-button",{attrs:{id:"delete_column_"+t.item.name},on:{click:function(n){return e.delete_column(t.item)}}},[e._v("delete")])]}}])}),n("error-component",{attrs:{message:e.column_error_message,dismissable:!0}}),n("p",{staticClass:"my-2"},[e._v("Add a new column:")]),n("b-form",{attrs:{inline:""}},[n("b-form-input",{staticClass:"mr-2",attrs:{id:"column_name",name:"column_name",placeholder:"column name",required:""},model:{value:e.column_name,callback:function(t){e.column_name=t},expression:"column_name"}}),n("b-form-input",{staticClass:"mr-2",attrs:{id:"column_default",name:"column_default",placeholder:"default value"},model:{value:e.column_default,callback:function(t){e.column_default=t},expression:"column_default"}}),n("input",{directives:[{name:"model",rawName:"v-model",value:e.column_required,expression:"column_required"}],staticClass:"mr-2",attrs:{type:"checkbox",id:"column_required",name:"column_required"},domProps:{checked:Array.isArray(e.column_required)?e._i(e.column_required,null)>-1:e.column_required},on:{change:function(t){var n=e.column_required,i=t.target,s=!!i.checked;if(Array.isArray(n)){var o=null,r=e._i(n,o);i.checked?r<0&&(e.column_required=n.concat([o])):r>-1&&(e.column_required=n.slice(0,r).concat(n.slice(r+1)))}else e.column_required=s}}}),e._v(" required "),n("b-button",{staticClass:"btn-sm ml-2",attrs:{variant:"info",id:"add_new_col_button"},on:{click:function(t){return e.add_column()}}},[e._v("add")])],1)],1),e.list_id?e._e():n("b-button",{staticClass:"btn-sm mt-4",attrs:{variant:"outline-secondary",id:"add_list_button"},on:{click:e.add_list}},[e._v("submit")]),e.list_id?n("b-button",{staticClass:"btn-sm mt-4",attrs:{variant:"outline-secondary",id:"edit_list_save_button"},on:{click:e.edit_list}},[e._v("submit")]):e._e(),n("error-component",{attrs:{message:e.error_message}})],1)},pi=[],fi=(n("7db0"),n("a434"),{props:["list_id"],components:{ErrorComponent:_["default"]},store:l["a"],data:function(){return{name:null,description:null,error_message:null,list_loaded:!1,columns:[],column_name:"",column_required:!1,column_default:"",column_error_message:null}},created:function(){this.list_id&&!this.lists_loaded&&this.getLists(),this.populate_columns()},watch:{lists_loaded:function(e){this.populate_columns()}},computed:Object(a["a"])(Object(a["a"])(Object(a["a"])({},c["a"].mapState({lists:function(e){return e.simplelists.lists}})),c["a"].mapGetters(["getListData"])),{},{title_string:function(){return this.list_id?"Edit list '"+this.name+"'":"Add a new list"},lists_loaded:function(){return 0!=this.lists.length}}),methods:Object(a["a"])(Object(a["a"])({},c["a"].mapActions(["getLists","addList","editList"])),{},{add_list:function(){var e=this;this.addList({name:this.name,description:this.description,configuration:this.reformat_columns_for_backend(this.columns)}).then((function(t){e.$router.push({name:"home"})})).catch((function(t){console.log(t),e.error_message=t}))},edit_list:function(){var e=this;this.editList({list_pk:parseInt(this.list_id),name:this.name,description:this.description,configuration:this.reformat_columns_for_backend(this.columns)}).then((function(t){e.$router.push({name:"list-detail",params:{list_id:e.list_id}})})).catch((function(t){e.error_message=t}))},populate_columns:function(){if(this.list_id){if(this.lists_loaded){var e=this.getListData(this.list_id);this.name=e.name,this.description=e.description,this.columns=this.reformat_columns(e.configuration)}}else this.columns=this.reformat_columns({content:{}})},reformat_columns:function(e){var t=[];for(var n in e){var i=!!e[n].required&&e[n].required,s=e[n].default_value?e[n].default_value:"";t.push({name:n,required:i,default_value:s,delete:null})}return t},reformat_columns_for_backend:function(e){var t={};for(var n in e){var i=e[n];t[i.name]={required:i.required,default_value:i.default_value}}return t},add_column:function(){var e=this;if(this.column_name){var t=this.columns.find((function(t){return t.name==e.column_name}));t?this.column_error_message="Columns must have unique names":this.list_id&&this.column_required&&""==this.column_default?this.column_error_message="If column is required, must supply default value":this.columns.push({name:this.column_name,required:this.column_required,default_value:this.column_default,delete:null})}else this.column_error_message="New column must have a name"},delete_column:function(e){if(1==this.columns.length)this.column_error_message="Must have at least one column";else{var t=0;for(var n in this.columns)this.columns[n].name==e.name&&this.columns.splice(t,1),t++}}})}),hi=fi,gi=Object(d["a"])(hi,di,pi,!1,null,null,null),bi=gi.exports,vi=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-modal",{attrs:{id:"list_modal",title:e.title_string,size:"md",visible:!0,"hide-footer":""},on:{hide:function(t){return e.$router.go(-1)}}},["create"==e.mode?n("b-form-group",{attrs:{id:"index_form_group"}},[e._v(" Index to add row at: "),n("b",[e._v(" "+e._s(e.index)+" ")]),n("b-form-input",{attrs:{id:"index",type:"range",min:"0",max:e.row_length},model:{value:e.index,callback:function(t){e.index=t},expression:"index"}})],1):n("span",{staticClass:"mb-3"},[e._v(" You are editing the item at index: "+e._s(e.index)+". ")]),n("span",{staticClass:"my-3"},e._l(e.columns,(function(t){return n("b-form-group",{key:t.name,attrs:{label:t.name,"label-for":t.name}},[n("b-form-input",{attrs:{id:t.name,name:t.name},model:{value:t.current_value,callback:function(n){e.$set(t,"current_value",n)},expression:"column.current_value"}}),n("b-form-text",[e.is_column_required(t)?n("span",[e._v("You must fill out a value for this column.")]):e._e(),t.default_value?n("span",[e._v("The default value for this column is "+e._s(t.default_value)+".")]):e._e()])],1)})),1),"create"==e.mode?n("b-button",{staticClass:"btn-sm",attrs:{variant:"outline-secondary",id:"add_row_save_button"},on:{click:e.add_row}},[e._v("submit")]):e._e(),"edit"==e.mode?n("b-button",{staticClass:"btn-sm",attrs:{variant:"outline-secondary",id:"edit_row_save_button"},on:{click:e.edit_row}},[e._v("submit")]):e._e(),n("error-component",{attrs:{message:e.error_message}})],1)},ki=[],yi={props:["list_id","row_index","mode"],components:{ErrorComponent:_["default"]},store:l["a"],data:function(){return{index:null,columns:[],row_length:0,error_message:null}},created:function(){var e=this;this.lists_loaded?this.get_initial_data():this.getLists().then((function(t){e.get_initial_data()}))},computed:Object(a["a"])(Object(a["a"])(Object(a["a"])({},c["a"].mapState({lists:function(e){return e.simplelists.lists}})),c["a"].mapGetters(["getListData"])),{},{lists_loaded:function(){return 0!=this.lists.length},title_string:function(){return"edit"==this.mode?"Edit row '"+this.row_index+"'":"Add a new row"}}),methods:Object(a["a"])(Object(a["a"])({},c["a"].mapActions(["getLists","addRow","editRow"])),{},{get_initial_data:function(){var e=this.getListData(this.list_id);this.row_length=e.rows.length,"edit"==this.mode?this.index=this.row_index:this.index=0;var t="edit"==this.mode?e.rows[this.index]:null;this.columns=this.initialize_columns(e.configuration,t)},initialize_columns:function(e,t){var n=[];for(var i in e){var s=e[i],o=t?t[i]:"";n.push({name:i,required:s.required,default_value:s.default_value,current_value:o})}return n},add_row:function(){var e=this;this.addRow({list_pk:this.list_id,index:parseInt(this.index),row_content:this.format_row_content()}).then((function(t){e.$router.push({name:"list-detail",params:{list_id:e.list_id}})})).catch((function(t){e.error_message=t}))},edit_row:function(){var e=this;this.editRow({list_pk:this.list_id,index:parseInt(this.index),row_content:this.format_row_content()}).then((function(t){e.$router.push({name:"list-detail",params:{list_id:e.list_id}})})).catch((function(t){e.error_message=t}))},format_row_content:function(){var e={};for(var t in this.columns){var n=this.columns[t];e[n.name]=document.getElementById(n.name).value}return e},is_column_required:function(e){return!(!e.required||""!=e.default_value)}})},Oi=yi,wi=Object(d["a"])(Oi,vi,ki,!1,null,null,null),Ci=wi.exports,xi=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[n("h3",{staticClass:"mt-3"},[e._v(e._s(e.list_name))]),n("p",[e._v(e._s(e.list_description))]),e.user_permissions.edit_list?n("router-link",{attrs:{to:{name:"edit-list-info",params:{list_id:e.list_id}}}},[n("b-button",{staticClass:"btn-sm",attrs:{variant:"outline-secondary",id:"edit_list_button"}},[e._v(" edit list info")])],1):e._e(),e.user_permissions.delete_list?n("b-button",{staticClass:"btn-sm",attrs:{variant:"outline-secondary",id:"delete_list_button"},on:{click:function(t){return e.delete_list(e.list_id)}}},[e._v("delete list")]):e._e(),n("router-link",{attrs:{to:{name:"action-history",params:{item_id:e.list_id,item_model:"simplelist",item_name:e.list_name}}}},[n("b-button",{staticClass:"btn-sm",attrs:{variant:"outline-secondary",id:"list_history_button"}},[e._v(" list history")])],1),n("router-link",{attrs:{to:{name:"item-permissions",params:{item_id:e.list_id,item_model:"simplelist",item_name:e.list_name}}}},[n("b-button",{staticClass:"btn-sm",attrs:{variant:"outline-secondary",id:"list_permissions"}},[e._v(" list permissions")])],1),e.user_permissions.add_row_to_list?n("router-link",{attrs:{to:{name:"add-list-row",params:{list_id:e.list_id,mode:"create"}}}},[n("b-button",{staticClass:"btn-sm",attrs:{variant:"outline-info",id:"add_row_button"}},[e._v(" add a row")])],1):e._e(),n("error-component",{attrs:{message:e.error_message}}),n("hr"),n("b-table",{attrs:{striped:"",hover:"",items:e.list_data,fields:e.list_fields},scopedSlots:e._u([{key:"cell(change)",fn:function(t){return[n("b-form",{attrs:{inline:""}},[e.user_permissions.edit_row_in_list?n("router-link",{attrs:{to:{name:"edit-list-row",params:{list_id:e.list_id,mode:"edit",row_index:t.item.index}},id:"edit_row_"+t.item.index}},[n("b-button",{staticClass:"btn-sm mx-1",attrs:{variant:"outline-secondary"}},[e._v("edit")])],1):e._e(),e.user_permissions.delete_row_in_list?n("b-button",{staticClass:"btn-sm mx-1",attrs:{variant:"outline-secondary",id:"delete_row_"+t.item.index},on:{click:function(n){return e.delete_row(t.item)}}},[e._v(" delete")]):e._e(),e.user_permissions.move_row_in_list?n("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.move_row_modal",modifiers:{move_row_modal:!0}}],staticClass:"btn-sm mx-1",attrs:{variant:"outline-secondary",id:"move_row_"+t.item.index},on:{click:function(n){e.old_index=t.item.index}}},[e._v(" move")]):e._e()],1)]}}])}),0===Object.keys(e.rows).length?n("span",[e._v("There are no items yet in this list.")]):e._e(),n("b-modal",{attrs:{id:"move_row_modal",title:"Move Row",size:"sm",visible:!1,"hide-footer":""}},[e._v(" Current row index: "+e._s(e.old_index)+" "),n("b-input-group",{staticClass:"sm my-2 mx-1",attrs:{prepend:"New index"}},[n("b-form-input",{attrs:{type:"number",min:"0",max:e.list_data.length-1},model:{value:e.new_index,callback:function(t){e.new_index=t},expression:"new_index"}})],1),n("b-button",{staticClass:"btn-sm my-2",attrs:{variant:"outline-secondary",id:"move_row_save_button"},on:{click:function(t){return e.move_row()}}},[e._v("save")]),n("error-component",{attrs:{message:e.move_error_message}})],1)],1)},Ei=[],Ri={components:{ErrorComponent:_["default"]},props:["list_id"],store:l["a"],mixins:[b["b"]],data:function(){return{error_message:"",move_error_message:"",old_index:null,new_index:null}},created:function(){var e=this;if(this.lists_loaded||this.getLists(),this.list_id){var t="simplelist_"+this.list_id;this.checkPermissions({permissions:{edit_list:{alt_target:t},delete_list:{alt_target:t},add_row_to_list:{alt_target:t},edit_row_in_list:{alt_target:t},move_row_in_list:{alt_target:t},delete_row_in_list:{alt_target:t}}}).catch((function(t){e.error_message=t}))}else console.log("Missing list_id in SimpleListComponent")},computed:Object(a["a"])(Object(a["a"])(Object(a["a"])({},c["a"].mapState({lists:function(e){return e.simplelists.lists},user_permissions:function(e){return e.permissions.current_user_permissions}})),c["a"].mapGetters(["getListData","getUserName"])),{},{lists_loaded:function(){return 0!=this.lists.length},rows:function(){return this.lists_loaded?this.getListData(this.list_id).rows:[]},configuration:function(){return this.lists_loaded?this.getListData(this.list_id).configuration:{}},list_name:function(){return this.lists_loaded?this.getListData(this.list_id).name:""},list_description:function(){return this.lists_loaded?this.getListData(this.list_id).description:void 0},list_fields:function(){var e=[{key:"index",sortable:!0}];if(this.lists_loaded)for(var t in this.configuration)e.push({key:t,sortable:!0});return e.push("change"),e},list_data:function(){var e=[],t=0;for(var n in this.rows){var i={};for(var s in this.rows[n])i[s]=this.rows[n][s];i["index"]=t,e.push(i),t++}return e}}),methods:Object(a["a"])(Object(a["a"])({},c["a"].mapActions(["checkPermissions","getLists","deleteList","moveRow","deleteRow"])),{},{display_date:function(e){return Date(e)},delete_list:function(e){var t=this;this.deleteList({list_pk:e}).then((function(e){t.$router.push({name:"home"})})).catch((function(e){t.error_message=e}))},delete_row:function(e){var t=this;this.deleteRow({list_pk:this.list_id,index:e.index}).catch((function(e){t.error_message=e}))},move_row:function(){var e=this;this.new_index=parseInt(this.new_index),this.old_index!=this.new_index?this.new_index>this.list_data.length-1?this.move_error_message="New index is too high":this.moveRow({list_pk:this.list_id,old_index:this.old_index,new_index:this.new_index}).then((function(t){e.old_index=null,e.new_index=null,e.$bvModal.hide("move_row_modal")})).catch((function(t){e.move_error_message=t})):this.move_error_message="Must specify different index"}})},Ai=Ri,Pi=Object(d["a"])(Ai,xi,Ei,!1,null,null,null),Si=Pi.exports;i["default"].use(s["a"]);var ji=[{name:"home",path:"/",components:{sidebar:f,main:T}},{name:"edit-group",path:"/edit group",meta:{highlight:"edit-group"},components:{sidebar:f,main:T,modal:$}},{name:"action-history",path:"/actions/history/:item_id/:item_model/:item_name",meta:{highlight:"history"},props:{sidebar:!1,main:!0},components:{sidebar:f,main:B}},{name:"action-detail",path:"/actions/detail/:action_id",meta:{highlight:"history"},props:{sidebar:!1,main:!0},components:{sidebar:f,main:Se}},{name:"templates",path:"/templates/:scope/",meta:{highlight:"governance"},props:{sidebar:!1,main:!0},components:{sidebar:f,main:ui["a"]}},{name:"item-templates",path:"/templates/:scope/:target_id/:target_model",meta:{highlight:"governance"},props:{sidebar:!1,main:!0},components:{sidebar:f,main:ui["a"]}},{name:"governance",path:"/governance",meta:{highlight:"governance"},components:{sidebar:f,main:pt}},{name:"change-leadership",path:"/governance/change-leadership",meta:{highlight:"governance"},components:{sidebar:f,main:kt}},{name:"membership-settings",path:"/membership-settings",meta:{highlight:"governance"},components:{sidebar:f,main:$t}},{name:"item-permissions",path:"/permissions/:item_id/:item_model/:item_name",meta:{highlight:"permissions"},props:{sidebar:!1,main:!0},components:{sidebar:f,main:Bt}},{name:"role-permissions",path:"/permissions/:role_to_edit",meta:{highlight:"permissions"},props:{sidebar:!1,main:!0},components:{sidebar:f,main:Xt}},{name:"user-permissions",path:"/permissions/user/:user_pk",meta:{highlight:"permissions"},props:{sidebar:!1,main:!0},components:{sidebar:f,main:on}},{name:"advanced-permissions",path:"/advanced-permissions/:item_id/:item_model",meta:{highlight:"permissions"},props:{sidebar:!1,main:!0},components:{sidebar:f,main:mn}},{name:"conditions",path:"/conditions/:conditioned_on/:dependency_scope",meta:{highlight:"permissions"},props:{sidebar:!1,main:!0},components:{sidebar:f,main:Gn}},{name:"add-new-forum",path:"/forums/new",components:{sidebar:f,main:C,modal:Yn}},{name:"forum-detail",path:"/forums/:forum_id",props:{sidebar:!1,main:!0},components:{sidebar:f,main:Zn}},{name:"edit-forum",path:"/forums/:forum_id/edit",props:{sidebar:!1,main:!0,modal:!0},components:{sidebar:f,main:Zn,modal:Yn}},{name:"add-new-post",path:"/forums/:forum_id/new_post",props:{sidebar:!1,main:!0,modal:!0},components:{sidebar:f,main:Zn,modal:mi}},{name:"edit-post",path:"/forums/:forum_id/posts/:post_id/edit",props:{sidebar:!1,main:!0,modal:!0},components:{sidebar:f,main:Zn,modal:mi}},{name:"post-detail",path:"/forums/:forum_id/posts/:post_id",props:{sidebar:!1,main:!0},components:{sidebar:f,main:oi}},{name:"add-new-list",path:"/lists/new",components:{sidebar:f,main:T,modal:bi}},{name:"edit-list-info",path:"/lists/edit/:list_id",props:{sidebar:!1,main:!1,modal:!0},components:{sidebar:f,main:T,modal:bi}},{name:"list-detail",path:"/lists/detail/:list_id",props:{sidebar:!1,main:!0},components:{sidebar:f,main:Si}},{name:"edit-list-row",path:"/lists/detail/:list_id/rows/:mode/:row_index",props:{sidebar:!1,main:!0,modal:!0},components:{sidebar:f,main:Si,modal:Ci}},{name:"add-list-row",path:"/lists/detail/:list_id/rows/:mode",props:{sidebar:!1,main:!0,modal:!0},components:{sidebar:f,main:Si,modal:Ci}}],Ii=new s["a"]({routes:ji});t["a"]=Ii},a209:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return s}));var i={methods:{shorten_text:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50;return"string"===typeof e&&e.length>t?e.substring(0,t)+"...":e}}},s={methods:{change_field:function(e){for(var t in this.configuration_fields||console.log("Error! Must set configuration_fields property."),this.configuration_fields)this.configuration_fields[t].field_name==e.field_name&&(this.configuration_fields[t].value=e.new_value)}}}},a669:function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[n("h4",{staticClass:"mb-3"},[e._v(e._s(e.capitalize(e.scope))+" Templates")]),n("error-component",{attrs:{message:e.error_message}}),e.selected_template?n("span",[e.create_group||e.user_permissions.apply_template?n("span",[n("template-info-component",{attrs:{template:e.selected_template,create_group:e.create_group,display_select:!1}}),e.configuration_fields.length>0?n("span",[n("h5",{staticClass:"mt-3 font-weight-bold"},[e._v("Configure fields for template: "+e._s(this.selected_template.name)+".")]),e._l(e.configuration_fields,(function(t){return n("field-component",{key:t.field_name,attrs:{initial_field:t},on:{"field-changed":e.change_field}})}))],2):n("span",[n("b",[e._v("There are no fields to configure.")])]),e.create_group?e._e():n("b-button",{staticClass:"my-2",attrs:{id:"submit_apply_template",variant:"outline-dark",size:"sm"},on:{click:function(t){return e.apply_template(e.selected_template)}}},[e._v(" Apply template")])],1):n("span",[e._v("You do not have permisson to apply templates to this "+e._s(e.scope)+".")])]):n("span",[n("b-card-group",{attrs:{deck:""}},e._l(e.scope_templates,(function(t){return n("template-info-component",{key:t.pk,attrs:{template:t,create_group:e.create_group,display_select:!0},on:{"template-selected":e.select_template}})})),1)],1)],1)},s=[],o=n("5530"),r=n("2f62"),a=n("4360"),c=n("4ae4"),l=n("da66"),_=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-card",{key:e.template.pk,staticClass:"w-50",staticStyle:{display:"inline-block"},attrs:{title:e.template.name,id:e.slugify_name(e.template.name)}},[n("b-card-text",[e._v(e._s(e.template.description)+" "),n("div",[n("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle",value:"template_actions_"+e.slugify_name(e.template.name),expression:"'template_actions_' + slugify_name(template.name)"}],staticClass:"btn-sm mt-3"},[e._v(" Template Details")]),n("b-collapse",{staticClass:"mt-3",attrs:{id:"template_actions_"+e.slugify_name(e.template.name)}},[n("b-card",[n("small",[e.create_group?e._e():n("span",[e._v(e._s(e.template.action_breakdown.foundational))]),n("ol",{staticClass:"mt-3"},e._l(e.template.action_breakdown.actions,(function(t){return n("li",{key:t.pk},[e._v(e._s(t))])})),0)])])],1)],1)]),e.display_select?n("b-button",{staticClass:"my-2",attrs:{id:"select_template_"+e.slugify_name(e.template.name),variant:"outline-dark"},on:{click:function(t){return e.$emit("template-selected",e.template)}}},[e._v("select template")]):e._e()],1)},m=[],u=(n("ac1f"),n("5319"),{store:a["a"],props:["create_group","template","display_select"],data:function(){return{}},methods:{slugify_name:function(e){return e.toLowerCase().replace(/ /g,"_")}}}),d=u,p=n("2877"),f=Object(p["a"])(d,_,m,!1,null,null,null),h=f.exports,g=n("a209"),b={store:a["a"],components:{ErrorComponent:c["default"],FieldComponent:l["a"],TemplateInfoComponent:h},mixins:[g["a"]],props:["scope","create_group","target_id","target_model"],data:function(){return{selected_template:null,browse_templates:!1,configuration_fields:[],error_message:null}},created:function(){var e=this;this.getTemplatesForScope({scope:this.scope});var t=null,n=null;t=this.target_model?this.target_model:"group",n=this.target_id?this.target_id:a["a"].state.group_pk;var i=t+"_"+n;this.create_group||this.checkPermissions({permissions:{apply_template:{alt_target:i}}}).catch((function(t){e.error_message=t,console.log(t)}))},computed:Object(o["a"])(Object(o["a"])(Object(o["a"])({},r["a"].mapGetters(["scopeTemplates"])),r["a"].mapState({user_permissions:function(e){return e.permissions.current_user_permissions}})),{},{scope_templates:function(){return this.scopeTemplates(this.scope)}}),methods:Object(o["a"])(Object(o["a"])({},r["a"].mapActions(["getTemplatesForScope","applyTemplate","checkPermissions"])),{},{capitalize:function(e){return e[0].toUpperCase()+e.substring(1)},clearState:function(){this.selected_template=null,this.configuration_fields=[],this.fill_configuration_fields=!1,this.browse_templates=!1,this.error_message=""},select_template:function(e){e.supplied_fields?(this.selected_template=e,this.configuration_fields=e.supplied_fields):this.selected_template=e},validate_template:function(){for(var e in this.configuration_fields)if(this.configuration_fields[e]["required"]&&!this.configuration_fields[e]["value"])return this.error_message="Required field "+this.configuration_fields[e]["field_name"]+" needs a value",!1;return!0},apply_template:function(){var e=this;this.validate_template()&&this.applyTemplate({target_model:this.target_model,target_pk:this.target_id,supplied_fields:this.configuration_fields,template_model_pk:this.selected_template.pk}).then((function(t){e.$router.go(-1)})).catch((function(t){console.log(t),e.error_message=t}))}})},v=b,k=Object(p["a"])(v,i,s,!1,null,null,null);t["a"]=k.exports},d8c3:function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var i=n("2b0e"),s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[n("div",{attrs:{id:"navbarVueApp"}},[n("b-navbar",{attrs:{toggleable:"lg",type:"dark",variant:"info"}},[n("b-navbar-brand",{attrs:{href:"/"}},[e._v("Kybern")]),n("b-navbar-toggle",{attrs:{target:"nav-collapse"}}),n("b-collapse",{attrs:{id:"nav-collapse","is-nav":""}},[n("b-navbar-nav",[n("b-nav-item",{attrs:{href:"/groups/list"}},[e._v("Groups")]),n("b-nav-item",{attrs:{href:"#",disabled:""}},[e._v("Contacts")]),n("b-nav-item",{attrs:{href:"#",disabled:""}},[e._v("Notifications")])],1),n("b-navbar-nav",{staticClass:"ml-auto"},[e.signed_in?n("b-nav-item-dropdown",{attrs:{right:""},scopedSlots:e._u([{key:"button-content",fn:function(){return[n("em",[e._v(e._s(e.user_name))])]},proxy:!0}],null,!1,4202963060)},[n("b-dropdown-item",{attrs:{href:"/profile"}},[e._v("Your Profile")]),n("b-dropdown-item",{attrs:{href:"/logout"}},[e._v("Sign Out")])],1):n("b-nav-item",{attrs:{href:"/login"}},[e._v("Sign In")])],1)],1)],1)],1),n("div",{staticClass:"container"},[n("div",{staticClass:"mt-5"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-3"},[n("router-view",{attrs:{name:"sidebar"}})],1),n("div",{staticClass:"col-9"},[n("router-view",{attrs:{name:"main"}})],1),n("router-view",{attrs:{name:"modal"}})],1)])])])},o=[],r=n("5530"),a=n("4360"),c=JSON.parse(window.__INITIAL_STATE__),l={store:a["a"],data:function(){return{user_name:c.user_name,signed_in:c.is_authenticated}},methods:Object(r["a"])({},Vuex.mapActions(["initialize_group_data","getPermissionData","getGovernanceData","getForumData"])),created:function(){this.initialize_group_data({urls:c.urls,group_pk:c.group_pk,group_name:c.group_name,user_pk:c.user_pk,group_description:c.group_description,user_name:c.user_name}),this.getPermissionData(),this.getGovernanceData(),this.getForumData()}},_=l,m=n("2877"),u=Object(m["a"])(_,s,o,!1,null,null,null),d=u.exports,p=n("a18c"),f=n("5f5b"),h=n("b1e0");i["default"].use(f["a"]),i["default"].use(h["a"]),i["default"].config.productionTip=!1,new i["default"]({router:p["a"],store:a["a"],render:function(e){return e(d)}}).$mount("#kybernApp")},da66:function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",["CharField"==e.field.type?n("div",{staticClass:"d-inline-block"},[n("div",{staticClass:"input-group-prepend"},[n("span",{staticClass:"input-group-text",attrs:{id:"field.name"}},[e._v(e._s(e.label(e.field)))])]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.field.value,expression:"field.value"}],staticClass:"form-control",attrs:{type:"text","aria-label":"field.name","aria-describedby":"field.name label",required:e.field.required},domProps:{value:e.field.value},on:{input:function(t){t.target.composing||e.$set(e.field,"value",t.target.value)}}})]):e._e(),"BooleanField"==e.field.type?n("span",[n("b-form-checkbox",{attrs:{name:"checkbox-1",value:"true","unchecked-value":"false"},model:{value:e.field.value,callback:function(t){e.$set(e.field,"value",t)},expression:"field.value"}},[e._v(" "+e._s(e.label(e.field))+" ")])],1):e._e(),"IntegerField"==e.field.type?n("div",{staticClass:"d-inline-block"},[n("div",{staticClass:"input-group-prepend"},[n("span",{staticClass:"input-group-text",attrs:{id:"field.name"}},[e._v(e._s(e.label(e.field)))])]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.field.value,expression:"field.value"}],staticClass:"form-control",attrs:{type:"number","aria-label":"field.name","aria-describedby":"field.name label",required:e.field.required},domProps:{value:e.field.value},on:{input:function(t){t.target.composing||e.$set(e.field,"value",t.target.value)}}})]):e._e(),"RoleField"==e.field.type||"RoleListField"==e.field.type?n("div",{staticClass:"permissionrolefield"},[n("b-input-group",{attrs:{prepend:e.label(e.field)}},[n("vue-multiselect",{staticClass:"w-50",attrs:{options:e.rolesAsOptions,"allow-empty":!0,multiple:e.select_field_is_multiple(e.field),"close-on-select":!0,placeholder:"Select roles",label:"name","track-by":"name"},model:{value:e.field.value,callback:function(t){e.$set(e.field,"value",t)},expression:"field.value"}})],1)],1):e._e(),"ActorField"==e.field.type||"ActorListField"==e.field.type?n("div",{staticClass:"permissionactorfield"},[n("b-input-group",{attrs:{prepend:e.label(e.field)}},[n("vue-multiselect",{staticClass:"w-50",attrs:{options:e.groupMembersAsOptions,"allow-empty":!0,multiple:e.select_field_is_multiple(e.field),"close-on-select":!0,placeholder:"Select actors",label:"name","track-by":"pk"},model:{value:e.field.value,callback:function(t){e.$set(e.field,"value",t)},expression:"field.value"}})],1)],1):e._e()])},s=[],o=(n("b0c0"),n("5530")),r=n("2f62"),a=n("4360"),c=n("8e5f"),l=n.n(c),_={store:a["a"],components:{"vue-multiselect":l.a},props:["initial_field"],data:function(){return{field:null}},created:function(){this.field=this.initial_field},watch:{field:function(e){this.$emit("field-value-change",{field_name:this.field.name,new_value:this.field.value})}},computed:Object(o["a"])({},r["a"].mapGetters(["rolesAsOptions","groupMembersAsOptions"])),methods:{select_field_is_multiple:function(e){return!e.other_data||!e.other_data.multiple||e["other_data"]["multiple"]},label:function(e){return e.display?e.display:e.label}}},m=_,u=n("2877"),d=Object(u["a"])(m,i,s,!1,null,null,null);t["a"]=d.exports},f7bd:function(e,t,n){"use strict";var i=n("07bb"),s=n.n(i);t["default"]=s.a}});