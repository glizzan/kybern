(function(e){function t(t){for(var i,a,r=t[0],c=t[1],l=t[2],_=0,u=[];_<r.length;_++)a=r[_],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&u.push(o[a][0]),o[a]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(e[i]=c[i]);d&&d(t);while(u.length)u.shift()();return s.push.apply(s,l||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],i=!0,r=1;r<n.length;r++){var c=n[r];0!==o[c]&&(i=!1)}i&&(s.splice(t--,1),e=a(a.s=n[0]))}return e}var i={},o={group_detail_vue:0},s=[];function a(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=i,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)a.d(n,i,function(t){return e[t]}.bind(null,i));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=t,r=r.slice();for(var l=0;l<r.length;l++)t(r[l]);var d=c;s.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("d8c3")},"015a":function(e,t,n){"use strict";n("532a")},"050c":function(e,t,n){},"07bb":function(e,t,n){n("c975"),n("d3b7"),n("25f0"),e.exports={props:["message","dismissable"],data:function(){return{unique_identifier:null,styleclass:"text-danger",show_dismissible_alert:!0}},created:function(){this.unique_identifier=Math.random().toString(),this.render_html()},watch:{message:function(){this.render_html(),this.show_dismissible_alert=!0}},methods:{render_html:function(){if(this.message&&-1!==this.message.indexOf("href")){var e=document.getElementById(this.unique_identifier);e&&(e.innerHTML=this.message,this.styleclass="text-secondary")}}}}},"10c0":function(e,t,n){"use strict";n("3ba8")},"16c8":function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[n("form-button-and-modal",{attrs:{item_model:"comment",button_text:"+ add comment",alt_target:e.alt_target,supplied_params:{item_id:e.item_id,item_model:e.item_model}}}),e.item_comments.length>0&&0==e.show_comments?n("b-button",{staticClass:"btn-sm show-comments mr-2",on:{click:function(t){e.show_comments=!0}}},[e._v(" Show comments")]):e._e(),e.item_comments.length>0&&1==e.show_comments?n("b-button",{staticClass:"btn-sm hide-comments mr-2",on:{click:function(t){e.show_comments=!1}}},[e._v(" Hide comments")]):e._e(),e.show_comments?n("span",e._l(e.item_comments,(function(t){return n("comment-component",{key:t.pk,attrs:{comment:t,item_id:e.item_id,item_model:e.item_model}})})),1):e._e()],1)},o=[],s=n("5530"),a=n("2f62"),r=n("4360"),c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[n("b-card",{staticClass:"my-3 rounded",scopedSlots:e._u([{key:"footer",fn:function(){return[n("small",{staticClass:"text-muted"},[e._v("posted by "),n("span",{staticClass:"user-link"},[e._v(e._s(e.getUserName(e.comment.commenter_pk)))]),e._v(" on "+e._s(e.display_date(e.comment.created_at)))]),n("resource-action-icons",{staticClass:"float-right",attrs:{item_id:e.comment.pk,item_name:e.comment_name(e.comment.text),item_model:"comment",id_add:"comment"+e.comment.pk,response:e.response},on:{delete:e.delete_comment}})]},proxy:!0}])},[n("b-card-text",[e._v(e._s(e.comment.text))])],1)],1)},l=[],d=n("4811"),_={components:{ResourceActionIcons:d["a"]},props:["item_id","item_model","comment"],store:r["a"],data:function(){return{comment_text:"",error_message:"",response:null}},created:function(){this.comment_text=this.comment.text},computed:Object(s["a"])({},a["a"].mapGetters(["getUserName"])),methods:Object(s["a"])(Object(s["a"])({},a["a"].mapActions(["deleteComment"])),{},{display_date:function(e){return new Date(e).toUTCString()},comment_name:function(e){return e.length>50?"Comment: "+e.substr(0,50)+"...'":"Comment: '"+e+"'"},delete_comment:function(e){var t=this;this.deleteComment({item_id:this.item_id,item_model:this.item_model,pk:this.comment.pk,extra_data:e}).then((function(e){t.response=e}))}})},u=_,m=(n("dd34"),n("2877")),p=Object(m["a"])(u,c,l,!1,null,"3fa2ab6a",null),f=p.exports,h=n("f3f4"),b={components:{FormButtonAndModal:h["a"],CommentComponent:f},props:["item_id","item_model"],store:r["a"],data:function(){return{show_comments:!0,comment_text:"",edit_comment_response:null}},created:function(){this.getComments({item_id:this.item_id,item_model:this.item_model}).catch((function(e){console.log("Error getting comment data")}))},computed:Object(s["a"])(Object(s["a"])({},a["a"].mapGetters(["getCommentsForItem","getUserName"])),{},{item_comments:function(){return this.item_id&&this.item_model?this.getCommentsForItem(this.item_id+"_"+this.item_model):[]},alt_target:function(){return this.item_model+"_"+this.item_id}}),methods:Object(s["a"])(Object(s["a"])({},a["a"].mapActions(["getComments"])),{},{display_date:function(e){return Date(e)},comment_name:function(e){return e.length>50?"Comment: "+e.substr(0,50)+"...'":"Comment: '"+e+"'"}})},v=b,g=Object(m["a"])(v,i,o,!1,null,null,null);t["a"]=g.exports},"1e2a":function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return o}));var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:e.styleclass,attrs:{id:e.unique_identifier}},[e.dismissable&&e.message?n("span",{staticClass:"error-message"},[n("b-alert",{staticClass:"my-2 error-alert",attrs:{variant:"danger",dismissible:"",show:e.show_dismissible_alert},on:{dismissed:function(t){e.show_dismissible_alert=!1}}},[e._v(" "+e._s(e.message))])],1):n("span",{staticClass:"error-message"},[e._v(" "+e._s(e.message)+" ")])])},o=[]},2525:function(e,t,n){"use strict";n("4f41")},2967:function(e,t,n){},"2f83":function(e,t,n){"use strict";n("f5f7")},"35dc":function(e,t,n){},"3a08":function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e._l(e.conditions_set,(function(t,i){return n("div",{key:i,staticClass:"d-block"},[n("b-button",{staticClass:"mb-2 existing-condition",attrs:{variant:"light"},on:{click:function(t){e.condition_edited=i}}},[e._v(" "+e._s(t.name)+" ")]),n("b-icon-info-circle",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.html",value:e.extra_info(t),expression:"extra_info(item)",modifiers:{hover:!0,html:!0}}],staticClass:"ml-3"})],1)})),n("b-button",{staticClass:"btn-sm mb-2 d-block add-condition",attrs:{variant:"outline-secondary"},on:{click:function(t){e.view_selector=!0}}},[e._v("Add condition")]),e.view_selector?n("b-form-select",{attrs:{options:e.processed_condition_options,"select-size":4,name:"condition_select"},model:{value:e.condition_selected,callback:function(t){e.condition_selected=t},expression:"condition_selected"}}):e._e(),n("b-modal",{attrs:{id:"configure_condition_"+e.random_key,title:"Configure your "+e.condition_selected,size:"lg"},on:{ok:e.add_condition_to_set},scopedSlots:e._u([{key:"modal-footer",fn:function(t){var i=t.ok;return[e.condition_edited?n("b-button",{staticClass:"btn-sm d-block remove-condition",attrs:{variant:"outline-secondary"},on:{click:e.remove_condition}},[e._v("remove")]):e._e(),n("b-button",{staticClass:"condition-ok",attrs:{size:"sm",variant:"info"},on:{click:function(e){return i()}}},[e._v("OK")])]}}])},[e._l(e.configuration_fields,(function(t){return n("complex-configurable-field-component",{key:t.field_name,attrs:{field:t,conditioned_on:e.conditioned_on},on:{"field-changed":e.change_field}})})),0==e.configuration_fields.length?n("span",[e._v("There are no fields to configure.")]):e._e()],2)],2)},o=[],s=(n("4de4"),n("4160"),n("caad"),n("a15b"),n("d81d"),n("b0c0"),n("b64b"),n("07ac"),n("2532"),n("159b"),n("5530")),a=n("2b0e"),r=n("2f62"),c=n("4360"),l=n("f797"),d=n("a209"),_={props:["initial_conditions","conditioned_on"],components:{ComplexConfigurableFieldComponent:l["a"]},mixins:[d["a"]],store:c["a"],data:function(){return{random_key:null,view_selector:!1,removed_condition_element_ids:[],condition_selected:"",configuration_fields:[],condition_edited:null,conditions_set:{}}},created:function(){this.random_key=Math.random(),this.initial_conditions&&this.set_initial_conditions()},watch:{initial_conditions:function(e){e&&this.set_initial_conditions()},condition_selected:function(e){e&&(this.configuration_fields=this.get_configuration_fields(),this.$bvModal.show("configure_condition_"+this.random_key),this.view_selector=!1)},condition_edited:function(e){e&&(this.configuration_fields=this.conditions_set[e]["fields"],this.$bvModal.show("configure_condition_"+this.random_key),this.view_selector=!1)}},computed:Object(s["a"])(Object(s["a"])(Object(s["a"])({},r["a"].mapState({condition_options:function(e){return e.permissions.condition_options}})),r["a"].mapGetters(["getConditionConfigurationFields"])),{},{processed_condition_options:function(){var e=[];return e.push({label:"Decision Conditions",options:this.condition_options.filter((function(e){return!e.value.includes("Filter")}))}),e.push({label:"Filter Conditions",options:this.condition_options.filter((function(e){return!(!e.value.includes("Filter")||e.linked)}))}),e}}),methods:{set_initial_conditions:function(){var e=this;console.log("Setting initial conditions");var t=[];for(var n in Object.keys(this.conditions_set))t.push(Object.keys(this.conditions_set)[n]);for(var i in t.forEach((function(t){a["default"].delete(e.conditions_set,t)})),console.log("Cleared conditions set: ",this.conditions_set),this.initial_conditions.conditions){var o=this.initial_conditions.conditions[i],s=Math.random(),r=this.process_initial_fields(o.fields),c=this.process_fields_into_info(o.fields);a["default"].set(this.conditions_set,s,{name:o.display_name,fields:r,info:c,element_id:o.element_id,changed:!1})}},get_configuration_fields:function(){var e=[];return this.condition_selected?(e=this.getConditionConfigurationFields(this.condition_selected),Object.values(e)):[]},process_fields_into_info:function(e){return Array.isArray(e)||(e=Object.values(e)),e.map((function(e){return{label:e.display,value:e.value}}))},extra_info:function(e){var t="";return e.info.forEach((function(e){Array.isArray(e.value)&&(e.value=e.value.map((function(e){return e.name})).join()),t+=e.label+": "+e.value+"<br /><br />"})),t},add_condition_to_set:function(){var e=this.process_fields_into_info(this.configuration_fields);if(this.condition_edited)this.conditions_set[this.condition_edited]["changed"]=!0,this.conditions_set[this.condition_edited]["fields"]=this.configuration_fields,this.conditions_set[this.condition_edited]["info"]=e;else{var t=Math.random();a["default"].set(this.conditions_set,t,{name:this.condition_selected,fields:this.configuration_fields,info:e,element_id:null})}this.condition_edited=null,this.configuration_fields=[],this.condition_selected=""},remove_condition:function(){this.condition_edited&&(this.conditions_set[this.condition_edited]["element_id"]&&this.removed_condition_element_ids.push(this.conditions_set[this.condition_edited]["element_id"]),this.$delete(this.conditions_set,this.condition_edited),this.condition_edited=null,this.configuration_fields=[],this.$bvModal.hide("configure_condition_"+this.random_key))}}},u=_,m=n("2877"),p=Object(m["a"])(u,i,o,!1,null,null,null);t["a"]=p.exports},"3ba8":function(e,t,n){},"41c7":function(e,t,n){},4360:function(e,t,n){"use strict";n("a4d3"),n("e01a"),n("b0c0"),n("b64b"),n("d3b7"),n("96cf");var i=n("1da1"),o=n("2b0e"),s=n("2f62"),a=n("583c"),r=(n("7db0"),n("a434"),{state:{actions:{}},getters:{getActionData:function(e,t){return function(t){for(var n in e.actions){var i=e.actions[n].find((function(e){return e.action_pk==t}));if(i)return i}}}},mutations:{REPLACE_ACTIONS_FOR_ITEM:function(e,t){o["default"].set(e.actions,t.item_key.toLowerCase(),t.action_data)},ADD_OR_UPDATE_ACTION:function(e,t){var n=t.item_key.toLowerCase();for(var i in e.actions[n]||o["default"].set(e.actions,n,[]),e.actions[n])if(e.actions[n][i].action_pk==t.action_data.action_pk)return void e.actions[n].splice(i,1,t.action_data);e.actions[n].push(t.action_data)}},actions:{updateActions:function(e,t){e.state,e.commit,e.rootState;var n=e.dispatch,i=t.response.data;if(i.multiple_actions)for(var o in i.actions)n("addOrUpdateAction",{action_pk:i.actions[o].action_pk});else n("addOrUpdateAction",{action_pk:i.action_pk})},loadActions:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var i,o,s,a,r,c,l;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.state,i=e.commit,e.rootState,o=e.dispatch,s=e.getters,n.next=3,s.url_lookup("get_action_data_for_target");case 3:return a=n.sent,r="list"==t.item_model?"simplelist":t.item_model,c={item_id:t.item_id,item_model:r},l=function(e){var n=t.item_id+"_"+t.item_model;i("REPLACE_ACTIONS_FOR_ITEM",{action_data:e.data.action_data,item_key:n})},n.abrupt("return",o("getAPIcall",{url:a,params:c,implementationCallback:l}));case 8:case"end":return n.stop()}}),n)})))()},addOrUpdateAction:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var i,o,s,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.state,i=e.commit,e.rootState,e.dispatch,o=e.getters,n.next=3,o.url_lookup("get_action_data");case 3:s=n.sent,r={action_pk:t.action_pk},a["a"].post(s,r).then((function(e){var t=e.data.action_data,n=t.action_target_pk+"_"+t.action_target_model;i("ADD_OR_UPDATE_ACTION",{action_data:t,item_key:n})})).catch((function(e){throw console.log(e),e}));case 6:case"end":return n.stop()}}),n)})))()},retakeAction:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var i,o,s,a,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.state,e.commit,e.rootState,i=e.dispatch,o=e.getters,n.next=3,o.url_lookup("take_proposed_action");case 3:return s=n.sent,a={action_pk:t.action_pk},r=function(e){i("addOrUpdateAction",{action_pk:t.action_pk})},n.abrupt("return",i("actionAPIcall",{url:s,params:a,implementationCallback:r}));case 7:case"end":return n.stop()}}),n)})))()}}}),c=r,l=(n("c975"),{state:{item_comments:{},comments:{}},getters:{getCommentData:function(e,t){return function(t){return e.comments[t]}},getCommentsForItem:function(e,t){return function(t){var n=[];for(var i in e.item_comments[t]){var o=e.item_comments[t][i];n.push(e.comments[o])}return n}}},mutations:{REPLACE_ITEM_COMMENTS:function(e,t){var n=t.item_id+"_"+t.item_model;o["default"].set(e.item_comments,n,t.pks)},ADD_COMMENT_TO_ITEM:function(e,t){var n=t.item_id+"_"+t.item_model,i=e.item_comments[n].indexOf(t.comment_pk);-1==i&&e.item_comments[n].push(parseInt(t.comment_pk))},REMOVE_COMMENT_FROM_ITEM:function(e,t){var n=t.item_id+"_"+t.item_model,i=e.item_comments[n].indexOf(t.comment_pk);i>-1&&e.item_comments[n].splice(i,1)},ADD_OR_UPDATE_COMMENT:function(e,t){o["default"].set(e.comments,t.pk,t.data)},DELETE_COMMENT:function(e,t){o["default"].delete(e.comments,t.pk)}},actions:{getComments:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var i,o,s,a,r,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=e.commit,e.state,o=e.dispatch,s=e.getters,n.next=3,s.url_lookup("get_comment_data");case 3:return a=n.sent,r={item_id:t.item_id,item_model:t.item_model},c=function(e){for(var t in e.data.comments)i("ADD_OR_UPDATE_COMMENT",{pk:t,data:e.data.comments[t]});i("REPLACE_ITEM_COMMENTS",{item_id:e.data.item_id,item_model:e.data.item_model,pks:e.data.comment_pks})},n.abrupt("return",o("getAPIcall",{url:a,params:r,implementationCallback:c}));case 7:case"end":return n.stop()}}),n)})))()},addComment:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var i,o,s,a,r,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=e.commit,e.state,o=e.dispatch,s=e.getters,n.next=3,s.url_lookup("take_action");case 3:return a=n.sent,r={action_name:"add_comment",data_to_return:"created_instance",extra_data:t.extra_data,alt_target:t.item_model+"_"+t.item_id,text:t.text},console.log("Sending with params: ",r),c=function(e){var n=Object.keys(e.data.created_instance)[0],o=e.data.created_instance[n];i("ADD_OR_UPDATE_COMMENT",{pk:n,data:o}),i("ADD_COMMENT_TO_ITEM",{comment_pk:n,item_id:t.item_id,item_model:t.item_model})},n.abrupt("return",o("actionAPIcall",{url:a,params:r,implementationCallback:c}));case 8:case"end":return n.stop()}}),n)})))()},editComment:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var i,o,s,a,r,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=e.commit,e.state,o=e.dispatch,s=e.getters,n.next=3,s.url_lookup("take_action");case 3:return a=n.sent,r={action_name:"edit_comment",data_to_return:"edited_instance",extra_data:t.extra_data,alt_target:"comment_"+t.pk,text:t.text},c=function(e){var t=Object.keys(e.data.edited_instance)[0],n=e.data.edited_instance[t];i("ADD_OR_UPDATE_COMMENT",{pk:t,data:n})},n.abrupt("return",o("actionAPIcall",{url:a,params:r,implementationCallback:c}));case 7:case"end":return n.stop()}}),n)})))()},deleteComment:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var i,o,s,a,r,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=e.commit,e.state,o=e.dispatch,s=e.getters,n.next=3,s.url_lookup("take_action");case 3:return a=n.sent,r={action_name:"delete_comment",data_to_return:"deleted_item_pk",extra_data:t.extra_data,alt_target:"comment_"+t.pk},c=function(e){i("REMOVE_COMMENT_FROM_ITEM",{item_id:t.item_id,item_model:t.item_model,comment_pk:e.data.deleted_item_pk}),i("DELETE_COMMENT",{pk:e.data.deleted_item_pk})},n.abrupt("return",o("actionAPIcall",{url:a,params:r,implementationCallback:c}));case 7:case"end":return n.stop()}}),n)})))()}}}),d=l,_={state:{documents:[]},getters:{getDocumentData:function(e,t){return function(t){return e.documents.find((function(e){return e.pk==t}))}}},mutations:{ADD_OR_UPDATE_DOCUMENT:function(e,t){for(var n in e.documents)if(e.documents[n].pk==t.document_data.pk)return void e.documents.splice(n,1,t.document_data);e.documents.push(t.document_data)},DELETE_DOCUMENT:function(e,t){for(var n in e.documents)e.documents[n].pk==t.deleted_document_pk&&e.documents.splice(n,1)}},actions:{getDocuments:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function t(){var n,i,o,s,a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,e.state,i=e.dispatch,o=e.getters,t.next=3,o.url_lookup("get_documents");case 3:return s=t.sent,a={},r=function(e){for(var t in e.data.documents)n("ADD_OR_UPDATE_DOCUMENT",{document_data:e.data.documents[t]})},t.abrupt("return",i("getAPIcall",{url:s,params:a,implementationCallback:r}));case 7:case"end":return t.stop()}}),t)})))()},addDocument:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var i,o,s,a,r,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=e.commit,e.state,o=e.dispatch,s=e.getters,n.next=3,s.url_lookup("take_action");case 3:return a=n.sent,r={action_name:"add_document",extra_data:t.extra_data,data_to_return:"created_instance",name:t.name,description:t.description,content:t.content},c=function(e){i("ADD_OR_UPDATE_DOCUMENT",{document_data:e.data.created_instance})},n.abrupt("return",o("actionAPIcall",{url:a,params:r,implementationCallback:c}));case 7:case"end":return n.stop()}}),n)})))()},editDocument:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var i,o,s,a,r,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=e.commit,e.state,o=e.dispatch,s=e.getters,n.next=3,s.url_lookup("take_action");case 3:return a=n.sent,r={action_name:"edit_document",extra_data:t.extra_data,data_to_return:"edited_instance",alt_target:"document_"+t.pk,name:t.name,description:t.description,content:t.content},c=function(e){i("ADD_OR_UPDATE_DOCUMENT",{document_data:e.data.edited_instance})},n.abrupt("return",o("actionAPIcall",{url:a,params:r,implementationCallback:c}));case 7:case"end":return n.stop()}}),n)})))()},deleteDocument:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var i,o,s,a,r,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=e.commit,e.state,o=e.dispatch,s=e.getters,n.next=3,s.url_lookup("take_action");case 3:return a=n.sent,r={action_name:"delete_document",extra_data:t.extra_data,data_to_return:"deleted_item_pk",alt_target:"document_"+t.pk},c=function(e){i("DELETE_DOCUMENT",{deleted_document_pk:e.data.deleted_item_pk})},n.abrupt("return",o("actionAPIcall",{url:a,params:r,implementationCallback:c}));case 7:case"end":return n.stop()}}),n)})))()}}},u=_,m=(n("4de4"),{state:{forums:[],posts:[]},getters:{getForumData:function(e,t){return function(t){return e.forums.find((function(e){return e.pk==parseInt(t)}))}},getPostsDataForForum:function(e,t){return function(t){return e.posts.filter((function(e){return e.forum_pk==t}))}},getPostData:function(e,t){return function(t){return e.posts.find((function(e){return e.pk==t}))}}},mutations:{SET_FORUMS:function(e,t){o["default"].set(e,"forums",t.forums)},ADD_OR_UPDATE_FORUM:function(e,t){for(var n in e.forums)if(e.forums[n].pk==t.forum_data.pk)return void e.forums.splice(n,1,t.forum_data);e.forums.push(t.forum_data)},DELETE_FORUM:function(e,t){for(var n in e.forums)e.forums[n].pk==t.pk&&e.forums.splice(n,1)},ADD_POST:function(e,t){for(var n in e.posts)if(e.posts[n].pk==t.post_data.pk)return;e.posts.push(t.post_data)},EDIT_POST:function(e,t){for(var n in e.posts)e.posts[n].pk==t.post_data.pk&&o["default"].set(e.posts,n,t.post_data)},DELETE_POST:function(e,t){for(var n in e.posts)e.posts[n].pk==t.pk&&e.posts.splice(n,1)}},actions:{getForums:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function t(){var n,i,o,s,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,e.state,i=e.dispatch,o=e.getters,t.next=3,o.url_lookup("get_forum_data");case 3:return s=t.sent,a=function(e){n("SET_FORUMS",{forums:e.data.forums})},t.abrupt("return",i("getAPIcall",{url:s,implementationCallback:a}));case 6:case"end":return t.stop()}}),t)})))()},getForum:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var i,o,s,a,r,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=e.commit,e.state,o=e.dispatch,s=e.getters,n.next=3,s.url_lookup("get_forum");case 3:return a=n.sent,r={forum_pk:t.forum_pk},c=function(e){i("ADD_OR_UPDATE_FORUM",{forum_data:e.data.forum_data})},n.abrupt("return",o("getAPIcall",{url:a,params:r,implementationCallback:c}));case 7:case"end":return n.stop()}}),n)})))()},addForum:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var i,o,s,a,r,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=e.commit,e.state,o=e.dispatch,s=e.getters,n.next=3,s.url_lookup("take_action");case 3:return a=n.sent,r={action_name:"add_forum",data_to_return:"created_instance",extra_data:t.extra_data,name:t.name,description:t.description},c=function(e){i("ADD_OR_UPDATE_FORUM",{forum_data:e.data.created_instance})},n.abrupt("return",o("actionAPIcall",{url:a,params:r,implementationCallback:c}));case 7:case"end":return n.stop()}}),n)})))()},editForum:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var i,o,s,a,r,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=e.commit,e.state,o=e.dispatch,s=e.getters,n.next=3,s.url_lookup("take_action");case 3:return a=n.sent,r={action_name:"edit_forum",data_to_return:"edited_instance",extra_data:t.extra_data,alt_target:"forum_"+t.pk,name:t.name,description:t.description},c=function(e){i("ADD_OR_UPDATE_FORUM",{forum_data:e.data.edited_instance})},n.abrupt("return",o("actionAPIcall",{url:a,params:r,implementationCallback:c}));case 7:case"end":return n.stop()}}),n)})))()},deleteForum:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var i,o,s,a,r,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=e.commit,e.state,o=e.dispatch,s=e.getters,n.next=3,s.url_lookup("take_action");case 3:return a=n.sent,r={action_name:"delete_forum",data_to_return:"deleted_item_pk",alt_target:"forum_"+t.pk,extra_data:t.extra_data},c=function(e){i("DELETE_FORUM",{pk:e.data.deleted_item_pk})},n.abrupt("return",o("actionAPIcall",{url:a,params:r,implementationCallback:c}));case 7:case"end":return n.stop()}}),n)})))()},getPosts:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var i,o,s,a,r,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=e.commit,e.state,o=e.dispatch,s=e.getters,n.next=3,s.url_lookup("get_posts_for_forum");case 3:return a=n.sent,r={forum_pk:t.forum_pk},c=function(e){for(var t in e.data.posts)i("ADD_POST",{post_data:e.data.posts[t]})},n.abrupt("return",o("getAPIcall",{url:a,params:r,implementationCallback:c}));case 7:case"end":return n.stop()}}),n)})))()},getPost:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var i,o,s,a,r,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=e.commit,e.state,o=e.dispatch,s=e.getters,n.next=3,s.url_lookup("get_post");case 3:return a=n.sent,r={post_pk:t.post_pk},c=function(e){i("ADD_POST",{post_data:e.data.post})},n.abrupt("return",o("getAPIcall",{url:a,params:r,implementationCallback:c}));case 7:case"end":return n.stop()}}),n)})))()},addPost:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var i,o,s,a,r,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=e.commit,e.state,o=e.dispatch,s=e.getters,n.next=3,s.url_lookup("take_action");case 3:return a=n.sent,r={action_name:"add_post",data_to_return:"created_instance",extra_data:t.extra_data,alt_target:"forum_"+t.forum_id,title:t.title,content:t.content},c=function(e){i("ADD_POST",{post_data:e.data.created_instance})},n.abrupt("return",o("actionAPIcall",{url:a,params:r,implementationCallback:c}));case 7:case"end":return n.stop()}}),n)})))()},editPost:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var i,o,s,a,r,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=e.commit,e.state,o=e.dispatch,s=e.getters,n.next=3,s.url_lookup("take_action");case 3:return a=n.sent,r={action_name:"edit_post",data_to_return:"edited_instance",extra_data:t.extra_data,alt_target:"post_"+t.pk,title:t.title,content:t.content},c=function(e){i("EDIT_POST",{post_data:e.data.edited_instance})},n.abrupt("return",o("actionAPIcall",{url:a,params:r,implementationCallback:c}));case 7:case"end":return n.stop()}}),n)})))()},deletePost:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var i,o,s,a,r,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=e.commit,e.state,o=e.dispatch,s=e.getters,n.next=3,s.url_lookup("take_action");case 3:return a=n.sent,r={action_name:"delete_post",data_to_return:"deleted_item_pk",alt_target:"post_"+t.pk,extra_data:t.extra_data},c=function(e){i("DELETE_POST",{pk:e.data.deleted_item_pk})},n.abrupt("return",o("actionAPIcall",{url:a,params:r,implementationCallback:c}));case 7:case"end":return n.stop()}}),n)})))()}}}),p=m,f=(n("99af"),n("c740"),n("4160"),n("caad"),n("d81d"),n("2532"),n("159b"),{state:{members:[],roles:[],users:[],current_membership_option:"",membership_config_data:{permission:null,condition:null},governance_info:"",owners:{actors:[],roles:[]},governors:{actors:[],roles:[]}},getters:{memberNames:function(e,t){return e.members.map((function(e){return t.getUserName(e)}))},roleNames:function(e){var t=[];return e.roles.forEach((function(e){t.push(e.name)})),t},allRoleNames:function(e){var t=["owners","governors","members"];return e.roles.forEach((function(e){t.push(e.name)})),t},allRoles:function(e,t){return[{name:"members",current_members:e.members}].concat(e.roles)},rolesAsOptions:function(e,t){return t.allRoles.map((function(e){return{name:e.name}}))},getUser:function(e,t){return function(t){return e.users.find((function(e){return e.pk==t}))}},getUserName:function(e,t){return function(e){var n=t.getUser(e);return n?n.name:(console.log("Warning: user not found for ",e),e)}},userInGroup:function(e,t){return function(t){return e.members.includes(t)}},membersInRole:function(e,t){return function(t){return e.roles.find((function(e){return e.name==t})).current_members}},rolesForMember:function(e,t){return function(n,i){var o=[];if(!n)return console.log("user_pk passed in is undefined"),o;if(e.roles.forEach((function(e){e.current_members.includes(n)&&o.push(e.name)})),!i){if(t.userInGroup(n)&&o.push("members"),e.owners.actors.includes(n))o.push("owners");else{var s=e.owners.roles.filter((function(e){return o.includes(e)}));s.length>1&&o.push("owners")}if(e.owners.actors.includes(n))o.push("governors");else{var a=e.governors.roles.filter((function(e){return o.includes(e)}));a.length>1&&o.push("governors")}}return o}},role_to_options:function(e,t){return function(e){return e?(Array.isArray(e)||(e=[e]),e.map((function(e){return{name:e}}))):[]}},user_pk_to_options:function(e,t){return function(e){return e?Array.isArray(e)?e.map((function(e){return{pk:e,name:t.getUser(e).name}})):(console.log("WARNING: user_pk_to_options passed in non-array: ",e),e):[]}},groupMembersAsOptions:function(e,t){return t.user_pk_to_options(e.members)},roleMembersAsOptions:function(e,t){return function(e){var n=t.membersInRole(e);return t.user_pk_to_options(n)}},membersAsOptions:function(e,t){return function(e){return"members"==e?t.groupMembersAsOptions:t.roleMembersAsOptions(e)}},nonmembersAsOptions:function(e,t){return e.users.filter((function(t){return-1==e.members.indexOf(t.pk)}))},leadershipAsOptions:function(e,t){return{owner_role_options:e.owners.roles.map((function(e){return{name:e}})),owner_actor_options:t.user_pk_to_options(e.owners.actors),governor_role_options:e.governors.roles.map((function(e){return{name:e}})),governor_actor_options:t.user_pk_to_options(e.governors.actors)}}},mutations:{SET_CURRENT_USER_AS_ONLY_GROUP_MEMBER:function(e,t){o["default"].set(e,"users",t.users),o["default"].set(e,"members",[t.user_pk])},SET_USERS:function(e,t){o["default"].set(e,"users",t.users)},SET_ROLES:function(e,t){o["default"].set(e,"roles",t.roles)},SET_LEADERS:function(e,t){o["default"].set(e,"owners",t.owners),o["default"].set(e,"governors",t.governors)},SET_GOVERNANCE_INFO:function(e,t){o["default"].set(e,"governance_info",t.governance_info)},ADD_OWNERS:function(e,t){t.roles_to_add.forEach((function(t){e.owners.roles.includes(t)||e.owners.roles.push(t)})),t.actors_to_add.forEach((function(t){e.owners.actors.includes(t)||e.owners.actors.push(t)}))},REMOVE_OWNERS:function(e,t){t.roles_to_remove.forEach((function(t){var n=e.owners.roles.indexOf(t);n>-1&&e.owners.roles.splice(n,1)})),t.actors_to_remove.forEach((function(t){var n=e.owners.actors.indexOf(t);n>-1&&e.owners.actors.splice(n,1)}))},ADD_GOVERNORS:function(e,t){t.roles_to_add.forEach((function(t){e.governors.roles.includes(t)||e.governors.roles.push(t)})),t.actors_to_add.forEach((function(t){e.governors.actors.includes(t)||e.governors.actors.push(t)}))},REMOVE_GOVERNORS:function(e,t){t.roles_to_remove.forEach((function(t){var n=e.governors.roles.indexOf(t);n>-1&&e.governors.roles.splice(n,1)})),t.actors_to_remove.forEach((function(t){var n=e.governors.actors.indexOf(t);n>-1&&e.governors.actors.splice(n,1)}))},ADD_ROLE:function(e,t){var n=e.roles.find((function(e){return e.name==t.role_name}));n||e.roles.push({name:t.role_name,current_members:[]})},REMOVE_ROLE:function(e,t){var n=e.roles.findIndex((function(e){return e.name==t.role_name}));n>-1&&e.roles.splice(n,1)},ADD_MEMBERS:function(e,t){for(var n in t.user_pks){var i=t.user_pks[n],o=e.members.indexOf(i);-1==o&&e.members.push(i)}},REMOVE_MEMBERS:function(e,t){for(var n in t.user_pks){var i=t.user_pks[n],o=e.members.indexOf(i);o>-1&&e.members.splice(o,1)}},ADD_USERS_TO_ROLE:function(e,t){var n=e.roles.find((function(e){return e.name==t.role_name}));for(var i in t.user_pks){var o=t.user_pks[i],s=n.current_members.indexOf(o);-1==s&&n.current_members.push(o)}},REMOVE_USERS_FROM_ROLE:function(e,t){var n=e.roles.find((function(e){return e.name==t.role_name}));for(var i in t.user_pks){var o=t.user_pks[i],s=n.current_members.indexOf(o);s>-1&&n.current_members.splice(s,1)}},REMOVE_USERS_FROM_ALL_ROLES:function(e,t){e.roles.forEach((function(e){t.user_pks.forEach((function(t){var n=e.current_members.indexOf(t);n>-1&&e.current_members.splice(n,1)}))}))},SET_MEMBERSHIP_OPTION_SELECTED:function(e,t){e.current_membership_option=t.selection},SET_MEMBERSHIP_CONFIG_DATA:function(e,t){o["default"].set(e.membership_config_data,"condition",t.condition_data),o["default"].set(e.membership_config_data,"permission",t.permission_data)}},actions:{initialize_members_with_current_user:function(e,t){var n=e.commit;e.state,e.dispatch,e.getters;n("SET_CURRENT_USER_AS_ONLY_GROUP_MEMBER",{users:[t.user],user_pk:t.user.pk})},getGovernanceData:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function t(){var n,i,o,s,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,e.state,i=e.dispatch,o=e.getters,t.next=3,o.url_lookup("get_governance_data");case 3:return s=t.sent,a=function(e){n("SET_USERS",{users:e.data.governance_data.users}),n("SET_ROLES",{roles:e.data.governance_data.roles}),n("SET_LEADERS",{owners:e.data.governance_data.owners,governors:e.data.governance_data.governors}),n("ADD_MEMBERS",{user_pks:e.data.governance_data.current_members}),n("SET_GOVERNANCE_INFO",{governance_info:e.data.governance_data.governance_info})},t.abrupt("return",i("getAPIcall",{url:s,implementationCallback:a}));case 6:case"end":return t.stop()}}),t)})))()},addMembers:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var i,o,s,a,r,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=e.commit,e.state,o=e.dispatch,s=e.getters,n.next=3,s.url_lookup("take_action");case 3:return a=n.sent,r={action_name:"add_members_to_community",member_pk_list:t.member_pk_list,extra_data:t.extra_data},c=function(){i("ADD_MEMBERS",{user_pks:t.member_pk_list})},n.abrupt("return",o("actionAPIcall",{url:a,params:r,implementationCallback:c}));case 7:case"end":return n.stop()}}),n)})))()},removeMembers:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var i,o,s,a,r,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=e.commit,e.state,o=e.dispatch,s=e.getters,n.next=3,s.url_lookup("take_action");case 3:return a=n.sent,r={action_name:"remove_members_from_community",member_pk_list:t.member_pk_list,extra_data:t.extra_data},c=function(){i("REMOVE_USERS_FROM_ALL_ROLES",{user_pks:t.member_pk_list}),i("REMOVE_MEMBERS",{user_pks:t.member_pk_list})},n.abrupt("return",o("actionAPIcall",{url:a,params:r,implementationCallback:c}));case 7:case"end":return n.stop()}}),n)})))()},addUsersToRole:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var i,o,s,a,r,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=e.commit,e.state,o=e.dispatch,s=e.getters,n.next=3,s.url_lookup("take_action");case 3:return a=n.sent,r={action_name:"add_people_to_role",role_name:t.role_name,people_to_add:t.people_to_add,extra_data:t.extra_data},c=function(){i("ADD_USERS_TO_ROLE",{role_name:t.role_name,user_pks:t.people_to_add})},n.abrupt("return",o("actionAPIcall",{url:a,params:r,implementationCallback:c}));case 7:case"end":return n.stop()}}),n)})))()},removeUsersFromRole:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var i,o,s,a,r,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=e.commit,e.state,o=e.dispatch,s=e.getters,n.next=3,s.url_lookup("take_action");case 3:return a=n.sent,r={action_name:"remove_people_from_role",role_name:t.role_name,people_to_remove:t.people_to_remove,extra_data:t.extra_data},c=function(){i("REMOVE_USERS_FROM_ROLE",{role_name:t.role_name,user_pks:t.people_to_remove})},n.abrupt("return",o("actionAPIcall",{url:a,params:r,implementationCallback:c}));case 7:case"end":return n.stop()}}),n)})))()},addRole:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var i,o,s,a,r,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=e.commit,e.state,o=e.dispatch,s=e.getters,n.next=3,s.url_lookup("take_action");case 3:return a=n.sent,r={action_name:"add_role_to_community",role_name:t.role_name,extra_data:t.extra_data},c=function(){i("ADD_ROLE",{role_name:t.role_name})},n.abrupt("return",o("actionAPIcall",{url:a,params:r,implementationCallback:c}));case 7:case"end":return n.stop()}}),n)})))()},removeRole:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var i,o,s,a,r,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=e.commit,e.state,o=e.dispatch,s=e.getters,n.next=3,s.url_lookup("take_action");case 3:return a=n.sent,r={action_name:"remove_role_from_community",role_name:t.role_name,extra_data:t.extra_data},c=function(){i("REMOVE_ROLE",{role_name:t.role_name})},n.abrupt("return",o("actionAPIcall",{url:a,params:r,implementationCallback:c}));case 7:case"end":return n.stop()}}),n)})))()},updateOwners:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var i,o,s,a,r,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=e.commit,e.state,o=e.dispatch,s=e.getters,n.next=3,s.url_lookup("take_action");case 3:return a=n.sent,r={action_name:"change_owners_of_community",roles_to_add:t.roles_to_add,actors_to_add:t.actors_to_add,roles_to_remove:t.roles_to_remove,actors_to_remove:t.actors_to_remove,extra_data:t.extra_data},c=function(){i("ADD_OWNERS",{roles_to_add:t.roles_to_add,actors_to_add:t.actors_to_add}),i("REMOVE_OWNERS",{roles_to_remove:t.roles_to_remove,actors_to_remove:t.actors_to_remove})},n.abrupt("return",o("actionAPIcall",{url:a,params:r,implementationCallback:c}));case 7:case"end":return n.stop()}}),n)})))()},updateGovernors:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var i,o,s,a,r,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=e.commit,e.state,o=e.dispatch,s=e.getters,n.next=3,s.url_lookup("take_action");case 3:return a=n.sent,r={action_name:"change_governors_of_community",roles_to_add:t.roles_to_add,actors_to_add:t.actors_to_add,roles_to_remove:t.roles_to_remove,actors_to_remove:t.actors_to_remove,extra_data:t.extra_data},c=function(){i("ADD_GOVERNORS",{roles_to_add:t.roles_to_add,actors_to_add:t.actors_to_add}),i("REMOVE_GOVERNORS",{roles_to_remove:t.roles_to_remove,actors_to_remove:t.actors_to_remove})},n.abrupt("return",o("actionAPIcall",{url:a,params:r,implementationCallback:c}));case 7:case"end":return n.stop()}}),n)})))()}}}),h=f,b=n("ade3"),v=(n("4fad"),n("3835")),g=function(e,t){for(var n={},i=0,o=Object.entries(t);i<o.length;i++){var s=Object(v["a"])(o[i],2),a=s[0],r=s[1];a in e?n[e[a]]=r:n[a]=r}return n},k={state:{permission_options:{},condition_options:[],condition_configuration_options:{},dependent_field_options:[],permissions:{},permission_overrides:{},current_user_permissions:{},role_permissions:{},item_permissions:{},nested_item_permissions:{},owner_condition:null,governor_condition:null},getters:{get_permission_given_pk:function(e,t){return function(t,n){var i=e.permissions[t];if(i)return n?Object(b["a"])({},t,e.permissions[t]):(i["pk"]=t,i);console.log("No permission found for ",t)}},get_list_of_permissions_given_pks:function(e,t){return function(e){var n=[];for(var i in e)n.push(t.get_permission_given_pk(e[i]));return n}},permissionsForGroup:function(e,t){return function(){var t=[];return Object.keys(e.permissions).forEach((function(n){var i=e.permissions[n];"community"!=i.target&&"Forum"!=i.target.substring(0,5)&&"SimpleList"!=i.target.substring(0,10)||t.push(i)})),t}},permissionsForRole:function(e,t){return function(n){var i=e.role_permissions[n];return t.get_list_of_permissions_given_pks(i)}},permissionsForItem:function(e,t){return function(n,i){var o=e.item_permissions[n];return o=o||[],1==i&&(o=o.concat(e.nested_item_permissions[n])),t.get_list_of_permissions_given_pks(o).filter((function(e){return void 0!=e}))}},getConditionConfigurationFields:function(e,t){return function(t){for(var n in e.condition_configuration_options)if(n.toLowerCase()==t.toLowerCase()){var i=e.condition_configuration_options[n];break}return JSON.parse(JSON.stringify(i))}},fix_permission_field_values:function(e,t){return function(e){return"string"==typeof e.value&&e.value.indexOf("{{")>-1||("RoleField"==e.type||"RoleListField"==e.type?e.value=t.role_to_options(e.value):"ActorField"!=e.type&&"ActorListField"!=e.type||(e.value=t.user_pk_to_options(e.value))),e}},getPermissionConditionConfigurationFieldsWithData:function(e,t){return function(n,i){var o=e.permissions[n]["condition"][i]["fields"];for(var s in o)o[s]=t.fix_permission_field_values(o[s]);return o}},getLeadershipConditionConfigurationFieldsWithData:function(e,t){return function(n,i){var o={};for(var s in"owner"==n?o=e.owner_condition[i]["fields"]:"governor"==n&&(o=e.governor_condition[i]["fields"]),o)o[s]=t.fix_permission_field_values(o[s]);return o}},getFoundationalForItem:function(e,t){return function(t){if(e.permission_overrides[t])return e.permission_overrides[t].foundational}},getGoverningForItem:function(e,t){return function(t){if(e.permission_overrides[t])return e.permission_overrides[t].governing}}},mutations:{SET_PERMISSION_OPTIONS:function(e,t){o["default"].set(e,"permission_options",t.options)},SET_CONDITION_OPTIONS:function(e,t){o["default"].set(e,"condition_options",t.options)},SET_CONDITION_CONFIGURATION_OPTIONS:function(e,t){o["default"].set(e,"condition_configuration_options",t.options)},SET_DEPENDENT_FIELD_OPTIONS:function(e,t){o["default"].set(e,"dependent_field_options",t.options)},ADD_OR_UPDATE_PERMISSION:function(e,t){o["default"].set(e.permissions,t.pk,t.data)},ADD_PERMISSION_TO_ROLE:function(e,t){e.role_permissions[t.role]||o["default"].set(e.role_permissions,t.role,[]);var n=e.role_permissions[t.role].indexOf(t.pk);-1==n&&e.role_permissions[t.role].push(t.pk)},REMOVE_PERMISSION_FROM_ROLES:function(e,t){for(var n in e.role_permissions){var i=e.role_permissions[n].indexOf(t.pk);i>-1&&e.role_permissions[n].splice(i,1)}},UPDATE_ROLE_WITH_PERMISSION:function(e,t){for(var n in t.permission.roles){var i=t.permission.roles[n];if(e.role_permissions[i]){var s=e.role_permissions[i].indexOf(t.permission.pk);s<0&&e.role_permissions[i].push(t.permission.pk)}else o["default"].set(e.role_permissions,i,[t.permission.pk])}},REPLACE_ROLE_PERMISSIONS:function(e,t){o["default"].set(e.role_permissions,t.role,t.pks)},DELETE_PERMISSION:function(e,t){o["default"].delete(e.permissions,t.pk)},REPLACE_ITEM_PERMISSIONS:function(e,t){var n=t.item_id+"_"+t.item_model;o["default"].set(e.item_permissions,n,t.pks)},REPLACE_NESTED_ITEM_PERMISSIONS:function(e,t){var n=t.item_id+"_"+t.item_model;o["default"].set(e.nested_item_permissions,n,t.pks)},ADD_PERMISSION_TO_ITEM:function(e,t){var n=t.item_id+"_"+t.item_model;e.item_permissions[n]||o["default"].set(e.item_permissions,n,[]);var i=e.item_permissions[n].indexOf(t.permission_pk);-1==i&&e.item_permissions[n].push(t.permission_pk)},REMOVE_PERMISSION_FROM_ITEM:function(e,t){var n=t.item_id+"_"+t.item_model,i=e.item_permissions[n].indexOf(t.pk);i>-1&&e.item_permissions[n].splice(i,1)},ADD_OR_UPDATE_CURRENT_USER_PERMISSIONS:function(e,t){for(var n in t.user_permissions)o["default"].set(e.current_user_permissions,n,t.user_permissions[n])},ADD_OR_UPDATE_PERMISSION_OVERRIDE_DATA:function(e,t){var n=t.item_id+"_"+t.item_model;o["default"].set(e.permission_overrides,n,{foundational:t.foundational,governing:t.governing})},SET_PERMISSION_CONDITION:function(e,t){o["default"].set(e.permissions[t.pk],"condition",t.condition_data)},SET_LEADERSHIP_CONDITION:function(e,t){"owner"==t.leadership_type?o["default"].set(e,"owner_condition",t.condition_data):"governor"==t.leadership_type&&o["default"].set(e,"governor_condition",t.condition_data)}},actions:{getPermissionData:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function t(){var n,i,o,s,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,e.state,i=e.dispatch,o=e.getters,t.next=3,o.url_lookup("get_permission_data");case 3:return s=t.sent,a=function(e){n("SET_PERMISSION_OPTIONS",{options:e.data.permission_options}),n("SET_CONDITION_OPTIONS",{options:e.data.condition_options}),n("SET_CONDITION_CONFIGURATION_OPTIONS",{options:e.data.condition_configuration_options}),n("SET_DEPENDENT_FIELD_OPTIONS",{options:e.data.dependent_field_options}),n("SET_LEADERSHIP_CONDITION",{leadership_type:"owner",condition_data:e.data.owner_condition}),n("SET_LEADERSHIP_CONDITION",{leadership_type:"governor",condition_data:e.data.governor_condition})},t.abrupt("return",i("getAPIcall",{url:s,implementationCallback:a}));case 6:case"end":return t.stop()}}),t)})))()},fetchMissingPermission:function(e,t){e.commit,e.state;var n=e.getters,i=e.dispatch;return new Promise((function(e,o){var s=parseInt(t.pk);isNaN(s)&&o("pk "+t.pk+" is not a number");var a=n.get_permission_given_pk(s);a&&e(a),i("getPermission",{permission_pk:s}).then((function(t){return e(n.get_permission_given_pk(s))})).catch((function(e){return o("Couldn't find permission matching "+t.pk)}))}))},addPermission:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var i,o,s,a,r,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=e.commit,e.state,o=e.dispatch,s=e.getters,n.next=3,s.url_lookup("take_action");case 3:return a=n.sent,r={action_name:"add_permission",alt_target:t.alt_target,data_to_return:"created_instance",change_type:t.change_type,permission_roles:t.roles,permission_actors:t.actors,list_of_condition_data:t.condition_data,extra_data:t.extra_data},c=function(e){var n=e.data.created_instance;i("ADD_OR_UPDATE_PERMISSION",{pk:n.pk,data:n}),"role"==t.item_or_role?i("ADD_PERMISSION_TO_ROLE",{pk:n.pk,role:t.roles}):i("ADD_PERMISSION_TO_ITEM",{permission_pk:n.pk,item_id:t.item_id,item_model:t.item_model})},n.abrupt("return",o("actionAPIcall",{url:a,params:r,implementationCallback:c}));case 7:case"end":return n.stop()}}),n)})))()},editPermission:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var i,o,s,a,r,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=e.commit,e.state,o=e.dispatch,s=e.getters,n.next=3,s.url_lookup("take_action");case 3:return a=n.sent,r={action_name:"edit_permission",extra_data:t.extra_data,alt_target:t.alt_target,anyone:t.anyone,permission_actors:t.permission_actors,permission_roles:t.permission_roles,data_to_return:"edited_instance"},c=function(e){i("ADD_OR_UPDATE_PERMISSION",{pk:e.data.edited_instance.pk,data:e.data.edited_instance})},n.abrupt("return",o("actionAPIcall",{url:a,params:r,implementationCallback:c}));case 7:case"end":return n.stop()}}),n)})))()},removePermission:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var i,o,s,a,r,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=e.commit,o=e.dispatch,s=e.getters,n.next=3,s.url_lookup("take_action");case 3:return a=n.sent,r={action_name:"remove_permission",extra_data:t.extra_data,alt_target:t.item_model+"_ "+t.item_id,data_to_return:"deleted_item_pk"},c=function(e){i("REMOVE_PERMISSION_FROM_ROLES",{pk:e.data.deleted_item_pk}),t.alt_target&&i("REMOVE_PERMISSION_FROM_ITEM",{pk:e.data.deleted_item_pk,item_id:t.item_id,item_model:t.item_model}),i("DELETE_PERMISSION",{pk:e.data.deleted_item_pk})},n.abrupt("return",o("actionAPIcall",{url:a,params:r,implementationCallback:c}));case 7:case"end":return n.stop()}}),n)})))()},addConditionToPermission:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var i,o,s,a,r,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=e.commit,e.state,o=e.dispatch,s=e.getters,n.next=3,s.url_lookup("take_action");case 3:return a=n.sent,r={action_name:"add_condition",alt_target:t.alt_target,extra_data:t.extra_data,condition_type:t.condition_type,combined_condition_data:t.combined_condition_data,data_to_return:"condition_data"},c=function(e){i("SET_PERMISSION_CONDITION",{pk:t.permission_pk,condition_data:e.data.condition_data})},n.abrupt("return",o("actionAPIcall",{url:a,params:r,implementationCallback:c}));case 7:case"end":return n.stop()}}),n)})))()},editConditionOnPermission:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var i,o,s,a,r,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=e.commit,e.state,o=e.dispatch,s=e.getters,n.next=3,s.url_lookup("take_action");case 3:return a=n.sent,r={action_name:"edit_condition",alt_target:t.alt_target,extra_data:t.extra_data,element_id:t.element_id,combined_condition_data:t.combined_condition_data,data_to_return:"condition_data"},c=function(e){i("SET_PERMISSION_CONDITION",{pk:t.permission_pk,condition_data:e.data.condition_data})},n.abrupt("return",o("actionAPIcall",{url:a,params:r,implementationCallback:c}));case 7:case"end":return n.stop()}}),n)})))()},removeConditionFromPermission:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var i,o,s,a,r,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=e.commit,e.state,o=e.dispatch,s=e.getters,n.next=3,s.url_lookup("take_action");case 3:return a=n.sent,r={action_name:"remove_condition",alt_target:t.alt_target,extra_data:t.extra_data,element_id:t.element_id,data_to_return:"condition_data"},c=function(e){i("SET_PERMISSION_CONDITION",{pk:t.permission_pk,condition_data:e.data.condition_data})},n.abrupt("return",o("actionAPIcall",{url:a,params:r,implementationCallback:c}));case 7:case"end":return n.stop()}}),n)})))()},addLeadershipCondition:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var i,o,s,a,r,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=e.commit,e.state,o=e.dispatch,s=e.getters,n.next=3,s.url_lookup("take_action");case 3:return a=n.sent,r={action_name:"add_condition",extra_data:t.extra_data,data_to_return:"condition_data",leadership_type:t.leadership_type,condition_type:t.condition_type,combined_condition_data:t.combined_condition_data},c=function(e){i("SET_LEADERSHIP_CONDITION",{leadership_type:t.leadership_type,condition_data:e.data[t.leadership_type]})},n.abrupt("return",o("actionAPIcall",{url:a,params:r,implementationCallback:c}));case 7:case"end":return n.stop()}}),n)})))()},editLeadershipCondition:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var i,o,s,a,r,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=e.commit,e.state,o=e.dispatch,s=e.getters,n.next=3,s.url_lookup("take_action");case 3:return a=n.sent,r={action_name:"edit_condition",extra_data:t.extra_data,element_id:t.element_id,data_to_return:"condition_data",leadership_type:t.leadership_type,condition_type:t.condition_type,combined_condition_data:t.combined_condition_data},c=function(e){i("SET_LEADERSHIP_CONDITION",{leadership_type:t.leadership_type,condition_data:e.data[t.leadership_type]})},n.abrupt("return",o("actionAPIcall",{url:a,params:r,implementationCallback:c}));case 7:case"end":return n.stop()}}),n)})))()},removeLeadershipCondition:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var i,o,s,a,r,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=e.commit,e.state,o=e.dispatch,s=e.getters,n.next=3,s.url_lookup("take_action");case 3:return a=n.sent,r={action_name:"remove_condition",extra_data:t.extra_data,element_id:t.element_id,data_to_return:"condition_data",leadership_type:t.leadership_type},c=function(e){i("SET_LEADERSHIP_CONDITION",{leadership_type:t.leadership_type,condition_data:e.data[t.leadership_type]})},n.abrupt("return",o("actionAPIcall",{url:a,params:r,implementationCallback:c}));case 7:case"end":return n.stop()}}),n)})))()},getPermission:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var i,o,s,a,r,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=e.commit,e.state,o=e.dispatch,s=e.getters,n.next=3,s.url_lookup("get_permission");case 3:return a=n.sent,r={permission_pk:t.permission_pk},c=function(e){i("ADD_OR_UPDATE_PERMISSION",{pk:t.permission_pk,data:e.data.permission_data}),i("UPDATE_ROLE_WITH_PERMISSION",{permission:e.data.permission_data})},n.abrupt("return",o("getAPIcall",{url:a,params:r,implementationCallback:c}));case 7:case"end":return n.stop()}}),n)})))()},getPermissionsForItem:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var i,o,s,a,r,c,l;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=e.commit,e.state,o=e.dispatch,s=e.getters,n.next=3,s.url_lookup("get_permissions");case 3:return a=n.sent,r="list"==t.item_model?"simplelist":t.item_model,c={item_id:t.item_id,item_model:r},l=function(e){for(var t in i("REPLACE_ITEM_PERMISSIONS",{item_id:e.data.item_id,item_model:e.data.item_model,pks:e.data.permission_pks}),i("REPLACE_NESTED_ITEM_PERMISSIONS",{item_id:e.data.item_id,item_model:e.data.item_model,pks:e.data.nested_pks}),e.data.permissions)i("ADD_OR_UPDATE_PERMISSION",{pk:t,data:e.data.permissions[t]}),i("UPDATE_ROLE_WITH_PERMISSION",{permission:e.data.permissions[t]});i("ADD_OR_UPDATE_PERMISSION_OVERRIDE_DATA",{item_id:e.data.item_id,item_model:e.data.item_model,foundational:e.data.foundational,governing:e.data.governing})},n.abrupt("return",o("getAPIcall",{url:a,params:c,implementationCallback:l}));case 8:case"end":return n.stop()}}),n)})))()},changePermissionOverride:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var i,o,s,a,r,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=e.commit,e.state,o=e.dispatch,s=e.getters,n.next=3,s.url_lookup("change_item_permission_override");case 3:return a=n.sent,r={item_id:t.item_id,item_model:t.item_model,enable_or_disable:t.enable_or_disable,governing_or_foundational:t.governing_or_foundational},c=function(e){i("ADD_OR_UPDATE_PERMISSION_OVERRIDE_DATA",{item_id:e.data.item_id,item_model:e.data.item_model,foundational:e.data.foundational,governing:e.data.governing})},n.abrupt("return",o("actionAPIcall",{url:a,params:r,implementationCallback:c}));case 7:case"end":return n.stop()}}),n)})))()},toggleAnyone:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var i,o,s,a,r,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=e.commit,o=e.getters,s=e.dispatch,n.next=3,o.url_lookup("toggle_anyone");case 3:return a=n.sent,r={permission_id:t.permission_id,enable_or_disable:t.enable_or_disable},c=function(e){var t=e.data.permission.pk,n=e.data.permission.permission_data[0];i("ADD_OR_UPDATE_PERMISSION",{pk:t,data:n})},n.abrupt("return",s("actionAPIcall",{url:a,params:r,implementationCallback:c}));case 7:case"end":return n.stop()}}),n)})))()},checkPermission:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var i,o,s,a,r,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=e.commit,e.state,o=e.dispatch,s=e.getters,n.next=3,s.url_lookup("check_permission");case 3:return a=n.sent,r={permission_name:t.name,alt_target:t.alt_target,params:t.params},c=function(e){var n=null;n=t.aliases?g(t.aliases,e.data.user_permissions):e.data.user_permissions,i("ADD_OR_UPDATE_CURRENT_USER_PERMISSIONS",{user_permissions:n})},n.abrupt("return",o("getAPIcall",{url:a,params:r,implementationCallback:c}));case 7:case"end":return n.stop()}}),n)})))()},checkPermissions:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var i,o,s,a,r,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=e.commit,e.state,o=e.dispatch,s=e.getters,n.next=3,s.url_lookup("check_permissions");case 3:return a=n.sent,r={permissions:t.permissions},c=function(e){var n=null;n=t.aliases?g(t.aliases,e.data.user_permissions):e.data.user_permissions,i("ADD_OR_UPDATE_CURRENT_USER_PERMISSIONS",{user_permissions:n})},n.abrupt("return",o("getAPIcall",{url:a,params:r,implementationCallback:c}));case 7:case"end":return n.stop()}}),n)})))()},refreshRoleData:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var i,o,s,a,r,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=e.commit,e.state,o=e.dispatch,s=e.getters,n.next=3,s.url_lookup("get_data_for_role");case 3:return a=n.sent,r={role_name:t.role},c=function(e){for(var n in e.data.permissions)i("ADD_PERMISSION_TO_ROLE",{pk:n,role:t.role}),i("ADD_OR_UPDATE_PERMISSION",{pk:n,data:e.data.permissions[n]})},n.abrupt("return",o("getAPIcall",{url:a,params:r,implementationCallback:c}));case 7:case"end":return n.stop()}}),n)})))()}}},w=k,y={state:{lists:[]},getters:{getListData:function(e,t){return function(t){return e.lists.find((function(e){return e.pk==t}))}}},mutations:{ADD_OR_UPDATE_LIST:function(e,t){for(var n in e.lists)if(e.lists[n].pk==t.list_data.pk)return void e.lists.splice(n,1,t.list_data);e.lists.push(t.list_data)},DELETE_LIST:function(e,t){for(var n in e.lists)e.lists[n].pk==t.deleted_list_pk&&e.lists.splice(n,1)},ADD_OR_EDIT_ROW:function(e,t){var n=e.lists.find((function(e){return e.pk==t.list_pk}));o["default"].set(n.rows,t.unique_id,t.row_content)},DELETE_ROW:function(e,t){var n=e.lists.find((function(e){return e.pk==t.list_pk}));o["default"].delete(n.rows,t.unique_id)}},actions:{getLists:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function t(){var n,i,o,s,a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,e.state,i=e.dispatch,o=e.getters,t.next=3,o.url_lookup("get_lists");case 3:return s=t.sent,a={},r=function(e){for(var t in e.data.lists)n("ADD_OR_UPDATE_LIST",{list_data:e.data.lists[t]})},t.abrupt("return",i("getAPIcall",{url:s,params:a,implementationCallback:r}));case 7:case"end":return t.stop()}}),t)})))()},getList:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var i,o,s,a,r,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=e.commit,e.state,o=e.dispatch,s=e.getters,n.next=3,s.url_lookup("get_list");case 3:return a=n.sent,r={list_pk:t.list_pk},c=function(e){i("ADD_OR_UPDATE_LIST",{list_data:e.data.list})},n.abrupt("return",o("getAPIcall",{url:a,params:r,implementationCallback:c}));case 7:case"end":return n.stop()}}),n)})))()},addList:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var i,o,s,a,r,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=e.commit,e.state,o=e.dispatch,s=e.getters,n.next=3,s.url_lookup("take_action");case 3:return a=n.sent,r={action_name:"add_list",data_to_return:"created_instance",extra_data:t.extra_data,name:t.name,description:t.description},c=function(e){i("ADD_OR_UPDATE_LIST",{list_data:e.data.created_instance})},n.abrupt("return",o("actionAPIcall",{url:a,params:r,implementationCallback:c}));case 7:case"end":return n.stop()}}),n)})))()},editList:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var i,o,s,a,r,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=e.commit,e.state,o=e.dispatch,s=e.getters,n.next=3,s.url_lookup("take_action");case 3:return a=n.sent,r={action_name:"edit_list",data_to_return:"edited_instance",extra_data:t.extra_data,alt_target:"simplelist_"+t.pk,name:t.name,description:t.description},c=function(e){i("ADD_OR_UPDATE_LIST",{list_data:e.data.edited_instance})},n.abrupt("return",o("actionAPIcall",{url:a,params:r,implementationCallback:c}));case 7:case"end":return n.stop()}}),n)})))()},deleteList:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var i,o,s,a,r,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=e.commit,e.state,o=e.dispatch,s=e.getters,n.next=3,s.url_lookup("take_action");case 3:return a=n.sent,r={action_name:"delete_list",data_to_return:"deleted_item_pk",extra_data:t.extra_data,alt_target:"simplelist_"+t.pk},c=function(e){i("DELETE_LIST",{deleted_list_pk:e.data.deleted_item_pk})},n.abrupt("return",o("actionAPIcall",{url:a,params:r,implementationCallback:c}));case 7:case"end":return n.stop()}}),n)})))()},addColumn:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var i,o,s,a,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.commit,e.state,i=e.dispatch,o=e.getters,n.next=3,o.url_lookup("take_action");case 3:return s=n.sent,a={action_name:"add_column_to_list",extra_data:t.extra_data,alt_target:t.alt_target,data_to_return:"target_pk",column_name:t.column_name,required:t.required,default_value:t.default_value},r=function(e){i("getList",{list_pk:e.data.target_pk})},n.abrupt("return",i("actionAPIcall",{url:s,params:a,implementationCallback:r}));case 7:case"end":return n.stop()}}),n)})))()},editColumn:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var i,o,s,a,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.commit,e.state,i=e.dispatch,o=e.getters,n.next=3,o.url_lookup("take_action");case 3:return s=n.sent,a={action_name:"edit_column_in_list",extra_data:t.extra_data,alt_target:t.alt_target,data_to_return:"target_pk",column_name:t.column_name,required:t.required,default_value:t.default_value,new_name:t.new_name},r=function(e){i("getList",{list_pk:e.data.target_pk})},n.abrupt("return",i("actionAPIcall",{url:s,params:a,implementationCallback:r}));case 7:case"end":return n.stop()}}),n)})))()},deleteColumn:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var i,o,s,a,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.commit,e.state,i=e.dispatch,o=e.getters,n.next=3,o.url_lookup("take_action");case 3:return s=n.sent,a={action_name:"delete_column_from_list",extra_data:t.extra_data,alt_target:t.alt_target,data_to_return:"target_pk",column_name:t.column_name},r=function(e){i("getList",{list_pk:e.data.target_pk})},n.abrupt("return",i("actionAPIcall",{url:s,params:a,implementationCallback:r}));case 7:case"end":return n.stop()}}),n)})))()},addRow:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var i,o,s,a,r,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=e.commit,e.state,o=e.dispatch,s=e.getters,n.next=3,s.url_lookup("take_action");case 3:return a=n.sent,r={action_name:"add_row_to_list",extra_data:t.extra_data,alt_target:"simplelist_"+t.list_pk,data_to_return:"unique_id",row_content:t.row_content,list_pk:t.list_pk},c=function(e){i("ADD_OR_EDIT_ROW",{list_pk:t.list_pk,row_content:t.row_content,unique_id:e.data.unique_id})},n.abrupt("return",o("actionAPIcall",{url:a,params:r,implementationCallback:c}));case 7:case"end":return n.stop()}}),n)})))()},editRow:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var i,o,s,a,r,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=e.commit,e.state,o=e.dispatch,s=e.getters,n.next=3,s.url_lookup("take_action");case 3:return a=n.sent,r={action_name:"edit_row_in_list",extra_data:t.extra_data,row_content:t.row_content,unique_id:t.unique_id,list_pk:t.list_pk,alt_target:"simplelist_"+t.list_pk},c=function(e){i("ADD_OR_EDIT_ROW",{list_pk:t.list_pk,row_content:t.row_content,unique_id:t.unique_id})},n.abrupt("return",o("actionAPIcall",{url:a,params:r,implementationCallback:c}));case 7:case"end":return n.stop()}}),n)})))()},deleteRow:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var i,o,s,a,r,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=e.commit,e.state,o=e.dispatch,s=e.getters,n.next=3,s.url_lookup("take_action");case 3:return a=n.sent,r={action_name:"delete_row_in_list",extra_data:t.extra_data,list_pk:t.list_pk,alt_target:"simplelist_"+t.list_pk,unique_id:t.unique_id},c=function(e){i("DELETE_ROW",{list_pk:t.list_pk,unique_id:t.unique_id})},n.abrupt("return",o("actionAPIcall",{url:a,params:r,implementationCallback:c}));case 7:case"end":return n.stop()}}),n)})))()}}},O=y,C={state:{templates:{}},getters:{scopeTemplates:function(e,t){return function(t){return e.templates[t]}}},mutations:{REPLACE_SCOPE_TEMPLATES:function(e,t){o["default"].set(e.templates,t.scope,t.templates)}},actions:{getTemplatesForScope:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var i,o,s,a,r,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=e.commit,e.state,o=e.dispatch,s=e.getters,n.next=3,s.url_lookup("get_templates_for_scope");case 3:return a=n.sent,r={scope:t.scope},c=function(e){i("REPLACE_SCOPE_TEMPLATES",{scope:e.data.scope,templates:e.data.templates})},n.abrupt("return",o("getAPIcall",{url:a,params:r,implementationCallback:c}));case 7:case"end":return n.stop()}}),n)})))()},applyTemplate:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var i,o,s,a,r,c,l,d;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.commit,e.state,i=e.dispatch,o=e.getters,s=e.rootState,a=null,r=null,t.target_model&&t.target_pk?(a=t.target_model,r=t.target_pk):(a="group",r=s.group_pk),n.next=6,o.url_lookup("apply_template");case 6:return c=n.sent,l={supplied_fields:t.supplied_fields,target_pk:r,target_model:a,template_model_pk:t.template_model_pk},d=function(e){},n.abrupt("return",i("actionAPIcall",{url:c,params:l,implementationCallback:d}));case 10:case"end":return n.stop()}}),n)})))()}}},x=C;o["default"].use(s["a"]);t["a"]=new s["a"].Store({modules:{concord_actions:c,documents:u,forums:p,permissions:w,governance:h,comments:d,templates:x,simplelists:O},state:{group_pk:null,group_name:"",group_description:"",user_pk:null,user_name:"",urls:{}},getters:{getGroupData:function(e,t){return function(t){return{pk:e.group_pk,name:e.group_name,description:e.group_description}}},url_lookup:function(e,t){return function(t){return new Promise((function(n,i){var o=setInterval((function(){0!=Object.keys(e.urls).length&&(clearInterval(o),n("/"+e.urls[t]))}),1e3)}))}}},mutations:{UPDATE_GROUP_PK:function(e,t){e.group_pk=t.group_pk},UPDATE_GROUP_NAME:function(e,t){e.group_name=t.group_name},UPDATE_GROUP_DESCRIPTION:function(e,t){e.group_description=t.group_description},SET_URL_MAP:function(e,t){e.urls=t.urls},UPDATE_USER_PK:function(e,t){e.user_pk=t.user_pk},UPDATE_USER_NAME:function(e,t){e.user_name=t.user_name}},actions:{initialize_url_data:function(e,t){var n=e.commit;e.state,e.dispatch;n("SET_URL_MAP",{urls:t.urls})},initialize_group_data:function(e,t){var n=e.commit;e.state,e.dispatch;n("SET_URL_MAP",{urls:t.urls}),n("UPDATE_GROUP_NAME",{group_name:t.group_name}),n("UPDATE_GROUP_DESCRIPTION",{group_description:t.group_description}),n("UPDATE_GROUP_PK",{group_pk:t.group_pk}),n("UPDATE_USER_PK",{user_pk:t.user_pk}),n("UPDATE_USER_NAME",{user_name:t.user_name})},get_url_data:function(e,t){var n=e.commit,i=e.state,o=(e.dispatch,"/groups/api/get_urls/"+i.group_pk+"/");return a["a"].post(o).then((function(e){n("SET_URL_MAP",{urls:t.urls})})).catch((function(e){throw console.log(e),e}))},editGroup:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var i,o,s,a,r,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=e.commit,o=e.getters,e.state,s=e.dispatch,n.next=3,o.url_lookup("take_action");case 3:return a=n.sent,r={action_name:"edit_group",name:t.name,description:t.description,extra_data:t.extra_data},c=function(e){t.name&&i("UPDATE_GROUP_NAME",{group_name:t.name}),t.description&&i("UPDATE_GROUP_DESCRIPTION",{group_description:t.description})},n.abrupt("return",s("actionAPIcall",{url:a,params:r,implementationCallback:c}));case 7:case"end":return n.stop()}}),n)})))()},actionAPIcall:function(e,t){e.commit,e.state;var n=e.dispatch,i=t.url,o=t.params,s=t.implementationCallback;return a["a"].post(i,o).then((function(e){return"invalid"!=e.data.action_status&&n("updateActions",{response:e}),"implemented"==e.data.action_status&&s(e),e})).catch((function(e){throw console.log("Error: ",e),e}))},getAPIcall:function(e,t){e.commit,e.state,e.dispatch;var n=t.url,i=t.params,o=t.implementationCallback;return a["a"].post(n,i).then((function(e){o(e)})).catch((function(e){throw console.log(e),e}))}}})},4413:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return o}));var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[e.response_list?n("div",e._l(e.response_list,(function(t){return n("b-alert",{key:t.data.action_pk,attrs:{show:e.get_show_alert(t),variant:e.get_variant(t),dismissible:""},on:{dismissed:function(n){return e.dismiss_alert(t)}}},["invalid"==e.get_status(t)?n("span",[e._v(e._s(e.process_message(t)))]):n("span",{domProps:{innerHTML:e._s(e.process_message(t))}})])})),1):e._e()])},o=[]},4811:function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[n("form-button-and-modal",{attrs:{id_add:e.id_to_add,item_id:e.item_id,item_model:e.item_model}}),e.hide_delete?e._e():n("take-action-component",{attrs:{verb:"delete "+e.item_model,response:e.response,unique:e.item_id,alt_target:e.alt_target},on:{"take-action":e.delete_item}},[n("b-icon-trash",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"mr-2",attrs:{id:"delete_"+e.item_model+"_button",title:"delete "+e.item_model}})],1),n("b-link",{attrs:{variant:"dark",to:{name:"action-history",params:{item_id:e.item_id,item_model:e.item_model,item_name:e.item_name}}}},[n("b-icon-clock-history",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"mr-2",attrs:{id:e.item_model+"_history_button",title:e.item_model+" history"}})],1),n("b-icon-shield-lock",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}},{name:"b-modal",rawName:"v-b-modal",value:"item_permissions_modal_"+e.id_to_add,expression:"'item_permissions_modal_' + id_to_add"}],staticClass:"mr-2",attrs:{id:e.item_model+"_permissions",title:e.item_model+" permissions"}}),n("item-permissions-modal",{attrs:{item_id:e.item_id,item_model:e.item_model,item_name:e.item_name,id_add:e.id_to_add}}),e.export_url?n("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"mr-2 btn-small",attrs:{href:e.export_url,title:e.export_prompt,download:"",variant:"link"}},[n("b-icon-download")],1):e._e()],1)},o=[],s=n("4360"),a=(n("a209"),n("f3f4")),r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-modal",{attrs:{id:e.modal_id,title:e.title_string,size:"xl","hide-footer":""}},[n("simple-permissions-display-component",{attrs:{permissions:e.permissions,item_id:e.item_id,item_model:e.item_model,item_name:e.item_name}})],1)},c=[],l=n("5530"),d=n("2f62"),_=n("4e90"),u={props:["item_id","item_model","item_name","id_add"],components:{SimplePermissionsDisplayComponent:_["a"]},store:s["a"],created:function(){var e=this;this.getPermissionsForItem({item_id:this.item_id,item_model:this.item_model}).catch((function(t){e.error_message=t}))},computed:Object(l["a"])(Object(l["a"])({},d["a"].mapGetters(["permissionsForItem"])),{},{title_string:function(){return"Permissions for "+this.item_model+" '"+this.item_name+"'"},permissions:function(){return this.permissionsForItem(this.item_id+"_"+this.item_model,!0)},modal_id:function(){return this.id_add?"item_permissions_modal_"+this.id_add:"item_permissions_modal"}}),methods:Object(l["a"])({},d["a"].mapActions(["getPermissionsForItem"]))},m=u,p=n("2877"),f=Object(p["a"])(m,r,c,!1,null,null,null),h=f.exports,b=n("8cc1"),v={components:{ItemPermissionsModal:h,FormButtonAndModal:a["a"],TakeActionComponent:b["a"]},props:["item_id","item_model","item_name","id_add","export_url","export_text","response","hide_delete"],computed:{export_prompt:function(){return this.export_text?this.export_text:"export"},id_to_add:function(){return this.id_add?this.id_add:"main"},alt_target:function(){return"list"==this.item_model?"simplelist_"+this.item_id:this.item_model+"_"+this.item_id}},methods:{delete_item:function(e){this.$emit("delete",e)}}},g=v,k=(n("722d"),Object(p["a"])(g,i,o,!1,null,"52f340e8",null));t["a"]=k.exports},"4ae4":function(e,t,n){"use strict";var i=n("1e2a"),o=n("f7bd"),s=n("2877"),a=Object(s["a"])(o["default"],i["a"],i["b"],!1,null,null,null);t["default"]=a.exports},"4e90":function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[n("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal",value:"add_permission_modal_"+e.add_target+"_"+e.default_selection,expression:"'add_permission_modal_' + add_target + '_' + default_selection"}],staticClass:"mr-1 mb-4 btn-sm outline-secondary add-permission",attrs:{id:"add_permission_button",variant:"outline-secondary"}},[e._v("Add Permission")]),n("permission-editor-component",{attrs:{mode:"add",edit_target:e.add_target,edit_change:e.default_selection}}),e.user_permissions.apply_template?n("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal",value:"apply_template_modal_"+e.item_model,expression:"'apply_template_modal_' + item_model"}],staticClass:"mr-1 mb-4 btn-sm",attrs:{id:"apply_templates",variant:"outline-secondary"}},[e._v("Apply Templates")]):e._e(),n("template-modal",{attrs:{scope:e.item_model,target_id:e.item_id,target_model:e.item_model}}),n("router-link",{attrs:{id:"group_permissions_button",to:{name:"group-permissions",params:{group_pk:e.group_pk}}}},[n("b-button",{staticClass:"mb-4 btn-sm",attrs:{variant:"outline-secondary"}},[e._v("See All Permissions In Group")])],1),n("permissions-table-component",{staticClass:"my-2",attrs:{permissions:e.permissions}})],1)},o=[],s=n("5530"),a=n("2f62"),r=(n("4360"),n("f56d")),c=n("93f0"),l=n("894b"),d={components:{PermissionEditorComponent:r["a"],PermissionsTableComponent:c["a"],TemplateModal:l["a"]},props:["permissions","item_id","item_model","item_name","default_selection","role_to_edit"],created:function(){var e=this.item_model+"_"+this.item_id;this.checkPermissions({permissions:{apply_template:{alt_target:e}}}).catch((function(e){console.log(e)}))},computed:Object(s["a"])(Object(s["a"])({},a["a"].mapState({group_pk:function(e){return e.group_pk},user_permissions:function(e){return e.permissions.current_user_permissions}})),{},{add_target:function(){return"group"==this.item_model?"community":this.item_model+" '"+this.item_name+"'"}}),methods:Object(s["a"])({},a["a"].mapActions(["checkPermissions"]))},_=d,u=n("2877"),m=Object(u["a"])(_,i,o,!1,null,null,null);t["a"]=m.exports},"4f41":function(e,t,n){},"50f3":function(e,t,n){},"532a":function(e,t,n){},"583c":function(e,t,n){"use strict";var i=n("bc3a"),o=n.n(i);o.a.defaults.xsrfCookieName="csrftoken",o.a.defaults.xsrfHeaderName="X-CSRFTOKEN",o.a.defaults.headers={headers:{"Content-Type":"application/json"}},t["a"]=o.a},"63a0":function(e,t,n){"use strict";n("6df7")},"6df7":function(e,t,n){},"722d":function(e,t,n){"use strict";n("a7dc")},"74b7":function(e,t,n){"use strict";n("f4bc")},"7f3b":function(e,t,n){},8063:function(e,t,n){"use strict";n("bc0a")},"874c":function(e,t,n){n("caad");var i=n("ded3");e.exports={props:["response"],data:function(){return{unique_identifier:null,suppress_alert:!1,dismissed:{}}},computed:i(i({},Vuex.mapState({group_pk:function(e){return e.group_pk}})),{},{response_list:function(){return Array.isArray(this.response)?this.response:this.response?[this.response]:[]},showAlert:function(){return!(!this.response||this.suppress_alert)}}),methods:{get_status:function(e){return e&&e.data.action_status?e.data.action_status:null},get_variant:function(e){var t=this.get_status(e);return["waiting","propose-req","propose-vol"].includes(t)?"warning":"invalid"==t?"danger":"rejected"==t?"info":"implemented"==t?"success":void(t&&console.log("WARNING: unexpected status: ",this.status))},dismiss_alert:function(e){this.dismissed[e.data.action_pk]=!0},get_show_alert:function(e){return!!e&&!this.dismissed[e.data.action_pk]},process_message:function(e){var t=this.get_status(e),n="/groups/"+this.group_pk+"/#/actions/detail/"+e.data.action_pk;return"implemented"==t?"You have successfully "+e.data.action_description+". If you want to provide context for this action, you can do so <a id='history_link' href='"+n+"'>here</a>.":"waiting"==t?"<span>There is a <a id='condition_link' href='"+n+"'>condition</a> on your action which must be resolved before your action can be implemented.</span>":"invalid"==t?e.data.user_message:"rejected"==t?"Your action has been rejected because you do not have permission to take it. You can discuss the issue further <a id='history_link' href='"+n+"'>here</a>.":"propose-vol"==t?"Your action has been proposed. Visit <a id='history_link' href='"+n+"'>this link</a> to discuss further or to go ahead and take your action.":"propose-req"==t?"Your action has been proposed. Visit <a id='history_link' href='"+n+"'>this link</a> for further discussion.":void console.log("Warning, no response given for status ",t)}}}},"87d8":function(e,t,n){"use strict";n("7f3b")},"894b":function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-modal",{attrs:{id:"apply_template_modal_"+e.scope,title:e.title_string,size:"xl","hide-footer":""}},[n("template-component",{attrs:{scope:e.new_scope,target_id:e.target_id,target_model:e.target_model}})],1)},o=[],s=(n("4360"),n("a669")),a={props:["scope","target_id","target_model"],components:{TemplateComponent:s["a"]},computed:{title_string:function(){return"Apply "+this.scope+" templates"},new_scope:function(){return"group"==this.scope?"community":this.scope}}},r=a,c=n("2877"),l=Object(c["a"])(r,i,o,!1,null,null,null);t["a"]=l.exports},"8bdd":function(e,t,n){},"8cc1":function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[e.shortcut_taken?n("action-response-component",{attrs:{response:e.response}}):e._e(),e.button_template_provided?e._e():n("b-button-group",[n("b-button",{staticClass:"take-action",attrs:{id:"take_action",disabled:!e.has_permission},on:{click:e.shortcut}},[e._v(e._s(e.verb))]),n("b-button",{attrs:{id:"propose_action"},on:{click:e.open_extra}},[e.show_inline_interface?n("b-icon-caret-up"):n("b-icon-caret-down")],1)],1),e.shortcut_taken&&e.action_sent&&!e.response?n("b-spinner",{staticClass:"ml-2",attrs:{small:"",label:"Spinner"}}):e._e(),n("span",{on:{click:e.open_extra}},[e._t("default")],2),e.inline&&e.show_inline_interface?n("b-card",{staticClass:"mt-3",attrs:{"bg-variant":"light"}},[n("action-form-component",{attrs:{response:e.response,verb:e.verb,has_permission:e.has_permission,has_condition:e.has_condition},on:{"take-action":e.pass_along}})],1):n("b-modal",{attrs:{id:e.modal_id,title:"Take action: "+e.verb,"hide-footer":""},on:{close:function(t){return e.$emit("close-modal",e.modal_id)}}},[n("action-form-component",{attrs:{response:e.response,verb:e.verb,has_permission:e.has_permission,has_condition:e.has_condition},on:{"take-action":e.pass_along}})],1)],1)},o=[],s=(n("ac1f"),n("5319"),n("5530")),a=n("2f62"),r=n("4360"),c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.complete?e._e():n("span",[n("b-form-group",[n("b-form-radio-group",{staticClass:"action-mode-options",attrs:{id:"action-mode-buttons",options:e.options,"button-variant":"outline-secondary",name:"action-mode-buttons",buttons:""},model:{value:e.mode,callback:function(t){e.mode=t},expression:"mode"}})],1),e._v(" "+e._s(e.prompt_text)+" "),n("b-form-group",{staticClass:"mt-2",attrs:{id:"action_note"}},[n("b-form-textarea",{attrs:{id:"text",name:"text",maxlength:200,placeholder:"Write your note here"},model:{value:e.action_note_text,callback:function(t){e.action_note_text=t},expression:"action_note_text"}})],1)],1),e.warning?n("div",{staticClass:"text-danger mb-2"},[e._v(e._s(e.warning))]):e._e(),n("action-response-component",{attrs:{response:e.response}}),e.complete?e._e():n("b-button",{staticClass:"take-action",attrs:{variant:"info",id:"submit_action"},on:{click:e.submit}},[e._v("submit")]),e.action_sent&&!e.response?n("b-spinner",{staticClass:"ml-2",attrs:{small:"",label:"Spinner"}}):e._e()],1)},l=[],d=n("c33f"),_={props:["verb","response","has_permission","has_condition"],components:{ActionResponseComponent:d["default"]},store:r["a"],data:function(){return{mode:null,warning:null,action_note_text:"",complete:!1,action_sent:!1}},created:function(){this.actor_can_take?this.mode="take":this.mode="propose"},watch:{actor_can_take:function(e){e&&(this.mode="take")}},computed:{actor_can_take:function(){return this.has_permission&&!this.has_condition},note_required:function(){return!this.has_permission},options:function(){var e=[];return e.push({text:"Take",value:"take",disabled:!this.actor_can_take}),e.push({text:"Propose",value:"propose",disabled:!1}),e},prompt_text:function(){return null==this.mode?"Please decide if you're taking or proposing an action.":"propose"==this.mode?this.actor_can_take?"When proposing an action, it's helpful to provide some extra context via a note. (Optional, 200 char. max)":"Please explain why you want to take this action. (Required, 200 char. max)":"take"==this.mode?"It can be helpful to provide extra context as to why you've taken this action. (Optional, 200 char. max)":"error"}},methods:Object(s["a"])(Object(s["a"])({},a["a"].mapActions(["addNoteToAction"])),{},{submit:function(){if(this.mode)if(this.note_required&&""==this.action_note_text)this.warning="The action note is required.";else if(this.warning=null,this.action_sent=!0,"propose"==this.mode){var e=this.actor_can_take?"propose-vol":"propose-req";this.$emit("take-action",{proposed:e,note:this.action_note_text})}else this.$emit("take-action",{note:this.action_note_text});else this.warning="You must specify whether you're taking or proposing an action."}})},u=_,m=n("2877"),p=Object(m["a"])(u,c,l,!1,null,null,null),f=p.exports,h={props:["verb","action_name","alt_target","response","check_permissions_params","inline","unique"],components:{ActionFormComponent:f,ActionResponseComponent:d["default"]},store:r["a"],data:function(){return{shortcut_taken:!1,show_inline_interface:!1,has_condition:!1}},created:function(){var e=this,t={name:this.action_backend_name,alt_target:this.alt_target?this.alt_target:null,params:this.check_permission_params?this.check_permission_params:null};this.checkPermission(t).catch((function(t){e.error_message=t,console.log(t)}))},computed:Object(s["a"])(Object(s["a"])({},a["a"].mapState({user_permissions:function(e){return e.permissions.current_user_permissions}})),{},{modal_id:function(){var e=this.unique?this.unique:"";return this.verb+"_action_modal_"+e},button_template_provided:function(){return!!this.$slots.default},action_backend_name:function(){return this.action_name?this.action_name:this.verb.replace(/ /g,"_")},has_permission:function(){return this.user_permissions[this.action_backend_name]}}),methods:Object(s["a"])(Object(s["a"])({},a["a"].mapActions(["checkPermission"])),{},{shortcut:function(){this.$emit("take-action"),this.shortcut_taken=!0,this.action_sent=!0},open_extra:function(){this.$emit("open-extra"),this.inline?1==this.show_inline_interface?(this.$emit("close-extra"),this.show_inline_interface=!1):this.show_inline_interface=!0:this.$bvModal.show(this.modal_id)},pass_along:function(e){this.$emit("take-action",e)}})},b=h,v=(n("63a0"),Object(m["a"])(b,i,o,!1,null,"2e41e12c",null));t["a"]=v.exports},"91bc":function(e,t,n){"use strict";n("35dc")},"93f0":function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("b-table",{attrs:{small:"","sticky-header":"390px","no-border-collapse":"",responsive:"",items:e.restructured_permissions,fields:e.fields,filter:e.filter_data,"filter-function":e.filter_function},scopedSlots:e._u([{key:"cell(condition)",fn:function(t){return[t.item.condition?n("span",[e._v("True")]):e._e()]}},{key:"cell(change_name)",fn:function(t){return[n("div",{staticClass:"text-nowrap permissions-row"},[n("b-icon-pencil-fill",{directives:[{name:"b-modal",rawName:"v-b-modal",value:"permission_modal_"+t.item.target+"_"+t.item.change_name,expression:"'permission_modal_' + data.item.target + '_' + data.item.change_name"}],staticClass:"mr-2 edit-perm"}),n("small",[e._v(e._s(t.item.change_name))]),n("permission-editor-component",{attrs:{mode:"edit",edit_target:t.item.target,edit_change:t.item.change_name}})],1)]}},{key:"cell(target)",fn:function(t){return[n("div",{staticClass:"text-nowrap"},[n("small",[e._v(e._s(t.item.target))])])]}},{key:"cell()",fn:function(t){return[void 0!=t.value.has_perm?n("span",[n("span",{staticClass:"perm-cell",class:[t.field.key,e.parse(t.item.change_name),t.value.has_perm?"has-perm":"no-perm",t.value.more_info?"has-info":"no-info"]},[1==t.value.has_perm?n("b-icon-check-circle-fill",{attrs:{variant:"success"}}):e._e(),0==t.value.has_perm?n("b-icon-x",{attrs:{variant:"danger"}}):e._e(),t.value.has_perm&&t.value.more_info?n("b-icon-question-diamond",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip",value:{title:t.value.more_info,delay:0},expression:"{ title: data.value.more_info, delay: 0 }"}]}):e._e()],1)]):n("span",[e._v(" "+e._s(t.value)+" ")])]}}])})],1)},o=[],s=(n("99af"),n("4160"),n("caad"),n("13d5"),n("b64b"),n("07ac"),n("ac1f"),n("2532"),n("5319"),n("159b"),n("5530")),a=n("2f62"),r=n("4360"),c=n("f56d"),l={components:{PermissionEditorComponent:c["a"]},props:["permissions","filter_data"],store:r["a"],data:function(){return{prepend_constant_fields:[{key:"change_name",label:"Change",sortable:!0,stickyColumn:!0},{key:"target",label:"Target",sortable:!0},{key:"you",label:"You",sortable:!0}],append_constant_fields:[{key:"anyone",label:"Anyone",class:"text-center"}],error_message:""}},computed:Object(s["a"])(Object(s["a"])(Object(s["a"])({},a["a"].mapGetters(["allRoleNames","rolesForMember"])),a["a"].mapState({owner_condition:function(e){return e.permissions.owner_condition},governor_condition:function(e){return e.permissions.governor_condition},user_pk:function(e){return e.user_pk}})),{},{fields:function(){if(this.permissions){var e=[];return this.allRoleNames.forEach((function(t){return e.push({key:t,sortable:!1,class:"text-center"})})),this.prepend_constant_fields.concat(e.concat(this.append_constant_fields))}return this.constant_fields},restructured_permissions:function(){return this.get_restructured_permissions(this.permissions,this.allRoleNames)}}),methods:{parse:function(e){return e.replace(/ /g,"_")},get_restructured_permissions:function(e,t){var n=this,i={},o=this.rolesForMember(this.user_pk),s=function(s){var a=e[s],u=a.change_name+a.target,m=a.condition?a.condition.how_to_pass_overall:null;r=null,r=u in i?i[u]:{change_name:a.change_name,foundational:a.is_foundational,section:a.section,display:a.display,target:a.target,anyone:{has_perm:a.anyone,more_info:m}},c=n,l=c.governor_condition?c.governor_condition.how_to_pass_overall:null,d=c.owner_condition?c.owner_condition.how_to_pass_overall:null,t.forEach((function(e){var t=r[e]?r[e]:{has_perm:!1};a.roles.includes(e)&&(t=c.update_perm(t,!0,m)),"owners"==e&&a.owner_permission&&(t=c.update_perm(t,!0,d)),"governors"==e&&a.governor_permission&&(t=c.update_perm(t,!0,l)),r[e]=t})),_={has_perm:!1,more_info:null},a.actors.includes(n.user_pk)&&(_=n.update_perm(_,!0,m)),a.anyone&&(_=n.update_perm(_,!0,m)),o.forEach((function(e){r[e]["has_perm"]&&(_="owners"==e?c.update_perm(_,!0,d):"governors"==e?c.update_perm(_,!0,l):c.update_perm(_,!0,m))})),r["you"]=_,i[u]=r};for(var a in e){var r,c,l,d,_;s(a)}return Object.values(i)},update_perm:function(e,t,n){return t?e.has_perm?e.more_info&&n?{has_perm:!0,more_info:e.more_info+" OR "+n}:{has_perm:!0,more_info:null}:{has_perm:t,more_info:n}:e},filter_function:function(e,t){if(Object.keys(t).includes("searchString")){var n=Object.values(e).reduce((function(e,t){return e?e+" "+t:t}),"");if(!n.includes(t["searchString"]))return!1}return!(Object.keys(t).includes("roleSelected")&&!e[t["roleSelected"]]["has_perm"])&&((!Object.keys(t).includes("targetSelected")||e["target"]==t["targetSelected"])&&(!Object.keys(t).includes("sectionSelected")||e["section"]==t["sectionSelected"]))}}},d=l,_=n("2877"),u=Object(_["a"])(d,i,o,!1,null,null,null);t["a"]=u.exports},"9c8e":function(e,t,n){"use strict";var i=n("874c"),o=n.n(i);t["default"]=o.a},a18c:function(e,t,n){"use strict";var i=n("2b0e"),o=n("8c4f"),s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",{staticClass:"d-flex my-3"},[n("span",{staticClass:"flex-grow-1"},[n("span",{staticClass:"font-weight-bold"},[n("b-icon-people-fill",{staticClass:"mr-2"}),e._v(e._s(e.group_name))],1),n("router-link",{class:e.is_active("resources"),attrs:{id:"resources_button",to:{name:"home"}}},["tab-active"==e.is_active("resources")?n("b-icon-grid-fill",{staticClass:"ml-3 mr-1"}):n("b-icon-grid",{staticClass:"ml-3 mr-1"}),e._v(" Resources ")],1),n("router-link",{class:e.is_active("history"),attrs:{id:"group_history_button",to:{name:"action-history",params:{item_id:e.group_pk,item_model:"group",item_name:e.group_name}}}},["tab-active"==e.is_active("history")?n("b-icon-clock-fill",{staticClass:"ml-3 mr-1"}):n("b-icon-clock-history",{staticClass:"ml-3 mr-1"}),e._v(" History ")],1),n("router-link",{class:e.is_active("governance"),attrs:{id:"governance_button",to:{name:"governance"}}},["tab-active"==e.is_active("governance")?n("b-icon-person-check-fill",{staticClass:"ml-3 mr-1"}):n("b-icon-person-check",{staticClass:"ml-3 mr-1"}),e._v(" Group Roles ")],1),n("router-link",{class:e.is_active("permissions"),attrs:{id:"group_permissions_button",to:{name:"group-permissions",params:{group_pk:e.group_pk}}}},["tab-active"==e.is_active("permissions")?n("b-icon-shield-lock-fill",{staticClass:"ml-3 mr-1"}):n("b-icon-shield-lock",{staticClass:"ml-3 mr-1"}),e._v(" Permissions ")],1)],1),n("span",[e.user_in_group?n("take-action-component",{attrs:{response:e.response,verb:"leave group",action_name:"remove_members_from_community",check_permissions_params:e.check_params},on:{"take-action":e.leave_group,"close-modal":e.modal_closed}},[n("b-button",{staticClass:"py-0",attrs:{id:"leave_group_button",variant:"link"}},[e._v("leave")])],1):n("take-action-component",{attrs:{response:e.response,verb:"join group",action_name:"add_members_to_community",check_permissions_params:e.check_params},on:{"take-action":e.join_group,"close-modal":e.modal_closed}},[n("b-button",{staticClass:"py-0",attrs:{id:"join_group_button",variant:"link"}},[e._v("join")])],1),n("form-button-and-modal",{attrs:{item_model:"group",item_id:e.group_pk,button_text:"edit",supplied_classes:"btn-link border-0 py-0"}})],1)])},a=[],r=n("5530"),c=n("2f62"),l=n("4360"),d=n("8cc1"),_=n("f3f4"),u={components:{TakeActionComponent:d["a"],FormButtonAndModal:_["a"]},store:l["a"],data:function(){return{response:null}},computed:Object(r["a"])(Object(r["a"])(Object(r["a"])({},c["a"].mapState({group_name:function(e){return e.group_name},group_description:function(e){return e.group_description},group_pk:function(e){return e.group_pk},user_pk:function(e){return e.user_pk}})),c["a"].mapGetters(["userInGroup"])),{},{user_in_group:function(){return this.userInGroup(this.user_pk)},check_params:function(){return{member_pk_list:[l["a"].state.user_pk]}}}),methods:Object(r["a"])(Object(r["a"])({},c["a"].mapActions(["addMembers","removeMembers"])),{},{modal_closed:function(){this.response&&"implemented"==this.response.data.action_status&&window.location.reload()},join_group:function(e){var t=this;this.addMembers({member_pk_list:[l["a"].state.user_pk],extra_data:e}).then((function(e){t.response=e}))},leave_group:function(e){var t=this;this.removeMembers({member_pk_list:[l["a"].state.user_pk],extra_data:e}).then((function(e){t.response=e}))},is_active:function(e){return this.$route.meta.tab==e?"tab-active":"tab-inactive"}})},m=u,p=(n("df93"),n("2877")),f=Object(p["a"])(m,s,a,!1,null,"1ed7fff8",null),h=f.exports,b=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[n("ForumListComponent"),n("hr"),n("SimpleListListComponent"),n("hr"),n("DocumentListComponent")],1)},v=[],g=n("a209"),k=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[n("h5",{staticClass:"pb-3"},[n("span",{staticClass:"font-weight-bold"},[e._v("Forums")]),n("form-button-and-modal",{attrs:{item_model:"forum",button_text:"+ add new",supplied_variant:"light",supplied_classes:"btn-sm ml-3"}})],1),n("b-card-group",{attrs:{columns:""}},e._l(e.processed_forums,(function(t){var i=t.pk,o=t.name,s=t.description;return n("b-card",{key:i,staticClass:"bg-white"},[n("b-card-text",[n("div",{staticClass:"font-weight-bold text-info"},[n("router-link",{staticClass:"forum-link text-info",attrs:{to:{name:"forum-detail",params:{item_id:i}}}},[e._v(" "+e._s(o))])],1),n("div",{staticClass:"forum-description mt-1"},[e._v(e._s(s))])])],1)})),1)],1)},w=[],y={components:{FormButtonAndModal:_["a"]},store:l["a"],computed:Object(r["a"])(Object(r["a"])({},c["a"].mapState({forums:function(e){return e.forums.forums},group_name:function(e){return e.group_name}})),{},{processed_forums:function(){var e=[];for(var t in this.forums)"Gov"==this.forums[t].special?e.unshift(this.forums[t]):e.push(this.forums[t]);return e}})},O=y,C=(n("91bc"),Object(p["a"])(O,k,w,!1,null,"f8f30284",null)),x=C.exports,E=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[n("h5",{staticClass:"pb-3"},[n("span",{staticClass:"font-weight-bold"},[e._v("Lists")]),n("form-button-and-modal",{attrs:{item_model:"list",button_text:"+ add new",supplied_variant:"light",supplied_classes:"btn-sm ml-3"}})],1),n("b-card-group",{attrs:{columns:""}},e._l(e.lists,(function(t,i){var o=t.pk,s=t.name,a=t.description,r=t.rows;return n("b-card",{key:o,staticClass:"bg-white"},[n("b-card-text",[n("div",{staticClass:"font-weight-bold text-info"},[n("router-link",{staticClass:"text-info",attrs:{to:{name:"list-detail",params:{list_id:o}},id:"link_to_list_"+i}},[e._v(" "+e._s(s)+" "),n("span",{staticClass:"text-dark ml-2"},[n("small",[e._v(e._s(r.length)+" items")])])])],1),n("div",{staticClass:"list-description mt-1"},[e._v(e._s(a))])])],1)})),1),0===Object.keys(e.lists).length?n("span",[e._v("There are no lists yet.")]):e._e()],1)},R=[],A={components:{FormButtonAndModal:_["a"]},store:l["a"],data:function(){return{}},computed:Object(r["a"])({},c["a"].mapState({lists:function(e){return e.simplelists.lists},group_name:function(e){return e.group_name}})),created:function(){this.getLists()},methods:Object(r["a"])({},c["a"].mapActions(["getLists"]))},j=A,S=Object(p["a"])(j,E,R,!1,null,null,null),P=S.exports,D=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[n("h5",{staticClass:"pb-3"},[n("span",{staticClass:"font-weight-bold"},[e._v("Documents")]),n("form-button-and-modal",{attrs:{item_model:"document",button_text:"+ add new",supplied_variant:"light",supplied_classes:"btn-sm ml-3"}})],1),n("b-card-group",{attrs:{columns:""}},e._l(e.documents,(function(t,i){var o=t.pk,s=t.name,a=t.description;return n("b-card",{key:o,staticClass:"bg-white"},[n("b-card-text",[n("div",{staticClass:"font-weight-bold text-info"},[n("router-link",{staticClass:"text-info document-link",attrs:{to:{name:"document-detail",params:{item_id:o}},id:"link_to_doc_"+i}},[e._v(" "+e._s(s)+" ")])],1),n("div",{staticClass:"document-description mt-1"},[e._v(e._s(a))])])],1)})),1),0===Object.keys(e.documents).length?n("span",[e._v("There are no documents yet.")]):e._e()],1)},T=[],I={components:{FormButtonAndModal:_["a"]},store:l["a"],data:function(){return{}},computed:Object(r["a"])({},c["a"].mapState({documents:function(e){return e.documents.documents}})),created:function(){this.getDocuments()},methods:Object(r["a"])({},c["a"].mapActions(["getDocuments"]))},M=I,N=Object(p["a"])(M,D,T,!1,null,null,null),F=N.exports,L={store:l["a"],mixins:[g["e"]],components:{ForumListComponent:x,SimpleListListComponent:P,DocumentListComponent:F},data:function(){return{}}},U=L,$=Object(p["a"])(U,b,v,!1,null,null,null),q=$.exports,G=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"bg-white p-3 rounded"},[n("b-container",{attrs:{fluid:"",id:"action_history_table"}},[n("b-row",{staticClass:"my-2",attrs:{"align-h":"end"}},[n("b-col",{staticClass:"my-4",attrs:{lg:"7"}},[n("b-button-group",[n("b-button",{attrs:{variant:e.get_variant("open")},on:{click:function(t){return e.setFilter("open")}}},[e._v("Open proposals")]),n("b-button",{attrs:{variant:e.get_variant("waiting")},on:{click:function(t){return e.setFilter("waiting")}}},[e._v("Waiting on decisions")]),n("b-button",{attrs:{variant:e.get_variant("governing")},on:{click:function(t){return e.setFilter("governing")}}},[e._v("Governing actions")]),n("b-button",{attrs:{variant:e.get_variant("yours")},on:{click:function(t){return e.setFilter("yours")}}},[e._v("Your actions")])],1)],1),n("b-col",{staticClass:"my-4",attrs:{lg:"5"}},[n("b-form-group",[n("b-input-group",{attrs:{size:"sm"}},[n("b-form-input",{attrs:{type:"search",id:"filterInput",placeholder:"Type to Search"},model:{value:e.filterObject.filter_text,callback:function(t){e.$set(e.filterObject,"filter_text",t)},expression:"filterObject.filter_text"}})],1)],1)],1)],1),n("b-table",{attrs:{hover:"",items:e.item_actions,fields:e.action_fields,"sort-by":e.sortBy,"sort-desc":e.sortDesc,filter:e.filterObject,"filter-function":e.filterFunction,id:"action_history_table_element",responsive:""},on:{"update:sortBy":function(t){e.sortBy=t},"update:sort-by":function(t){e.sortBy=t},"update:sortDesc":function(t){e.sortDesc=t},"update:sort-desc":function(t){e.sortDesc=t}},scopedSlots:e._u([{key:"cell(actor)",fn:function(t){return[n("router-link",{staticClass:"font-weight-bold text-info",attrs:{to:{name:"user-permissions",params:{user_pk:t.item.actor_pk}}}},[e._v(e._s(t.item.actor)+" ")])]}},{key:"cell(action)",fn:function(t){return[e._v(" "+e._s(t.item.description)+" "),t.item.is_template?n("b-badge",{staticClass:"ml-2",attrs:{variant:"warning"}},[e._v("template action")]):e._e()]}},{key:"cell(date)",fn:function(t){return[e._v(" "+e._s(t.item.display_date)+" ")]}},{key:"cell(status)",fn:function(t){return["propose-req"==t.item.status?n("span",[e._v("proposed ")]):e._e(),"propose-vol"==t.item.status?n("span",[e._v("proposed (voluntary)")]):e._e(),"propose-req"!=t.item.status&&"propose-vol"!=t.item.status?n("span",[e._v(" "+e._s(t.item.status))]):e._e(),t.item.has_condition.exists?n("b-badge",{staticClass:"ml-2",attrs:{variant:"info"}},[e._v("has condition")]):e._e()]}},{key:"cell(more)",fn:function(t){return[n("router-link",{attrs:{to:{name:"action-detail",params:{action_id:t.item.action_pk}}}},[n("b-button",{staticClass:"btn-sm ml-2 action-link-button",attrs:{variant:"outline-secondary"}},[e._v("see more")])],1)]}}])})],1)],1)},z=[],V=(n("caad"),n("2532"),{props:["item_id","item_model","item_name"],store:l["a"],mixins:[g["c"]],data:function(){return{action_fields:[{key:"actor",label:"Actor",sortable:!0},{key:"description",label:"Action",sortable:!0},{key:"display_date",label:"When",sortable:!0},{key:"status",label:"Status",sortable:!0},{key:"more",label:"More Info",sortable:!1}],sortBy:"created",sortDesc:!0,filterObject:{filter_text:null,filter_function:null},filterOn:[],processed_item_actions:[]}},created:function(){var e=this;this.loadActions({item_id:this.final_item_id,item_model:this.final_item_model}).then((function(t){return e.processed_item_actions=e.replace_pks_with_usernames(e.actions[e.item_key])})).catch((function(e){console.log(e)}))},watch:{item_actions:function(e){this.processed_item_actions=this.replace_pks_with_usernames(e)}},computed:Object(r["a"])(Object(r["a"])(Object(r["a"])({},c["a"].mapGetters(["getUserName"])),c["a"].mapState({actions:function(e){return e.concord_actions.actions},user_pk:function(e){return e.user_pk}})),{},{final_item_id:function(){return"undefined"===typeof this.item_id?l["a"].state.group_pk:this.item_id},final_item_model:function(){return"undefined"===typeof this.item_model?"group":this.item_model},final_item_name:function(){return"undefined"===typeof this.item_name?l["a"].state.group_name:this.item_name},item_key:function(){return this.final_item_id+"_"+this.final_item_model},item_actions:function(){return this.actions[this.item_key]?this.actions[this.item_key]:[]},modal_id:function(){return"action_history_modal_"+this.final_item_id+"_"+this.final_item_model}}),methods:Object(r["a"])(Object(r["a"])({},c["a"].mapActions(["loadActions"])),{},{get_variant:function(e){return this.filterObject.filter_function==e?"secondary":"outline-secondary"},setFilter:function(e){this.filterObject.filter_function==e?this.filterObject.filter_function=null:this.filterObject.filter_function=e},filter_item:function(e){return"open"==this.filterObject.filter_function?"propose-req"==e.status||"propose-vol"==e.status:"waiting"==this.filterObject.filter_function?e.has_condition.exists&&"waiting"==e.status:"governing"==this.filterObject.filter_function?"governing"==e.resolution_passed_by:"yours"==this.filterObject.filter_function?e.actor_pk==this.user_pk:void 0},filterFunction:function(e,t){var n=!t.filter_text||JSON.stringify(e).includes(t.filter_text),i=!t.filter_function||this.filter_item(e);return n&&i}})}),W=V,B=Object(p["a"])(W,G,z,!1,null,null,null),H=B.exports,Y=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.ready_to_render?n("span",[n("b-row",{attrs:{"align-v":"stretch"}},[n("b-col",{attrs:{cols:"8"}},[n("b-card",{attrs:{variant:"secondary"}},[n("h3",[e._v("Action Details")]),n("div",{staticClass:"info"},[n("span",{staticClass:"label"},[e._v("Action ID")]),e._v(": "+e._s(e.action.action_pk))]),n("div",{staticClass:"info"},[n("span",{staticClass:"label"},[e._v("Actor")]),e._v(": "),n("span",{staticClass:"user-link"},[e._v(e._s(e.action.actor))])]),n("div",{staticClass:"info"},[n("span",{staticClass:"label"},[e._v("Time")]),e._v(": "+e._s(e.action.display_date))]),n("div",{staticClass:"info"},[n("span",{staticClass:"label"},[e._v("Description")]),e._v(": "+e._s(e.process_description(e.action.description)))]),n("div",{staticClass:"info"},[n("span",{staticClass:"label"},[e._v("Status")]),e._v(": "+e._s(e.status)+" "),e.extra_context?n("span",{staticClass:"extra"},[e._v(e._s(e.extra_context))]):e._e()]),n("div",{staticClass:"info"},[n("span",{staticClass:"label"},[e._v("Actor's note")]),e._v(": "),e.action.note?n("span",[e._v(e._s(e.action.note))]):n("span",[e._v("none")])]),e.user_is_actor&&"propose-vol"==e.action.status?n("b-button",{staticClass:"my-2",attrs:{variant:"outline-secondary"},on:{click:e.retake_proposed_action}},[e._v("Take your action")]):e._e(),e.action.is_template?n("div",{staticClass:"alert my-2",attrs:{role:"alert"}},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-11 font-weight-bold"},[e._v(" This is a template action ")]),n("div",{staticClass:"col-1 text-right"},[n("span",{on:{click:function(t){e.info_visible=!e.info_visible}}},[e.info_visible?e._e():n("b-icon-chevron-down"),e.info_visible?n("b-icon-chevron-up"):e._e()],1)])]),n("b-collapse",{attrs:{id:"more-info"},model:{value:e.info_visible,callback:function(t){e.info_visible=t},expression:"info_visible"}},[n("div",{staticClass:"my-3"},[e._v("When you take a template action, it applies a series of other actions. Sometimes, the permission applying the template can customize it.")]),n("b-tabs",{attrs:{"content-class":"mt-3"}},[n("b-tab",{attrs:{title:"Template Description",active:""}},[n("p",[e._v(e._s(e.action.template_description.full_description))]),n("p",[e._v(e._s(e.action.template_description.foundational))])]),n("b-tab",{attrs:{title:"Action Details"}},[n("p",[e._v("Here are the actions implemented by "),e.action.template_description.name?n("span",[e._v("the "+e._s(e.action.template_description.name))]):n("span",[e._v("this")]),e._v(" template:")]),n("ul",{staticClass:"my-2"},e._l(e.action.template_description.actions,(function(t){return n("li",{key:t},[e._v(e._s(t))])})),0)]),n("b-tab",{attrs:{title:"Customizations"}},[n("p",[e._v("The user has added the following information:")]),n("ul",{staticClass:"my-2"},[e._l(e.action.template_description.supplied_fields.fields,(function(t){return n("li",{key:t},[e._v(" "+e._s(t))])})),0==e.action.template_description.supplied_fields.fields.length?n("li",[e._v(" There are no user-supplied fields for this template.")]):e._e()],2)])],1)],1)],1):e._e()],1)],1),n("b-col",{attrs:{cols:"4"}},[n("b-card",{attrs:{variant:"secondary"}},[n("h5",[e._v("Conditions on Action")]),e.action.has_condition.exists?n("div",e._l(e.ordered_conditions,(function(t){return n("span",{key:t.pk},[n("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal",value:t.type+t.pk,expression:"condition.type + condition.pk"}],staticClass:"mt-2 action-condition",attrs:{variant:"info"}},[e._v(" "+e._s(t.passing_description))]),n("b-modal",{attrs:{id:t.type+t.pk,title:e.reformat(t.type),size:"xl","body-bg-variant":"light","hide-footer":""}},[n(t.type,{tag:"component",attrs:{condition_pk:t.pk,condition_type:t.type,action_details:e.action}})],1)],1)})),0):n("span",[e._v(" There are no conditions on this action. ")])])],1)],1),n("b-card",{staticClass:"my-3",attrs:{variant:"secondary"}},[n("h5",[e._v("Discussion")]),n("CommentListComponent",{staticClass:"my-3",attrs:{item_id:e.action_id,item_model:"action"}})],1)],1):e._e()},J=[],K=(n("fb6a"),n("ac1f"),n("5319"),n("498a"),n("16c8")),X=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",["waiting"==e.condition_status?n("div",{staticClass:"my-2"},[n("b",[e._v("Please approve or reject this action.")])]):e._e(),"approved"==e.condition_status||"rejected"==e.condition_status?n("div",{staticClass:"my-2"},[e._v(" "+e._s(e.action_details.actor)+"'s action has been "+e._s(e.condition_status)+". ")]):e._e(),"waiting"==e.condition_status||e.approve_response?n("span",["approve"!=e.hide?n("take-action-component",{staticClass:"mr-3",attrs:{response:e.approve_response,verb:"approve",inline:!0,alt_target:e.alt_target},on:{"take-action":function(t){return e.update_conditional("approve",t)},"open-extra":function(t){e.hide="reject"},"close-extra":function(t){e.hide=null}}}):e._e()],1):e._e(),"waiting"==e.condition_status||e.reject_response?n("span",["reject"!=e.hide?n("take-action-component",{attrs:{response:e.reject_response,verb:"reject",inline:!0,alt_target:e.alt_target},on:{"take-action":function(t){return e.update_conditional("reject",t)},"open-extra":function(t){e.hide="approve"},"close-extra":function(t){e.hide=null}}}):e._e()],1):e._e()])},Z=[],Q=(n("96cf"),n("1da1")),ee=n("583c"),te={components:{TakeActionComponent:d["a"]},props:["condition_type","condition_pk","action_details"],store:l["a"],data:function(){return{error_message:null,permission_details:null,condition_details:null,approve_response:null,reject_response:null,hide:null}},created:function(){this.get_conditional_data()},computed:Object(r["a"])(Object(r["a"])({},c["a"].mapGetters(["url_lookup"])),{},{alt_target:function(){return"approvalcondition_"+this.condition_pk},condition_status:function(){return this.condition_details?this.condition_details.status:null}}),methods:Object(r["a"])(Object(r["a"])({},c["a"].mapActions(["addOrUpdateAction"])),{},{get_conditional_data:function(){var e=this;return Object(Q["a"])(regeneratorRuntime.mark((function t(){var n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.url_lookup("get_conditional_data");case 2:return n=t.sent,i={condition_pk:e.condition_pk,condition_type:e.condition_type},t.abrupt("return",ee["a"].post(n,i).then((function(t){e.permission_details=t.data.permission_details,e.condition_details=t.data.condition_details})).catch((function(e){console.log(e)})));case 5:case"end":return t.stop()}}),t)})))()},update_conditional:function(e,t){var n=this;return Object(Q["a"])(regeneratorRuntime.mark((function i(){var o,s;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,n.url_lookup("take_action");case 2:o=i.sent,s={action_name:e,extra_data:t,alt_target:"approvalcondition_"+n.condition_pk},ee["a"].post(o,s).then((function(t){var i=t.data.action_pk,o=e+"_response";n[o]=t,n.get_conditional_data().then((function(e){n.addOrUpdateAction({action_pk:n.action_details["action_pk"]}),n.addOrUpdateAction({action_pk:i})}))}));case 5:case"end":return i.stop()}}),i)})))()}})},ne=te,ie=Object(p["a"])(ne,X,Z,!1,null,null,null),oe=ie.exports,se=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[n("b-card",{staticClass:"mb-3",attrs:{"bg-variant":"white"}},[n("div",{staticClass:"mb-2 font-weight-bold"},[e._v("Discussion Status")]),e.is_resolved?n("span",[e._v("The condition was resolved with resolution "+e._s(e.condition_resolution_status)+". "),e.response_selected?n("span",[e._v("Your response was "),n("b",[e._v(e._s(e.response_selected))]),e._v(".")]):e._e()]):n("span",[e.can_be_resolved?n("span",[e._v("The minimum duration of "+e._s(e.minimum_duration)+" has passed. If the discussion was resolved right now, the result would be: "+e._s(e.current_result)+". "),e.can_resolve?n("b-button",{staticClass:"btn-sm d-block mt-2",attrs:{variant:"outline-info",id:"resolve_button"},on:{click:function(t){return e.resolve_condition()}}},[e._v("Resolve this discussion?")]):e._e()],1):n("span",[e._v("The discussion cannot be resolved until the minimum duration of "+e._s(e.minimum_duration)+" has passed. This will happen in "+e._s(e.time_remaining)+". ")])])]),n("b-container",{staticClass:"bg-white light-border my-2 py-2 px-4",attrs:{id:"consensus_responses"}},[n("b-row",[n("b-col",{staticClass:"text-center my-2 font-weight-bold"},[e._v("Current Responses")])],1),n("b-row",{staticClass:"font-weight-bold text-secondary mb-3"},[n("b-col",[e._v("Support")]),n("b-col",{attrs:{cols:"3"}},[e._v("Support With Reservations")]),n("b-col",[e._v("Stand Aside")]),n("b-col",[e._v("Block")]),n("b-col",[e._v("No Response")])],1),n("b-row",[n("b-col",{attrs:{id:"support_names"}},[e._v(e._s(e.get_names(e.response_data.support)))]),n("b-col",{attrs:{cols:"3",id:"reservatiions_names"}},[e._v(e._s(e.get_names(e.response_data.support_with_reservations)))]),n("b-col",{attrs:{id:"stand_aside_names"}},[e._v(e._s(e.get_names(e.response_data.stand_aside)))]),n("b-col",{attrs:{id:"block_names"}},[e._v(e._s(e.get_names(e.response_data.block)))]),n("b-col",{attrs:{id:"no_response_names"}},[e._v(e._s(e.get_names(e.response_data.no_response)))])],1)],1),n("b-card",{staticClass:"mb-3",attrs:{"bg-variant":"white"}},[e.is_resolved?e._e():n("div",{staticClass:"my-3"},[e.can_respond?n("span",[n("b-form-group",[n("b-form-radio-group",{attrs:{id:"user_response_radio_buttons",options:e.response_options,"button-variant":"outline-info",buttons:"",name:"user_response_radio_buttons"},model:{value:e.response_selected,callback:function(t){e.response_selected=t},expression:"response_selected"}})],1),n("b-button",{staticClass:"btn-sm",attrs:{id:"submit_response"},on:{click:function(t){return e.submit_response()}}},[e._v("Submit Your Response")])],1):n("span",[e._v("You are not a participant in this consensus decision.")])]),e.error_message?n("span",{staticClass:"text-danger"},[e._v(e._s(e.error_message))]):e._e()])],1)},ae=[],re=(n("4160"),n("c975"),n("a15b"),n("159b"),{props:["condition_type","condition_pk","action_details"],store:l["a"],data:function(){return{error_message:null,permission_details:null,condition_details:null,response_selected:null,minimum_duration:null,time_remaining:null,can_be_resolved:null,responses:null,response_options:null,current_result:null}},computed:Object(r["a"])(Object(r["a"])({},c["a"].mapGetters(["getUserName","url_lookup"])),{},{can_respond:function(){if(this.permission_details)return this.permission_details["concord.conditionals.state_changes.RespondConsensusStateChange"][0]},can_resolve:function(){if(this.permission_details)return this.permission_details["concord.conditionals.state_changes.ResolveConsensusStateChange"][0]},is_resolved:function(){if(this.condition_details)return!!["approved","rejected","implemented"].includes(this.condition_details.status)},response_data:function(){var e={};if(this.response_options)for(var t in this.response_options.forEach((function(t){return e[t.replace(/\s/g,"_")]=[]})),this.responses)e[this.responses[t].replace(/\s/g,"_")].push(t);return e},condition_resolution_status:function(){if(this.condition_details)return this.condition_details.status}}),created:function(){this.get_conditional_data()},methods:Object(r["a"])(Object(r["a"])({},c["a"].mapActions(["addOrUpdateAction"])),{},{get_conditional_data:function(){var e=this;return Object(Q["a"])(regeneratorRuntime.mark((function t(){var n,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.url_lookup("get_conditional_data");case 2:return n=t.sent,o={condition_pk:e.condition_pk,condition_type:e.condition_type},t.abrupt("return",ee["a"].post(n,o).then((function(t){for(var n in e.permission_details=t.data.permission_details,e.condition_details=t.data.condition_details,e.condition_details.fields){var o=e.condition_details.fields[n]["field_name"],s=e.condition_details.fields[n]["field_value"];i["default"].set(e,o,s)}e.set_user_response()})).catch((function(e){console.log(e)})));case 5:case"end":return t.stop()}}),t)})))()},get_names:function(e){var t=this;if(e){var n=[];return e.forEach((function(e){return n.push(t.getUserName(parseInt(e)))})),n.join(", ")}return""},set_user_response:function(){for(var e in this.responses)e==l["a"].state.user_pk&&(this.response_selected=this.responses[e])},update_action:function(e){this.addOrUpdateAction({action_pk:this.action_details["action_pk"]}),this.addOrUpdateAction({action_pk:e})},submit_response:function(){var e=this;return Object(Q["a"])(regeneratorRuntime.mark((function t(){var n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.response_selected||(e.error_message="Please select a response"),e.response_selected!=e.user_response){t.next=4;break}return e.error_message="Your response has not changed",t.abrupt("return");case 4:return t.next=6,e.url_lookup("update_consensus_condition");case 6:n=t.sent,i={condition_pk:e.condition_pk,action_to_take:"respond",response:e.response_selected},ee["a"].post(n,i).then((function(t){["implemented","waiting"].indexOf(t.data.action_status)>-1?(e.update_action(t.data.action_pk),e.get_conditional_data().catch((function(t){e.error_message=t}))):e.error_message=t.data.user_message})).catch((function(t){console.log("Error updating condition: ",t),e.error_message=t}));case 9:case"end":return t.stop()}}),t)})))()},resolve_condition:function(){var e=this;return Object(Q["a"])(regeneratorRuntime.mark((function t(){var n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.url_lookup("update_consensus_condition");case 2:n=t.sent,i={condition_pk:e.condition_pk,action_to_take:"resolve"},ee["a"].post(n,i).then((function(t){["implemented","waiting"].indexOf(t.data.action_status)>-1?(e.update_action(t.data.action_pk),e.get_conditional_data().catch((function(t){e.error_message=t}))):e.error_message=t.data.user_message})).catch((function(t){console.log("Error updating condition: ",t),e.error_message=t}));case 5:case"end":return t.stop()}}),t)})))()}})}),ce=re,le=(n("c552"),Object(p["a"])(ce,se,ae,!1,null,"38a11f02",null)),de=le.exports,_e=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[e.is_resolved?n("span",[e._v(" This vote ended on "+e._s(e.voting_deadline_display)+". The results were "+e._s(e.vote_results)+", which means the action was "+e._s(e.condition_details.status)+". It required a "+e._s(e.majority_or_plurality)+" vote and abstentions were "),e.allow_abstain?e._e():n("span",[e._v("not")]),e._v(" allowed. ")]):n("span",[e._v(" This vote will end on "+e._s(e.voting_deadline_display)+". The results so far are "+e._s(e.vote_results)+". It requires a "+e._s(e.majority_or_plurality)+" vote and abstentions are "),e.allow_abstain?e._e():n("span",[e._v("not")]),e._v(" allowed. ")]),e.is_resolved||e.user_has_taken_action?e._e():n("span",{staticClass:"my-5"},[e.can_vote&&e.not_yet_voted?n("span",[e._m(0),n("b-form-radio-group",{attrs:{id:"btn-radios-1",options:e.button_options,buttons:"",name:"radios-btn-default","button-variant":"outline-primary"},model:{value:e.button_selected,callback:function(t){e.button_selected=t},expression:"button_selected"}}),n("b-button",{attrs:{id:"save_vote_choice"},on:{click:e.update_condition}},[e._v("Submit")])],1):e.can_vote&&!e.not_yet_voted?n("span",[e._m(1)]):n("span",[e._m(2)])]),e.user_has_taken_action?n("span",[e._v(" Thank you for voting! No further action from you is needed. ")]):e._e(),e.error_message?n("span",{staticClass:"text-danger"},[e._v(e._s(e.error_message))]):e._e()])},ue=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("p",{staticClass:"mb-3"},[n("b",[e._v("Please cast your vote")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("p",{staticClass:"mb-3"},[n("b",[e._v("You have already voted.")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("p",{staticClass:"mb-3"},[n("b",[e._v("You are not eligible to vote.")])])}],me={props:["condition_type","condition_pk","action_details"],store:l["a"],data:function(){return{user_has_taken_action:!1,button_selected:null,error_message:null,permission_details:null,condition_details:null,allow_abstain:null,require_majority:null,voting_deadline:null}},computed:Object(r["a"])(Object(r["a"])({},c["a"].mapGetters(["url_lookup"])),{},{voting_deadline_display:function(){if(this.voting_deadline)return Date(this.voting_deadline)},button_options:function(){return this.allow_abstain?1==this.allow_abstain?["yea","nay","abstain"]:["yea","nay"]:[]},majority_or_plurality:function(){return 1==this.require_majority?"majority (as opposed to plurality)":0==this.require_majority?"plurality (as opposed to majority)":void 0},vote_results:function(){if(this.condition_details){var e=this.current_yeas+" yeas and "+this.current_nays+" nays";return this.allow_abstain&&(e+=" with "+this.current_abstains+"  abstentions"),e}},can_vote:function(){if(this.permission_details)return this.permission_details["concord.conditionals.state_changes.AddVoteStateChange"][0]},not_yet_voted:function(){if(this.permission_details)return this.permission_details["user_condition_status"][0]},is_resolved:function(){if(this.condition_details)return!!["approved","rejected","implemented"].includes(this.condition_details.status)}}),created:function(){this.get_conditional_data()},methods:Object(r["a"])(Object(r["a"])({},c["a"].mapActions(["addOrUpdateAction"])),{},{get_conditional_data:function(){var e=this;return Object(Q["a"])(regeneratorRuntime.mark((function t(){var n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.url_lookup("get_conditional_data");case 2:return n=t.sent,i={condition_pk:e.condition_pk,condition_type:e.condition_type},t.abrupt("return",ee["a"].post(n,i).then((function(t){for(var n in e.condition_details=t.data.condition_details,e.permission_details=t.data.permission_details,e.condition_details.fields){var i=e.condition_details.fields[n]["field_name"],o=e.condition_details.fields[n]["field_value"];e[i]=o}})).catch((function(e){console.log("Error calling get_conditional_data in vote condition: ",e)})));case 5:case"end":return t.stop()}}),t)})))()},update_condition:function(){var e=this;return Object(Q["a"])(regeneratorRuntime.mark((function t(){var n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.url_lookup("update_vote_condition");case 2:n=t.sent,i={condition_pk:e.condition_pk,action_to_take:e.button_selected},ee["a"].post(n,i).then((function(t){var n=t.data.action_pk;e.user_has_taken_action=!0,e.get_conditional_data().then((function(t){"waiting"==e.condition_details.status||(e.addOrUpdateAction({action_pk:e.action_details["action_pk"]}),e.addOrUpdateAction({action_pk:n}))})).catch((function(t){console.log("Error refreshing condition data:",t),e.error_message=t}))})).catch((function(t){console.log("Error updating condition: ",t),e.error_message=t}));case 5:case"end":return t.stop()}}),t)})))()}})},pe=me,fe=Object(p["a"])(pe,_e,ue,!1,null,null,null),he=fe.exports,be={props:["action_id"],components:{CommentListComponent:K["a"],ApprovalCondition:oe,ConsensusCondition:de,VoteCondition:he},store:l["a"],mixins:[g["c"]],data:function(){return{ready_to_render:!1,action:null,response:null,info_visible:!1}},created:function(){this.action=this.getActionData(this.action_id),"undefined"===typeof this.action?this.addOrUpdateAction({action_pk:this.action_id}).catch((function(e){console.log(e)})):this.ready_to_render=!0},watch:{actions:function(e){this.action=this.getActionData(this.action_id),"undefined"!==typeof this.action&&(this.ready_to_render=!0)}},computed:Object(r["a"])(Object(r["a"])(Object(r["a"])({},c["a"].mapGetters(["getActionData","getUserName"])),c["a"].mapState({actions:function(e){return e.concord_actions.actions},user_pk:function(e){return e.user_pk}})),{},{user_is_actor:function(){return this.action.actor_pk==this.user_pk},ordered_conditions:function(){return this.action.has_condition.conditions.slice().sort((function(e,t){return e.pk<t.pk?-1:e.pk>t.pk?1:0}))},status:function(){return this.action.status.includes("propose")?"proposed":this.action.status},extra_context:function(){return"propose-vol"==this.action.status?"note: the actor had permission to implement but chose to propose":"propose-req"==this.action.status?"note: the actor does not have permission to take the action but is proposing it anyway":null}}),methods:Object(r["a"])(Object(r["a"])({},c["a"].mapActions(["addOrUpdateAction","retakeAction"])),{},{reformat:function(e){return e.replace(/([A-Z])/g," $1").trim()},retake_proposed_action:function(){var e=this;this.retakeAction({action_pk:this.action_id}).then((function(t){e.action=e.getActionData(e.action_id),e.response=t}))}})},ve=be,ge=(n("10c0"),Object(p["a"])(ve,Y,J,!1,null,"d17402c4",null)),ke=ge.exports,we=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-row",[n("b-col",{staticClass:"p-3",attrs:{cols:"3"}},[n("b-list-group",{staticClass:"mb-3"},[n("b-list-group-item",{attrs:{id:"leadership",active:"leadership"==e.selected_component},on:{click:function(t){e.selected_component="leadership"}}},[e._v(" Leadership")]),n("b-list-group-item",{attrs:{id:"membership",active:"membership"==e.selected_component},on:{click:function(t){e.selected_component="membership"}}},[e._v(" Members")]),n("b-list-group-item",{attrs:{id:"customroles",active:"customroles"==e.selected_component},on:{click:function(t){e.selected_component="customroles"}}},[e._v(" Custom Roles")])],1),e.governance_forum?n("b-card",{staticClass:"bg-white mb-3"},[n("router-link",{staticClass:"text-info",attrs:{to:{name:"forum-detail",params:{item_id:e.governance_forum.pk}}}},[e._v(e._s(e.governance_forum.name))]),n("p",{staticClass:"my-2",attrs:{id:"forum-description"}},[e._v(" "+e._s(e.governance_forum.description)+" of "+e._s(e.group_name))])],1):e._e(),n("b-card",{staticClass:"bg-white mb-3"},[n("span",{directives:[{name:"b-modal",rawName:"v-b-modal.apply_template_modal_community",modifiers:{apply_template_modal_community:!0}}],staticClass:"text-info",attrs:{id:"community_templates_link"}},[e._v(" Community Templates")]),n("p",{staticClass:"my-2"},[e._v(" Browse pre-existing governance setups and apply them to your community.")])]),n("template-modal",{attrs:{scope:"community"}})],1),n("b-col",{attrs:{cols:"9"}},["leadership"==e.selected_component?n("leadership-component"):e._e(),"membership"==e.selected_component?n("group-membership-component"):e._e(),"customroles"==e.selected_component?n("role-component"):e._e()],1)],1)},ye=[],Oe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[n("div",{staticClass:"bg-white pt-3 my-3"},[n("leadership-guide-alert")],1),n("div",{staticClass:"bg-white p-3 my-3"},[n("p",[e._v("This group's leadership structure is:")]),n("p",{staticClass:"mt-2 mx-5"},[e._v(e._s(e.governance_info_display))])]),n("change-leadership-component")],1)},Ce=[],xe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"alert",attrs:{role:"alert"}},[n("div",{staticClass:"row"},[e._m(0),n("div",{staticClass:"col-3 text-right"},[n("span",{on:{click:function(t){e.info_visible=!e.info_visible}}},[e.info_visible?e._e():n("b-button",{staticClass:"btn-info btn-sm ml-2"},[e._v("Learn more")]),e.info_visible?n("b-icon-chevron-up"):e._e()],1)])]),n("b-collapse",{attrs:{id:"more-info"},model:{value:e.info_visible,callback:function(t){e.info_visible=t},expression:"info_visible"}},[n("div",{staticClass:"row text-justify",staticStyle:{"font-size":".9rem"}},[n("div",{staticClass:"col-12 px-5"},[n("p",[e._v("Groups can be owned by a combination of individuals and people with specific roles. There must always be at least one person who is an owner.")]),n("p",[e._v("If no conditions are set on the owners' power, this means any one owner can make arbitrary changes to the community, including deleting it. Most communities will not want this, so we recommend setting a condition on your owners. For instance, if you have a large group of owners, you may require that they vote together in order to exercise their power.")]),n("p",[e._v('Often we want to give people power in a community without granting it to them completely or permanently. For instance, if our owners are a large collective of people who take action by voting, we may want to appoint a smaller number of people who can act more quickly and freely. We call these people "governors". Unlike owners, governors are optional.')]),n("p",[e._v('By default, governors can do what they want within the community. However, there are limits. There are certain actions (see below) that only owners can take. Owners may also turn off the governors\' "default permissions" for individual resources. Owners may set conditions on governors, for instance, requiring the approval of one owner. And, finally, if they are unhappy with an individual governor or with the governors as a whole, they can remove them.')]),n("p",{staticClass:"font-italic"},[e._v("Permissions which require owner approval and cannot be delegated to governors are:")]),n("ul",[n("li",[e._v("adding and removing owners, both individuals and roles")]),n("li",[e._v("adding and removing governors, both individuals and roles")]),n("li",[e._v("making it so only owners can change a specific resource, or removing that restriction from a specific resource")]),e._v(" "),n("li",[e._v("making it so governors cannot change a specific resource, or removing that restriction from a specific resource")])])])])])],1)},Ee=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"col-9"},[n("p",{staticClass:"font-weight-bold"},[e._v("How does leadership work in Kybern?")])])}],Re={data:function(){return{info_visible:!1}}},Ae=Re,je=Object(p["a"])(Ae,xe,Ee,!1,null,null,null),Se=je.exports,Pe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-container",[n("b-row",[n("b-col",{staticClass:"pl-0",attrs:{cols:"6"}},[n("div",{staticClass:"bg-white p-3"},[n("p",{staticClass:"font-weight-bold"},[e._v("Owners")]),n("edit-leadership-component",{attrs:{leadership_type:"owner"}})],1),n("div",{staticClass:"bg-white p-3 mt-4"},[n("p",{staticClass:"font-weight-bold"},[e._v("Owner Conditions")]),n("condition-editor",{ref:"owner_conditions",staticClass:"my-2",attrs:{initial_conditions:e.owner_condition}}),n("take-action-component",{staticClass:"mr-3",attrs:{response:e.owner_condition_response,verb:"update conditions",action_name:"add_condition",inline:!0},on:{"take-action":function(t){return e.update_condition("owner",t)}}})],1)]),n("b-col",{staticClass:"pr-0",attrs:{cols:"6"}},[n("div",{staticClass:"bg-white p-3"},[n("p",{staticClass:"font-weight-bold"},[e._v("Governors")]),n("edit-leadership-component",{attrs:{leadership_type:"governor"}})],1),n("div",{staticClass:"bg-white p-3 mt-4"},[n("p",{staticClass:"font-weight-bold"},[e._v("Governor Conditions")]),n("condition-editor",{ref:"governor_conditions",staticClass:"my-2",attrs:{initial_conditions:e.governor_condition}}),n("take-action-component",{staticClass:"mr-3",attrs:{response:e.governor_condition_response,verb:"update conditions",action_name:"add_condition",inline:!0},on:{"take-action":function(t){return e.update_condition("governor",t)}}})],1)])],1)],1)},De=[],Te=(n("d81d"),n("b0c0"),n("07ac"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-form",{attrs:{id:e.edit_leadership_id}},[n("div",{staticClass:"mb-3"},[n("b-input-group",{staticClass:"mb-2 mr-sm-2 mb-sm-0 flex-nowrap",attrs:{prepend:"Roles"}},[n("vue-multiselect",{attrs:{options:e.rolesAsOptions,multiple:!0,"close-on-select":!0,"clear-on-select":!1,placeholder:"No roles selected",label:"name","track-by":"name"},model:{value:e.roles_selected,callback:function(t){e.roles_selected=t},expression:"roles_selected"}})],1)],1),n("div",{staticClass:"mb-3"},[n("b-input-group",{staticClass:"mb-2 mr-sm-2 mb-sm-0 flex-nowrap",attrs:{prepend:"Individuals"}},[n("vue-multiselect",{attrs:{options:e.groupMembersAsOptions,multiple:!0,"close-on-select":!0,"clear-on-select":!0,placeholder:"No individuals selected",label:"name","track-by":"pk",prepend:"Individuals"},model:{value:e.actors_selected,callback:function(t){e.actors_selected=t},expression:"actors_selected"}})],1)],1),n("div",{staticClass:"mb-3"},[n("take-action-component",{attrs:{response:e.response,verb:"change "+e.leadership_type+"s",action_name:"change_"+e.leadership_type+"s_of_community"},on:{"take-action":e.update_leadership}})],1)])}),Ie=[],Me=(n("4de4"),n("8e5f")),Ne=n.n(Me),Fe={props:["leadership_type"],components:{"vue-multiselect":Ne.a,TakeActionComponent:d["a"]},store:l["a"],data:function(){return{response:null,initial_actors:[],initial_roles:[],actors_selected:[],roles_selected:[]}},created:function(){this.get_existing_roles_and_actors()},computed:Object(r["a"])(Object(r["a"])({},c["a"].mapGetters(["rolesAsOptions","groupMembersAsOptions","leadershipAsOptions"])),{},{edit_leadership_id:function(){return this.leadership_type+"_actors_and_roles"}}),watch:{leadershipAsOptions:function(e){this.get_existing_roles_and_actors()}},methods:Object(r["a"])(Object(r["a"])({},c["a"].mapActions(["updateOwners","updateGovernors"])),{},{get_existing_roles_and_actors:function(){"owner"==this.leadership_type?(this.roles_selected=this.leadershipAsOptions.owner_role_options,this.initial_roles=this.leadershipAsOptions.owner_role_options,this.actors_selected=this.leadershipAsOptions.owner_actor_options,this.initial_actors=this.leadershipAsOptions.owner_actor_options):"governor"==this.leadership_type&&(this.roles_selected=this.leadershipAsOptions.governor_role_options,this.initial_roles=this.leadershipAsOptions.governor_role_options,this.actors_selected=this.leadershipAsOptions.governor_actor_options,this.initial_actors=this.leadershipAsOptions.governor_actor_options)},update_leadership:function(e){var t=this,n=this.roles_selected.filter((function(e){return!t.initial_roles.includes(e)})).map((function(e){return e.name})),i=this.actors_selected.filter((function(e){return!t.initial_actors.includes(e)})).map((function(e){return e.pk})),o=this.initial_roles.filter((function(e){return!t.roles_selected.includes(e)})).map((function(e){return e.name})),s=this.initial_actors.filter((function(e){return!t.actors_selected.includes(e)})).map((function(e){return e.pk})),a={roles_to_add:n,actors_to_add:i,roles_to_remove:o,actors_to_remove:s,extra_data:e};"owner"==this.leadership_type?this.updateOwners(a).then((function(e){return t.response=e})):"governor"==this.leadership_type&&this.updateGovernors(a).then((function(e){return t.response=e}))}})},Le=Fe,Ue=Object(p["a"])(Le,Te,Ie,!1,null,null,null),$e=Ue.exports,qe=n("3a08"),Ge={components:{EditLeadershipComponent:$e,ConditionEditor:qe["a"],TakeActionComponent:d["a"]},store:l["a"],data:function(){return{owner_condition_response:[],governor_condition_response:[]}},computed:Object(r["a"])(Object(r["a"])(Object(r["a"])({},c["a"].mapState({owner_condition:function(e){return e.permissions.owner_condition},governor_condition:function(e){return e.permissions.governor_condition},group_name:function(e){return e.group_name}})),c["a"].mapGetters(["rolesAsOptions","groupMembersAsOptions","leadershipAsOptions"])),{},{owner_condition_display:function(){return this.owner_condition?this.owner_condition.how_to_pass_overall:"No condition has been set on owners."},governor_condition_display:function(){return this.governor_condition?this.governor_condition.how_to_pass_overall:"No condition has been set on governors."}}),methods:Object(r["a"])(Object(r["a"])({},c["a"].mapActions(["addLeadershipCondition","editLeadershipCondition","removeLeadershipCondition"])),{},{update_response:function(e,t){"owner"==e&&this.owner_condition_response.push(t),"governor"==e&&this.governor_condition_response.push(t)},add_new_condition:function(e,t,n){var i=this,o={leadership_type:e,extra_data:n,condition_type:t.condition_type,combined_condition_data:t.combined_condition_data};console.log("Adding new condition with params: ",o),this.addLeadershipCondition(o).then((function(t){i.update_response(e,t)}))},edit_existing_condition:function(e,t,n){var i=this,o={leadership_type:e,extra_data:n,element_id:t.element_id,condition_type:t.condition_type,combined_condition_data:t.combined_condition_data};console.log("editing condition with params: ",o),this.editLeadershipCondition(o).then((function(t){i.update_response(e,t)}))},remove_condition:function(e,t,n){var i=this,o={leadership_type:e,extra_data:n,element_id:t};console.log("Deleteing conditions with params: ",o),this.removeLeadershipCondition(o).then((function(t){i.update_response(e,t)}))},update_condition:function(e,t){var n=this,i=null;"owner"==e&&(i=this.$refs.owner_conditions),"governor"==e&&(i=this.$refs.governor_conditions);var o=Object.values(i.conditions_set).map((function(e){return{condition_type:e.name,combined_condition_data:e.fields,element_id:e.element_id,changed:e.changed}}));for(var s in o){var a=o[s];a["element_id"]||this.add_new_condition(e,a,t),a.changed&&this.edit_existing_condition(e,a,t)}i.removed_condition_element_ids&&i.removed_condition_element_ids.forEach((function(i){n.remove_condition(e,i,t)}))}})},ze=Ge,Ve=Object(p["a"])(ze,Pe,De,!1,null,null,null),We=Ve.exports,Be={components:{LeadershipGuideAlert:Se,ChangeLeadershipComponent:We},store:l["a"],computed:Object(r["a"])(Object(r["a"])(Object(r["a"])({},c["a"].mapState({governance_info:function(e){return e.governance.governance_info}})),c["a"].mapGetters(["getUserName"])),{},{governance_info_display:function(){var e=this;function t(t){var n=/\d+/g,i=t.replace(n,(function(t){return e.getUserName(t)}));return i}var n=/individual\s\d+(\s|\.|\s)/g,i=/individuals(\s\d+,)*\s\d+\sand\s\d+(\s|\.|\s)/g,o=this.governance_info.replace(n,t);return o=o.replace(i,t),o}})},He=Be,Ye=Object(p["a"])(He,Oe,Ce,!1,null,null,null),Je=Ye.exports,Ke=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"mt-3"},[n("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.group_membership_display",modifiers:{group_membership_display:!0}}],staticClass:"btn-sm btn-info mr-3 mb-3",attrs:{id:"add_members_display_button"},on:{click:function(t){e.mode="add"}}},[e._v("add members")]),n("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.group_membership_display",modifiers:{group_membership_display:!0}}],staticClass:"btn-sm btn-info mr-3 mb-3",attrs:{id:"remove_members_display_button"},on:{click:function(t){e.mode="remove"}}},[e._v("remove members")]),n("edit-membership-modal",{attrs:{mode:e.mode}}),n("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.group_membership_settings_display",modifiers:{group_membership_settings_display:!0}}],staticClass:"btn-sm btn-info mb-3",attrs:{id:"group_membership_settings_button"}},[e._v(" change membership settings")]),n("membership-settings-modal"),n("div",{staticClass:"bg-white p-3",attrs:{id:"current_member_list"}},[n("b-table",{attrs:{small:"",items:e.members_and_roles,fields:e.fields},scopedSlots:e._u([{key:"cell(member)",fn:function(t){return[n("router-link",{staticClass:"text-info",attrs:{to:{name:"user-permissions",params:{user_pk:t.item.pk}}}},[e._v(" "+e._s(t.item.member)+" ")])]}},{key:"cell()",fn:function(e){return[void 0!=e.value&&1==e.value?n("span",[n("b-icon-check-circle-fill",{attrs:{variant:"success"}})],1):n("span",[n("b-icon-x",{attrs:{variant:"danger"}})],1)]}}])})],1)],1)},Xe=[],Ze=(n("99af"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-modal",{staticClass:"modal fade",attrs:{id:"group_membership_display",title:"Group Membership",size:"lg","hide-footer":""},on:{hide:e.refresh}},[n("b",[e._v("Current Members:")]),n("span",{attrs:{id:"current_member_list"}},e._l(e.groupMembersAsOptions,(function(t){return n("b-badge",{key:t.pk,staticClass:"mx-1",attrs:{pill:"",variant:"info"}},[e._v(e._s(t.name))])})),1),"add"==e.mode?n("span",[n("vue-multiselect",{staticClass:"my-3",attrs:{options:e.nonmembersAsOptions,multiple:!0,"close-on-select":!0,"clear-on-select":!1,placeholder:"Select people to add",label:"name","track-by":"name"},model:{value:e.members_to_add_selected,callback:function(t){e.members_to_add_selected=t},expression:"members_to_add_selected"}}),n("take-action-component",{attrs:{response:e.response,inline:"true",verb:"add members to community"},on:{"take-action":e.add_members}})],1):n("span",[n("vue-multiselect",{staticClass:"my-3",attrs:{options:e.groupMembersAsOptions,multiple:!0,"close-on-select":!0,"clear-on-select":!1,placeholder:"Select people to remove",label:"name","track-by":"name"},model:{value:e.members_to_remove_selected,callback:function(t){e.members_to_remove_selected=t},expression:"members_to_remove_selected"}}),n("take-action-component",{attrs:{response:e.response,inline:"true",verb:"remove members from community"},on:{"take-action":e.remove_members}})],1)])}),Qe=[],et={props:["mode"],store:l["a"],components:{TakeActionComponent:d["a"],"vue-multiselect":Ne.a},data:function(){return{item_model:"group",members_to_add_selected:[],members_to_remove_selected:[],response:null}},computed:Object(r["a"])(Object(r["a"])({},c["a"].mapState({item_id:function(e){return e.group_pk}})),c["a"].mapGetters(["groupMembersAsOptions","nonmembersAsOptions"])),methods:Object(r["a"])(Object(r["a"])({},c["a"].mapActions(["addMembers","removeMembers"])),{},{refresh:function(){this.members_to_add_selected=[],this.members_to_remove_selected=[],this.response=null},add_members:function(e){var t=this,n=this.members_to_add_selected.map((function(e){return e.pk}));this.addMembers({member_pk_list:n,extra_data:e}).then((function(e){t.response=e}))},remove_members:function(e){var t=this,n=this.members_to_remove_selected.map((function(e){return e.pk}));this.removeMembers({member_pk_list:n,extra_data:e}).then((function(e){t.response=e}))}})},tt=et,nt=Object(p["a"])(tt,Ze,Qe,!1,null,null,null),it=nt.exports,ot=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-modal",{staticClass:"modalfade",attrs:{id:"group_membership_settings_display",title:"Membership Settings",size:"xl","hide-footer":""}},[e.user_permissions.apply_template?n("p",{staticClass:"mb-4"},[e._v(" Not sure what to pick? "),n("span",{directives:[{name:"b-modal",rawName:"v-b-modal.apply_template_modal_membership",modifiers:{apply_template_modal_membership:!0}}],staticClass:"text-info",attrs:{id:"membership_templates_link"}},[e._v(" Browse pre-existing membership templates and apply them to your community.")])]):e._e(),n("template-modal",{attrs:{scope:"membership"}}),n("error-component",{attrs:{message:e.error_message}}),n("span",{attrs:{id:"add_member_permissions"}},[n("p",{staticClass:"pb-1 font-weight-bold"},[e._v("Permissions for Adding Members")]),n("simple-permissions-display-component",{attrs:{permissions:e.addmember_permissions,item_id:e.item_id,item_model:e.item_model,item_name:"Adding Members",default_selection:"add members to community"}})],1),n("span",{attrs:{id:"remove_member_permissions"}},[n("p",{staticClass:"pt-4 pb-1 font-weight-bold"},[e._v("Permissions for Removing Members")]),n("simple-permissions-display-component",{attrs:{permissions:e.removemember_permissions,item_id:e.item_id,item_model:e.item_model,item_name:"Removing Members",default_selection:"remove members from community"}})],1)],1)},st=[],at=n("4ae4"),rt=n("4e90"),ct=n("894b"),lt={store:l["a"],components:{ErrorComponent:at["default"],SimplePermissionsDisplayComponent:rt["a"],TemplateModal:ct["a"]},data:function(){return{item_model:"group",add_member_state_change:"concord.communities.state_changes.AddMembersStateChange",remove_member_state_change:"concord.communities.state_changes.RemoveMembersStateChange",error_message:null}},created:function(){var e=this;this.checkPermissions({permissions:{apply_template:null}}).catch((function(t){e.error_message=t,console.log(t)})),this.getPermissionsForItem({item_id:this.item_id,item_model:this.item_model}).catch((function(t){e.error_message=t,console.log(t)}))},computed:Object(r["a"])(Object(r["a"])({},c["a"].mapState({permissions:function(e){return e.permissions.permissions},user_permissions:function(e){return e.permissions.current_user_permissions},item_id:function(e){return e.group_pk}})),{},{addmember_permissions:function(){var e=this;return Object.values(this.permissions).filter((function(t){return t.change_type==e.add_member_state_change}))},removemember_permissions:function(){var e=this;return Object.values(this.permissions).filter((function(t){return t.change_type==e.remove_member_state_change}))}}),methods:Object(r["a"])({},c["a"].mapActions(["getPermissionsForItem","checkPermissions"]))},dt=lt,_t=Object(p["a"])(dt,ot,st,!1,null,null,null),ut=_t.exports,mt={components:{EditMembershipModal:it,MembershipSettingsModal:ut},store:l["a"],data:function(){return{mode:null}},computed:Object(r["a"])(Object(r["a"])({},c["a"].mapGetters(["groupMembersAsOptions","allRoleNames","rolesForMember"])),{},{members_and_roles:function(){var e=this,t=this,n=[];return this.groupMembersAsOptions.forEach((function(i){var o={member:i.name,pk:i.pk},s=e.rolesForMember(i.pk);t.fields.forEach((function(e){s.includes(e)&&(o[e]=!0)})),n.push(o)})),n},fields:function(){var e=[];return this.allRoleNames.forEach((function(t){"members"!=t&&e.push(t)})),["member"].concat(e)}})},pt=mt,ft=Object(p["a"])(pt,Ke,Xe,!1,null,null,null),ht=ft.exports,bt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"bg-white p-3"},[n("p",[e._v('In addition to the required "members" role, groups can add custom roles which different people can be assigned to. Each role has different rights and responsibilities within the community.')]),n("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.add_role_modal",modifiers:{add_role_modal:!0}}],staticClass:"btn-sm mr-3 mb-3",attrs:{variant:"info",id:"add_role_button"}},[e._v("add a role")]),e.user_permissions.apply_template?n("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.apply_template_modal_role",modifiers:{apply_template_modal_role:!0}}],staticClass:"btn-sm mb-3",attrs:{variant:"info",id:"apply_role_templates"}},[e._v("apply role templates")]):e._e(),n("b-list-group",e._l(e.combined_roles,(function(t){return n("b-list-group-item",{key:t.id,staticClass:"d-flex justify-content-between align-items-center",attrs:{id:t.name+"_role"}},[n("span",{staticClass:"role_info"},[n("span",{staticClass:"role_name_display mr-2"},[e._v(e._s(t.name))]),n("small",{staticClass:"d-inline-block",attrs:{id:t.name+"_member_count"}},[e._v(" "+e._s(t.current_members.length)+" people ")])]),n("div",{staticClass:"role_interactions text-right"},["members"!=t.name?n("div",{directives:[{name:"b-modal",rawName:"v-b-modal.role_membership_modal",modifiers:{role_membership_modal:!0}}],staticClass:"d-inline-block",attrs:{id:t.name+"_add_members"},on:{click:function(n){e.role_selected=t.name,e.mode="add"}}},[n("b-icon-person-plus",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"add members"}})],1):e._e(),"members"!=t.name?n("div",{directives:[{name:"b-modal",rawName:"v-b-modal.role_membership_modal",modifiers:{role_membership_modal:!0}}],staticClass:"ml-3 d-inline-block",attrs:{id:t.name+"_remove_members",mode:"remove"},on:{click:function(n){e.role_selected=t.name,e.mode="remove"}}},[n("b-icon-person-dash",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"remove members"}})],1):e._e(),n("div",{directives:[{name:"b-modal",rawName:"v-b-modal.role_permissions_modal",modifiers:{role_permissions_modal:!0}}],staticClass:"ml-3 d-inline-block",attrs:{id:t.name+"_editrole"},on:{click:function(n){e.role_selected=t.name}}},[n("b-icon-shield-lock",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"change permissions"}})],1),"members"!=t.name?n("take-action-component",{attrs:{response:e.response,verb:"remove role "+t.name,action_name:"remove_role_from_community"},on:{"take-action":function(n){return e.remove_role(t.name,n)}}},[n("b-icon-trash",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"ml-3 d-inline-block",attrs:{title:"delete"}})],1):e._e()],1)])})),1),n("add-role-modal"),n("role-membership-component",{attrs:{role_selected:e.role_selected,mode:e.mode}}),n("role-permissions-modal",{attrs:{role_to_edit:e.role_selected}}),n("template-modal",{attrs:{scope:"role"}})],1)},vt=[],gt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-modal",{attrs:{id:"add_role_modal",title:"Add a new role","hide-footer":""}},[n("div",{staticClass:"input-group mb-3"},[n("div",{staticClass:"input-group-prepend"},[n("span",{staticClass:"input-group-text",attrs:{id:"role_name_prompt"}},[e._v("Role Name")])]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.new_role_name,expression:"new_role_name"}],staticClass:"form-control",attrs:{type:"text","aria-label":"role_name","aria-describedby":"role_name_prompt",name:"role_name"},domProps:{value:e.new_role_name},on:{input:function(t){t.target.composing||(e.new_role_name=t.target.value)}}})]),n("take-action-component",{attrs:{response:e.response,verb:"add role",inline:!0,action_name:"add_role_to_community"},on:{"take-action":e.submitRoleName}})],1)},kt=[],wt={store:l["a"],components:{TakeActionComponent:d["a"]},data:function(){return{response:null,new_role_name:""}},computed:Object(r["a"])({},c["a"].mapState({roles:function(e){return e.governance.roles}})),methods:Object(r["a"])(Object(r["a"])({},c["a"].mapActions(["addRole"])),{},{submitRoleName:function(e){var t=this;this.addRole({role_name:this.new_role_name,extra_data:e}).then((function(e){t.response=e}))}})},yt=wt,Ot=Object(p["a"])(yt,gt,kt,!1,null,null,null),Ct=Ot.exports,xt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-modal",{attrs:{id:"role_membership_modal",title:e.title_string,"hide-footer":""},on:{hide:e.refresh}},[n("span",{attrs:{id:"add_membership_multiselect"}},[n("vue-multiselect",{staticClass:"my-3",attrs:{options:e.people_to_choose_from,multiple:!0,"close-on-select":!0,"clear-on-select":!1,placeholder:"No one selected",label:"name","track-by":"pk"},model:{value:e.people_selected,callback:function(t){e.people_selected=t},expression:"people_selected"}})],1),e.no_valid_action?n("div",[e._v(e._s(e.no_valid_action))]):n("take-action-component",{attrs:{response:e.response,inline:!0,verb:e.verb,action_name:e.action_name,check_permissions_params:e.check_permissions_params},on:{"take-action":e.updateMembers}})],1)},Et=[],Rt={props:["role_selected","mode"],store:l["a"],components:{"vue-multiselect":Ne.a,TakeActionComponent:d["a"]},data:function(){return{response:null,people_selected:[],no_valid_action:null}},created:function(){"remove"==this.mode&&0==this.people_in_role.length&&(this.no_valid_action="There is no one in this role who can be removed."),"add"==this.mode&&this.people_to_choose_from.length==this.people_in_role.length&&(this.no_valid_action="All members are already in this role.")},computed:Object(r["a"])(Object(r["a"])({},c["a"].mapGetters(["membersAsOptions"])),{},{people_to_choose_from:function(){return this.membersAsOptions("members")},people_in_role:function(){return this.role_selected?this.membersAsOptions(this.role_selected):[]},title_string:function(){return"add"==this.mode?"Add people to role "+this.role_selected:"Remove people from role "+this.role_selected},action_name:function(){return"add"==this.mode?"add_people_to_role":"remove_people_from_role"},verb:function(){return"add"==this.mode?"add people to role '"+this.role_selected+"'":"remove people from role '"+this.role_selected+"'"},check_permissions_params:function(){return{role_name:this.role_selected}}}),watch:{role_selected:function(){this.people_selected=this.people_in_role}},methods:Object(r["a"])(Object(r["a"])({},c["a"].mapActions(["addUsersToRole","removeUsersFromRole"])),{},{refresh:function(){this.response=null,this.people_selected=[],this.no_valid_action=null},updateMembers:function(e){var t=this,n=this.people_in_role.map((function(e){return e.pk})),i=this.people_selected.map((function(e){return e.pk}));if("add"==this.mode){var o=i.filter((function(e){return!n.includes(e)}));o.length>0&&this.addUsersToRole({role_name:this.role_selected,people_to_add:o,extra_data:e}).then((function(e){t.response=e}))}else{var s=n.filter((function(e){return!i.includes(e)}));s.length>0&&this.removeUsersFromRole({role_name:this.role_selected,people_to_remove:s,extra_data:e}).then((function(e){t.response=e}))}}})},At=Rt,jt=Object(p["a"])(At,xt,Et,!1,null,null,null),St=jt.exports,Pt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-modal",{attrs:{id:"role_permissions_modal",title:e.title_string,size:"xl","hide-footer":""}},[n("p",{staticClass:"my-1"},[e._v("People with this role can...")]),n("simple-permissions-display-component",{attrs:{permissions:e.role_permissions,role_to_edit:e.role_to_edit,item_id:e.group_id,item_model:"group",item_name:"Role "+e.role_to_edit}})],1)},Dt=[],Tt={props:["role_to_edit"],components:{SimplePermissionsDisplayComponent:rt["a"]},store:l["a"],data:function(){return{error_message:""}},created:function(){this.getPermissionsForItem({item_id:this.group_id,item_model:"group"}),this.role_to_edit&&this.prepEditRole()},computed:Object(r["a"])(Object(r["a"])(Object(r["a"])({},c["a"].mapGetters(["permissionsForRole"])),c["a"].mapState({group_id:function(e){return e.group_pk}})),{},{title_string:function(){return"Permissions for role '"+this.role_to_edit+"'"},role_permissions:function(){return this.role_to_edit?this.permissionsForRole(this.role_to_edit):[]}}),watch:{role_to_edit:function(){this.prepEditRole()}},methods:Object(r["a"])(Object(r["a"])({},c["a"].mapActions(["refreshRoleData","getPermissionsForItem"])),{},{prepEditRole:function(){var e=this;this.refreshRoleData({role:this.role_to_edit}).catch((function(t){e.error_message=t}))}})},It=Tt,Mt=Object(p["a"])(It,Pt,Dt,!1,null,null,null),Nt=Mt.exports,Ft={store:l["a"],components:{AddRoleModal:Ct,RolePermissionsModal:Nt,RoleMembershipComponent:St,TemplateModal:ct["a"],TakeActionComponent:d["a"]},data:function(){return{role_selected:"",mode:null,response:null}},created:function(){var e=this;this.checkPermissions({permissions:{apply_template:null}}).catch((function(t){e.error_message=t,console.log(t)}))},computed:Object(r["a"])(Object(r["a"])({},c["a"].mapState({roles:function(e){return e.governance.roles},group_members:function(e){return e.governance.members},user_permissions:function(e){return e.permissions.current_user_permissions},group_pk:function(e){return e.group_pk}})),{},{combined_roles:function(){var e=[{name:"members",current_members:this.group_members}];return e.concat(this.roles)}}),methods:Object(r["a"])(Object(r["a"])({},c["a"].mapActions(["checkPermissions","removeRole"])),{},{remove_role:function(e,t){var n=this;this.removeRole({role_name:e,extra_data:t}).then((function(e){n.response=e}))}})},Lt=Ft,Ut=Object(p["a"])(Lt,bt,vt,!1,null,null,null),$t=Ut.exports,qt={components:{LeadershipComponent:Je,GroupMembershipComponent:ht,RoleComponent:$t,TemplateModal:ct["a"]},store:l["a"],data:function(){return{error_message:null,selected_component:"leadership"}},computed:Object(r["a"])(Object(r["a"])({},c["a"].mapState({forums:function(e){return e.forums.forums},group_name:function(e){return e.group_name}})),{},{governance_forum:function(){var e=null;return this.forums.forEach((function(t){"Gov"==t.special&&(e=t)})),e}})},Gt=qt,zt=(n("cca1"),Object(p["a"])(Gt,we,ye,!1,null,"496cde6d",null)),Vt=zt.exports,Wt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("complex-permissions-display-component",{attrs:{permissions:e.permissions,item_id:e.group_pk,item_model:"group",item_name:e.group_name}})},Bt=[],Ht=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-container",{staticClass:"permission-container"},[n("permission-editor-component",{attrs:{mode:"add"}}),n("b-row",{attrs:{"no-gutters":""}},[n("b-col",{staticClass:"py-3 pr-3",attrs:{cols:"2"}},[n("h5",{staticClass:"font-weight-bold mb-4"},[e._v("Filters")]),n("div",{staticClass:"my-3"},[n("h6",[e._v("Roles")]),n("b-form-select",{attrs:{options:e.role_names},model:{value:e.roleSelected,callback:function(t){e.roleSelected=t},expression:"roleSelected"}})],1),n("div",{staticClass:"my-3"},[n("h6",[e._v("Targets")]),n("b-form-select",{attrs:{options:e.target_names},model:{value:e.targetSelected,callback:function(t){e.targetSelected=t},expression:"targetSelected"}})],1),n("div",{staticClass:"my-3"},[n("h6",[e._v("Type of Change")]),n("b-form-select",{attrs:{options:e.section_names},model:{value:e.sectionSelected,callback:function(t){e.sectionSelected=t},expression:"sectionSelected"}})],1)]),n("b-col",{staticClass:"bg-white p-3 table-width"},[n("span",{staticClass:"big-text mr-2"},[e._v("All Group Permissions")]),n("b-icon-plus-circle",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}},{name:"b-modal",rawName:"v-b-modal.add_permission_modal",modifiers:{add_permission_modal:!0}}],staticClass:"mx-2",attrs:{title:"Add permission",variant:"warning","font-scale":"1.5",id:"add_permission_button"}}),e.user_permissions.apply_template?n("b-icon-grid3x3-gap-fill",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}},{name:"b-modal",rawName:"v-b-modal",value:"apply_template_modal_"+e.item_model,expression:"'apply_template_modal_' + item_model"}],staticClass:"mr-2",attrs:{title:"Apply templates",variant:"warning","font-scale":"1.5",id:"apply_templates"}}):e._e(),n("template-modal",{attrs:{scope:e.item_model,target_id:e.item_id,target_model:e.item_model}}),n("b-iconstack",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}},{name:"b-modal",rawName:"v-b-modal.advanced_permissions_modal",modifiers:{advanced_permissions_modal:!0}}],staticClass:"mr-2",attrs:{"font-scale":"1.5",title:"View advanced permissions",id:"advanced_permissions_button"}},[n("b-icon",{attrs:{stacked:"",icon:"shield-lock-fill",variant:"warning"}}),n("b-icon",{attrs:{stacked:"",icon:"star-fill",scale:".5","shift-h":"4","shift-v":"5",variant:"info"}})],1),n("advanced-permissions-modal",{attrs:{item_name:e.item_name,item_id:e.item_id,item_model:e.item_model}}),n("b-form-input",{attrs:{id:"search_permissions",type:"search",placeholder:"Search permissions"},model:{value:e.permissionSearchString,callback:function(t){e.permissionSearchString=t},expression:"permissionSearchString"}}),n("permissions-table-component",{staticClass:"my-3",attrs:{permissions:e.permissions,filter_data:e.filter_data}})],1)],1)],1)},Yt=[],Jt=n("93f0"),Kt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-modal",{attrs:{id:"advanced_permissions_modal",title:e.title_string,size:"xl","hide-footer":""}},[n("div",{staticClass:"my-3"},[n("p",[e._v("When the governing permission is turned on, any governor can take any action on this item, unless it is an action reserved only for owners. Governing permissions are typically turned on by default.")]),e.governing_permission_enabled?n("span",[e._v("The governing permission is "),n("b",[e._v("turned on")]),e._v(".")]):n("span",[e._v("The governing permission is "),n("b",[e._v("turned off")]),e._v(".")]),e.governing_permission_enabled&&e.user_permissions.disable_governing_permission?n("b-button",{staticStyle:{"font-size":"0.7em"},attrs:{size:"sm",pill:"",variant:"outline-secondary"},on:{click:function(t){return e.change_permission_override("governing","disable")}}},[e._v("Turn it off.")]):e._e(),!e.governing_permission_enabled&&e.user_permissions.enable_governing_permission?n("b-button",{staticStyle:{"font-size":"0.7em"},attrs:{size:"sm",pill:"",variant:"outline-secondary"},on:{click:function(t){return e.change_permission_override("governing","enable")}}},[e._v("Turn it on.")]):e._e()],1),n("div",{staticClass:"mt-3 mb-2"},[n("p",[e._v("When the foundational permission is turned on, only owners can act on the object. Any specific permissions set below will not apply, and neither will the governing permission. Foundational permissions are typically turned off by default.")]),e.foundational_permission_enabled?n("span",[e._v("The foundational permission is "),n("b",[e._v("turned on")]),e._v(", meaning all changes to this object must be approved by the group's owners. The permissions set below "),n("span",{staticClass:"text-danger"},[e._v("will not apply")]),e._v(".")]):n("span",[e._v("The foundational permission is "),n("b",[e._v("turned off")]),e._v(".")]),e.foundational_permission_enabled&&e.user_permissions.disable_foundational_permission?n("b-button",{staticStyle:{"font-size":"0.7em"},attrs:{size:"sm",pill:"",variant:"outline-secondary"},on:{click:function(t){return e.change_permission_override("foundational","disable")}}},[e._v("Turn it off.")]):e._e(),!e.foundational_permission_enabled&&e.user_permissions.enable_foundational_permission?n("b-button",{staticStyle:{"font-size":"0.7em"},attrs:{size:"sm",pill:"",variant:"outline-secondary"},on:{click:function(t){return e.change_permission_override("foundational","enable")}}},[e._v("Turn it on.")]):e._e()],1),n("action-response-component",{attrs:{response:e.override_response}})],1)},Xt=[],Zt=n("c33f"),Qt={props:["item_id","item_model","item_name"],components:{ActionResponseComponent:Zt["default"]},store:l["a"],data:function(){return{override_response:null}},created:function(){var e=this;this.getFoundationalForItem()||this.getPermissionsForItem({item_id:this.item_id,item_model:this.item_model}).catch((function(t){e.error_message=t}));var t=this.item_model+"_"+this.item_id;this.checkPermissions({permissions:{enable_governing_permission:{alt_target:t},disable_governing_permission:{alt_target:t},enable_foundational_permission:{alt_target:t},disable_foundational_permission:{alt_target:t}}})},computed:Object(r["a"])(Object(r["a"])(Object(r["a"])({},c["a"].mapState({user_permissions:function(e){return e.permissions.current_user_permissions}})),c["a"].mapGetters(["permissionsForItem","getFoundationalForItem","getGoverningForItem"])),{},{title_string:function(){return"Advanced permissions for "+this.item_model+" '"+this.item_name+"'"},item_key:function(){return this.item_id+"_"+this.item_model},governing_permission_enabled:function(){return this.item_key?this.getGoverningForItem(this.item_key):void 0},foundational_permission_enabled:function(){return this.item_key?this.getFoundationalForItem(this.item_key):void 0}}),methods:Object(r["a"])(Object(r["a"])({},c["a"].mapActions(["checkPermissions","getPermissionsForItem","changePermissionOverride"])),{},{change_permission_override:function(e,t){var n=this;this.changePermissionOverride({item_id:this.item_id,item_model:this.item_model,enable_or_disable:t,governing_or_foundational:e}).then((function(e){n.override_response=e}))}})},en=Qt,tn=Object(p["a"])(en,Kt,Xt,!1,null,null,null),nn=tn.exports,on=n("f56d"),sn={props:["permissions","item_id","item_model","item_name"],components:{PermissionsTableComponent:Jt["a"],TemplateModal:ct["a"],AdvancedPermissionsModal:nn,PermissionEditorComponent:on["a"]},store:l["a"],data:function(){return{permissionSearchString:"",roleSelected:null,targetSelected:null,sectionSelected:null}},created:function(){var e=this.item_model+"_"+this.item_id;this.checkPermissions({permissions:{apply_template:{alt_target:e}}}).catch((function(e){console.log(e)}))},computed:Object(r["a"])(Object(r["a"])(Object(r["a"])({},c["a"].mapState({user_permissions:function(e){return e.permissions.current_user_permissions}})),c["a"].mapGetters(["allRoleNames"])),{},{title_string:function(){return"Permissions for "+this.item_name},item_key:function(){return this.item_id+"_"+this.item_model},modal_id:function(){return this.item_key},modal:function(){return this.modal_id?this.modal_id:"default"},role_names:function(){return["","you","anyone"].concat(this.allRoleNames)},target_names:function(){return this.get_array("target")},section_names:function(){return this.get_array("section")},filter_data:function(){var e={};return this.permissionSearchString&&(e["searchString"]=this.permissionSearchString),this.roleSelected&&(e["roleSelected"]=this.roleSelected),this.targetSelected&&(e["targetSelected"]=this.targetSelected),this.sectionSelected&&(e["sectionSelected"]=this.sectionSelected),e}}),methods:Object(r["a"])(Object(r["a"])({},c["a"].mapActions(["checkPermissions"])),{},{get_array:function(e){var t=[""];return this.permissions.forEach((function(n){t.includes(n[e])||t.push(n[e])})),t}})},an=sn,rn=(n("8063"),Object(p["a"])(an,Ht,Yt,!1,null,"29d3e0d4",null)),cn=rn.exports,ln={components:{ComplexPermissionsDisplayComponent:cn},props:["group_pk"],store:l["a"],created:function(){var e=this;this.getPermissionsForItem({item_id:this.group_pk,item_model:"group"}).catch((function(t){e.error_message=t}))},computed:Object(r["a"])(Object(r["a"])({},c["a"].mapGetters(["permissionsForGroup"])),{},{group_name:function(){return l["a"].state.group_name},permissions:function(){return this.permissionsForGroup()}}),methods:Object(r["a"])({},c["a"].mapActions(["getPermissionsForItem"]))},dn=ln,_n=Object(p["a"])(dn,Wt,Bt,!1,null,null,null),un=_n.exports,mn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.user?n("span",[n("div",[n("b-card",{attrs:{title:e.title,"body-class":"text-center","header-tag":"nav"},scopedSlots:e._u([{key:"header",fn:function(){return[n("b-nav",{attrs:{"card-header":"",tabs:""}},[n("b-nav-item",{attrs:{"link-classes":"text-info",active:"roles"==e.tab},on:{click:function(t){e.tab="roles"}}},[e._v(" Roles")])],1)]},proxy:!0}],null,!1,186345035)},[n("b-card-text",["roles"==e.tab?n("div",{staticClass:"my-3 mx-5"},[n("h4",{staticClass:"font-weight-bold"},[e._v("Roles")]),n("error-component",{attrs:{message:e.error_message}}),n("p",{staticClass:"text-left mt-4 mb-2"},[e._v("Roles "+e._s(e.user.name)+" is in:")]),n("b-container",e._l(e.in_roles,(function(t){return n("b-row",{key:t.name,staticClass:"my-2"},[n("b-col",{staticClass:"text-left",attrs:{cols:"9"}},[n("span",{staticClass:"font-weight-bold"},[e._v(e._s(t.name))]),n("span",{staticClass:"ml-2 text-muted"},[e._v("permissions: "+e._s(e.to_list(t.permissions)))])]),n("b-col",[n("b-button",{staticClass:"btn-sm ml-3 float-right ",attrs:{variant:"outline-secondary"},on:{click:function(n){return e.remove_role(t)}}},[e._v("remove from role")])],1)],1)})),1),n("p",{staticClass:"text-left mt-4 mb-2"},[e._v("Roles "+e._s(e.user.name)+" is not part of:")]),n("b-container",e._l(e.out_roles,(function(t){return n("b-row",{key:t.name,staticClass:"my-2"},[n("b-col",{staticClass:"text-left",attrs:{cols:"9"}},[n("span",{staticClass:"font-weight-bold"},[e._v(e._s(t.name))]),n("span",{staticClass:"ml-2 text-muted"},[e._v("permissions: "+e._s(e.to_list(t.permissions)))])]),n("b-col",[n("b-button",{staticClass:"btn-sm ml-3 float-right ",attrs:{variant:"outline-secondary"},on:{click:function(n){return e.add_role(t)}}},[e._v("add to role")])],1)],1)})),1)],1):e._e()])],1)],1)]):e._e()},pn=[],fn=(n("a630"),n("3ca3"),{props:["user_pk"],components:{ErrorComponent:at["default"]},store:l["a"],data:function(){return{tab:"roles",error_message:""}},created:function(){var e=this;this.getGovernanceData(),this.getPermissionsForItem({item_id:this.group_pk,item_model:"group"}).catch((function(t){e.error_message=t,console.log(t)}))},computed:Object(r["a"])(Object(r["a"])(Object(r["a"])({},c["a"].mapState({user_permissions:function(e){return e.permissions.current_user_permissions},group_name:function(e){return e.group_name},group_pk:function(e){return e.group_pk},roles:function(e){return e.governance.roles}})),c["a"].mapGetters(["permissionsForItem","getUser","permissionsForRole"])),{},{title:function(){return this.user?this.user.name+"'s privileges in "+this.group_name:"user "+self.user_pk+"'s privileges in "+this.group_name},user:function(){return this.getUser(this.user_pk)},in_roles:function(){return this.user_annotated_roles.filter((function(e){return 1==e.user_is_member}))},out_roles:function(){return this.user_annotated_roles.filter((function(e){return 0==e.user_is_member}))},user_annotated_roles:function(){var e=[];for(var t in this.roles){var n=this.roles[t];n["user_is_member"]=n.current_members.indexOf(parseInt(this.user_pk))>-1,n["permissions"]=this.permissionsForRole(n.name),e.push(n)}return this.roles}}),methods:Object(r["a"])(Object(r["a"])({},c["a"].mapActions(["checkPermissions","getPermissionsForItem","addUsersToRole","removeUsersFromRole","getGovernanceData"])),{},{to_list:function(e){var t=Array.from(e,(function(e){return e.name}));return t.join(", ")},add_role:function(e){var t=this;this.addUsersToRole({role_name:e.name,user_pks:[parseInt(this.user_pk)]}).catch((function(e){t.error_message=e}))},remove_role:function(e){var t=this;this.removeUsersFromRole({role_name:e.name,user_pks:[parseInt(this.user_pk)]}).catch((function(e){t.error_message=e}))}})}),hn=fn,bn=Object(p["a"])(hn,mn,pn,!1,null,null,null),vn=bn.exports,gn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[n("h5",[e._v("Conditions for "),e.leadership_type?n("span",{staticClass:"text-info"},[e._v(e._s(e.group_name)+"'s "+e._s(e.leadership_type)+"s")]):e._e(),e.permission?n("span",[e._v("permission "),n("span",{staticClass:"text-info"},[e._v("'"+e._s(e.permission.display)+"'")])]):e._e()]),n("span",{attrs:{id:"existing_condition"}},[e._l(e.conditions,(function(t,i){return n("div",{key:t.element_id,staticClass:"mx-auto"},[n("div",{staticClass:"rounded bg-light border p-3 mt-3 text-center edit-condition-text"},[n("p",[e._v(e._s(t.how_to_pass)+" "),n("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal",value:"edit_condition_modal_"+t.element_id,expression:"'edit_condition_modal_'+condition.element_id"}],staticClass:"btn-sm btn-light border edit-condition-button"},[e._v("edit")])],1),n("edit-condition-component",{attrs:{element_id:t.element_id},on:{finished:e.clear_state}})],1),i<e.conditions.length-1?n("p",{staticClass:"text-center p-1"},[e._v("AND")]):e._e()])})),e.conditions&&0!=e.conditions.length?e._e():n("span",[e._v("There are no conditions set.")])],2),n("hr"),e.condition_selected?e._e():n("span",[e.show_select?e._e():n("b-button",{staticClass:"btm-sm mt-3",attrs:{id:"new_condition"},on:{click:function(t){e.show_select=!0}}},[e._v(" Add new condition")]),e.show_select&&!e.condition_selected?n("span",[n("b",[e._v("Select condition to add")]),[n("div",[n("b-form-select",{attrs:{options:e.processed_condition_options,"select-size":4,name:"condition_select"},model:{value:e.condition_selected,callback:function(t){e.condition_selected=t},expression:"condition_selected"}})],1)]],2):e._e(),n("error-component",{attrs:{message:e.error_message}})],1),e.condition_selected?n("edit-condition-component",{attrs:{condition_selected:e.condition_selected},on:{finished:e.clear_state}}):e._e()],1)},kn=[],wn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-modal",{attrs:{id:e.modal_id,size:"lg",title:e.modal_title,"hide-footer":""},on:{hide:function(t){return e.wrap_up()}}},[e.element_id?n("b-button",{attrs:{id:"delete_condition_button"},on:{click:function(t){return e.remove_condition()}}},[e._v("delete condition")]):e._e(),e._l(e.configuration_fields,(function(t){return n("complex-configurable-field-component",{key:t.field_name,attrs:{field:t,conditioned_on:e.conditioned_on},on:{"field-changed":e.change_field}})})),n("error-component",{attrs:{message:e.error_message}}),e.condition_selected?n("b-button",{staticClass:"mt-3",attrs:{size:"sm",id:"save_condition_button"},on:{click:function(t){return e.add_condition()}}},[e._v(" add condition")]):e._e(),e.element_id?n("b-button",{staticClass:"mt-3",attrs:{size:"sm",id:"save_edit_condition_button"},on:{click:function(t){return e.edit_condition()}}},[e._v(" edit condition")]):e._e()],2)},yn=[],On=n("f797"),Cn={components:{ErrorComponent:at["default"],ComplexConfigurableFieldComponent:On["a"]},store:l["a"],mixins:[g["a"]],props:["element_id","condition_selected"],data:function(){return{configuration_fields:[],error_message:""}},computed:Object(r["a"])(Object(r["a"])({},c["a"].mapGetters(["getConditionConfigurationFields","getPermissionConditionConfigurationFieldsWithData","getLeadershipConditionConfigurationFieldsWithData"])),{},{modal_id:function(){return this.element_id?"edit_condition_modal_"+this.element_id:this.condition_selected?"edit_condition_modal_new":void 0},modal_title:function(){return this.element_id?"Configuring "+this.params.condition_type+" (id: "+this.element_id+")":this.condition_selected?"Configuring "+this.params.condition_type+" (new)":void 0},conditioned_on:function(){return"permission"in this.$parent&&this.$parent.permission?"permission":"leadership"},condition_type:function(){return this.condition_selected?this.condition_selected:this.element_id?this.$parent.conditions_with_keys[this.element_id]["type"]:void 0},params:function(){var e={condition_type:this.condition_type};return this.element_id&&Object.assign(e,{element_id:this.element_id}),"permission"==this.conditioned_on?Object.assign(e,{permission_or_leadership:"permission",permission_id:this.$parent.permission.pk}):Object.assign(e,{permission_or_leadership:"leadership",leadership_type:this.$parent.leadership_type}),e}}),created:function(){var e=this;this.configuration_fields=this.get_configuration_fields(),this.condition_selected&&this.$nextTick((function(){e.$bvModal.show(e.modal_id)}))},methods:Object(r["a"])(Object(r["a"])({},c["a"].mapActions(["addCondition","editCondition","removeCondition"])),{},{get_configuration_fields:function(){var e=[];if(this.condition_selected)return e=this.getConditionConfigurationFields(this.condition_selected),Object.values(e);if(this.element_id){if(this.$parent.permission)return e=this.getPermissionConditionConfigurationFieldsWithData(this.$parent.permission.pk,this.element_id),Object.values(e);if(this.$parent.leadership_type)return e=this.getLeadershipConditionConfigurationFieldsWithData(this.$parent.leadership_type,this.element_id),Object.values(e)}return[]},wrap_up:function(){this.$emit("finished"),this.$bvModal.hide(this.modal_id)},add_condition:function(){var e=this,t=this.params;t["combined_condition_data"]=this.configuration_fields,this.addCondition(t).then((function(t){return e.wrap_up()})).catch((function(t){return e.error_message=t}))},edit_condition:function(){var e=this,t=this.params;t["combined_condition_data"]=this.configuration_fields,this.editCondition(t).then((function(t){return e.wrap_up()})).catch((function(t){return e.error_message=t}))},remove_condition:function(){var e=this;this.removeCondition(this.params).then((function(t){return e.wrap_up()})).catch((function(t){return e.error_message=t}))}})},xn=Cn,En=Object(p["a"])(xn,wn,yn,!1,null,null,null),Rn=En.exports,An={store:l["a"],props:["conditioned_on","dependency_scope"],components:{ErrorComponent:at["default"],EditConditionComponent:Rn},data:function(){return{show_select:!1,leadership_type:null,condition_selected:"",error_message:""}},provide:function(){var e=this.dependency_scope?this.dependency_scope:"group";return{dependency_scope:e}},created:function(){["owner","governor"].indexOf(this.conditioned_on)>-1?this.leadership_type=this.conditioned_on:this.fetchMissingPermission({pk:this.conditioned_on}).catch((function(e){return console.log(e)}))},computed:Object(r["a"])(Object(r["a"])({},c["a"].mapState({owner_condition:function(e){return e.permissions.owner_condition},governor_condition:function(e){return e.permissions.governor_condition},condition_options:function(e){return e.permissions.condition_options},permissions:function(e){return e.permissions.permissions},group_name:function(e){return e.group_name}})),{},{processed_condition_options:function(){var e=this,t=[];return t.push({label:"Decision Conditions",options:this.condition_options.filter((function(e){return!e.value.includes("Filter")}))}),this.leadership_type||t.push({label:"Filter Conditions",options:this.condition_options.filter((function(t){if(t.value.includes("Filter")){if(!t.linked)return!0;if(e.permission.linked&&e.permission.linked.includes(t.value))return!0}return!1}))}),t},permission:function(){if(!this.leadership_type)return this.permissions[this.conditioned_on]},conditions_with_keys:function(){return this.permission&&this.permission.condition?this.permission.condition:"owner"==this.leadership_type&&this.owner_condition?this.owner_condition:"governor"==this.leadership_type&&this.governor_condition?this.governor_condition:void 0},conditions:function(){if(this.conditions_with_keys){var e=this.conditions_with_keys;return delete e.how_to_pass_overall,Object.values(e).sort((function(e,t){return e.how_to_pass<t.how_to_pass?-1:e.how_to_pass>t.how_to_pass?1:0}))}return[]}}),methods:Object(r["a"])(Object(r["a"])({},c["a"].mapActions(["fetchMissingPermission"])),{},{clear_state:function(){this.condition_selected=null,this.show_select=!1}})},jn=An,Sn=Object(p["a"])(jn,gn,kn,!1,null,null,null),Pn=Sn.exports,Dn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-row",[n("b-col",{attrs:{cols:"3"}},[n("resource-sidebar-component",{attrs:{highlight_model:"forum",highlight_pk:e.item_id}})],1),n("b-col",{attrs:{cols:"9"}},[n("forum-component",{attrs:{item_id:e.item_id}})],1)],1)},Tn=[],In=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.forum?n("div",{staticClass:"bg-white p-3 rounded"},[n("div",{staticClass:"title-and-actions mb-4"},[n("span",{staticClass:"h3 font-weight-bold"},[e._v(e._s(e.forum.name))]),n("resource-action-icons",{staticClass:"float-right",attrs:{item_id:e.item_id,item_model:"forum",item_name:e.forum.name,export_url:e.json_export_url,export_text:"export as json",response:e.response,hide_delete:e.is_governance_forum},on:{delete:e.delete_forum}})],1),n("p",[e._v(e._s(e.forum.description))]),n("hr"),n("form-button-and-modal",{attrs:{item_model:"post",button_text:"+ add post",supplied_params:{forum_id:e.item_id},alt_target:"forum_"+e.item_id}}),e._l(e.posts_for_forum,(function(t){var i=t.pk,o=t.title,s=t.content,a=t.author,r=t.created;return n("b-card",{key:i,staticClass:"bg-light text-info mt-3 rounded"},[n("router-link",{attrs:{to:{name:"post-detail",params:{forum_id:e.item_id,item_id:i}}}},[n("span",{staticClass:"post-link text-info pb-1"},[e._v(e._s(o)+" ")])]),n("p",{staticClass:"mb-1 post-content text-dark"},[e._v(" "+e._s(e.shorten_text(s,100))+" ")]),n("small",{staticClass:"text-muted"},[e._v("posted by "+e._s(e.getUserName(a))+" on "+e._s(e.display_date(r)))])],1)})),0===Object.keys(e.posts).length?n("span",[e._v("There are no posts yet in this forum.")]):e._e()],2):e._e()},Mn=[],Nn=n("4811"),Fn={props:["item_id"],store:l["a"],components:{FormButtonAndModal:_["a"],ResourceActionIcons:Nn["a"]},mixins:[g["e"]],data:function(){return{forum:null,response:null,base_export_url:""}},created:function(){var e=this;this.forum=this.getForumData(this.item_id),this.forum||this.getForum({forum_pk:parseInt(this.item_id)}).then((function(t){e.forum=e.getForumData(e.item_id)})),this.getPosts({forum_pk:parseInt(this.item_id)}),this.url_lookup("export_as_json").then((function(t){return e.base_export_url=t}))},watch:{forums:function(e){this.forum=this.getForumData(this.item_id)}},computed:Object(r["a"])(Object(r["a"])(Object(r["a"])({},c["a"].mapState({forums:function(e){return e.forums.forums},posts:function(e){return e.forums.posts}})),c["a"].mapGetters(["getForumData","getPostsDataForForum","getUserName","url_lookup"])),{},{posts_for_forum:function(){var e=this;return this.forum&&this.posts?this.posts.filter((function(t){return t.forum_pk==e.forum.pk})):[]},is_governance_forum:function(){if(this.forum)return"Gov"==this.forum.special},json_export_url:function(){return this.base_export_url+"?item_id="+this.item_id+"&item_model=forum"}}),methods:Object(r["a"])(Object(r["a"])({},c["a"].mapActions(["getForum","getPosts","deleteForum"])),{},{display_date:function(e){return new Date(e).toUTCString()},delete_forum:function(e){var t=this;this.deleteForum({pk:this.item_id,extra_data:e}).then((function(e){"implemented"==e.data.action_status?t.$router.push({name:"home"}):t.response=e}))}})},Ln=Fn,Un=(n("2525"),Object(p["a"])(Ln,In,Mn,!1,null,"66ec0605",null)),$n=Un.exports,qn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",e._l(e.resources,(function(t){var i=t.display,o=t.model,s=t.items;return n("div",{key:o,staticClass:"mb-4"},[n("h5",{staticClass:"font-weight-bold"},[e._v(" "+e._s(i)+" "),"simplelist"==o?n("form-button-and-modal",{attrs:{item_model:"list",button_text:"+ add new",supplied_variant:"light",supplied_classes:"btn-sm ml-3"}}):e._e(),"forum"==o?n("form-button-and-modal",{attrs:{item_model:"forum",button_text:"+ add new",supplied_variant:"light",supplied_classes:"btn-sm ml-3"}}):e._e(),"document"==o?n("form-button-and-modal",{attrs:{item_model:"document",button_text:"+ add new",supplied_variant:"light",supplied_classes:"btn-sm ml-3"}}):e._e()],1),n("b-list-group",e._l(s,(function(t){return n("b-list-group-item",{key:t.pk,attrs:{active:t.pk==e.highlight_pk&&o==e.highlight_model}},[n("router-link",{attrs:{to:e.get_router_ref(o,t)}},[e._v(" "+e._s(t.name)+" ")])],1)})),1),0===Object.keys(s).length?n("span",[e._v("There are no "+e._s(i.toLowerCase())+" yet.")]):e._e()],1)})),0)},Gn=[],zn={components:{FormButtonAndModal:_["a"]},props:["highlight_model","highlight_pk"],created:function(){0==this.lists.length&&this.getLists(),0==this.forums.length&&this.getForums(),0==this.documents.length&&this.getDocuments()},computed:Object(r["a"])(Object(r["a"])({},c["a"].mapState({lists:function(e){return e.simplelists.lists},forums:function(e){return e.forums.forums},documents:function(e){return e.documents.documents}})),{},{resources:function(){return[{display:"Forums",model:"forum",items:this.forums},{display:"Lists",model:"simplelist",items:this.lists},{display:"Documents",model:"document",items:this.documents}]}}),methods:Object(r["a"])(Object(r["a"])({},c["a"].mapActions(["getLists","getForums","getDocuments"])),{},{get_router_ref:function(e,t){return"simplelist"==e?{name:"list-detail",params:{list_id:t.pk}}:"forum"==e?{name:"forum-detail",params:{item_id:t.pk}}:"document"==e?{name:"document-detail",params:{item_id:t.pk}}:void 0}})},Vn=zn,Wn=(n("2f83"),Object(p["a"])(Vn,qn,Gn,!1,null,"a1209246",null)),Bn=Wn.exports,Hn={components:{ForumComponent:$n,ResourceSidebarComponent:Bn},props:["item_id"]},Yn=Hn,Jn=Object(p["a"])(Yn,Dn,Tn,!1,null,null,null),Kn=Jn.exports,Xn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-row",[n("b-col",{attrs:{cols:"3"}},[n("resource-sidebar-component",{attrs:{highlight_model:"forum",highlight_pk:e.forum_id}})],1),n("b-col",{attrs:{cols:"9"}},[e.post?n("div",{staticClass:"bg-white p-3 rounded"},[n("div",{staticClass:"title-and-actions mb-4"},[n("span",{staticClass:"h3 font-weight-bold"},[e._v(e._s(e.post.title))]),n("resource-action-icons",{staticClass:"float-right",attrs:{item_id:e.item_id,item_model:"post",item_name:e.post.title},on:{delete:e.delete_post}}),n("div",{staticClass:"mt-2",attrs:{id:"author"}},[e._v(" by "),n("span",{staticClass:"user-link"},[e._v(e._s(e.getUserName(e.post.author)))])]),n("div",{staticClass:"mt-2 small",attrs:{id:"post-info"}},[e._v(" posted in "+e._s(e.forum_name)+" on "+e._s(e.display_date(e.post.created)))])],1),n("p",{staticClass:"mb-4 post-text"},[e._v(" "+e._s(e.post.content)+" ")]),n("CommentListComponent",{staticClass:"mt-3",attrs:{item_id:e.item_id,item_model:"post"}})],1):e._e()])],1)},Zn=[],Qn={props:["forum_id","item_id"],store:l["a"],components:{CommentListComponent:K["a"],ResourceSidebarComponent:Bn,ResourceActionIcons:Nn["a"]},mixins:[g["e"]],data:function(){return{post:null,forum:null,response:null}},created:function(){var e=this;this.getGovernanceData().then((function(t){e.post=e.getPostData(e.item_id),e.post||e.getPost({post_pk:e.item_id}).then((function(t){e.post=e.getPostData(e.item_id)}))})),this.forum=this.getForumData(this.forum_id),this.forum||this.getForum({forum_pk:parseInt(this.forum_id)}).then((function(t){e.forum=e.getForumData(e.forum_id)}))},computed:Object(r["a"])(Object(r["a"])({},c["a"].mapGetters(["getUserName","getPostData","getForumData"])),{},{forum_name:function(){return this.forum?this.forum.name:""}}),methods:Object(r["a"])(Object(r["a"])({},c["a"].mapActions(["deletePost","getPost","getForum","getGovernanceData"])),{},{display_date:function(e){return new Date(e).toUTCString()},delete_post:function(e){var t=this;this.deletePost({pk:this.item_id,extra_data:e}).then((function(e){t.response=e,"implemented"==e.data.action_status&&t.$router.push({name:"forum-detail",params:{forum_id:t.forum_id}})}))}})},ei=Qn,ti=(n("c322"),Object(p["a"])(ei,Xn,Zn,!1,null,"f62a082e",null)),ni=ti.exports,ii=n("a669"),oi=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-row",[n("b-col",{attrs:{cols:"3"}},[n("resource-sidebar-component",{attrs:{highlight_model:"simplelist",highlight_pk:e.list_id}})],1),n("b-col",{attrs:{cols:"9"}},[n("simple-list-component",{attrs:{list_id:e.list_id}})],1)],1)},si=[],ai=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.list?n("div",{staticClass:"bg-white p-3"},[n("div",{staticClass:"title-and-actions mb-4"},[n("span",{staticClass:"h3 font-weight-bold"},[e._v(e._s(e.list.name))]),n("resource-action-icons",{staticClass:"float-right",attrs:{response:e.list_response,item_id:e.list_id,item_model:"list",item_name:e.list.name,export_url:e.csv_export_url,export_text:"export as csv"},on:{delete:e.delete_list}})],1),n("p",[e._v(e._s(e.list.description))]),n("b-form",{staticClass:"my-4",attrs:{inline:"",id:"table_controls"}},[n("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.column_modal",modifiers:{column_modal:!0}}],staticClass:"btn-sm mr-2",attrs:{variant:"info",id:"add_column_button"},on:{click:function(t){return e.prep_modal("add",null)}}},[e._v("new column")]),e.user_permissions.add_row_to_list?n("b-button",{staticClass:"btn-sm mr-2",attrs:{variant:"info",id:"add_row_button"},on:{click:function(t){e.new_item=!0,e.edit_item="new_row"}}},[e._v("new row")]):e._e(),n("b-input-group",{attrs:{size:"sm"}},[n("b-form-input",{attrs:{id:"filter-input",type:"search",placeholder:"Type to Search"},model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}}),n("b-input-group-append",[n("b-button",{attrs:{disabled:!e.filter},on:{click:function(t){e.filter=""}}},[e._v("Clear")])],1)],1)],1),n("b-table",{staticClass:"mt-2",attrs:{striped:"",hover:"",items:e.list_data,fields:e.list_fields,filter:e.filter},scopedSlots:e._u([{key:"cell(controls)",fn:function(t){return[n("b-form",{attrs:{inline:""}},[e.edit_item==t.item.unique_id?n("span",[e.new_item?n("span",[n("take-action-component",{attrs:{response:e.add_row_response,alt_target:e.alt_target,verb:"add row to list"},on:{"take-action":e.add_row,"close-modal":function(t){return e.modal_closed("add")}}},[n("b-icon-check",{staticClass:"mx-1",attrs:{id:"submit_add_row"}})],1),n("b-icon-x",{staticClass:"mx-1",attrs:{id:"discard_edit_row"},on:{click:function(t){e.edit_item=null,e.new_item=null}}})],1):n("span",[n("take-action-component",{attrs:{response:e.edit_row_response,alt_target:e.alt_target,verb:"edit row in list"},on:{"take-action":function(n){return e.edit_row(t.item,n)},"close-modal":function(t){return e.modal_closed("edit")}}},[n("b-icon-check",{staticClass:"mx-1",attrs:{id:"submit_edit_row"}})],1),n("b-icon-x",{staticClass:"mx-1",attrs:{id:"discard_edit_row"},on:{click:function(t){e.edit_item=null}}})],1)]):n("span",[n("b-icon-pencil-square",{staticClass:"mx-1",attrs:{id:"edit_row_"+t.index},on:{click:function(n){e.edit_item=t.item.unique_id}}}),n("take-action-component",{attrs:{alt_target:e.alt_target,response:e.delete_row_response,verb:"delete row in list",unique:t.index},on:{"take-action":function(n){return e.delete_row(t.item,n)},"close-modal":function(t){return e.modal_closed("delete")}}},[n("b-icon-trash",{staticClass:"mx-1",attrs:{id:"delete_row_"+t.index}})],1)],1)])]}},{key:"cell()",fn:function(t){return[e.edit_item==t.item.unique_id?n("b-form-input",{attrs:{id:t.item.unique_id+"_"+t.field.key,name:"edit_"+t.field.key,value:t.value}}):n("span",[e._v(e._s(t.value))])]}},{key:"head()",fn:function(t){return["Controls"!=t.label?n("span",[n("span",{directives:[{name:"b-modal",rawName:"v-b-modal.column_modal",modifiers:{column_modal:!0}}],attrs:{id:"edit_column_"+t.label},on:{click:function(n){return n.stopPropagation(),e.prep_modal("edit",t.field)}}},[e._v(" "+e._s(t.label)+" "),t.field.required?n("b-icon-asterisk",{attrs:{scale:"0.5","shift-v":"5"}}):e._e(),t.field.default_value?n("b-icon-textarea-t",{attrs:{scale:"0.5","shift-v":"5"}}):e._e()],1)]):n("span")]}}],null,!1,2189708568)}),0===Object.keys(e.list.rows).length?n("span",[e._v("There are no items yet in this list.")]):e._e(),n("column-modal-component",{attrs:{mode:e.mode,column_data:e.column_data,has_rows:e.list_data.length>0,alt_target:e.alt_target}})],1):e._e()},ri=[],ci=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-modal",{attrs:{id:"column_modal",title:e.title,size:"md"},on:{show:e.onShow,close:e.clear},scopedSlots:e._u([{key:"modal-footer",fn:function(){return["add"==e.mode?n("take-action-component",{attrs:{response:e.add_response,inline:"true",verb:"add column",action_name:"add_column_to_list",alt_target:e.alt_target},on:{"take-action":e.add_column}}):e._e(),"edit"==e.mode&&e.not_deleted?n("take-action-component",{attrs:{response:e.edit_response,inline:"true",verb:"edit column",action_name:"edit_column_in_list",alt_target:e.alt_target},on:{"take-action":e.edit_column}}):e._e(),"edit"==e.mode?n("take-action-component",{attrs:{response:e.delete_response,inline:"true",verb:"delete column",action_name:"delete_column_from_list",alt_target:e.alt_target},on:{"take-action":e.delete_column}}):e._e()]},proxy:!0}])},[n("b-input-group",{staticClass:"my-2",attrs:{prepend:"Column Name"}},[n("b-form-input",{attrs:{name:"columnName"},model:{value:e.column_name,callback:function(t){e.column_name=t},expression:"column_name"}})],1),n("b-input-group",{staticClass:"my-2",attrs:{prepend:"Default Value"}},[n("b-form-input",{attrs:{name:"defaultValue"},model:{value:e.column_default,callback:function(t){e.column_default=t},expression:"column_default"}})],1),n("b-form-checkbox",{staticClass:"popover-checkbox",attrs:{id:"required_checkbox",name:"required_checkbox"},model:{value:e.column_required,callback:function(t){e.column_required=t},expression:"column_required"}},[e._v("Required")]),e.validation_error?n("span",{staticClass:"text-danger"},[e._v(e._s(e.validation_error))]):e._e()],1)},li=[],di={components:{TakeActionComponent:d["a"]},props:["alt_target","column_data","mode","has_rows"],store:l["a"],data:function(){return{validation_error:null,add_response:null,edit_response:null,delete_response:null,column_name:null,column_required:null,column_default:null,not_deleted:!0}},computed:{title:function(){return this.mode.charAt(0).toUpperCase()+this.mode.slice(1)+" column"}},methods:Object(r["a"])(Object(r["a"])({},c["a"].mapActions(["addColumn","editColumn","deleteColumn"])),{},{onShow:function(){this.reset_column()},clear:function(){this.validation_error=null,this.add_response=null,this.edit_response=null,this.delete_response=null},reset_column:function(){this.column_name=this.column_data.key,this.column_default=this.column_data.default_value,this.column_required=this.column_data.required},validate:function(){return this.column_name?!this.column_required||this.column_required==this.column_data.required||""!=this.column_default||!this.has_rows||("edit"==this.mode&&(this.validation_error="When making a column required, you must supply a default value unless your list is empty"),"add"==this.mode&&(this.validation_error="When adding a required column, you must supply a default value unless your list is empty"),!1):(this.validation_error="Column must have a name",!1)},add_column:function(e){var t=this;0!=this.validate()&&this.addColumn({alt_target:this.alt_target,column_name:this.column_name,required:this.column_required,default_value:this.column_default,extra_data:e}).then((function(e){t.add_response=e}))},edit_column:function(e){var t=this;if(0!=this.validate()){var n={alt_target:this.alt_target,required:this.column_required,default_value:this.column_default,extra_data:e};this.column_name!=this.column_data.key?(n["column_name"]=this.column_data.key,n["new_name"]=this.column_name):n["column_name"]=this.column_name,this.editColumn(n).then((function(e){t.edit_response=e}))}},delete_column:function(e){var t=this,n=this.column_name==this.column_data.key?this.column_name:this.column_data.key;this.deleteColumn({alt_target:this.alt_target,column_name:n,extra_data:e}).then((function(e){t.delete_response=e}))}})},_i=di,ui=Object(p["a"])(_i,ci,li,!1,null,null,null),mi=ui.exports,pi={components:{TakeActionComponent:d["a"],ColumnModalComponent:mi,ResourceActionIcons:Nn["a"]},props:["list_id"],store:l["a"],mixins:[g["e"]],data:function(){return{list_response:null,add_row_response:null,edit_row_response:null,delete_row_response:null,base_export_url:"",edit_item:null,new_item:null,filter:null,mode:"add",column_data:null}},created:function(){var e=this;if(this.lists_loaded||this.getLists(),this.list_id){var t="simplelist_"+this.list_id;this.checkPermissions({permissions:{add_row_to_list:{alt_target:t},edit_row_in_list:{alt_target:t},delete_row_in_list:{alt_target:t}}}).catch((function(e){console.log(e)}))}else console.log("Missing list_id in SimpleListComponent");this.url_lookup("export_as_csv").then((function(t){return e.base_export_url=t}))},computed:Object(r["a"])(Object(r["a"])(Object(r["a"])({},c["a"].mapState({lists:function(e){return e.simplelists.lists},user_permissions:function(e){return e.permissions.current_user_permissions}})),c["a"].mapGetters(["getListData","getUserName","url_lookup"])),{},{alt_target:function(){return"simplelist_"+this.list_id},lists_loaded:function(){return 0!=this.lists.length},list:function(){return this.lists_loaded?this.getListData(this.list_id):null},list_fields:function(){var e=[{controls:{class:"changecolumn",sortable:!1}}];for(var t in this.list.columns)e.push({key:t,sortable:!0,required:this.list.columns[t].required,default_value:this.list.columns[t].default_value});return e},list_data:function(){var e=[];if(this.new_item){var t={unique_id:"new_row"};for(var n in this.list.columns)t[n]="";e.push(t)}for(var i in this.list.rows){var o={unique_id:i};for(var s in this.list.rows[i])o[s]=this.list.rows[i][s];e.push(o)}return e},csv_export_url:function(){return this.base_export_url+"?item_id="+this.list_id+"&item_model=simplelist"}}),methods:Object(r["a"])(Object(r["a"])({},c["a"].mapActions(["checkPermissions","getLists","deleteList","addRow","editRow","deleteRow"])),{},{display_date:function(e){return Date(e)},prep_modal:function(e,t){this.mode=e,this.column_data=t||{key:"",required:!1,default_value:""}},modal_closed:function(e){"edit"==e&&(this.edit_item=null),"add"==e&&(this.new_item=null,this.edit_item=null),this.add_row_response=null,this.edit_row_response=null,this.delete_row_response=null},delete_list:function(e){var t=this;this.deleteList({pk:this.list_id,extra_data:e}).then((function(e){"implemented"==e.data.action_status?t.$router.push({name:"home"}):t.list_response=e}))},add_row:function(e){var t=this,n={};for(var i in this.list.columns)n[i]=document.getElementById("new_row_"+i).value;this.addRow({list_pk:this.list_id,row_content:n,extra_data:e}).then((function(e){t.add_row_response=e}))},edit_row:function(e,t){var n=this,i={};for(var o in this.list.columns)i[o]=document.getElementById(e.unique_id+"_"+o).value;this.editRow({list_pk:this.list_id,row_content:i,unique_id:e.unique_id,extra_data:t}).then((function(e){n.edit_row_response=e}))},delete_row:function(e,t){var n=this;this.deleteRow({list_pk:this.list_id,unique_id:e.unique_id,extra_data:t}).then((function(e){n.delete_row_response=e}))}})},fi=pi,hi=(n("87d8"),Object(p["a"])(fi,ai,ri,!1,null,null,null)),bi=hi.exports,vi={components:{SimpleListComponent:bi,ResourceSidebarComponent:Bn},props:["list_id"]},gi=vi,ki=Object(p["a"])(gi,oi,si,!1,null,null,null),wi=ki.exports,yi=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-row",[n("b-col",{attrs:{cols:"3"}},[n("resource-sidebar-component",{attrs:{highlight_model:"document",highlight_pk:e.item_id}})],1),n("b-col",{attrs:{cols:"9"}},[n("document-component",{attrs:{item_id:e.item_id}})],1)],1)},Oi=[],Ci=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.document?n("div",{staticClass:"bg-white p-3"},[n("div",{staticClass:"title-and-actions mb-4"},[n("span",{staticClass:"h3 font-weight-bold"},[e._v(e._s(e.document.name))]),n("resource-action-icons",{staticClass:"float-right",attrs:{item_id:e.item_id,item_model:"document",item_name:e.document.name,response:e.delete_response},on:{delete:e.delete_document}})],1),n("p",[e._v(e._s(e.document.description))]),n("router-link",{attrs:{to:{name:"document-full-page",params:{item_id:e.item_id}}}},[n("b-button",{staticClass:"btn-sm mr-2",attrs:{variant:"outline-secondary",id:"document_fullpage"}},[e._v(" view full page")])],1),e.edit_mode?e._e():n("b-button",{staticClass:"btn-sm mr-2",attrs:{variant:"outline-secondary",id:"edit_content_start_button"},on:{click:function(t){e.edit_mode=!0}}},[e._v("edit content")]),e.edit_mode?n("DocumentMarkdownComponent",{ref:"markdown",attrs:{content:e.document.content}}):n("div",{staticClass:"pt-4",domProps:{innerHTML:e._s(e.rendered_content)}}),n("div",{staticClass:"my-2"},[e.edit_mode?n("take-action-component",{attrs:{response:e.edit_content_response,verb:"save edits",action_name:"edit_document"},on:{"take-action":e.edit_content,"close-modal":e.modal_closed}}):e._e(),e.edit_mode?n("b-button",{staticClass:"ml-2",attrs:{variant:"outline-secondary",id:"discard_content_edits"},on:{click:function(t){e.edit_mode=!1}}},[e._v("discard")]):e._e()],1)],1):e._e()},xi=[],Ei=n("0e54"),Ri=n.n(Ei),Ai=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[n("b-row",{staticClass:"py-3"},[n("b-col",{attrs:{cols:"12"}},[e._v(" Write your document below. You can use "),n("a",{attrs:{href:"https://www.markdownguide.org/basic-syntax/"}},[e._v("Markdown")]),e._v(" syntax for style. ")])],1),n("b-row",[n("b-col",{attrs:{cols:"6"}},[n("b-form-textarea",{staticClass:"w-100",attrs:{id:"document_content_textarea",name:"document_content_textarea",rows:"5"},on:{input:e.update},model:{value:e.current_content,callback:function(t){e.current_content=t},expression:"current_content"}})],1),n("b-col",{attrs:{cols:"6"}},[n("div",{domProps:{innerHTML:e._s(e.compiledMarkdown)}})])],1)],1)},ji=[],Si=n("2ef0"),Pi={props:["content"],store:l["a"],data:function(){return{current_content:"# hello!"}},created:function(){this.content&&(this.current_content=this.content)},watch:{content:function(e){"undefined"!==typeof this.content&&(this.current_content=this.content)}},computed:{compiledMarkdown:function(){return Ri()(this.current_content,{sanitize:!0})}},methods:{update:Object(Si["debounce"])((function(e){this.current_content=e.target.value}),300)}},Di=Pi,Ti=Object(p["a"])(Di,Ai,ji,!1,null,null,null),Ii=Ti.exports,Mi={props:["item_id"],store:l["a"],components:{DocumentMarkdownComponent:Ii,TakeActionComponent:d["a"],ResourceActionIcons:Nn["a"]},mixins:[g["e"]],data:function(){return{error_message:null,edit_mode:!1,new_name:"",new_description:"",delete_response:null,edit_content_response:null}},created:function(){this.document||this.getDocuments()},computed:Object(r["a"])(Object(r["a"])({},c["a"].mapGetters(["getDocumentData"])),{},{document:function(){return this.getDocumentData(this.item_id)},rendered_content:function(){return this.document?Ri()(this.document.content,{sanitize:!0}):null}}),methods:Object(r["a"])(Object(r["a"])({},c["a"].mapActions(["getDocuments","deleteDocument","editDocument"])),{},{modal_closed:function(){this.edit_content_response&&"implemented"==this.edit_content_response.data.action_status&&(this.edit_mode=!1)},edit_content:function(e){var t=this;this.editDocument({pk:this.item_id,content:this.$refs.markdown.current_content,extra_data:e}).then((function(e){t.edit_content_response=e}))},delete_document:function(e){var t=this;this.deleteDocument({pk:this.item_id,extra_data:e}).then((function(e){"implemented"==e.data.action_status?t.$router.push({name:"home"}):t.delete_response=e}))}})},Ni=Mi,Fi=Object(p["a"])(Ni,Ci,xi,!1,null,null,null),Li=Fi.exports,Ui={components:{DocumentComponent:Li,ResourceSidebarComponent:Bn},props:["item_id"]},$i=Ui,qi=Object(p["a"])($i,yi,Oi,!1,null,null,null),Gi=qi.exports,zi=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.document?n("div",{staticClass:"bg-white p-3"},[n("h3",{staticClass:"mt-3"},[e._v(e._s(e.document.name))]),n("p",[e._v(e._s(e.document.description))]),n("hr"),n("div",{staticClass:"pt-4",domProps:{innerHTML:e._s(e.rendered_content)}})]):e._e()},Vi=[],Wi={props:["item_id"],store:l["a"],created:function(){this.document||this.getDocuments()},computed:Object(r["a"])(Object(r["a"])({},c["a"].mapGetters(["getDocumentData"])),{},{document:function(){return this.getDocumentData(this.item_id)},rendered_content:function(){return this.document?Ri()(this.document.content,{sanitize:!0}):null}}),methods:Object(r["a"])({},c["a"].mapActions(["getDocuments"]))},Bi=Wi,Hi=Object(p["a"])(Bi,zi,Vi,!1,null,null,null),Yi=Hi.exports;i["default"].use(o["a"]);var Ji=[{name:"home",path:"/",meta:{tab:"resources"},components:{sidebar:h,main:q}},{name:"action-history",path:"/actions/history/:item_id/:item_model/:item_name",meta:{tab:"history"},props:{sidebar:!1,main:!0},components:{sidebar:h,main:H}},{name:"action-detail",path:"/actions/detail/:action_id",meta:{tab:"history"},props:{sidebar:!1,main:!0},components:{sidebar:h,main:ke}},{name:"templates",path:"/templates/:scope/",meta:{tab:"governance"},props:{sidebar:!1,main:!0},components:{sidebar:h,main:ii["a"]}},{name:"item-templates",path:"/templates/:scope/:target_id/:target_model",meta:{tab:"governance"},props:{sidebar:!1,main:!0},components:{sidebar:h,main:ii["a"]}},{name:"governance",path:"/governance",meta:{tab:"governance"},components:{sidebar:h,main:Vt}},{name:"change-leadership",path:"/governance/change-leadership",meta:{tab:"governance"},components:{sidebar:h,main:We}},{name:"group-permissions",path:"/permissions/:group_pk",meta:{tab:"permissions"},props:{sidebar:!1,main:!0},components:{sidebar:h,main:un}},{name:"user-permissions",path:"/permissions/user/:user_pk",meta:{tab:"permissions"},props:{sidebar:!1,main:!0},components:{sidebar:h,main:vn}},{name:"conditions",path:"/conditions/:conditioned_on/:dependency_scope",meta:{tab:"permissions"},props:{sidebar:!1,main:!0},components:{sidebar:h,main:Pn}},{name:"forum-detail",path:"/forums/:item_id",meta:{tab:"resources"},props:{sidebar:!1,main:!0},components:{sidebar:h,main:Kn}},{name:"post-detail",path:"/forums/:forum_id/posts/:item_id",meta:{tab:"resources"},props:{sidebar:!1,main:!0},components:{sidebar:h,main:ni}},{name:"list-detail",path:"/lists/detail/:list_id",meta:{tab:"resources"},props:{sidebar:!1,main:!0},components:{sidebar:h,main:wi}},{name:"document-detail",path:"/documents/detail/:item_id",meta:{tab:"resources"},props:{sidebar:!1,main:!0},components:{sidebar:h,main:Gi}},{name:"document-full-page",path:"/documents/detail/full/:item_id/",meta:{tab:"resources"},props:{sidebar:!1,main:!0},components:{sidebar:h,main:Yi}}],Ki=new o["a"]({routes:Ji});t["a"]=Ki},a209:function(e,t,n){"use strict";n.d(t,"e",(function(){return s})),n.d(t,"a",(function(){return a})),n.d(t,"c",(function(){return r})),n.d(t,"b",(function(){return c})),n.d(t,"d",(function(){return l}));n("a4d3"),n("e01a"),n("4160"),n("caad"),n("c975"),n("d81d"),n("b0c0"),n("07ac"),n("ac1f"),n("466d"),n("5319"),n("159b");var i=n("5530"),o=n("2f62"),s={methods:{shorten_text:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50;return"string"===typeof e&&e.length>t?e.substring(0,t)+"...":e}}},a={computed:Object(i["a"])({},o["a"].mapGetters(["role_to_options","user_pk_to_options","getUser"])),methods:{change_field:function(e){for(var t in this.configuration_fields||console.log("Error! Must set configuration_fields property."),this.configuration_fields)this.configuration_fields[t].field_name==e.field_name&&(this.configuration_fields[t].value=e.new_value)},process_initial_fields:function(e){var t=this;Array.isArray(e)||(e=Object.values(e));var n=e.map((function(e){return"RoleListField"==e.type&&e.value&&e.value.length>0&&!e.value[0].name&&(e.value=t.role_to_options(e.value)),"ActorListField"==e.type&&e.value&&e.value.length>0&&!e.value[0].name&&(e.value=t.user_pk_to_options(e.value)),e}));return n}}},r={methods:{process_description:function(e,t){var n=this,i=e.match(/\d+/g);return i?(i.forEach((function(t){var i=n.getUserName(t);e=e.replace(t,i)})),e):e},replace_pks_with_usernames:function(e){for(var t in e){var n=e[t];["AddMembers","RemoveMembers","AddGovernor","RemoveGovernor","AddOwner","RemoveOwner","AddPeopleToRole","RemovePeopleFromRole"].includes(n.change_type)&&(n.description=this.process_description(n.description))}return e}}},c={methods:{create_permission_groups:function(e){var t={};for(var n in e){var i=e[n];i.group in t?t[i.group].push(i):t[i.group]=[i]}var o=[];for(var s in t)["Leadership","Community","Permissions","Miscellaneous"].indexOf(s)>-1?o.push({section:s,permissions:t[s]}):o.unshift({section:s,permissions:t[s]});return o}}},l={data:function(){return{resources_loaded:!1}},created:function(){var e=this;this.getForums().then((function(t){e.getLists().then((function(t){e.getDocuments().then((function(t){e.resources_loaded=!0}))}))}))},computed:Object(i["a"])({},o["a"].mapState({group_name:function(e){return e.group_name},group_pk:function(e){return e.group_pk},forums:function(e){return e.forums.forums},documents:function(e){return e.documents.documents},lists:function(e){return e.simplelists.lists}})),methods:Object(i["a"])(Object(i["a"])({},o["a"].mapActions(["getForums","getLists","getDocuments"])),{},{create_target_groups:function(){var e=[];return e.push({resource_type:"Groups",items:[{name:this.group_name,pk:this.group_pk,model:"group"}]}),this.forums&&e.push({resource_type:"Forums",items:this.forums.map((function(e){return{name:e.name,pk:e.pk,model:"forum"}}))}),this.documents&&e.push({resource_type:"Documents",items:this.documents.map((function(e){return{name:e.name,pk:e.pk,model:"document"}}))}),this.lists&&e.push({resource_type:"Lists/Tables",items:this.lists.map((function(e){return{name:e.name,pk:e.pk,model:"simplelist"}}))}),e}})}},a669:function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[n("h4",{staticClass:"mb-3"},[e._v(e._s(e.capitalize(e.scope))+" Templates")]),n("error-component",{attrs:{message:e.error_message}}),e.selected_template?n("span",[e.create_group||e.user_permissions.apply_template?n("span",[n("template-info-component",{attrs:{template:e.selected_template,create_group:e.create_group,display_select:!1}}),e.configuration_fields.length>0?n("div",{staticClass:"my-4"},[n("h5",{staticClass:"mt-3 font-weight-bold"},[e._v("Configure fields for template: "+e._s(this.selected_template.name)+".")]),e._l(e.configuration_fields,(function(t){return n("field-component",{key:t.field_name,attrs:{initial_field:t},on:{"field-changed":e.change_field}})}))],2):n("div",{staticClass:"my-4"},[n("b",[e._v("There are no fields to configure.")])]),n("action-response-component",{attrs:{response:e.apply_template_response}}),e.create_group?e._e():n("b-button",{staticClass:"my-2",attrs:{id:"submit_apply_template",variant:"outline-dark",size:"sm"},on:{click:function(t){return e.apply_template(e.selected_template)}}},[e._v(" Apply template")])],1):n("span",[e._v("You do not have permisson to apply templates to this "+e._s(e.scope)+".")])]):n("span",[n("b-card-group",{attrs:{deck:""}},e._l(e.scope_templates,(function(t){return n("template-info-component",{key:t.pk,attrs:{template:t,create_group:e.create_group,display_select:!0},on:{"template-selected":e.select_template}})})),1)],1)],1)},o=[],s=n("5530"),a=n("2f62"),r=n("4360"),c=n("4ae4"),l=n("da66"),d=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-card",{key:e.template.pk,staticClass:"w-50",staticStyle:{display:"inline-block"},attrs:{title:e.template.name,id:e.slugify_name(e.template.name)}},[n("b-card-text",[e._v(e._s(e.template.description)+" "),n("div",[n("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle",value:"template_actions_"+e.slugify_name(e.template.name),expression:"'template_actions_' + slugify_name(template.name)"}],staticClass:"btn-sm mt-3"},[e._v(" Template Details")]),n("b-collapse",{staticClass:"mt-3",attrs:{id:"template_actions_"+e.slugify_name(e.template.name)}},[n("b-card",[n("small",[e.create_group?e._e():n("span",[e._v(e._s(e.template.action_breakdown.foundational))]),n("ol",{staticClass:"mt-3"},e._l(e.template.action_breakdown.actions,(function(t){return n("li",{key:t.pk},[e._v(e._s(t))])})),0)])])],1)],1)]),e.display_select?n("b-button",{staticClass:"my-2",attrs:{id:"select_template_"+e.slugify_name(e.template.name),variant:"outline-dark"},on:{click:function(t){return e.$emit("template-selected",e.template)}}},[e._v("select template")]):e._e()],1)},_=[],u=(n("ac1f"),n("5319"),{store:r["a"],props:["create_group","template","display_select"],data:function(){return{}},methods:{slugify_name:function(e){return e.toLowerCase().replace(/ /g,"_")}}}),m=u,p=n("2877"),f=Object(p["a"])(m,d,_,!1,null,null,null),h=f.exports,b=n("a209"),v=n("c33f"),g={store:r["a"],components:{ErrorComponent:c["default"],FieldComponent:l["a"],TemplateInfoComponent:h,ActionResponseComponent:v["default"]},mixins:[b["a"]],props:["scope","create_group","target_id","target_model"],data:function(){return{selected_template:null,browse_templates:!1,configuration_fields:[],error_message:null,apply_template_response:null}},created:function(){var e=this;this.getTemplatesForScope({scope:this.scope});var t=null,n=null;t=this.target_model?this.target_model:"group",n=this.target_id?this.target_id:r["a"].state.group_pk;var i=t+"_"+n;this.create_group||this.checkPermissions({permissions:{apply_template:{alt_target:i}}}).catch((function(t){e.error_message=t,console.log(t)}))},computed:Object(s["a"])(Object(s["a"])(Object(s["a"])({},a["a"].mapGetters(["scopeTemplates"])),a["a"].mapState({user_permissions:function(e){return e.permissions.current_user_permissions}})),{},{scope_templates:function(){return this.scopeTemplates(this.scope)}}),methods:Object(s["a"])(Object(s["a"])({},a["a"].mapActions(["getTemplatesForScope","applyTemplate","checkPermissions"])),{},{capitalize:function(e){return e[0].toUpperCase()+e.substring(1)},clearState:function(){this.selected_template=null,this.configuration_fields=[],this.fill_configuration_fields=!1,this.browse_templates=!1,this.error_message=""},select_template:function(e){e.supplied_fields?(this.selected_template=e,this.configuration_fields=e.supplied_fields):this.selected_template=e},validate_template:function(){for(var e in this.configuration_fields)if(this.configuration_fields[e]["required"]&&!this.configuration_fields[e]["value"])return this.error_message="Required field "+this.configuration_fields[e]["field_name"]+" needs a value",!1;return!0},apply_template:function(){var e=this;this.validate_template()&&this.applyTemplate({target_model:this.target_model,target_pk:this.target_id,supplied_fields:this.configuration_fields,template_model_pk:this.selected_template.pk}).then((function(t){e.apply_template_response=t}))}})},k=g,w=Object(p["a"])(k,i,o,!1,null,null,null);t["a"]=w.exports},a7dc:function(e,t,n){},bc0a:function(e,t,n){},c322:function(e,t,n){"use strict";n("2967")},c33f:function(e,t,n){"use strict";var i=n("4413"),o=n("9c8e"),s=(n("015a"),n("2877")),a=Object(s["a"])(o["default"],i["a"],i["b"],!1,null,"36e29fda",null);t["default"]=a.exports},c552:function(e,t,n){"use strict";n("ee66")},cca1:function(e,t,n){"use strict";n("41c7")},d2c4:function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"navbarVueApp"}},[n("b-navbar",{attrs:{toggleable:"lg",type:"dark",variant:"info"}},[n("b-navbar-brand",{attrs:{href:"/"}},[e._v("Kybern")]),n("b-navbar-toggle",{attrs:{target:"nav-collapse"}}),n("b-collapse",{attrs:{id:"nav-collapse","is-nav":""}},[n("b-navbar-nav",[n("b-nav-item",{attrs:{href:"/?hide_info=true"}},[e._v("Groups")]),n("b-nav-item",{attrs:{href:"/template-library"}},[e._v("Templates")])],1),n("b-navbar-nav",{staticClass:"ml-auto"},[e.signed_in?n("b-nav-item-dropdown",{attrs:{right:""},scopedSlots:e._u([{key:"button-content",fn:function(){return[n("em",[e._v(e._s(e.user_name))])]},proxy:!0}],null,!1,4202963060)},[n("b-dropdown-item",{attrs:{href:"/profile"}},[e._v("Your Profile")]),n("b-dropdown-item",{attrs:{href:"/logout"}},[e._v("Sign Out")])],1):n("b-nav-item",{attrs:{href:"/login"}},[e._v("Sign In")])],1)],1)],1)],1)},o=[],s={props:["user_name","signed_in"]},a=s,r=n("2877"),c=Object(r["a"])(a,i,o,!1,null,null,null);t["a"]=c.exports},d8c3:function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var i=n("2b0e"),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[n("navbar-component",{attrs:{user_name:e.user_name,signed_in:e.signed_in}}),n("b-container",{attrs:{fluid:""}},[n("b-row",{staticClass:"bg-white"},[n("b-col",[n("router-view",{attrs:{name:"sidebar"}})],1)],1),n("b-row",[n("b-col",{staticClass:"p-4",attrs:{cols:"12"}},[n("router-view",{attrs:{name:"main"}})],1)],1),n("router-view",{attrs:{name:"modal"}})],1)],1)},s=[],a=n("5530"),r=n("4360"),c=n("d2c4"),l=JSON.parse(window.__INITIAL_STATE__),d={components:{NavbarComponent:c["a"]},store:r["a"],data:function(){return{user_name:l.user_name,signed_in:l.is_authenticated}},methods:Object(a["a"])({},Vuex.mapActions(["initialize_group_data","getPermissionData","getGovernanceData","getForums"])),created:function(){this.initialize_group_data({urls:l.urls,group_pk:l.group_pk,group_name:l.group_name,user_pk:l.user_pk,group_description:l.group_description,user_name:l.user_name}),this.getPermissionData(),this.getGovernanceData(),this.getForums()}},_=d,u=(n("74b7"),n("2877")),m=Object(u["a"])(_,o,s,!1,null,null,null),p=m.exports,f=n("a18c"),h=n("5f5b"),b=n("b1e0");i["default"].use(h["a"]),i["default"].use(b["a"]),i["default"].config.productionTip=!1,new i["default"]({router:f["a"],store:r["a"],render:function(e){return e(p)}}).$mount("#kybernApp")},da66:function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"mb-2"},["CharField"==e.field.type||"PermissionedModelField"==e.field.type?n("div",[n("b-input-group",{staticClass:"mb-2 mr-sm-2 mb-sm-0",attrs:{prepend:e.label(e.field)}},[n("b-form-input",{attrs:{id:e.field.field_name,name:e.field.field_name,"aria-label":e.field.field_name,"aria-describedby":e.field.field_name+"_label",required:e.field.required},model:{value:e.field.value,callback:function(t){e.$set(e.field,"value",t)},expression:"field.value"}})],1)],1):e._e(),"BooleanField"==e.field.type?n("span",[n("b-form-checkbox",{staticClass:"ml-3",attrs:{name:e.field.field_name,value:"true","unchecked-value":"false",variant:"info",switch:""},model:{value:e.field.value,callback:function(t){e.$set(e.field,"value",t)},expression:"field.value"}},[e._v(e._s(e.label(e.field)))])],1):e._e(),"IntegerField"==e.field.type?n("div",[n("b-input-group",{staticClass:"mb-2 mr-sm-2 mb-sm-0",attrs:{prepend:e.label(e.field)}},[n("b-form-input",{attrs:{type:"number",id:e.field.field_name,name:e.field.field_name,"aria-label":e.field.field_name,"aria-describedby":e.field.field_name+"_label",required:e.field.required},model:{value:e.field.value,callback:function(t){e.$set(e.field,"value",t)},expression:"field.value"}})],1)],1):e._e(),"RoleField"==e.field.type||"RoleListField"==e.field.type?n("div",{staticClass:"permissionrolefield"},[n("b-input-group",{attrs:{prepend:e.label(e.field)}},[n("vue-multiselect",{staticClass:"w-50",attrs:{options:e.rolesAsOptions,"allow-empty":!0,multiple:e.select_field_is_multiple(e.field),"close-on-select":!0,placeholder:"Select roles",label:"name","track-by":"name"},model:{value:e.field.value,callback:function(t){e.$set(e.field,"value",t)},expression:"field.value"}})],1)],1):e._e(),"ActorField"==e.field.type||"ActorListField"==e.field.type?n("div",{staticClass:"permissionactorfield"},[n("b-input-group",{attrs:{prepend:e.label(e.field)}},[n("vue-multiselect",{staticClass:"w-50",attrs:{options:e.groupMembersAsOptions,"allow-empty":!0,multiple:e.select_field_is_multiple(e.field),"close-on-select":!0,placeholder:"Select actors",label:"name","track-by":"pk"},model:{value:e.field.value,callback:function(t){e.$set(e.field,"value",t)},expression:"field.value"}})],1)],1):e._e()])},o=[],s=(n("b0c0"),n("5530")),a=n("2f62"),r=n("4360"),c=n("8e5f"),l=n.n(c),d={store:r["a"],components:{"vue-multiselect":l.a},props:["initial_field"],data:function(){return{field:null}},created:function(){this.field=this.initial_field},watch:{field:function(e){this.$emit("field-value-change",{field_name:this.field.name,new_value:this.field.value})}},computed:Object(s["a"])({},a["a"].mapGetters(["rolesAsOptions","groupMembersAsOptions"])),methods:{select_field_is_multiple:function(e){return!e.other_data||!e.other_data.multiple||e["other_data"]["multiple"]},label:function(e){return e.display?e.display:e.label}}},_=d,u=n("2877"),m=Object(u["a"])(_,i,o,!1,null,null,null);t["a"]=m.exports},dd34:function(e,t,n){"use strict";n("50f3")},df93:function(e,t,n){"use strict";n("8bdd")},ed2a:function(e,t,n){"use strict";n("050c")},ee66:function(e,t,n){},f3f4:function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[e.button_text?n("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal",value:e.modal_id,expression:"modal_id"}],class:e.classes,attrs:{id:e.button_id,variant:e.variant}},[e._v(" "+e._s(e.button_text))]):n("b-icon-pencil",{directives:[{name:"b-modal",rawName:"v-b-modal",value:e.modal_id,expression:"modal_id"},{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"mr-2",attrs:{id:e.button_id,title:"edit "+e.item_model}}),n("b-modal",{attrs:{id:e.modal_id,title:e.title_string,size:"lg","hide-footer":""},on:{hide:e.refresh}},[e._l(e.configuration_fields,(function(t){return n("field-component",{key:t.field_name,attrs:{initial_field:t},on:{"field-changed":e.change_field}})})),n("take-action-component",{attrs:{response:e.response,inline:"true",verb:e.verb,alt_target:e.alt_target},on:{"take-action":e.takeAction}})],2)],1)},o=[],s=(n("fb6a"),n("5530")),a=n("2f62"),r=n("4360"),c=n("a209"),l=n("da66"),d=n("8cc1"),_={document:[{field_name:"name",label:"Name",type:"CharField",required:!1,value:null},{field_name:"description",label:"Description",type:"CharField",required:!1,value:null}],forum:[{field_name:"name",label:"Name",type:"CharField",required:!1,value:null},{field_name:"description",label:"Description",type:"CharField",required:!1,value:null}],post:[{field_name:"title",label:"Title",type:"CharField",required:!1,value:null},{field_name:"content",label:"Content",type:"CharField",required:!1,value:null}],comment:[{field_name:"text",label:"Content",type:"CharField",required:!1,value:null}],list:[{field_name:"name",label:"Name",type:"CharField",required:!1,value:null},{field_name:"description",label:"Description",type:"CharField",required:!1,value:null}],group:[{field_name:"name",label:"Name",type:"CharField",required:!1,value:null},{field_name:"description",label:"Description",type:"CharField",required:!1,value:null}]},u={props:["item_id","item_model","button_text","supplied_variant","supplied_classes","supplied_params","id_add","alt_target"],components:{TakeActionComponent:d["a"],FieldComponent:l["a"]},mixins:[c["a"]],store:r["a"],data:function(){return{item_instance:null,response:null,configuration_fields:[]}},created:function(){if(this.configuration_fields=JSON.parse(JSON.stringify(_[this.item_model])),this.item_id){var e="get"+this.capitalize(this.item_model)+"Data";this.item_instance=this[e](this.item_id)}},watch:{item_instance:function(e){e&&this.initialize_configuration_fields()}},computed:Object(s["a"])(Object(s["a"])({},a["a"].mapGetters(["getDocumentData","getForumData","getPostData","getCommentData","getListData","getGroupData"])),{},{mode:function(){return this.item_id?"edit":"add"},to_add:function(){return this.id_add?this.id_add:"default"},id_preface:function(){return this.mode+"_"+this.item_model+"_"+this.to_add},button_id:function(){return this.id_preface+"_button"},modal_id:function(){return this.id_preface+"_modal"},submit_button_id:function(){return this.id_preface+"_submit_button"},title_string:function(){return this.capitalize(this.mode)+" "+this.item_model},variant:function(){return this.supplied_variant?this.supplied_variant:"outline-secondary"},classes:function(){return this.supplied_classes?this.supplied_classes:"btn-sm mr-2"},verb:function(){return this.mode+" "+this.item_model}}),methods:Object(s["a"])(Object(s["a"])({},a["a"].mapActions(["addDocument","editDocument","addForum","editForum","addPost","editPost","addComment","editComment","addList","editList","editGroup"])),{},{capitalize:function(e){return e.charAt(0).toUpperCase()+e.slice(1)},initialize_configuration_fields:function(){if(this.item_instance)for(var e in this.configuration_fields){var t=this.configuration_fields[e];t["value"]=this.item_instance[t["field_name"]]}},get_params:function(e){var t={extra_data:e};for(var n in this.item_id&&(t["pk"]=this.item_id),this.supplied_params&&(t=Object.assign({},t,this.supplied_params)),this.configuration_fields){var i=this.configuration_fields[n];i["value"]&&(t[i["field_name"]]=i["value"])}return t},takeAction:function(e){var t=this,n=this.mode+this.capitalize(this.item_model);this[n](this.get_params(e)).then((function(e){t.response=e}))},refresh:function(){this.response=null}})},m=u,p=n("2877"),f=Object(p["a"])(m,i,o,!1,null,null,null);t["a"]=f.exports},f4bc:function(e,t,n){},f56d:function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-modal",{attrs:{id:e.modal_id,title:e.modal_title,"body-bg-variant":"light",size:"lg"},on:{show:e.refresh},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[n("take-action-component",{staticClass:"mr-3",attrs:{response:e.response,verb:"update",action_name:e.action_name,alt_target:e.alt_target,inline:!0},on:{"take-action":e.save_changes}})]},proxy:!0}])},[n("span",{staticClass:"big-text"},[e._v("1. Set Permission Scope")]),e._v(" "),n("b-icon-info-circle",{staticClass:"ml-2"}),e._v(" Which action are you proposing to allow, and what does it affect? "),n("b-row",{staticClass:"mt-2"},[n("b-col",[e._v("A. Permission Target "),n("vue-multiselect",{attrs:{options:e.target_options_to_use,"allow-empty":!0,"close-on-select":!0,placeholder:"Choose Target",label:"name","track-by":"value","max-height":200,"group-values":"items","group-label":"resource_type",name:"target_select"},model:{value:e.target_selected,callback:function(t){e.target_selected=t},expression:"target_selected"}})],1),n("b-col",[e._v("B. Permission Action "),n("vue-multiselect",{attrs:{options:e.permission_options_to_use,"allow-empty":!0,"close-on-select":!0,placeholder:"Choose Action",label:"text","track-by":"value","max-height":200,name:"permission_select","group-values":"permissions","group-label":"section"},model:{value:e.permission_selected,callback:function(t){e.permission_selected=t},expression:"permission_selected"}})],1)],1),n("hr",{staticClass:"my-4"}),e.target_selected&&e.permission_selected?n("span",[n("span",{staticClass:"big-text"},[e._v("2. Set Permission Audience")]),e._v(" "),n("b-icon-info-circle",{staticClass:"ml-2"}),e._v(" Who gets this permission, and under what conditions (if any)? "),e._l(e.audiences,(function(t){return n("audience-editor",{key:t.ref,ref:t.ref,refInFor:!0,attrs:{audience:t,target_selected:e.target_selected,permission_selected:e.permission_selected},on:{discard:e.discard}})})),n("b-button",{staticClass:"my-2 btn-sm",attrs:{id:"add_audience",variant:"outline-info"},on:{click:e.add_audience}},[e._v(" add audience")])],2):e._e()],1)},o=[],s=(n("c740"),n("4160"),n("caad"),n("c975"),n("a434"),n("b0c0"),n("4fad"),n("ac1f"),n("2532"),n("5319"),n("159b"),n("3835")),a=n("5530"),r=n("2b0e"),c=n("2f62"),l=n("4360"),d=n("8e5f"),_=n.n(d),u=n("a209"),m=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-row",{staticClass:"mt-2 bg-white m-2 p-2"},[n("b-col",[e._v("Audience "+e._s(e.audience.ref)+" "),n("vue-multiselect",{staticClass:"mt-2",attrs:{multiple:!0,options:e.rolesAsOptions,"allow-empty":!0,"close-on-select":!0,placeholder:"Select roles",label:"name","track-by":"name",name:"permission_role_select"},model:{value:e.roles_selected,callback:function(t){e.roles_selected=t},expression:"roles_selected"}}),n("vue-multiselect",{staticClass:"my-2",attrs:{multiple:!0,options:e.groupMembersAsOptions,"allow-empty":!0,"close-on-select":!0,placeholder:"Select actors",label:"name","track-by":"pk",name:"permission_actor_select"},model:{value:e.actors_selected,callback:function(t){e.actors_selected=t},expression:"actors_selected"}}),n("b-form-checkbox",{attrs:{name:"anyone-button",switch:""},model:{value:e.anyone,callback:function(t){e.anyone=t},expression:"anyone"}},[e._v(" Anyone can take this action "),n("b-icon-info-circle-fill",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"ml-1",attrs:{title:"All Kybern users will be able to take the action. This overrides actors and roles selected above."}})],1)],1),n("b-col",[e._v("Condition(s) (Optional) "),n("b-icon-x",{staticClass:"float-right",on:{click:e.discard_audience}}),n("condition-editor",{ref:"audience_conditions",staticClass:"my-2",attrs:{conditioned_on:"permission",initial_conditions:e.initial_conditions}})],1)],1)},p=[],f=(n("d81d"),n("07ac"),n("3a08")),h={props:["audience","target_selected","permission_selected"],components:{"vue-multiselect":_.a,ConditionEditor:f["a"]},mixins:[],store:l["a"],data:function(){return{anyone:!1,roles_selected:[],actors_selected:[]}},created:function(){this.audience&&(this.anyone=this.audience.initial_anyone,this.roles_selected=this.initial_roles,this.actors_selected=this.initial_actors)},provide:function(){var e=this,t={};return Object.defineProperty(t,"dependency_scope",{enumerable:!1,get:function(){return e.target_selected.model}}),Object.defineProperty(t,"permission_option",{enumerable:!1,get:function(){return e.permission_selected}}),{dependent_field_info:t}},computed:Object(a["a"])(Object(a["a"])({},c["a"].mapGetters(["rolesAsOptions","groupMembersAsOptions","role_to_options","user_pk_to_options"])),{},{initial_roles:function(){return this.audience?this.role_to_options(this.audience.initial_roles):[]},initial_actors:function(){return this.audience?this.user_pk_to_options(this.audience.initial_actors):[]},pk:function(){return this.audience?this.audience.pk:null},initial_conditions:function(){return this.audience?this.audience.initial_conditions:null},removed_conditions:function(){return this.$refs.audience_conditions.removed_condition_element_ids},condition_data:function(){return Object.values(this.$refs.audience_conditions.conditions_set).map((function(e){return{condition_type:e.name,combined_condition_data:e.fields,element_id:e.element_id,changed:e.changed}}))},changed_data:function(){var e=[];this.anyone!=this.audience.initial_anyone&&e.push("anyone");var t=this.roles_selected;t.sort();var n=this.initial_roles;n.sort(),JSON.stringify(t)!=JSON.stringify(n)&&e.push("roles_selected");var i=this.actors_selected;i.sort();var o=this.initial_actors;return o.sort(),JSON.stringify(i)!=JSON.stringify(o)&&e.push("actors_selected"),e}}),methods:{discard_audience:function(){this.$emit("discard",{audience:this.audience})}}},b=h,v=n("2877"),g=Object(v["a"])(b,m,p,!1,null,null,null),k=g.exports,w=n("8cc1"),y={props:["mode","edit_target","edit_change","default_selection","role_to_edit"],components:{"vue-multiselect":_.a,AudienceEditor:k,TakeActionComponent:w["a"]},mixins:[u["a"],u["b"],u["d"]],store:l["a"],data:function(){return{target_selected:null,target_options_to_use:[],permission_selected:"",audiences:[],audience_index:"ABCDEFGHIJKLMNOPQRSTUVWXYZ",initial_audience_pks:[],response:[],delete_response:null}},watch:{resources_loaded:function(e){e&&(this.target_options_to_use=this.create_target_groups())}},computed:Object(a["a"])(Object(a["a"])({},c["a"].mapState({permission_options:function(e){return e.permissions.permission_options},permissions:function(e){return e.permissions.permissions}})),{},{modal_id:function(){return this.edit_target||this.edit_change?"add"==this.mode?"add_permission_modal_"+this.edit_target+"_"+this.edit_change:"permission_modal_"+this.edit_target+"_"+this.edit_change:"add_permission_modal"},modal_title:function(){return"add"==this.mode?"Add permission":"Edit permission"},action_name:function(){return"add"==this.mode?"add_permission":"edit_permission"},permission_options_to_use:function(){return this.target_selected?this.create_permission_groups(this.permission_options[this.target_selected.model]):[]},alt_target:function(){return this.target_selected&&"group"!=this.target_selected.model?this.target_selected.model+"_"+this.target_selected.pk:null}}),methods:Object(a["a"])(Object(a["a"])({},c["a"].mapActions(["addPermission","editPermission","removePermission","addConditionToPermission","editConditionOnPermission","removeConditionFromPermission"])),{},{refresh:function(){this.edit_target&&(this.target_selected=this.find_matching_target_option()),this.edit_change&&(this.permission_selected=this.find_matching_permission_option()),0==this.audiences.length&&(this.audiences=this.get_initial_audiences())},find_matching_target_option:function(){var e=this,t=null;return this.target_options_to_use&&this.edit_target&&this.target_options_to_use.forEach((function(n){n.items.forEach((function(n){var i="group"!=n.model?n.model+" '"+n.name+"'":"community";i.toLowerCase()==e.edit_target.toLowerCase()&&(t=n)}))})),t},find_matching_permission_option:function(){var e=this,t=null;return this.permission_options_to_use&&this.edit_change&&this.permission_options_to_use.forEach((function(n){n.permissions.forEach((function(n){n.text.toLowerCase()==e.edit_change.toLowerCase()&&(t=n)}))})),t},add_audience:function(){var e=this.audience_index[this.audiences.length];this.audiences.push({ref:e,pk:null,initial_roles:[],initial_actors:[],initial_anyone:!1,initial_conditions:[]})},discard:function(e){var t=this.audiences.indexOf(e.audience);t>-1&&(this.audience_index=this.audience_index.replace(e.audience,""),this.audiences.splice(t,1))},reformat_permission_to_audience:function(e,t){return{initial_roles:e.roles,initial_actors:e.actors,initial_conditions:e.condition,initial_anyone:e.anyone,pk:e.pk,ref:t}},get_initial_audiences:function(){var e=[];if("edit"==this.mode)for(var t in this.permissions){var n=this.permissions[t];if(n.target==this.edit_target&&n.change_name==this.edit_change){var i=this.audience_index[e.length];e.push(this.reformat_permission_to_audience(n,i)),this.initial_audience_pks.push(n.pk)}}return e},replace_audience_using_ref:function(e,t){var n=this.audiences.findIndex((function(t){return t.ref==e})),i=this.reformat_permission_to_audience(t,e);this.audiences.splice(n,1,i)},add_new_permission:function(e,t,n){var i=this,o={alt_target:this.alt_target,item_id:this.target_selected.pk,item_model:this.target_selected.model,change_type:this.permission_selected.value,roles:e.roles_selected,actors:e.actors_selected,condition_data:e.condition_data,extra_data:t};this.addPermission(o).then((function(e){i.response.push(e),"implemented"==e.data.action_status&&(i.initial_audience_pks=e.data.created_instance.pk,i.replace_audience_using_ref(n,e.data.created_instance))}))},edit_existing_permission:function(e,t){var n=this,i={alt_target:"permissionsitem_"+e.pk,pk:e.pk,extra_data:t};e.changed_data.includes("anyone")&&(i["anyone"]=e.anyone),e.changed_data.includes("actors_selected")&&(i["permission_actors"]=e.actors_selected),e.changed_data.includes("roles_selected")&&(i["permission_roles"]=e.roles_selected),this.editPermission(i).then((function(e){n.response.push(e)}))},delete_permission:function(e,t){var n=this,i={item_id:e,item_model:"permissionsitem",extra_data:t,item:this.alt_target};this.removePermission(i).then((function(e){n.response.push(e)}))},add_new_condition:function(e,t,n,i){var o=this,s={alt_target:"permissionsitem_"+e.pk,permission_pk:e.pk,extra_data:n,condition_type:t.condition_type,combined_condition_data:t.combined_condition_data};this.addConditionToPermission(s).then((function(e){o.response.push(e),"implemented"==e.data.action_status&&o.audiences.forEach((function(t){console.log(t),t.ref==i&&r["default"].set(t,"initial_conditions",e.data.condition_data)}))}))},edit_existing_condition:function(e,t,n){var i=this,o={alt_target:"permissionsitem_"+e.pk,permission_pk:e.pk,extra_data:n,condition_type:t.condition_type,combined_condition_data:t.combined_condition_data,element_id:t.element_id};this.editConditionOnPermission(o).then((function(e){i.response.push(e)}))},remove_condition:function(e,t,n){var i=this,o={alt_target:"permissionsitem_"+e.pk,permission_pk:e.pk,extra_data:n,element_id:t};this.removeConditionFromPermission(o).then((function(e){i.response.push(e)}))},save_changes:function(e){for(var t=this,n=[],i=function(){var i=Object(s["a"])(a[o],2),r=i[0],c=i[1];if(!c[0])return"continue";if(!c[0].pk)return t.add_new_permission(c[0],e,r),"break";for(var l in n.push(c[0].pk),c[0].changed_data.length>0&&t.edit_existing_permission(c[0],e),c[0].condition_data)c[0].condition_data[l]["element_id"]||t.add_new_condition(c[0],c[0].condition_data[l],e,r),c[0].condition_data[l].changed&&t.edit_existing_condition(c[0],c[0].condition_data[l],e);c[0].removed_conditions&&c[0].removed_conditions.forEach((function(n){t.remove_condition(c[0],n,e)}))},o=0,a=Object.entries(this.$refs);o<a.length;o++){var r=i();if("continue"!==r&&"break"===r)break}for(var c in this.initial_audience_pks){var l=this.initial_audience_pks[c];n.includes(l)||this.delete_permission(l,e)}}})},O=y,C=(n("ed2a"),Object(v["a"])(O,i,o,!1,null,"2d30f1f0",null));t["a"]=C.exports},f5f7:function(e,t,n){},f797:function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"my-3"},[e.can_be_dependency_field(e.field)?e._e():n("span",[n("field-component",{attrs:{initial_field:e.field},on:{"field-changed":e.change_field}})],1),e.can_be_dependency_field(e.field)&&!e.is_dependency_field(e.field.value)?n("span",[n("b-container",[n("b-row",[n("b-col",{attrs:{cols:"8"}},[n("field-component",{attrs:{initial_field:e.field},on:{"field-changed":e.change_field}})],1),n("b-col",[n("dependent-field-manager-component",{attrs:{field:e.field},on:{"field-changed":e.change_field}})],1)],1)],1)],1):e._e(),e.can_be_dependency_field(e.field)&&e.is_dependency_field(e.field.value)?n("span",[n("dependent-field-manager-component",{attrs:{field:e.field},on:{"field-changed":e.change_field}})],1):e._e()])},o=[],s=n("4360"),a=n("da66"),r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[e.model_selected?n("span",[e.field.display?n("span",[e._v(e._s(e.field.display))]):e._e(),e.field.label?n("span",[e._v(e._s(e.field.label))]):e._e(),n("b-button",{staticClass:"btn-sm btn-info ml-2"},[n("small",[n("b",[e._v("set as: "+e._s(e.model_selected)),e.field_selected?n("span",[e._v("'s "+e._s(e.field_selected))]):e._e()])]),n("span",{directives:[{name:"b-modal",rawName:"v-b-modal",value:e.dependent_field_modal_id,expression:"dependent_field_modal_id"}],staticClass:"badge badge-info ml-1 edit-dependent-field"},[e._v("🖉")]),n("span",{staticClass:"badge badge-info ml-1 delete-dependent-field",on:{click:function(t){return e.remove_dependent_field()}}},[e._v("🗑")])])],1):n("span",[n("span",{directives:[{name:"b-modal",rawName:"v-b-modal",value:e.dependent_field_modal_id,expression:"dependent_field_modal_id"}],staticClass:"badge badge-info add-dependent-field"},[e._v(" add dependency")])]),n("dependent-field-component",{attrs:{modal_id:e.dependent_field_modal_id,field:e.field,initial_model_selected:e.model_selected,initial_field_selected:e.field_selected},on:{"change-dependent-field":e.change_dependent_field}})],1)},c=[],l=(n("ac1f"),n("5319"),n("1276"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-modal",{attrs:{size:"lg",title:"Configure your dependent field","hide-footer":"",id:e.modal_id}},[e._v(" Instead of providing a value now, you can make the value of this field depend on something related, for instance the action which is being evaluated by the permission/condition. "),n("hr"),e._v(" Choose object to depend on: "),n("span",{staticClass:"my-3",attrs:{id:"model_options"}},e._l(e.model_options,(function(t){return n("b-button",{key:t,staticClass:"mr-2",attrs:{id:"depend_on_model_"+t,variant:e.button_variant(t)},on:{click:function(n){e.model_selected=t}}},[e._v(e._s(t))])})),1),e.model_selected?n("div",{staticClass:"block my-2",attrs:{id:"model_config"}},[e._v(" Select field on "+e._s(e.model_selected)+" (leave blank to use "+e._s(e.model_selected)+" itself):"),n("br"),n("b-form-select",{staticClass:"dependent-field-select",attrs:{options:e.field_options,name:"dependent-field-select"},model:{value:e.field_selected,callback:function(t){e.field_selected=t},expression:"field_selected"}})],1):e._e(),n("error-component",{attrs:{message:e.error_message}}),n("hr"),n("div",{staticClass:"block mt-3"},[n("b-button",{attrs:{id:"save-dependent-field"},on:{click:function(t){return e.change_dependent_field()}}},[e._v("save "),e.model_selected?n("span",[e._v(" '"+e._s(e.model_selected)),e.field_selected?n("span",[e._v(" "+e._s(e.field_selected))]):e._e(),e._v("'")]):e._e()]),n("b-button",{on:{click:function(t){return e.remove_dependent_field()}}},[e._v("remove dependent field")])],1)],1)}),d=[],_=(n("4160"),n("c975"),n("159b"),n("5530")),u=n("2f62"),m=n("4ae4"),p={props:["modal_id","field","initial_model_selected","initial_field_selected"],components:{ErrorComponent:m["default"]},store:s["a"],data:function(){return{model_selected:null,field_selected:null,field_options:[],permission:null,error_message:null,dependency_scope:null}},inject:["dependent_field_info"],created:function(){this.model_selected=this.initial_model_selected,this.field_selected=this.initial_field_selected,this.dependent_field_info.dependency_scope&&(this.dependency_scope=this.dependent_field_info.dependency_scope),this.dependent_field_info.permission_option&&(this.permission=this.dependent_field_info.permission_option)},watch:{initial_model_selected:function(e){this.model_selected=e},initial_field_selected:function(e){this.field_selected=e},model_selected:function(e){this.field_options=this.get_field_options(e),this.field_selected=null},dependent_field_info:function(e){e.dependency_scope&&(this.dependency_scope=e.dependency_scope),e.permission_option&&(this.permission=e.permission_option)}},computed:Object(_["a"])(Object(_["a"])({},u["a"].mapState({model_and_field_options_unprocessed:function(e){return e.permissions.dependent_field_options}})),{},{model_options:function(){var e=this,t=[];return this.permission.dependent_field_options.forEach((function(n){t.push(e.replace_generic_models(n))})),t},field_option_selected:function(){var e=this,t=null;return this.field_options.forEach((function(n){n.text==e.field_selected&&(t=n)})),t}}),methods:{get_field_options:function(e){var t=this,n=this.model_and_field_options_unprocessed[e],i=[];return"action"==e&&this.permission.change_field_options.forEach((function(e){return n.push(e)})),n.forEach((function(e){t.match_field_types(t.field.type,e.type)&&i.push(e)})),i},match_field_types:function(e,t){var n=["ActorListField","ActorPKField","ActorField"],i=["RoleListField","RoleField"];return n.indexOf(e)>-1&&n.indexOf(t)>-1||(i.indexOf(e)>-1&&i.indexOf(t)>-1||e==t)},replace_generic_models:function(e){var t={forum:{commented_object:"post",post:"commented_object"}};return this.dependency_scope in t&&e in t[this.dependency_scope]?t[this.dependency_scope][e]:e},get_transform_string:function(){if(!this.field_selected)return"";if("ActorListField"==this.field.type){if("ActorPKField"==this.field_option_selected.type)return"||to_list";if("ActorField"==this.field_option_selected.type)return"||to_pk_in_list"}if("ActorPKField"==this.field.type){if("ActorListField"==this.field_option_selected.type)return"||from_list";if("ActorField"==this.field_option_selected.type)return"||to_pk"}return"RoleListField"==this.field.type&&"RoleField"==this.field_option_selected.type?"||to_list":"RoleField"==this.field.type&&"RoleListField"==this.field_option_selected.type?"||from_list":void 0},is_change_field:function(){var e=this,t=!1;return this.permission.change_field_options.forEach((function(n){n.text==e.field_selected&&(t=!0)})),t},button_variant:function(e){return e==this.model_selected?"info":"secondary"},validate_selection:function(){return!(!this.field_selected&&"ObjectField"!=this.field.type)||(this.error_message="This field cannot be set to an object. You must chose a field on an object.",!1)},change_dependent_field:function(){this.validate_selection()&&(this.$emit("change-dependent-field",{model_selected:this.model_selected,field_selected:this.field_option_selected.text,transform_string:this.get_transform_string(),field_is_change_field:this.is_change_field()}),this.$bvModal.hide(this.modal_id))},remove_dependent_field:function(){this.$emit("change-dependent-field",{model_selected:null}),this.$bvModal.hide(this.modal_id)}}},f=p,h=n("2877"),b=Object(h["a"])(f,l,d,!1,null,null,null),v=b.exports,g={components:{DependentFieldComponent:v},store:s["a"],props:["field"],data:function(){return{model_selected:null,field_selected:null}},created:function(){this.parse_string(this.field.value)},watch:{field:function(e){this.parse_string(e.value)}},computed:{dependent_field_modal_id:function(){var e="configure_dependent_field_"+Math.random();return e.replace(".","")}},methods:{change_dependent_field:function(e){this.model_selected=e.model_selected,this.field_selected=e.field_selected;var t=this.reform_string(e.transform_string,e.field_is_change_field);this.$emit("field-changed",{field_name:this.field.field_name,new_value:t})},parse_string:function(e){if(e&&"string"==typeof e){var t=e.substring(2,e.length-2);t=t.split("||")[0];var n=t.split(".");"context"==n[0]?(this.model_selected=n[1],this.field_selected=null,n.length>=3&&("action"==n[1]&&"change"==n[2]?this.field_selected=n[3]:this.field_selected=n[2])):console.log("problem with "+e)}},reform_string:function(e,t){if(this.model_selected){var n="{{context."+this.model_selected.toLowerCase();return this.field_selected&&(t&&(n+=".change"),n+="."+this.field_selected),e&&(n+=e),n+="}}",n}return null}}},k=g,w=Object(h["a"])(k,r,c,!1,null,null,null),y=w.exports,O={store:s["a"],props:["field","conditioned_on"],components:{FieldComponent:a["a"],DependentFieldManagerComponent:y},methods:{can_be_dependency_field:function(e){return!(!this.conditioned_on||"leadership"==this.conditioned_on)&&e.can_depend},is_dependency_field:function(e){return!(!e||"string"!=typeof e||"}}"!=e.substring(e.length-2,e.length)||"{{"!=e.substring(0,2))},change_field:function(e){this.$emit("field-changed",e)}}},C=O,x=Object(h["a"])(C,i,o,!1,null,null,null);t["a"]=x.exports},f7bd:function(e,t,n){"use strict";var i=n("07bb"),o=n.n(i);t["default"]=o.a}});