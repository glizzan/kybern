(function(e){function t(t){for(var s,r,a=t[0],l=t[1],c=t[2],_=0,d=[];_<a.length;_++)r=a[_],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&d.push(i[r][0]),i[r]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(e[s]=l[s]);m&&m(t);while(d.length)d.shift()();return o.push.apply(o,c||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],s=!0,a=1;a<n.length;a++){var l=n[a];0!==i[l]&&(s=!1)}s&&(o.splice(t--,1),e=r(r.s=n[0]))}return e}var s={},i={group_detail_vue:0},o=[];function r(t){if(s[t])return s[t].exports;var n=s[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=s,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)r.d(n,s,function(t){return e[t]}.bind(null,s));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],l=a.push.bind(a);a.push=t,a=a.slice();for(var c=0;c<a.length;c++)t(a[c]);var m=l;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("d8c3")},"0243":function(e,t,n){},"07bb":function(e,t,n){n("c975"),n("d3b7"),n("25f0"),e.exports={props:["message","dismissable"],data:function(){return{unique_identifier:null,styleclass:"text-danger",show_dismissible_alert:!0}},created:function(){this.unique_identifier=Math.random().toString(),this.render_html()},watch:{message:function(){this.render_html(),this.show_dismissible_alert=!0}},methods:{render_html:function(){if(this.message&&-1!==this.message.indexOf("href")){var e=document.getElementById(this.unique_identifier);e&&(e.innerHTML=this.message,this.styleclass="text-secondary")}}}}},"1b4e":function(e,t,n){"use strict";n("79a1")},"1e2a":function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return i}));var s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:e.styleclass,attrs:{id:e.unique_identifier}},[e.dismissable&&e.message?n("span",{staticClass:"error-message"},[n("b-alert",{staticClass:"my-2 error-alert",attrs:{variant:"danger",dismissible:"",show:e.show_dismissible_alert},on:{dismissed:function(t){e.show_dismissible_alert=!1}}},[e._v(" "+e._s(e.message))])],1):n("span",{staticClass:"error-message"},[e._v(" "+e._s(e.message)+" ")])])},i=[]},"1e57":function(e,t,n){},4360:function(e,t,n){"use strict";n("b64b"),n("d3b7"),n("96cf");var s=n("1da1"),i=n("2b0e"),o=n("2f62"),r=n("583c"),a=(n("7db0"),n("a434"),{state:{actions:{}},getters:{getActionData:function(e,t){return function(t){for(var n in e.actions){var s=e.actions[n].find((function(e){return e.action_pk==t}));if(s)return s}}}},mutations:{REPLACE_ACTIONS_FOR_ITEM:function(e,t){i["default"].set(e.actions,t.item_key.toLowerCase(),t.action_data)},ADD_OR_UPDATE_ACTION:function(e,t){var n=t.item_key.toLowerCase();for(var s in e.actions[n]||i["default"].set(e.actions,n,[]),e.actions[n])if(e.actions[n][s].action_pk==t.action_data.action_pk)return void e.actions[n].splice(s,1,t.action_data);e.actions[n].push(t.action_data)}},actions:{updateActions:function(e,t){e.state,e.commit,e.rootState;var n=e.dispatch,s=t.response.data;if(s.multiple_actions)for(var i in s.actions)n("addOrUpdateAction",{action_pk:s.actions[i].action_pk});else n("addOrUpdateAction",{action_pk:s.action_pk})},loadActions:function(e,t){return Object(s["a"])(regeneratorRuntime.mark((function n(){var s,i,o,r,a,l;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.state,s=e.commit,e.rootState,i=e.dispatch,o=e.getters,n.next=3,o.url_lookup("get_action_data_for_target");case 3:return r=n.sent,a={item_id:t.item_id,item_model:t.item_model},l=function(e){var n=t.item_id+"_"+t.item_model;s("REPLACE_ACTIONS_FOR_ITEM",{action_data:e.data.action_data,item_key:n})},n.abrupt("return",i("getAPIcall",{url:r,params:a,implementationCallback:l}));case 7:case"end":return n.stop()}}),n)})))()},addOrUpdateAction:function(e,t){return Object(s["a"])(regeneratorRuntime.mark((function n(){var s,i,o,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.state,s=e.commit,e.rootState,e.dispatch,i=e.getters,n.next=3,i.url_lookup("get_action_data");case 3:o=n.sent,a={action_pk:t.action_pk},r["a"].post(o,a).then((function(e){var t=e.data.action_data,n=t.action_target_pk+"_"+t.action_target_model;s("ADD_OR_UPDATE_ACTION",{action_data:t,item_key:n})})).catch((function(e){throw console.log(e),e}));case 6:case"end":return n.stop()}}),n)})))()}}}),l=a,c=(n("c975"),{state:{item_comments:{},comments:{}},getters:{getCommentData:function(e,t){return function(t){return e.comments[t]}},getCommentsForItem:function(e,t){return function(t){var n=[];for(var s in e.item_comments[t]){var i=e.item_comments[t][s];n.push(e.comments[i])}return n}}},mutations:{REPLACE_ITEM_COMMENTS:function(e,t){var n=t.item_id+"_"+t.item_model;i["default"].set(e.item_comments,n,t.pks)},ADD_COMMENT_TO_ITEM:function(e,t){var n=t.item_id+"_"+t.item_model,s=e.item_comments[n].indexOf(t.comment_pk);-1==s&&e.item_comments[n].push(parseInt(t.comment_pk))},REMOVE_COMMENT_FROM_ITEM:function(e,t){var n=t.item_id+"_"+t.item_model,s=e.item_comments[n].indexOf(t.comment_pk);s>-1&&e.item_comments[n].splice(s,1)},ADD_OR_UPDATE_COMMENT:function(e,t){i["default"].set(e.comments,t.pk,t.data)},DELETE_COMMENT:function(e,t){i["default"].delete(e.comments,t.pk)}},actions:{getComments:function(e,t){return Object(s["a"])(regeneratorRuntime.mark((function n(){var s,i,o,r,a,l;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return s=e.commit,e.state,i=e.dispatch,o=e.getters,n.next=3,o.url_lookup("get_comment_data");case 3:return r=n.sent,a={item_id:t.item_id,item_model:t.item_model},l=function(e){for(var t in e.data.comments)s("ADD_OR_UPDATE_COMMENT",{pk:t,data:e.data.comments[t]});s("REPLACE_ITEM_COMMENTS",{item_id:e.data.item_id,item_model:e.data.item_model,pks:e.data.comment_pks})},n.abrupt("return",i("getAPIcall",{url:r,params:a,implementationCallback:l}));case 7:case"end":return n.stop()}}),n)})))()},addComment:function(e,t){return Object(s["a"])(regeneratorRuntime.mark((function n(){var s,i,o,r,a,l;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return s=e.commit,e.state,i=e.dispatch,o=e.getters,n.next=3,o.url_lookup("add_comment");case 3:return r=n.sent,a={item_id:t.item_id,item_model:t.item_model,text:t.text},l=function(e){var n=Object.keys(e.data.comment)[0],i=e.data.comment[n];s("ADD_OR_UPDATE_COMMENT",{pk:n,data:i}),s("ADD_COMMENT_TO_ITEM",{comment_pk:n,item_id:t.item_id,item_model:t.item_model})},n.abrupt("return",i("actionAPIcall",{url:r,params:a,implementationCallback:l}));case 7:case"end":return n.stop()}}),n)})))()},editComment:function(e,t){return Object(s["a"])(regeneratorRuntime.mark((function n(){var s,i,o,r,a,l;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return s=e.commit,e.state,i=e.dispatch,o=e.getters,n.next=3,o.url_lookup("edit_comment");case 3:return r=n.sent,a={text:t.text,comment_pk:t.pk},l=function(e){var t=Object.keys(e.data.comment)[0],n=e.data.comment[t];s("ADD_OR_UPDATE_COMMENT",{pk:t,data:n})},n.abrupt("return",i("actionAPIcall",{url:r,params:a,implementationCallback:l}));case 7:case"end":return n.stop()}}),n)})))()},deleteComment:function(e,t){return Object(s["a"])(regeneratorRuntime.mark((function n(){var s,i,o,r,a,l;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return s=e.commit,e.state,i=e.dispatch,o=e.getters,n.next=3,o.url_lookup("delete_comment");case 3:return r=n.sent,a={comment_pk:t.comment_pk},l=function(e){s("REMOVE_COMMENT_FROM_ITEM",{item_id:t.item_id,item_model:t.item_model,comment_pk:e.data.deleted_comment_pk}),s("DELETE_COMMENT",{pk:e.data.deleted_comment_pk})},n.abrupt("return",i("actionAPIcall",{url:r,params:a,implementationCallback:l}));case 7:case"end":return n.stop()}}),n)})))()}}}),m=c,_=(n("a4d3"),n("e01a"),n("b0c0"),{state:{documents:[]},getters:{getDocumentData:function(e,t){return function(t){return e.documents.find((function(e){return e.pk==t}))}}},mutations:{ADD_OR_UPDATE_DOCUMENT:function(e,t){for(var n in e.documents)if(e.documents[n].pk==t.document_data.pk)return void e.documents.splice(n,1,t.document_data);e.documents.push(t.document_data)},DELETE_DOCUMENT:function(e,t){for(var n in e.documents)e.documents[n].pk==t.deleted_document_pk&&e.documents.splice(n,1)}},actions:{getDocuments:function(e,t){return Object(s["a"])(regeneratorRuntime.mark((function t(){var n,s,i,o,r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,e.state,s=e.dispatch,i=e.getters,t.next=3,i.url_lookup("get_documents");case 3:return o=t.sent,r={},a=function(e){for(var t in e.data.documents)n("ADD_OR_UPDATE_DOCUMENT",{document_data:e.data.documents[t]})},t.abrupt("return",s("getAPIcall",{url:o,params:r,implementationCallback:a}));case 7:case"end":return t.stop()}}),t)})))()},addDocument:function(e,t){return Object(s["a"])(regeneratorRuntime.mark((function n(){var s,i,o,r,a,l;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return s=e.commit,e.state,i=e.dispatch,o=e.getters,console.log("We here???"),n.next=4,o.url_lookup("add_document");case 4:return r=n.sent,a={name:t.name,description:t.description,content:t.content},l=function(e){s("ADD_OR_UPDATE_DOCUMENT",{document_data:e.data.created_instance})},n.abrupt("return",i("actionAPIcall",{url:r,params:a,implementationCallback:l}));case 8:case"end":return n.stop()}}),n)})))()},editDocument:function(e,t){return Object(s["a"])(regeneratorRuntime.mark((function n(){var s,i,o,r,a,l;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return s=e.commit,e.state,i=e.dispatch,o=e.getters,n.next=3,o.url_lookup("edit_document");case 3:return r=n.sent,a={name:t.name,document_pk:t.pk,description:t.description,content:t.content},console.log("Vuex params",a),console.log("WTF:, PARAMS:::",a),console.log({name:t.name,document_pk:t.pk,description:t.description,content:t.content}),l=function(e){s("ADD_OR_UPDATE_DOCUMENT",{document_data:e.data.edited_instance})},n.abrupt("return",i("actionAPIcall",{url:r,params:a,implementationCallback:l}));case 10:case"end":return n.stop()}}),n)})))()},deleteDocument:function(e,t){return Object(s["a"])(regeneratorRuntime.mark((function n(){var s,i,o,r,a,l;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return s=e.commit,e.state,i=e.dispatch,o=e.getters,n.next=3,o.url_lookup("delete_document");case 3:return r=n.sent,a={document_pk:t.document_pk},l=function(e){s("DELETE_DOCUMENT",{deleted_document_pk:e.data.deleted_instance_pk})},n.abrupt("return",i("actionAPIcall",{url:r,params:a,implementationCallback:l}));case 7:case"end":return n.stop()}}),n)})))()}}}),d=_,u=(n("4de4"),{state:{forums:[],posts:[]},getters:{getForumData:function(e,t){return function(t){return e.forums.find((function(e){return e.pk==parseInt(t)}))}},getPostsDataForForum:function(e,t){return function(t){return e.posts.filter((function(e){return e.forum_pk==t}))}},getPostData:function(e,t){return function(t){return e.posts.find((function(e){return e.pk==t}))}}},mutations:{SET_FORUMS:function(e,t){i["default"].set(e,"forums",t.forums)},ADD_OR_UPDATE_FORUM:function(e,t){for(var n in e.forums)if(e.forums[n].pk==t.forum_data.pk)return void e.forums.splice(n,1,t.forum_data);e.forums.push(t.forum_data)},DELETE_FORUM:function(e,t){for(var n in e.forums)e.forums[n].pk==t.pk&&e.forums.splice(n,1)},ADD_POST:function(e,t){for(var n in e.posts)if(e.posts[n].pk==t.post_data.pk)return;e.posts.push(t.post_data)},EDIT_POST:function(e,t){for(var n in e.posts)e.posts[n].pk==t.post_data.pk&&i["default"].set(e.posts,n,t.post_data)},DELETE_POST:function(e,t){for(var n in e.posts)e.posts[n].pk==t.pk&&e.posts.splice(n,1)}},actions:{getForums:function(e,t){return Object(s["a"])(regeneratorRuntime.mark((function t(){var n,s,i,o,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,e.state,s=e.dispatch,i=e.getters,t.next=3,i.url_lookup("get_forum_data");case 3:return o=t.sent,r=function(e){n("SET_FORUMS",{forums:e.data.forums})},t.abrupt("return",s("getAPIcall",{url:o,implementationCallback:r}));case 6:case"end":return t.stop()}}),t)})))()},getForum:function(e,t){return Object(s["a"])(regeneratorRuntime.mark((function n(){var s,i,o,r,a,l;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return s=e.commit,e.state,i=e.dispatch,o=e.getters,n.next=3,o.url_lookup("get_forum");case 3:return r=n.sent,a={forum_pk:t.forum_pk},l=function(e){s("ADD_OR_UPDATE_FORUM",{forum_data:e.data.forum_data})},n.abrupt("return",i("getAPIcall",{url:r,params:a,implementationCallback:l}));case 7:case"end":return n.stop()}}),n)})))()},addForum:function(e,t){return Object(s["a"])(regeneratorRuntime.mark((function n(){var s,i,o,r,a,l;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return s=e.commit,e.state,i=e.dispatch,o=e.getters,n.next=3,o.url_lookup("add_forum");case 3:return r=n.sent,a={name:t.name,description:t.description},l=function(e){s("ADD_OR_UPDATE_FORUM",{forum_data:e.data.created_instance})},n.abrupt("return",i("actionAPIcall",{url:r,params:a,implementationCallback:l}));case 7:case"end":return n.stop()}}),n)})))()},editForum:function(e,t){return Object(s["a"])(regeneratorRuntime.mark((function n(){var s,i,o,r,a,l;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return s=e.commit,e.state,i=e.dispatch,o=e.getters,n.next=3,o.url_lookup("edit_forum");case 3:return r=n.sent,a={pk:t.pk,name:t.name,description:t.description},l=function(e){s("ADD_OR_UPDATE_FORUM",{forum_data:e.data.edited_instance})},n.abrupt("return",i("actionAPIcall",{url:r,params:a,implementationCallback:l}));case 7:case"end":return n.stop()}}),n)})))()},deleteForum:function(e,t){return Object(s["a"])(regeneratorRuntime.mark((function n(){var s,i,o,r,a,l;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return s=e.commit,e.state,i=e.dispatch,o=e.getters,n.next=3,o.url_lookup("delete_forum");case 3:return r=n.sent,a={pk:t.pk},l=function(e){s("DELETE_FORUM",{pk:e.data.deleted_forum_pk})},n.abrupt("return",i("actionAPIcall",{url:r,params:a,implementationCallback:l}));case 7:case"end":return n.stop()}}),n)})))()},getPosts:function(e,t){return Object(s["a"])(regeneratorRuntime.mark((function n(){var s,i,o,r,a,l;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return s=e.commit,e.state,i=e.dispatch,o=e.getters,n.next=3,o.url_lookup("get_posts_for_forum");case 3:return r=n.sent,a={forum_pk:t.forum_pk},l=function(e){for(var t in e.data.posts)s("ADD_POST",{post_data:e.data.posts[t]})},n.abrupt("return",i("getAPIcall",{url:r,params:a,implementationCallback:l}));case 7:case"end":return n.stop()}}),n)})))()},getPost:function(e,t){return Object(s["a"])(regeneratorRuntime.mark((function n(){var s,i,o,r,a,l;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return s=e.commit,e.state,i=e.dispatch,o=e.getters,n.next=3,o.url_lookup("get_post");case 3:return r=n.sent,a={post_pk:t.post_pk},l=function(e){s("ADD_POST",{post_data:e.data.post})},n.abrupt("return",i("getAPIcall",{url:r,params:a,implementationCallback:l}));case 7:case"end":return n.stop()}}),n)})))()},addPost:function(e,t){return Object(s["a"])(regeneratorRuntime.mark((function n(){var s,i,o,r,a,l;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return s=e.commit,e.state,i=e.dispatch,o=e.getters,n.next=3,o.url_lookup("add_post");case 3:return r=n.sent,a={forum_pk:t.forum_id,title:t.title,content:t.content},l=function(e){s("ADD_POST",{post_data:e.data.created_instance})},n.abrupt("return",i("actionAPIcall",{url:r,params:a,implementationCallback:l}));case 7:case"end":return n.stop()}}),n)})))()},editPost:function(e,t){return Object(s["a"])(regeneratorRuntime.mark((function n(){var s,i,o,r,a,l;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return s=e.commit,e.state,i=e.dispatch,o=e.getters,n.next=3,o.url_lookup("edit_post");case 3:return r=n.sent,a={pk:t.pk,title:t.title,content:t.content},l=function(e){s("EDIT_POST",{post_data:e.data.edited_instance})},n.abrupt("return",i("actionAPIcall",{url:r,params:a,implementationCallback:l}));case 7:case"end":return n.stop()}}),n)})))()},deletePost:function(e,t){return Object(s["a"])(regeneratorRuntime.mark((function n(){var s,i,o,r,a,l;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return s=e.commit,e.state,i=e.dispatch,o=e.getters,n.next=3,o.url_lookup("delete_post");case 3:return r=n.sent,a={pk:t.pk,forum_pk:t.forum_pk},l=function(e){s("DELETE_POST",{pk:e.data.deleted_post_pk})},n.abrupt("return",i("actionAPIcall",{url:r,params:a,implementationCallback:l}));case 7:case"end":return n.stop()}}),n)})))()}}}),p=u,f=(n("99af"),n("c740"),n("4160"),n("caad"),n("d81d"),n("2532"),n("159b"),{state:{members:[],roles:[],users:[],current_membership_option:"",membership_config_data:{permission:null,condition:null},governance_info:"",owners:{actors:[],roles:[]},governors:{actors:[],roles:[]}},getters:{memberNames:function(e,t){return e.members.map((function(e){return t.getUserName(e)}))},roleNames:function(e){var t=[];return e.roles.forEach((function(e){t.push(e.name)})),t},allRoleNames:function(e){var t=["owners","governors","members"];return e.roles.forEach((function(e){t.push(e.name)})),t},allRoles:function(e,t){return[{name:"members",current_members:e.members}].concat(e.roles)},rolesAsOptions:function(e,t){return t.allRoles.map((function(e){return{name:e.name}}))},getUser:function(e){return function(t){return e.users.find((function(e){return e.pk==t}))}},getUserName:function(e,t){return function(e){return t.getUser(e).name}},userInGroup:function(e,t){return function(t){return e.members.includes(t)}},membersInRole:function(e,t){return function(t){return e.roles.find((function(e){return e.name==t})).current_members}},rolesForMember:function(e,t){return function(n,s){var i=[];if(!n)return console.log("user_pk passed in is undefined"),i;if(e.roles.forEach((function(e){e.current_members.includes(n)&&i.push(e.name)})),!s){if(t.userInGroup(n)&&i.push("members"),e.owners.actors.includes(n))i.push("owners");else{var o=e.owners.roles.filter((function(e){return i.includes(e)}));o.length>1&&i.push("owners")}if(e.owners.actors.includes(n))i.push("governors");else{var r=e.governors.roles.filter((function(e){return i.includes(e)}));r.length>1&&i.push("governors")}}return i}},role_to_options:function(e,t){return function(e){return e?(Array.isArray(e)||(e=[e]),e.map((function(e){return{name:e}}))):[]}},user_pk_to_options:function(e,t){return function(e){return e?e.map((function(e){return{pk:e,name:t.getUser(e).name}})):[]}},groupMembersAsOptions:function(e,t){return t.user_pk_to_options(e.members)},roleMembersAsOptions:function(e,t){return function(e){var n=t.membersInRole(e);return t.user_pk_to_options(n)}},membersAsOptions:function(e,t){return function(e){return"members"==e?t.groupMembersAsOptions:t.roleMembersAsOptions(e)}},nonmembersAsOptions:function(e,t){return e.users.filter((function(t){return-1==e.members.indexOf(t.pk)}))},leadershipAsOptions:function(e,t){return{owner_role_options:e.owners.roles.map((function(e){return{name:e}})),owner_actor_options:t.user_pk_to_options(e.owners.actors),governor_role_options:e.governors.roles.map((function(e){return{name:e}})),governor_actor_options:t.user_pk_to_options(e.governors.actors)}}},mutations:{SET_CURRENT_USER_AS_ONLY_GROUP_MEMBER:function(e,t){i["default"].set(e,"users",t.users),i["default"].set(e,"members",[t.user_pk])},SET_USERS:function(e,t){i["default"].set(e,"users",t.users)},SET_ROLES:function(e,t){i["default"].set(e,"roles",t.roles)},SET_LEADERS:function(e,t){i["default"].set(e,"owners",t.owners),i["default"].set(e,"governors",t.governors)},SET_GOVERNANCE_INFO:function(e,t){i["default"].set(e,"governance_info",t.governance_info)},ADD_ROLE:function(e,t){var n=e.roles.find((function(e){return e.name==t.role_name}));n||e.roles.push({name:t.role_name,current_members:[]})},REMOVE_ROLE:function(e,t){var n=e.roles.findIndex((function(e){return e.name==t.role_name}));n>-1&&e.roles.splice(n,1)},ADD_MEMBERS:function(e,t){for(var n in t.user_pks){var s=t.user_pks[n],i=e.members.indexOf(s);-1==i&&e.members.push(s)}},REMOVE_MEMBERS:function(e,t){for(var n in t.user_pks){var s=t.user_pks[n],i=e.members.indexOf(s);i>-1&&e.members.splice(i,1)}},ADD_USERS_TO_ROLE:function(e,t){var n=e.roles.find((function(e){return e.name==t.role_name}));for(var s in t.user_pks){var i=t.user_pks[s],o=n.current_members.indexOf(i);-1==o&&n.current_members.push(i)}},REMOVE_USERS_FROM_ROLE:function(e,t){var n=e.roles.find((function(e){return e.name==t.role_name}));for(var s in t.user_pks){var i=t.user_pks[s],o=n.current_members.indexOf(i);o>-1&&n.current_members.splice(o,1)}},REMOVE_USERS_FROM_ALL_ROLES:function(e,t){e.roles.forEach((function(e){t.user_pks.forEach((function(t){var n=e.current_members.indexOf(t);n>-1&&e.current_members.splice(n,1)}))}))},ADD_OWNERS:function(e,t){t.roles_to_add.forEach((function(t){e.owners.roles.includes(t)||e.owners.roles.push(t)})),t.actors_to_add.forEach((function(t){e.owners.actors.includes(t)||e.owners.actors.push(t)}))},REMOVE_OWNERS:function(e,t){t.roles_to_remove.forEach((function(t){var n=e.owners.roles.indexOf(t);n>-1&&e.owners.roles.splice(n,1)})),t.actors_to_remove.forEach((function(t){var n=e.owners.actors.indexOf(t);n>-1&&e.owners.actors.splice(n,1)}))},ADD_GOVERNORS:function(e,t){t.roles_to_add.forEach((function(t){e.governors.roles.includes(t)||e.governors.roles.push(t)})),t.actors_to_add.forEach((function(t){e.governors.actors.includes(t)||e.governors.actors.push(t)}))},REMOVE_GOVERNORS:function(e,t){t.roles_to_remove.forEach((function(t){var n=e.governors.roles.indexOf(t);n>-1&&e.governors.roles.splice(n,1)})),t.actors_to_remove.forEach((function(t){var n=e.governors.actors.indexOf(t);n>-1&&e.governors.actors.splice(n,1)}))},SET_MEMBERSHIP_OPTION_SELECTED:function(e,t){e.current_membership_option=t.selection},SET_MEMBERSHIP_CONFIG_DATA:function(e,t){i["default"].set(e.membership_config_data,"condition",t.condition_data),i["default"].set(e.membership_config_data,"permission",t.permission_data)}},actions:{initialize_members_with_current_user:function(e,t){var n=e.commit;e.state,e.dispatch,e.getters;n("SET_CURRENT_USER_AS_ONLY_GROUP_MEMBER",{users:[t.user],user_pk:t.user.pk})},getGovernanceData:function(e,t){return Object(s["a"])(regeneratorRuntime.mark((function t(){var n,s,i,o,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,e.state,s=e.dispatch,i=e.getters,t.next=3,i.url_lookup("get_governance_data");case 3:return o=t.sent,r=function(e){n("SET_USERS",{users:e.data.governance_data.users}),n("SET_ROLES",{roles:e.data.governance_data.roles}),n("SET_LEADERS",{owners:e.data.governance_data.owners,governors:e.data.governance_data.governors}),n("ADD_MEMBERS",{user_pks:e.data.governance_data.current_members}),n("SET_GOVERNANCE_INFO",{governance_info:e.data.governance_data.governance_info})},t.abrupt("return",s("getAPIcall",{url:o,implementationCallback:r}));case 6:case"end":return t.stop()}}),t)})))()},addMembers:function(e,t){return Object(s["a"])(regeneratorRuntime.mark((function n(){var s,i,o,r,a,l;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return s=e.commit,e.state,i=e.dispatch,o=e.getters,n.next=3,o.url_lookup("add_members");case 3:return r=n.sent,a={user_pks:t.user_pks},l=function(){s("ADD_MEMBERS",{user_pks:t.user_pks})},n.abrupt("return",i("actionAPIcall",{url:r,params:a,implementationCallback:l}));case 7:case"end":return n.stop()}}),n)})))()},removeMembers:function(e,t){return Object(s["a"])(regeneratorRuntime.mark((function n(){var s,i,o,r,a,l;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return s=e.commit,e.state,i=e.dispatch,o=e.getters,n.next=3,o.url_lookup("remove_members");case 3:return r=n.sent,a={user_pks:t.user_pks},l=function(){s("REMOVE_USERS_FROM_ALL_ROLES",{user_pks:t.user_pks}),s("REMOVE_MEMBERS",{user_pks:t.user_pks})},n.abrupt("return",i("actionAPIcall",{url:r,params:a,implementationCallback:l}));case 7:case"end":return n.stop()}}),n)})))()},addUsersToRole:function(e,t){return Object(s["a"])(regeneratorRuntime.mark((function n(){var s,i,o,r,a,l;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return s=e.commit,e.state,i=e.dispatch,o=e.getters,n.next=3,o.url_lookup("add_people_to_role");case 3:return r=n.sent,a={role_name:t.role_name,user_pks:t.user_pks},l=function(){s("ADD_USERS_TO_ROLE",{role_name:t.role_name,user_pks:t.user_pks})},n.abrupt("return",i("actionAPIcall",{url:r,params:a,implementationCallback:l}));case 7:case"end":return n.stop()}}),n)})))()},removeUsersFromRole:function(e,t){return Object(s["a"])(regeneratorRuntime.mark((function n(){var s,i,o,r,a,l;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return s=e.commit,e.state,i=e.dispatch,o=e.getters,n.next=3,o.url_lookup("remove_people_from_role");case 3:return r=n.sent,a={role_name:t.role_name,user_pks:t.user_pks},l=function(){s("REMOVE_USERS_FROM_ROLE",{role_name:t.role_name,user_pks:t.user_pks})},n.abrupt("return",i("actionAPIcall",{url:r,params:a,implementationCallback:l}));case 7:case"end":return n.stop()}}),n)})))()},addRole:function(e,t){return Object(s["a"])(regeneratorRuntime.mark((function n(){var s,i,o,r,a,l;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return s=e.commit,e.state,i=e.dispatch,o=e.getters,n.next=3,o.url_lookup("add_role_to_group");case 3:return r=n.sent,a={role_name:t.role_name},l=function(){s("ADD_ROLE",{role_name:t.role_name})},n.abrupt("return",i("actionAPIcall",{url:r,params:a,implementationCallback:l}));case 7:case"end":return n.stop()}}),n)})))()},removeRole:function(e,t){return Object(s["a"])(regeneratorRuntime.mark((function n(){var s,i,o,r,a,l;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return s=e.commit,e.state,i=e.dispatch,o=e.getters,n.next=3,o.url_lookup("remove_role_from_group");case 3:return r=n.sent,a={role_name:t.role_name},l=function(){s("REMOVE_ROLE",{role_name:t.role_name})},n.abrupt("return",i("actionAPIcall",{url:r,params:a,implementationCallback:l}));case 7:case"end":return n.stop()}}),n)})))()},updateOwners:function(e,t){return Object(s["a"])(regeneratorRuntime.mark((function n(){var s,i,o,r,a,l,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return s=e.commit,i=e.state,o=e.dispatch,r=e.getters,n.next=3,r.url_lookup("update_owners");case 3:return a=n.sent,l={owner_roles:t.roles,owner_actors:t.actors},c=function(){var e=t.roles.filter((function(e){return!i.owners.roles.includes(e)})),n=t.actors.filter((function(e){return!i.owners.actors.includes(e)})),o=i.owners.roles.filter((function(e){return!t.roles.includes(e)})),r=i.owners.actors.filter((function(e){return!t.actors.includes(e)}));s("ADD_OWNERS",{roles_to_add:e,actors_to_add:n}),s("REMOVE_OWNERS",{roles_to_remove:o,actors_to_remove:r})},n.abrupt("return",o("actionAPIcall",{url:a,params:l,implementationCallback:c}));case 7:case"end":return n.stop()}}),n)})))()},updateGovernors:function(e,t){return Object(s["a"])(regeneratorRuntime.mark((function n(){var s,i,o,r,a,l,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return s=e.commit,i=e.state,o=e.dispatch,r=e.getters,n.next=3,r.url_lookup("update_governors");case 3:return a=n.sent,l={governor_roles:t.roles,governor_actors:t.actors},c=function(){var e=t.roles.filter((function(e){return!i.governors.roles.includes(e)})),n=t.actors.filter((function(e){return!i.governors.actors.includes(e)})),o=i.governors.roles.filter((function(e){return!t.roles.includes(e)})),r=i.governors.actors.filter((function(e){return!t.actors.includes(e)}));s("ADD_GOVERNORS",{roles_to_add:e,actors_to_add:n}),s("REMOVE_GOVERNORS",{roles_to_remove:o,actors_to_remove:r})},n.abrupt("return",o("actionAPIcall",{url:a,params:l,implementationCallback:c}));case 7:case"end":return n.stop()}}),n)})))()}}}),h=f,b=n("ade3"),v=(n("4fad"),n("3835")),g=function(e,t){for(var n={},s=0,i=Object.entries(t);s<i.length;s++){var o=Object(v["a"])(i[s],2),r=o[0],a=o[1];r in e?n[e[r]]=a:n[r]=a}return n},k={state:{permission_options:{},condition_options:[],condition_configuration_options:{},dependent_field_options:[],permissions:{},permission_overrides:{},current_user_permissions:{},role_permissions:{},item_permissions:{},nested_item_permissions:{},owner_condition:null,governor_condition:null},getters:{get_permission_given_pk:function(e,t){return function(t,n){var s=e.permissions[t];if(s)return n?Object(b["a"])({},t,e.permissions[t]):(s["pk"]=t,s);console.log("No permission found for ",t)}},get_list_of_permissions_given_pks:function(e,t){return function(e){var n=[];for(var s in e)n.push(t.get_permission_given_pk(e[s]));return n}},permissionsForGroup:function(e,t){return function(){var t=[];return Object.keys(e.permissions).forEach((function(n){var s=e.permissions[n];"community"!=s.target&&"Forum"!=s.target.substring(0,5)&&"SimpleList"!=s.target.substring(0,10)||t.push(s)})),t}},permissionsForRole:function(e,t){return function(n){var s=e.role_permissions[n];return t.get_list_of_permissions_given_pks(s)}},permissionsForItem:function(e,t){return function(n,s){var i=e.item_permissions[n];return i=i||[],1==s&&(i=i.concat(e.nested_item_permissions[n])),t.get_list_of_permissions_given_pks(i).filter((function(e){return void 0!=e}))}},getConditionConfigurationFields:function(e,t){return function(t){for(var n in e.condition_configuration_options)if(n.toLowerCase()==t.toLowerCase()){var s=e.condition_configuration_options[n];break}return JSON.parse(JSON.stringify(s))}},fix_permission_field_values:function(e,t){return function(e){return"string"==typeof e.value&&e.value.indexOf("{{")>-1||("RoleField"==e.type||"RoleListField"==e.type?e.value=t.role_to_options(e.value):"ActorField"!=e.type&&"ActorListField"!=e.type||(e.value=t.user_pk_to_options(e.value))),e}},getPermissionConditionConfigurationFieldsWithData:function(e,t){return function(n,s){var i=e.permissions[n]["condition"][s]["fields"];for(var o in i)i[o]=t.fix_permission_field_values(i[o]);return i}},getLeadershipConditionConfigurationFieldsWithData:function(e,t){return function(n,s){var i={};for(var o in"owner"==n?i=e.owner_condition[s]["fields"]:"governor"==n&&(i=e.governor_condition[s]["fields"]),i)i[o]=t.fix_permission_field_values(i[o]);return i}},getFoundationalForItem:function(e,t){return function(t){if(e.permission_overrides[t])return e.permission_overrides[t].foundational}},getGoverningForItem:function(e,t){return function(t){if(e.permission_overrides[t])return e.permission_overrides[t].governing}}},mutations:{SET_PERMISSION_OPTIONS:function(e,t){i["default"].set(e,"permission_options",t.options)},SET_CONDITION_OPTIONS:function(e,t){i["default"].set(e,"condition_options",t.options)},SET_CONDITION_CONFIGURATION_OPTIONS:function(e,t){i["default"].set(e,"condition_configuration_options",t.options)},SET_DEPENDENT_FIELD_OPTIONS:function(e,t){i["default"].set(e,"dependent_field_options",t.options)},ADD_OR_UPDATE_PERMISSION:function(e,t){i["default"].set(e.permissions,t.pk,t.data)},ADD_PERMISSION_TO_ROLE:function(e,t){var n=e.role_permissions[t.role].indexOf(t.pk);-1==n&&e.role_permissions[t.role].push(t.pk)},REMOVE_PERMISSION_FROM_ROLES:function(e,t){for(var n in e.role_permissions){var s=e.role_permissions[n].indexOf(t.pk);s>-1&&e.role_permissions[n].splice(s,1)}},UPDATE_ROLE_WITH_PERMISSION:function(e,t){for(var n in t.permission.roles){var s=t.permission.roles[n];if(e.role_permissions[s]){var o=e.role_permissions[s].indexOf(t.permission.pk);o<0&&e.role_permissions[s].push(t.permission.pk)}else i["default"].set(e.role_permissions,s,[t.permission.pk])}},REPLACE_ROLE_PERMISSIONS:function(e,t){i["default"].set(e.role_permissions,t.role,t.pks)},DELETE_PERMISSION:function(e,t){i["default"].delete(e.permissions,t.pk)},REPLACE_ITEM_PERMISSIONS:function(e,t){var n=t.item_id+"_"+t.item_model;i["default"].set(e.item_permissions,n,t.pks)},REPLACE_NESTED_ITEM_PERMISSIONS:function(e,t){var n=t.item_id+"_"+t.item_model;i["default"].set(e.nested_item_permissions,n,t.pks)},ADD_PERMISSION_TO_ITEM:function(e,t){var n=t.item_id+"_"+t.item_model,s=e.item_permissions[n].indexOf(t.permission_pk);-1==s&&e.item_permissions[n].push(t.permission_pk)},REMOVE_PERMISSION_FROM_ITEM:function(e,t){var n=t.item_id+"_"+t.item_model,s=e.item_permissions[n].indexOf(t.pk);s>-1&&e.item_permissions[n].splice(s,1)},ADD_OR_UPDATE_CURRENT_USER_PERMISSIONS:function(e,t){for(var n in t.user_permissions)i["default"].set(e.current_user_permissions,n,t.user_permissions[n])},ADD_OR_UPDATE_PERMISSION_OVERRIDE_DATA:function(e,t){var n=t.item_id+"_"+t.item_model;i["default"].set(e.permission_overrides,n,{foundational:t.foundational,governing:t.governing})},SET_PERMISSION_CONDITION:function(e,t){i["default"].set(e.permissions[t.pk],"condition",t.condition_data)},SET_LEADERSHIP_CONDITION:function(e,t){"owner"==t.leadership_type?i["default"].set(e,"owner_condition",t.condition_data):"governor"==t.leadership_type&&i["default"].set(e,"governor_condition",t.condition_data)}},actions:{getPermissionData:function(e,t){return Object(s["a"])(regeneratorRuntime.mark((function t(){var n,s,i,o,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,e.state,s=e.dispatch,i=e.getters,t.next=3,i.url_lookup("get_permission_data");case 3:return o=t.sent,r=function(e){n("SET_PERMISSION_OPTIONS",{options:e.data.permission_options}),n("SET_CONDITION_OPTIONS",{options:e.data.condition_options}),n("SET_CONDITION_CONFIGURATION_OPTIONS",{options:e.data.condition_configuration_options}),n("SET_DEPENDENT_FIELD_OPTIONS",{options:e.data.dependent_field_options}),n("SET_LEADERSHIP_CONDITION",{leadership_type:"owner",condition_data:e.data.owner_condition}),n("SET_LEADERSHIP_CONDITION",{leadership_type:"governor",condition_data:e.data.governor_condition})},t.abrupt("return",s("getAPIcall",{url:o,implementationCallback:r}));case 6:case"end":return t.stop()}}),t)})))()},fetchMissingPermission:function(e,t){e.commit,e.state;var n=e.getters,s=e.dispatch;return new Promise((function(e,i){var o=parseInt(t.pk);isNaN(o)&&i("pk "+t.pk+" is not a number");var r=n.get_permission_given_pk(o);r&&e(r),s("getPermission",{permission_pk:o}).then((function(t){return e(n.get_permission_given_pk(o))})).catch((function(e){return i("Couldn't find permission matching "+t.pk)}))}))},addPermission:function(e,t){return Object(s["a"])(regeneratorRuntime.mark((function n(){var s,i,o,r,a,l;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return s=e.commit,e.state,i=e.dispatch,o=e.getters,n.next=3,o.url_lookup("add_permission");case 3:return r=n.sent,a={item_or_role:t.item_or_role,item_id:t.item_id,item_model:t.item_model,permission_type:t.permission_selected,permission_roles:t.roles,permission_actors:t.actors},l=function(e){var n=e.data.permission.pk,i=e.data.permission.permission_data[0];s("ADD_OR_UPDATE_PERMISSION",{pk:n,data:i}),"role"==t.item_or_role?s("ADD_PERMISSION_TO_ROLE",{pk:n,role:t.roles}):s("ADD_PERMISSION_TO_ITEM",{permission_pk:n,item_id:t.item_id,item_model:t.item_model})},n.abrupt("return",i("actionAPIcall",{url:r,params:a,implementationCallback:l}));case 7:case"end":return n.stop()}}),n)})))()},updatePermission:function(e,t){return Object(s["a"])(regeneratorRuntime.mark((function n(){var s,i,o,r,a,l;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return s=e.commit,e.state,i=e.dispatch,o=e.getters,n.next=3,o.url_lookup("update_permission");case 3:return r=n.sent,a={permission_id:t.permission_id,permission_roles:t.roles,permission_actors:t.actors},l=function(e){pk=e.data.permission.pk,permission_data=e.data.permission.permission_data[0],s("ADD_OR_UPDATE_PERMISSION",{pk:pk,data:permission_data})},n.abrupt("return",i("actionAPIcall",{url:r,params:a,implementationCallback:l}));case 7:case"end":return n.stop()}}),n)})))()},removePermission:function(e,t){return Object(s["a"])(regeneratorRuntime.mark((function n(){var s,i,o,r,a,l;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return s=e.commit,i=e.dispatch,o=e.getters,n.next=3,o.url_lookup("delete_permission");case 3:return r=n.sent,a={permission_id:t.permission_id},l=function(e){s("REMOVE_PERMISSION_FROM_ROLES",{pk:e.data.removed_permission_pk}),"item"==t.item_or_role&&s("REMOVE_PERMISSION_FROM_ITEM",{pk:e.data.removed_permission_pk,item_id:t.item_id,item_model:t.item_model}),s("DELETE_PERMISSION",{pk:e.data.removed_permission_pk})},n.abrupt("return",i("actionAPIcall",{url:r,params:a,implementationCallback:l}));case 7:case"end":return n.stop()}}),n)})))()},addCondition:function(e,t){return Object(s["a"])(regeneratorRuntime.mark((function n(){var s,i,o,r,a,l;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return s=e.commit,e.state,i=e.dispatch,o=e.getters,n.next=3,o.url_lookup("add_condition");case 3:return r=n.sent,a={condition_type:t.condition_type,permission_or_leadership:t.permission_or_leadership,target_permission_id:t.permission_id,leadership_type:t.leadership_type,combined_condition_data:t.combined_condition_data},l=function(e){"permission"==e.data.permission_or_leadership?s("SET_PERMISSION_CONDITION",{pk:e.data.target_permission_id,condition_data:e.data.condition_info}):s("SET_LEADERSHIP_CONDITION",{leadership_type:e.data.leadership_type,condition_data:e.data.condition_info})},n.abrupt("return",i("actionAPIcall",{url:r,params:a,implementationCallback:l}));case 7:case"end":return n.stop()}}),n)})))()},editCondition:function(e,t){return Object(s["a"])(regeneratorRuntime.mark((function n(){var s,i,o,r,a,l;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return s=e.commit,e.state,i=e.dispatch,o=e.getters,n.next=3,o.url_lookup("edit_condition");case 3:return r=n.sent,a={permission_or_leadership:t.permission_or_leadership,element_id:t.element_id,target_permission_id:t.permission_id,leadership_type:t.leadership_type,combined_condition_data:t.combined_condition_data},l=function(e){"permission"==e.data.permission_or_leadership?s("SET_PERMISSION_CONDITION",{pk:e.data.target_permission_id,condition_data:e.data.condition_info}):s("SET_LEADERSHIP_CONDITION",{leadership_type:e.data.leadership_type,condition_data:e.data.condition_info})},n.abrupt("return",i("actionAPIcall",{url:r,params:a,implementationCallback:l}));case 7:case"end":return n.stop()}}),n)})))()},removeCondition:function(e,t){return Object(s["a"])(regeneratorRuntime.mark((function n(){var s,i,o,r,a,l;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return s=e.commit,e.state,i=e.dispatch,o=e.getters,n.next=3,o.url_lookup("remove_condition");case 3:return r=n.sent,a={permission_or_leadership:t.permission_or_leadership,target_permission_id:t.permission_id,leadership_type:t.leadership_type,element_id:t.element_id},l=function(e){"permission"==e.data.permission_or_leadership?s("SET_PERMISSION_CONDITION",{pk:e.data.target_permission_id,condition_data:e.data.condition_info}):s("SET_LEADERSHIP_CONDITION",{leadership_type:e.data.leadership_type,condition_data:e.data.condition_info})},n.abrupt("return",i("actionAPIcall",{url:r,params:a,implementationCallback:l}));case 7:case"end":return n.stop()}}),n)})))()},getPermission:function(e,t){return Object(s["a"])(regeneratorRuntime.mark((function n(){var s,i,o,r,a,l;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return s=e.commit,e.state,i=e.dispatch,o=e.getters,n.next=3,o.url_lookup("get_permission");case 3:return r=n.sent,a={permission_pk:t.permission_pk},l=function(e){s("ADD_OR_UPDATE_PERMISSION",{pk:t.permission_pk,data:e.data.permission_data})},n.abrupt("return",i("getAPIcall",{url:r,params:a,implementationCallback:l}));case 7:case"end":return n.stop()}}),n)})))()},getPermissionsForItem:function(e,t){return Object(s["a"])(regeneratorRuntime.mark((function n(){var s,i,o,r,a,l;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return s=e.commit,e.state,i=e.dispatch,o=e.getters,n.next=3,o.url_lookup("get_permissions");case 3:return r=n.sent,a={item_id:t.item_id,item_model:t.item_model},l=function(e){for(var t in s("REPLACE_ITEM_PERMISSIONS",{item_id:e.data.item_id,item_model:e.data.item_model,pks:e.data.permission_pks}),s("REPLACE_NESTED_ITEM_PERMISSIONS",{item_id:e.data.item_id,item_model:e.data.item_model,pks:e.data.nested_pks}),e.data.permissions)s("ADD_OR_UPDATE_PERMISSION",{pk:t,data:e.data.permissions[t]}),s("UPDATE_ROLE_WITH_PERMISSION",{permission:e.data.permissions[t]});s("ADD_OR_UPDATE_PERMISSION_OVERRIDE_DATA",{item_id:e.data.item_id,item_model:e.data.item_model,foundational:e.data.foundational,governing:e.data.governing})},n.abrupt("return",i("getAPIcall",{url:r,params:a,implementationCallback:l}));case 7:case"end":return n.stop()}}),n)})))()},changePermissionOverride:function(e,t){return Object(s["a"])(regeneratorRuntime.mark((function n(){var s,i,o,r,a,l;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return s=e.commit,e.state,i=e.dispatch,o=e.getters,n.next=3,o.url_lookup("change_item_permission_override");case 3:return r=n.sent,a={item_id:t.item_id,item_model:t.item_model,enable_or_disable:t.enable_or_disable,governing_or_foundational:t.governing_or_foundational},l=function(e){s("ADD_OR_UPDATE_PERMISSION_OVERRIDE_DATA",{item_id:e.data.item_id,item_model:e.data.item_model,foundational:e.data.foundational,governing:e.data.governing})},n.abrupt("return",i("actionAPIcall",{url:r,params:a,implementationCallback:l}));case 7:case"end":return n.stop()}}),n)})))()},toggleAnyone:function(e,t){return Object(s["a"])(regeneratorRuntime.mark((function n(){var s,i,o,r,a,l;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return s=e.commit,i=e.getters,o=e.dispatch,n.next=3,i.url_lookup("toggle_anyone");case 3:return r=n.sent,a={permission_id:t.permission_id,enable_or_disable:t.enable_or_disable},l=function(e){var t=e.data.permission.pk,n=e.data.permission.permission_data[0];s("ADD_OR_UPDATE_PERMISSION",{pk:t,data:n})},n.abrupt("return",o("actionAPIcall",{url:r,params:a,implementationCallback:l}));case 7:case"end":return n.stop()}}),n)})))()},checkPermissions:function(e,t){return Object(s["a"])(regeneratorRuntime.mark((function n(){var s,i,o,r,a,l;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return s=e.commit,e.state,i=e.dispatch,o=e.getters,n.next=3,o.url_lookup("check_permissions");case 3:return r=n.sent,a={permissions:t.permissions},l=function(e){var n=null;n=t.aliases?g(t.aliases,e.data.user_permissions):e.data.user_permissions,s("ADD_OR_UPDATE_CURRENT_USER_PERMISSIONS",{user_permissions:n})},n.abrupt("return",i("getAPIcall",{url:r,params:a,implementationCallback:l}));case 7:case"end":return n.stop()}}),n)})))()},refreshRoleData:function(e,t){return Object(s["a"])(regeneratorRuntime.mark((function n(){var s,i,o,r,a,l;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return s=e.commit,e.state,i=e.dispatch,o=e.getters,n.next=3,o.url_lookup("get_data_for_role");case 3:return r=n.sent,a={role_name:t.role},l=function(e){for(var n in s("REPLACE_ROLE_PERMISSIONS",{role:t.role,pks:e.data.role_permissions}),e.data.permissions)s("ADD_OR_UPDATE_PERMISSION",{pk:n,data:e.data.permissions[n]})},n.abrupt("return",i("getAPIcall",{url:r,params:a,implementationCallback:l}));case 7:case"end":return n.stop()}}),n)})))()}}},w=k,y={state:{lists:[]},getters:{getListData:function(e,t){return function(t){return e.lists.find((function(e){return e.pk==t}))}}},mutations:{ADD_OR_UPDATE_LIST:function(e,t){for(var n in e.lists)if(e.lists[n].pk==t.list_data.pk)return void e.lists.splice(n,1,t.list_data);e.lists.push(t.list_data)},DELETE_LIST:function(e,t){for(var n in e.lists)e.lists[n].pk==t.deleted_list_pk&&e.lists.splice(n,1)},ADD_ROW:function(e,t){var n=e.lists.find((function(e){return e.pk==t.list_pk}));t.index||0==t.index?n.rows.splice(t.index,0,t.row_content):n.rows.push(t.row_content)},EDIT_ROW:function(e,t){var n=e.lists.find((function(e){return e.pk==t.list_pk}));n.rows.splice(t.index,1,t.row_content)},MOVE_ROW:function(e,t){var n=e.lists.find((function(e){return e.pk==t.list_pk})),s=n.rows.splice(t.old_index,1);n.rows.splice(t.new_index,0,s[0])},DELETE_ROW:function(e,t){var n=e.lists.find((function(e){return e.pk==t.list_pk}));n.rows.splice(t.index,1)}},actions:{getLists:function(e,t){return Object(s["a"])(regeneratorRuntime.mark((function t(){var n,s,i,o,r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,e.state,s=e.dispatch,i=e.getters,t.next=3,i.url_lookup("get_lists");case 3:return o=t.sent,r={},a=function(e){for(var t in e.data.lists)n("ADD_OR_UPDATE_LIST",{list_data:e.data.lists[t]})},t.abrupt("return",s("getAPIcall",{url:o,params:r,implementationCallback:a}));case 7:case"end":return t.stop()}}),t)})))()},addList:function(e,t){return Object(s["a"])(regeneratorRuntime.mark((function n(){var s,i,o,r,a,l;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return s=e.commit,e.state,i=e.dispatch,o=e.getters,n.next=3,o.url_lookup("add_list");case 3:return r=n.sent,a={name:t.name,description:t.description,configuration:t.configuration},l=function(e){s("ADD_OR_UPDATE_LIST",{list_data:e.data.list_data})},n.abrupt("return",i("actionAPIcall",{url:r,params:a,implementationCallback:l}));case 7:case"end":return n.stop()}}),n)})))()},editList:function(e,t){return Object(s["a"])(regeneratorRuntime.mark((function n(){var s,i,o,r,a,l;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return s=e.commit,e.state,i=e.dispatch,o=e.getters,n.next=3,o.url_lookup("edit_list");case 3:return r=n.sent,a={name:t.name,description:t.description,list_pk:t.list_pk,configuration:t.configuration},l=function(e){s("ADD_OR_UPDATE_LIST",{list_data:e.data.list_data})},n.abrupt("return",i("actionAPIcall",{url:r,params:a,implementationCallback:l}));case 7:case"end":return n.stop()}}),n)})))()},deleteList:function(e,t){return Object(s["a"])(regeneratorRuntime.mark((function n(){var s,i,o,r,a,l;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return s=e.commit,e.state,i=e.dispatch,o=e.getters,n.next=3,o.url_lookup("delete_list");case 3:return r=n.sent,a={list_pk:t.list_pk},l=function(e){s("DELETE_LIST",{deleted_list_pk:e.data.deleted_list_pk})},n.abrupt("return",i("actionAPIcall",{url:r,params:a,implementationCallback:l}));case 7:case"end":return n.stop()}}),n)})))()},addRow:function(e,t){return Object(s["a"])(regeneratorRuntime.mark((function n(){var s,i,o,r,a,l;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return s=e.commit,e.state,i=e.dispatch,o=e.getters,n.next=3,o.url_lookup("add_row");case 3:return r=n.sent,a={list_pk:t.list_pk,row_content:t.row_content,index:t.index},l=function(e){s("ADD_ROW",{list_pk:t.list_pk,row_content:t.row_content,index:t.index})},n.abrupt("return",i("actionAPIcall",{url:r,params:a,implementationCallback:l}));case 7:case"end":return n.stop()}}),n)})))()},editRow:function(e,t){return Object(s["a"])(regeneratorRuntime.mark((function n(){var s,i,o,r,a,l;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return s=e.commit,e.state,i=e.dispatch,o=e.getters,n.next=3,o.url_lookup("edit_row");case 3:return r=n.sent,a={list_pk:t.list_pk,row_content:t.row_content,index:t.index},l=function(e){s("EDIT_ROW",{list_pk:t.list_pk,row_content:t.row_content,index:t.index})},n.abrupt("return",i("actionAPIcall",{url:r,params:a,implementationCallback:l}));case 7:case"end":return n.stop()}}),n)})))()},moveRow:function(e,t){return Object(s["a"])(regeneratorRuntime.mark((function n(){var s,i,o,r,a,l;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return s=e.commit,e.state,i=e.dispatch,o=e.getters,n.next=3,o.url_lookup("move_row");case 3:return r=n.sent,a={list_pk:t.list_pk,old_index:t.old_index,new_index:t.new_index,index:t.index},l=function(e){s("MOVE_ROW",{list_pk:t.list_pk,old_index:t.old_index,new_index:t.new_index})},n.abrupt("return",i("actionAPIcall",{url:r,params:a,implementationCallback:l}));case 7:case"end":return n.stop()}}),n)})))()},deleteRow:function(e,t){return Object(s["a"])(regeneratorRuntime.mark((function n(){var s,i,o,r,a,l;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return s=e.commit,e.state,i=e.dispatch,o=e.getters,n.next=3,o.url_lookup("delete_row");case 3:return r=n.sent,a={list_pk:t.list_pk,index:t.index},l=function(e){s("DELETE_ROW",{list_pk:t.list_pk,index:t.index})},n.abrupt("return",i("actionAPIcall",{url:r,params:a,implementationCallback:l}));case 7:case"end":return n.stop()}}),n)})))()}}},O=y,C={state:{templates:{}},getters:{scopeTemplates:function(e,t){return function(t){return e.templates[t]}}},mutations:{REPLACE_SCOPE_TEMPLATES:function(e,t){i["default"].set(e.templates,t.scope,t.templates)}},actions:{getTemplatesForScope:function(e,t){return Object(s["a"])(regeneratorRuntime.mark((function n(){var s,i,o,r,a,l;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return s=e.commit,e.state,i=e.dispatch,o=e.getters,n.next=3,o.url_lookup("get_templates_for_scope");case 3:return r=n.sent,a={scope:t.scope},l=function(e){s("REPLACE_SCOPE_TEMPLATES",{scope:e.data.scope,templates:e.data.templates})},n.abrupt("return",i("getAPIcall",{url:r,params:a,implementationCallback:l}));case 7:case"end":return n.stop()}}),n)})))()},applyTemplate:function(e,t){return Object(s["a"])(regeneratorRuntime.mark((function n(){var s,i,o,r,a,l,c,m;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.commit,e.state,s=e.dispatch,i=e.getters,o=e.rootState,r=null,a=null,t.target_model&&t.target_pk?(r=t.target_model,a=t.target_pk):(r="group",a=o.group_pk),n.next=6,i.url_lookup("apply_template");case 6:return l=n.sent,c={supplied_fields:t.supplied_fields,target_pk:a,target_model:r,template_model_pk:t.template_model_pk},m=function(e){},n.abrupt("return",s("actionAPIcall",{url:l,params:c,implementationCallback:m}));case 10:case"end":return n.stop()}}),n)})))()}}},x=C;i["default"].use(o["a"]);t["a"]=new o["a"].Store({modules:{concord_actions:l,documents:d,forums:p,permissions:w,governance:h,comments:m,templates:x,simplelists:O},state:{group_pk:null,group_name:"",group_description:"",user_pk:null,user_name:"",urls:{}},getters:{url_lookup:function(e,t){return function(t){return new Promise((function(n,s){var i=setInterval((function(){0!=Object.keys(e.urls).length&&(clearInterval(i),n("/"+e.urls[t]))}),1e3)}))}}},mutations:{UPDATE_GROUP_PK:function(e,t){e.group_pk=t.group_pk},UPDATE_GROUP_NAME:function(e,t){e.group_name=t.group_name},UPDATE_GROUP_DESCRIPTION:function(e,t){e.group_description=t.group_description},SET_URL_MAP:function(e,t){e.urls=t.urls},UPDATE_USER_PK:function(e,t){e.user_pk=t.user_pk},UPDATE_USER_NAME:function(e,t){e.user_name=t.user_name}},actions:{initialize_url_data:function(e,t){var n=e.commit;e.state,e.dispatch;n("SET_URL_MAP",{urls:t.urls})},initialize_group_data:function(e,t){var n=e.commit;e.state,e.dispatch;n("SET_URL_MAP",{urls:t.urls}),n("UPDATE_GROUP_NAME",{group_name:t.group_name}),n("UPDATE_GROUP_DESCRIPTION",{group_description:t.group_description}),n("UPDATE_GROUP_PK",{group_pk:t.group_pk}),n("UPDATE_USER_PK",{user_pk:t.user_pk}),n("UPDATE_USER_NAME",{user_name:t.user_name})},get_url_data:function(e,t){var n=e.commit,s=e.state,i=(e.dispatch,"/groups/api/get_urls/"+s.group_pk+"/");return r["a"].post(i).then((function(e){n("SET_URL_MAP",{urls:t.urls})})).catch((function(e){throw console.log(e),e}))},changeGroupName:function(e,t){return Object(s["a"])(regeneratorRuntime.mark((function n(){var s,i,o,r,a,l;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return s=e.commit,i=e.getters,e.state,o=e.dispatch,n.next=3,i.url_lookup("change_group_name");case 3:return r=n.sent,a={group_pk:t.group_pk,new_name:t.new_name},l=function(e){s("UPDATE_GROUP_NAME",{group_name:e.data.group_name})},n.abrupt("return",o("actionAPIcall",{url:r,params:a,implementationCallback:l}));case 7:case"end":return n.stop()}}),n)})))()},changeGroupDescription:function(e,t){return Object(s["a"])(regeneratorRuntime.mark((function n(){var s,i,o,r,a,l;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return s=e.commit,i=e.getters,e.state,o=e.dispatch,n.next=3,i.url_lookup("change_group_description");case 3:return r=n.sent,a={group_pk:t.group_pk,group_description:t.group_description},l=function(e){s("UPDATE_GROUP_DESCRIPTION",{group_description:e.data.group_description})},n.abrupt("return",o("actionAPIcall",{url:r,params:a,implementationCallback:l}));case 7:case"end":return n.stop()}}),n)})))()},actionAPIcall:function(e,t){e.commit,e.state;var n=e.dispatch,s=t.url,i=t.params,o=t.implementationCallback;return r["a"].post(s,i).then((function(e){return"invalid"!=e.data.action_status&&n("updateActions",{response:e}),"implemented"==e.data.action_status&&o(e),e})).catch((function(e){throw console.log("Error: ",e),e}))},getAPIcall:function(e,t){e.commit,e.state,e.dispatch;var n=t.url,s=t.params,i=t.implementationCallback;return r["a"].post(n,s).then((function(e){i(e)})).catch((function(e){throw console.log(e),e}))}}})},"4ae4":function(e,t,n){"use strict";var s=n("1e2a"),i=n("f7bd"),o=n("2877"),r=Object(o["a"])(i["default"],s["a"],s["b"],!1,null,null,null);t["default"]=r.exports},"583c":function(e,t,n){"use strict";var s=n("bc3a"),i=n.n(s);i.a.defaults.xsrfCookieName="csrftoken",i.a.defaults.xsrfHeaderName="X-CSRFTOKEN",i.a.defaults.headers={headers:{"Content-Type":"application/json"}},t["a"]=i.a},6348:function(e,t,n){"use strict";n("6a75")},"6a75":function(e,t,n){},"74b7":function(e,t,n){"use strict";n("f4bc")},"79a1":function(e,t,n){},"874c":function(e,t,n){var s=n("ded3");e.exports={props:["response"],data:function(){return{unique_identifier:null,showAlert:!1}},watch:{response:function(e){e&&(this.showAlert=!0)}},computed:s(s({},Vuex.mapState({group_pk:function(e){return e.group_pk}})),{},{status:function(){return this.response&&this.response.data.action_status?this.response.data.action_status:null},variant:function(){return"waiting"==this.status?"warning":"invalid"==this.status?"danger":"rejected"==this.status?"outline-danger":"implemented"==this.status?"success":void(this.status&&console.log("WARNING: unexpected status: ",this.status))},processed_message:function(){if(this.status){var e="/groups/"+this.group_pk+"/#/actions/detail/"+this.response.data.action_pk;if("implemented"==this.status)return"You have successfully "+this.response.data.action_description+". If you want to provide context for this action, you can do so <a id='history_link' href='"+e+"'>here</a>.";if("waiting"==this.status)return"<span>There is a <a id='condition_link' href='"+e+"'>condition</a> on your action which must be resolved before your action can be implemented.</span>";if("invalid"==this.status)return this.response.data.user_message;if("rejected"==this.status)return this.response.data.user_message?"This action cannot be taken because: "+this.response.data.user_message:"You do not have permission to take this action."}}})}},"9c8e":function(e,t,n){"use strict";var s=n("874c"),i=n.n(s);t["default"]=i.a},"9e74":function(e,t,n){"use strict";n("1e57")},a18c:function(e,t,n){"use strict";var s=n("2b0e"),i=n("8c4f"),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",{staticClass:"d-flex my-3"},[n("span",{staticClass:"flex-grow-1"},[n("span",{staticClass:"font-weight-bold"},[n("b-icon-people-fill",{staticClass:"mr-2"}),e._v(e._s(e.group_name))],1),n("router-link",{class:e.is_active("resources"),attrs:{id:"resources_button",to:{name:"home"}}},["tab-active"==e.is_active("resources")?n("b-icon-grid-fill",{staticClass:"ml-3 mr-1"}):n("b-icon-grid",{staticClass:"ml-3 mr-1"}),e._v(" Resources ")],1),n("router-link",{class:e.is_active("history"),attrs:{id:"group_history_button",to:{name:"action-history",params:{item_id:e.group_pk,item_model:"group",item_name:e.group_name}}}},["tab-active"==e.is_active("history")?n("b-icon-clock-fill",{staticClass:"ml-3 mr-1"}):n("b-icon-clock-history",{staticClass:"ml-3 mr-1"}),e._v(" History ")],1),n("router-link",{class:e.is_active("governance"),attrs:{id:"governance_button",to:{name:"governance"}}},["tab-active"==e.is_active("governance")?n("b-icon-person-check-fill",{staticClass:"ml-3 mr-1"}):n("b-icon-person-check",{staticClass:"ml-3 mr-1"}),e._v(" Group Roles ")],1),n("router-link",{class:e.is_active("permissions"),attrs:{id:"group_permissions_button",to:{name:"group-permissions",params:{group_pk:e.group_pk}}}},["tab-active"==e.is_active("permissions")?n("b-icon-shield-lock-fill",{staticClass:"ml-3 mr-1"}):n("b-icon-shield-lock",{staticClass:"ml-3 mr-1"}),e._v(" Permissions ")],1)],1),n("span",[n("action-response-component",{attrs:{response:e.group_response}}),e.user_permissions.join_group&&!e.user_in_group?n("b-button",{staticClass:"py-0",attrs:{id:"join_group_button",variant:"link"},on:{click:function(t){return e.join_group()}}},[e._v("join")]):e._e(),e.user_permissions.leave_group&&e.user_in_group?n("b-button",{staticClass:"py-0",attrs:{id:"leave_group_button",variant:"link"},on:{click:function(t){return e.leave_group()}}},[e._v("leave")]):e._e(),e.user_permissions.change_name||e.user_permissions.change_description?n("span",[n("router-link",{attrs:{to:{name:"edit-group"},id:"edit_group_button"}},[n("b-button",{staticClass:"py-0",attrs:{variant:"link"}},[e._v("edit")])],1)],1):e._e()],1)])},r=[],a=n("5530"),l=n("2f62"),c=n("4360"),m=n("c33f"),_={components:{ActionResponseComponent:m["default"]},store:c["a"],data:function(){return{group_response:null}},created:function(){this.checkPermissions({permissions:{add_members_to_community:{member_pk_list:[c["a"].state.user_pk]},remove_members_from_community:{member_pk_list:[c["a"].state.user_pk]},change_name_of_community:null,change_group_description:null},aliases:{add_members_to_community:"join_group",remove_members_from_community:"leave_group",change_name_of_community:"change_name",change_group_description:"change_description"}})},computed:Object(a["a"])(Object(a["a"])(Object(a["a"])({},l["a"].mapState({group_name:function(e){return e.group_name},group_description:function(e){return e.group_description},group_pk:function(e){return e.group_pk},user_pk:function(e){return e.user_pk},user_permissions:function(e){return e.permissions.current_user_permissions}})),l["a"].mapGetters(["userInGroup"])),{},{user_in_group:function(){return this.userInGroup(this.user_pk)}}),methods:Object(a["a"])(Object(a["a"])({},l["a"].mapActions(["checkPermissions","addMembers","removeMembers"])),{},{join_group:function(){var e=this;this.addMembers({user_pks:[c["a"].state.user_pk]}).then((function(t){"implemented"==t.data.action_status?window.location.reload():e.group_response=t}))},leave_group:function(){var e=this;this.removeMembers({user_pks:[c["a"].state.user_pk]}).then((function(t){"implemented"==t.data.action_status?window.location.reload():e.group_response=t}))},is_active:function(e){return this.$route.meta.tab==e?"tab-active":"tab-inactive"}})},d=_,u=(n("1b4e"),n("2877")),p=Object(u["a"])(d,o,r,!1,null,"07cca877",null),f=p.exports,h=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[n("ForumListComponent"),n("hr"),n("SimpleListListComponent"),n("hr"),n("DocumentListComponent")],1)},b=[],v=n("a209"),g=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[n("h5",{staticClass:"pb-3"},[n("span",{staticClass:"font-weight-bold"},[e._v("Forums")]),e.user_permissions.add_forum?n("form-button-and-modal",{attrs:{item_model:"forum",button_text:"+ add new",supplied_variant:"light",supplied_classes:"btn-sm ml-3"}}):e._e()],1),n("b-card-group",{attrs:{columns:""}},e._l(e.processed_forums,(function(t){var s=t.pk,i=t.name,o=t.description;return n("b-card",{key:s,staticClass:"bg-white"},[n("b-card-text",[n("div",{staticClass:"font-weight-bold text-info"},[n("router-link",{staticClass:"forum-link text-info",attrs:{to:{name:"forum-detail",params:{item_id:s}}}},[e._v(" "+e._s(i))])],1),n("div",{staticClass:"forum-description mt-1"},[e._v(e._s(o))])])],1)})),1)],1)},k=[],w=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[n("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal",value:e.modal_id,expression:"modal_id"}],class:e.classes,attrs:{id:e.button_id,variant:e.variant}},[e._v(" "+e._s(e.button_text))]),n("b-modal",{attrs:{id:e.modal_id,title:e.title_string,size:"lg","hide-footer":""}},[e._l(e.configuration_fields,(function(t){return n("field-component",{key:t.field_name,attrs:{initial_field:t},on:{"field-changed":e.change_field}})})),n("action-response-component",{staticClass:"my-2",attrs:{response:e.action_response}}),n("b-button",{staticClass:"btn-sm",attrs:{variant:"outline-secondary",id:e.submit_button_id},on:{click:e.takeAction}},[e._v("submit")])],2)],1)},y=[],O=(n("fb6a"),n("da66")),C={document:[{field_name:"name",label:"Document name:",type:"CharField",required:!1,value:null},{field_name:"description",label:"Document description:",type:"CharField",required:!1,value:null}],forum:[{field_name:"name",label:"Forum name:",type:"CharField",required:!1,value:null},{field_name:"description",label:"Forum description:",type:"CharField",required:!1,value:null}],post:[{field_name:"title",label:"Post title:",type:"CharField",required:!1,value:null},{field_name:"content",label:"Post content:",type:"CharField",required:!1,value:null}],comment:[{field_name:"text",label:"Comment text:",type:"CharField",required:!1,value:null}]},x={props:["item_id","item_model","button_text","supplied_variant","supplied_classes","supplied_params","id_add"],components:{ActionResponseComponent:m["default"],FieldComponent:O["a"]},mixins:[v["a"]],store:c["a"],data:function(){return{item_instance:null,action_response:null,configuration_fields:[]}},created:function(){if(this.configuration_fields=JSON.parse(JSON.stringify(C[this.item_model])),this.item_id){var e="get"+this.capitalize(this.item_model)+"Data";this.item_instance=this[e](this.item_id)}},watch:{item_instance:function(e){e&&this.initialize_configuration_fields()}},computed:Object(a["a"])(Object(a["a"])({},l["a"].mapGetters(["getDocumentData","getForumData","getPostData","getCommentData"])),{},{mode:function(){return this.item_id?"edit":"add"},to_add:function(){return this.id_add?this.id_add:"default"},id_preface:function(){return this.mode+"_"+this.item_model+"_"+this.to_add},button_id:function(){return this.id_preface+"_button"},modal_id:function(){return this.id_preface+"_modal"},submit_button_id:function(){return this.id_preface+"_submit_button"},title_string:function(){return this.capitalize(this.mode)+" "+this.item_model},variant:function(){return this.supplied_variant?this.supplied_variant:"outline-secondary"},classes:function(){return this.supplied_classes?this.supplied_classes:"btn-sm mr-2"}}),methods:Object(a["a"])(Object(a["a"])({},l["a"].mapActions(["addDocument","editDocument","addForum","editForum","addPost","editPost","addComment","editComment"])),{},{capitalize:function(e){return e.charAt(0).toUpperCase()+e.slice(1)},initialize_configuration_fields:function(){if(this.item_instance)for(var e in this.configuration_fields){var t=this.configuration_fields[e];t["value"]=this.item_instance[t["field_name"]]}},get_params:function(){var e={};for(var t in this.item_id&&(e["pk"]=this.item_id),this.supplied_params&&(e=Object.assign({},e,this.supplied_params)),this.configuration_fields){var n=this.configuration_fields[t];n["value"]&&(e[n["field_name"]]=n["value"])}return e},takeAction:function(){var e=this,t=this.mode+this.capitalize(this.item_model);this[t](this.get_params()).then((function(t){if(e.action_response=t,"add"==e.mode&&"implemented"==t.data.action_status&&"comment"!=e.item_model){var n={item_id:t.data.created_instance.pk};e.supplied_params&&(n=Object.assign({},n,e.supplied_params)),e.$router.push({name:e.item_model+"-detail",params:n})}}))}})},E=x,R=Object(u["a"])(E,w,y,!1,null,null,null),A=R.exports,j={components:{FormButtonAndModal:A},store:c["a"],computed:Object(a["a"])(Object(a["a"])({},l["a"].mapState({forums:function(e){return e.forums.forums},user_permissions:function(e){return e.permissions.current_user_permissions},group_name:function(e){return e.group_name}})),{},{processed_forums:function(){var e=[];for(var t in this.forums)"Gov"==this.forums[t].special?e.unshift(this.forums[t]):e.push(this.forums[t]);return e}}),created:function(){var e=this;this.checkPermissions({permissions:{add_forum:null}}).catch((function(t){e.error_message=t,console.log(t)}))},methods:Object(a["a"])({},l["a"].mapActions(["checkPermissions"]))},S=j,P=(n("c0a4"),Object(u["a"])(S,g,k,!1,null,"761ff990",null)),D=P.exports,I=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[n("h5",{staticClass:"pb-3"},[n("span",{staticClass:"font-weight-bold"},[e._v("Lists")]),n("router-link",{attrs:{to:{name:"add-new-list"}}},[e.user_permissions.add_list?n("b-button",{staticClass:"btn-sm ml-3",attrs:{variant:"light",id:"add_list_default_button"}},[e._v("+ add new")]):e._e()],1)],1),n("b-card-group",{attrs:{columns:""}},e._l(e.lists,(function(t,s){var i=t.pk,o=t.name,r=t.description,a=t.rows;return n("b-card",{key:i,staticClass:"bg-white"},[n("b-card-text",[n("div",{staticClass:"font-weight-bold text-info"},[n("router-link",{staticClass:"text-info",attrs:{to:{name:"list-detail",params:{list_id:i}},id:"link_to_list_"+s}},[e._v(" "+e._s(o)+" "),n("span",{staticClass:"text-dark ml-2"},[n("small",[e._v(e._s(a.length)+" items")])])])],1),n("div",{staticClass:"list-description mt-1"},[e._v(e._s(r))])])],1)})),1),0===Object.keys(e.lists).length?n("span",[e._v("There are no lists yet.")]):e._e()],1)},T=[],M={store:c["a"],data:function(){return{}},computed:Object(a["a"])({},l["a"].mapState({lists:function(e){return e.simplelists.lists},user_permissions:function(e){return e.permissions.current_user_permissions},group_name:function(e){return e.group_name}})),created:function(){var e=this;this.getLists(),this.checkPermissions({permissions:{add_list:null}}).catch((function(t){e.error_message=t,console.log(t)}))},methods:Object(a["a"])({},l["a"].mapActions(["checkPermissions","getLists"]))},N=M,F=Object(u["a"])(N,I,T,!1,null,null,null),L=F.exports,U=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[n("h5",{staticClass:"pb-3"},[n("span",{staticClass:"font-weight-bold"},[e._v("Documents")]),e.user_permissions.add_document?n("form-button-and-modal",{attrs:{item_model:"document",button_text:"+ add new",supplied_variant:"light",supplied_classes:"btn-sm ml-3"}}):e._e()],1),n("b-card-group",{attrs:{columns:""}},e._l(e.documents,(function(t,s){var i=t.pk,o=t.name,r=t.description;return n("b-card",{key:i,staticClass:"bg-white"},[n("b-card-text",[n("div",{staticClass:"font-weight-bold text-info"},[n("router-link",{staticClass:"text-info",attrs:{to:{name:"document-detail",params:{item_id:i}},id:"link_to_doc_"+s}},[e._v(" "+e._s(o)+" ")])],1),n("div",{staticClass:"document-description mt-1"},[e._v(e._s(r))])])],1)})),1),0===Object.keys(e.documents).length?n("span",[e._v("There are no documents yet.")]):e._e()],1)},$=[],G={components:{FormButtonAndModal:A},store:c["a"],data:function(){return{}},computed:Object(a["a"])({},l["a"].mapState({documents:function(e){return e.documents.documents},user_permissions:function(e){return e.permissions.current_user_permissions}})),created:function(){var e=this;this.getDocuments(),this.checkPermissions({permissions:{add_document:null}}).catch((function(t){e.error_message=t,console.log(t)}))},methods:Object(a["a"])({},l["a"].mapActions(["checkPermissions","getDocuments"]))},q=G,z=Object(u["a"])(q,U,$,!1,null,null,null),V=z.exports,B={store:c["a"],mixins:[v["b"]],components:{ForumListComponent:D,SimpleListListComponent:L,DocumentListComponent:V},data:function(){return{}}},W=B,Y=Object(u["a"])(W,h,b,!1,null,null,null),H=Y.exports,K=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-modal",{attrs:{id:"edit_group_modal",size:"md",visible:!0},on:{hide:function(t){return e.$router.go(-1)}},scopedSlots:e._u([{key:"modal-header",fn:function(){return[n("h5",[e._v("Edit Your Group")])]},proxy:!0},{key:"modal-footer",fn:function(){return[n("b-button",{staticClass:"btn-sm",attrs:{variant:"outline-secondary"},on:{click:e.save_edited_group}},[e._v(" save")]),n("router-link",{staticClass:"button",attrs:{to:{name:"home"}}},[n("b-button",{staticClass:"btn-sm",attrs:{variant:"outline-secondary"}},[e._v("close")])],1)]},proxy:!0}])},[e.user_permissions.change_name?n("b-form-group",{attrs:{id:"name",label:"Group name:","label-for":"group_name"}},[n("b-form-input",{attrs:{id:"group_name",required:""},model:{value:e.edited_group_name,callback:function(t){e.edited_group_name=t},expression:"edited_group_name"}})],1):n("span",[e._v(e._s(e.edited_group_name))]),e.user_permissions.change_description?n("b-form-group",{attrs:{id:"description",label:"Group description:","label-for":"group_description"}},[n("b-form-textarea",{attrs:{id:"group_description",required:"",placeholder:"Add a group description"},model:{value:e.edited_group_description,callback:function(t){e.edited_group_description=t},expression:"edited_group_description"}})],1):n("span",[e._v(e._s(e.edited_group_description))]),n("action-response-component",{attrs:{response:e.change_name_response}}),n("action-response-component",{attrs:{response:e.change_description_response}})],1)},J=[],X={store:c["a"],components:{ActionResponseComponent:m["default"]},data:function(){return{item_model:"group",edited_group_name:"",edited_group_description:"",change_name_response:null,change_description_response:null}},created:function(){this.edited_group_name=this.group_name,this.edited_group_description=this.group_description,this.checkPermissions({permissions:{change_name_of_community:null,change_group_description:null},aliases:{change_name_of_community:"change_name",change_group_description:"change_description"}})},computed:Object(a["a"])({},l["a"].mapState({group_name:function(e){return e.group_name},group_description:function(e){return e.group_description},user_permissions:function(e){return e.permissions.current_user_permissions},item_id:function(e){return e.group_pk}})),methods:Object(a["a"])(Object(a["a"])({},l["a"].mapActions(["changeGroupName","changeGroupDescription","checkPermissions"])),{},{save_edited_group:function(){var e=this;this.group_name!=this.edited_group_name&&this.changeGroupName({group_pk:this.item_id,new_name:this.edited_group_name}).then((function(t){e.change_name_response=t})),this.group_description!=this.edited_group_description&&this.changeGroupDescription({group_pk:this.item_id,group_description:this.edited_group_description}).then((function(t){e.change_description_response=t}))}})},Q=X,Z=Object(u["a"])(Q,K,J,!1,null,null,null),ee=Z.exports,te=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"bg-white p-3"},[n("b-container",{attrs:{fluid:"",id:"action_history_table"}},[n("b-row",[n("b-col",{staticClass:"my-4",attrs:{lg:"6"}},[n("b-form-group",{staticClass:"mb-0",attrs:{label:"Filter","label-cols-sm":"3","label-align-sm":"left","label-size":"sm","label-for":"filterInput"}},[n("b-input-group",{attrs:{size:"sm"}},[n("b-form-input",{attrs:{type:"search",id:"filterInput",placeholder:"Type to Search"},model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}})],1)],1)],1),n("b-col",{staticClass:"my-4",attrs:{lg:"6"}},[n("b-form-group",{staticClass:"mb-0",attrs:{label:"Sort","label-cols-sm":"3","label-align-sm":"right","label-size":"sm","label-for":"sortBySelect"}},[n("b-input-group",{attrs:{size:"sm"}},[n("b-form-select",{staticClass:"w-75",attrs:{id:"sortBySelect",options:e.sortOptions},scopedSlots:e._u([{key:"first",fn:function(){return[n("option",{attrs:{value:""}})]},proxy:!0}]),model:{value:e.sortBy,callback:function(t){e.sortBy=t},expression:"sortBy"}}),n("b-form-select",{staticClass:"w-25",attrs:{size:"sm",disabled:!e.sortBy},model:{value:e.sortDesc,callback:function(t){e.sortDesc=t},expression:"sortDesc"}},[n("option",{domProps:{value:!1}},[e._v("Asc")]),n("option",{domProps:{value:!0}},[e._v("Desc")])])],1)],1)],1)],1),n("b-table",{attrs:{hover:"",fixed:"",items:e.item_actions,fields:e.action_fields,"sort-by":e.sortBy,"sort-desc":e.sortDesc,filter:e.filter,filterIncludedFields:e.filterOn,id:"action_history_table_element"},on:{"update:sortBy":function(t){e.sortBy=t},"update:sort-by":function(t){e.sortBy=t},"update:sortDesc":function(t){e.sortDesc=t},"update:sort-desc":function(t){e.sortDesc=t}},scopedSlots:e._u([{key:"cell(description)",fn:function(t){return[n("router-link",{staticClass:"text-info",attrs:{to:{name:"user-permissions",params:{user_pk:t.item.actor_pk}}}},[e._v(" "+e._s(t.item.actor)+" ")]),e._v(" "+e._s(t.item.description)+" "),n("router-link",{attrs:{to:{name:"action-detail",params:{action_id:t.item.action_pk}}}},[n("b-button",{staticClass:"btn-sm action-link-button float-right",attrs:{variant:"outline-secondary"}},[e._v("link")])],1),n("br"),n("small",[n("b",[e._v("Status: "+e._s(t.item.status)+" "),"implemented"==t.item.status?n("span",[e._v(" (passed via "+e._s(t.item.resolution_passed_by)+" permission)")]):e._e()]),e._v(" "+e._s(t.item.display_date)+" ")]),t.item.has_condition.exists?n("b-badge",{attrs:{variant:"info"}},[e._v("has condition")]):e._e(),t.item.is_template?n("b-badge",{attrs:{variant:"warning"}},[e._v("template action")]):e._e()]}}])})],1)],1)},ne=[],se={props:["item_id","item_model","item_name"],store:c["a"],data:function(){return{action_fields:[{key:"description",label:"Actions",sortable:!1}],sortBy:"created",sortDesc:!0,sortOptions:[{text:"Date created",value:"created"},{text:"Status",value:"status"},{text:"Actor",value:"actor"}],filter:null,filterOn:[]}},created:function(){this.loadActions({item_id:this.final_item_id,item_model:this.final_item_model}).catch((function(e){console.log(e)}))},computed:Object(a["a"])(Object(a["a"])({},l["a"].mapState({actions:function(e){return e.concord_actions.actions}})),{},{final_item_id:function(){return"undefined"===typeof this.item_id?c["a"].state.group_pk:this.item_id},final_item_model:function(){return"undefined"===typeof this.item_model?"group":this.item_model},final_item_name:function(){return"undefined"===typeof this.item_name?c["a"].state.group_name:this.item_name},item_actions:function(){var e=this.final_item_id+"_"+this.final_item_model;return this.actions[e]?this.actions[e]:[]},modal_id:function(){return"action_history_modal_"+this.final_item_id+"_"+this.final_item_model}}),methods:Object(a["a"])({},l["a"].mapActions(["loadActions"]))},ie=se,oe=Object(u["a"])(ie,te,ne,!1,null,null,null),re=oe.exports,ae=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.ready_to_render?n("span",[n("h5",[e._v("Details for action "+e._s(e.action.action_pk)+": "+e._s(e.action.description))]),n("b-card",{staticClass:"my-3",attrs:{"border-variant":"secondary"}},[e._v(" Action "+e._s(e.action.action_pk)+" ("+e._s(e.action.description)+") was taken by "+e._s(e.action.actor)+" on "+e._s(e.action.display_date)+". ")]),e.action.is_template?n("b-card",{staticClass:"my-3",attrs:{"bg-variant":"light",header:"This is a template action"}},[n("b-card-text",[n("p",[e._v("When a template action is implemented, it applies a series of other actions. Here are the actions implemented by "),e.action.template_description.name?n("span",[e._v("the "+e._s(e.action.template_description.name))]):n("span",[e._v("this")]),e._v(" template:")]),n("ul",{staticClass:"my-2"},e._l(e.action.template_description.actions,(function(t){return n("li",{key:t},[e._v(e._s(t))])})),0),n("p",[e._v("The user has added the following information:")]),n("ul",{staticClass:"my-2"},[e._l(e.action.template_description.supplied_fields.fields,(function(t){return n("li",{key:t},[e._v(" "+e._s(t))])})),0==e.action.template_description.supplied_fields.fields.length?n("li",[e._v(" There are no user-supplied fields for this template.")]):e._e()],2),n("p",[e._v(e._s(e.action.template_description.foundational))])])],1):e._e(),e.action.has_condition?n("b-card",{staticClass:"my-3",attrs:{"border-variant":"secondary","no-body":""}},[n("b-card-title",{staticClass:"bg-light text-center pt-2 m-0 text-muted"},[n("h5",[e._v("Conditions on Action")])]),n("b-tabs",{attrs:{card:""}},e._l(e.ordered_conditions,(function(t){return n("b-tab",{key:t.pk,attrs:{title:t.type+" "+t.pk}},[n("b-card-text",[n(t.type,{tag:"component",attrs:{condition_pk:t.pk,condition_type:t.type,action_details:e.action}})],1)],1)})),1)],1):e._e(),n("b-card",{staticClass:"my-3",attrs:{"border-variant":"secondary"}},[n("CommentListComponent",{staticClass:"my-3",attrs:{item_id:e.action_id,item_model:"action"}})],1)],1):e._e()},le=[],ce=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[e.user_permissions.add_comment?n("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.edit_comment_modal",modifiers:{edit_comment_modal:!0}}],staticClass:"btn-sm add-comment mr-2"},[e._v(" Add a comment")]):e._e(),e.item_comments.length>0&&0==e.show_comments?n("b-button",{staticClass:"btn-sm show-comments mr-2",on:{click:function(t){e.show_comments=!0}}},[e._v(" Show comments")]):e._e(),e.item_comments.length>0&&1==e.show_comments?n("b-button",{staticClass:"btn-sm hide-comments mr-2",on:{click:function(t){e.show_comments=!1}}},[e._v(" Hide comments")]):e._e(),e.show_comments?n("span",e._l(e.item_comments,(function(t){return n("comment-component",{key:t.pk,attrs:{comment:t,item_id:e.item_id,item_model:e.item_model}})})),1):e._e(),n("b-modal",{attrs:{id:"edit_comment_modal",title:"Edit comment","hide-footer":""}},[n("b-form-group",{attrs:{id:"comment_text_group"}},[n("b-form-textarea",{attrs:{id:"text",name:"text",placeholder:"Write your comment here"},model:{value:e.comment_text,callback:function(t){e.comment_text=t},expression:"comment_text"}})],1),n("action-response-component",{attrs:{response:e.edit_comment_response}}),n("b-button",{staticClass:"btn-sm",attrs:{variant:"outline-secondary",id:"add_comment_default_button"},on:{click:e.add_comment}},[e._v("submit")])],1)],1)},me=[],_e=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[n("b-card",{staticClass:"my-3",scopedSlots:e._u([{key:"footer",fn:function(){return[e.user_permissions.edit_comment?n("form-button-and-modal",{attrs:{id_add:"comment"+e.comment.pk,item_id:e.comment.pk,item_model:"comment",button_text:"edit"}}):e._e(),e.user_permissions.delete_comment?n("b-button",{staticClass:"btn-sm mr-2",attrs:{variant:"outline-secondary"},on:{click:function(t){return e.delete_comment(e.comment.pk)}}},[e._v("delete")]):e._e(),n("action-response-component",{attrs:{response:e.delete_comment_response}}),n("router-link",{attrs:{to:{name:"action-history",params:{item_id:e.comment.pk,item_model:"comment",item_name:e.comment_name(e.comment.text)}}}},[n("b-button",{staticClass:"btn-sm mr-2",attrs:{variant:"outline-secondary"}},[e._v("comment history")])],1),n("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.item_permissions_modal",modifiers:{item_permissions_modal:!0}}],staticClass:"btn-sm mr-2",attrs:{variant:"outline-secondary",id:"comment_permissions"}},[e._v("comment permissions")]),n("item-permissions-modal",{attrs:{item_id:e.comment.pk,item_model:"comment",item_name:e.comment_name(e.comment.text)}}),n("br"),n("small",{staticClass:"text-muted"},[e._v("Posted "+e._s(e.display_date(e.comment.created_at))+" by "+e._s(e.getUserName(e.comment.commentor_pk)))])]},proxy:!0}])},[n("b-card-text",[e._v(e._s(e.comment.text))])],1)],1)},de=[],ue=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-modal",{attrs:{id:"item_permissions_modal",title:e.title_string,size:"xl","hide-footer":""}},[n("simple-permissions-display-component",{attrs:{permissions:e.permissions,item_id:e.item_id,item_model:e.item_model,item_name:e.item_name}})],1)},pe=[],fe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[n("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal",value:"add_permission_modal_"+e.modal,expression:"'add_permission_modal_'  + modal"}],staticClass:"mr-1 mb-4 btn-sm outline-secondary",attrs:{id:"add_permission_button_"+e.modal,variant:"outline-secondary"}},[e._v("Add Permission")]),n("add-permission-modal-component",{attrs:{default_selection:e.default_selection,role_to_edit:e.role_to_edit,item_name:e.item_name,item_id:e.item_id,item_model:e.item_model,modal_id:"add_permission_modal_"+e.modal}}),n("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal",value:"edit_permissions_modal_"+e.modal,expression:"'edit_permissions_modal_'  + modal"}],staticClass:"mr-1 mb-4 btn-sm",attrs:{id:"edit_permissions_button_"+e.modal,variant:"outline-secondary"}},[e._v("Edit Permissions")]),n("edit-permissions-modal-component",{attrs:{permissions:e.permissions,item_name:e.item_name,item_id:e.item_id,item_model:e.item_model,modal_id:"edit_permissions_modal_"+e.modal}}),e.user_permissions.apply_template?n("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal",value:"apply_template_modal_"+e.item_model,expression:"'apply_template_modal_' + item_model"}],staticClass:"mr-1 mb-4 btn-sm",attrs:{id:"apply_templates",variant:"outline-secondary"}},[e._v("Apply Templates")]):e._e(),n("template-modal",{attrs:{scope:e.item_model,target_id:e.item_id,target_model:e.item_model}}),n("router-link",{attrs:{id:"group_permissions_button",to:{name:"group-permissions",params:{group_pk:e.group_pk}}}},[n("b-button",{staticClass:"mb-4 btn-sm",attrs:{variant:"outline-secondary"}},[e._v("See All Permissions In Group")])],1),n("permissions-table-component",{staticClass:"my-2",attrs:{permissions:e.permissions}})],1)},he=[],be=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-modal",{attrs:{id:e.modal_id_to_use,title:e.title,"hide-footer":""}},[n("add-permission-component",{attrs:{default_selection:e.default_selection,role_to_edit:e.role_to_edit,item_id:e.item_id,item_model:e.item_model}})],1)},ve=[],ge=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[n("error-component",{attrs:{message:e.error_message}}),e.permission_selected?n("div",[e.role_to_edit?e._e():n("span",{staticClass:"mb-3"},[n("p",{staticClass:"mt-3 font-weight-bold"},[e._v("Give people this permission")]),n("span",{staticClass:"text-left"},[e.anyone_can_take_permission?n("span",[e._v(" Anyone can take the action described by this permission. "),e.user_permissions.give_anyone_permission?n("span",[e._v(" You can remove the permission from anyone, and give it to the previous roles and/or actors specified. "),n("b-button",{attrs:{variant:"outline-secondary",size:"sm"},on:{click:function(t){return e.toggle_anyone("disable")}}},[e._v(" Remove from anyone")])],1):e._e()]):n("span",[e._v(" Currently, only the roles and actors below have this permission. "),e.user_permissions.remove_anyone_from_permission?n("span",[e._v(" You can give permission to everyone. "),n("b-button",{attrs:{variant:"outline-secondary",size:"sm"},on:{click:function(t){return e.toggle_anyone("enable")}}},[e._v(" Give to everyone")]),n("p")],1):e._e()])]),e.anyone_can_take_permission?e._e():n("span",{staticClass:"text-left"},[n("div",{staticClass:"input-group mb-3 permissionrolefield"},[e._v(" Roles who have this permission "),n("vue-multiselect",{attrs:{multiple:!0,options:e.rolesAsOptions,"allow-empty":!0,"close-on-select":!0,placeholder:"Select roles",label:"name","track-by":"name",name:"permission_role_select",disabled:e.permission_exists&&!(e.user_permissions.add_role_to_permission||e.user_permissions.remove_role_from_permission)},model:{value:e.permission_roles_selected,callback:function(t){e.permission_roles_selected=t},expression:"permission_roles_selected"}})],1),n("div",{staticClass:"input-group mb-3 permissionactorfield"},[e._v(" Actors who have this permission "),n("vue-multiselect",{attrs:{multiple:!0,options:e.groupMembersAsOptions,"allow-empty":!0,"close-on-select":!0,placeholder:"Select actors",label:"name","track-by":"pk",name:"permission_actor_select",disabled:e.permission_exists&&!(e.user_permissions.add_actor_to_permission||e.user_permissions.remove_actor_from_permission)},model:{value:e.permission_actors_selected,callback:function(t){e.permission_actors_selected=t},expression:"permission_actors_selected"}})],1)])]),n("action-response-component",{attrs:{response:e.add_permission_response}}),n("b-button",{staticClass:"mt-3",attrs:{size:"sm",id:"save_permission_button"},on:{click:function(t){return e.add_permission()}}},[e._v(" Save permission")]),n("b-button",{staticClass:"mt-3",attrs:{size:"sm",id:"discard_permission_button"},on:{click:function(t){return e.clearState()}}},[e._v(" Discard")])],1):n("div",{staticClass:"my-3"},[n("b",[e._v("Select permission to add")]),n("vue-multiselect",{attrs:{options:e.permission_options_to_use,"allow-empty":!0,"close-on-select":!0,placeholder:"Select permission",label:"text","track-by":"value","max-height":200,name:"permission_select","group-values":"permissions","group-label":"section"},model:{value:e.permission_selected,callback:function(t){e.permission_selected=t},expression:"permission_selected"}})],1)],1)},ke=[],we=(n("4160"),n("a630"),n("c975"),n("4ec9"),n("d3b7"),n("3ca3"),n("159b"),n("ddb0"),n("53ca")),ye=n("8e5f"),Oe=n.n(ye),Ce=n("4ae4"),xe={props:["default_selection","role_to_edit","item_id","item_model"],components:{"vue-multiselect":Oe.a,ErrorComponent:Ce["default"],ActionResponseComponent:m["default"]},mixins:[v["a"]],store:c["a"],data:function(){return{permission_exists:!1,permission_selected:"",error_message:"",add_permission_response:null,permission_roles_selected:[],permission_actors_selected:[],anyone_can_take_permission:!1}},created:function(){var e=this;this.default_selection&&(this.permission_selected=this.get_full_selection(this.default_selection));var t=this.item_model+"_"+this.item_id;this.checkPermissions({permissions:{add_permission:{alt_target:t}}}).catch((function(t){e.error_message=t,console.log(t)}))},watch:{default_selection:function(e){return this.get_full_selection(e)},permission_options:function(e){this.default_selection&&(this.permission_selected=this.get_full_selection(this.default_selection))}},computed:Object(a["a"])(Object(a["a"])(Object(a["a"])({},l["a"].mapState({permissions:function(e){return e.permissions.permissions},permission_options:function(e){return e.permissions.permission_options},user_permissions:function(e){return e.permissions.current_user_permissions}})),l["a"].mapGetters(["rolesAsOptions","groupMembersAsOptions","getPermissionConfigurationFields","role_to_options","user_pk_to_options"])),{},{item_or_role:function(){return this.role_to_edit?"role":this.item_id&&this.item_model?"item":void 0},item_permission_options:function(){return this.permission_options[this.item_model]},permission_options_to_use:function(){var e=this;if(!this.role_to_edit)return this.create_permission_groups(this.item_permission_options);var t=function(){var t=new Map;for(var n in e.permission_options)e.permission_options[n].forEach((function(e){t.has(e.value)||t.set(e.value,e)}));return{v:e.create_permission_groups(Array.from(t.values()))}}();return"object"===Object(we["a"])(t)?t.v:void 0}}),methods:Object(a["a"])(Object(a["a"])({},l["a"].mapActions(["checkPermissions","addPermission"])),{},{clearState:function(){this.default_selection||(this.permission_selected=""),this.permission_actors_selected=[],this.permission_roles_selected=[],this.configuration_fields=[]},get_full_selection:function(e){for(var t in this.permission_options_to_use)for(var n in this.permission_options_to_use[t].permissions)if(this.permission_options_to_use[t].permissions[n].value==e)return this.permission_options_to_use[t].permissions[n]},create_permission_groups:function(e){var t={};for(var n in e){var s=e[n];s.group in t?t[s.group].push(s):t[s.group]=[s]}var i=[];for(var o in t)["Leadership","Community","Permissions","Miscellaneous"].indexOf(o)>-1?i.push({section:o,permissions:t[o]}):i.unshift({section:o,permissions:t[o]});return i},get_roles:function(){return"role"==this.item_or_role?[this.role_to_edit]:"item"==this.item_or_role?this.permission_roles_selected:void 0},add_permission:function(){var e=this;this.addPermission({item_or_role:this.item_or_role,item_id:this.item_id,item_model:this.item_model,permission_selected:this.permission_selected.value,roles:this.get_roles(),actors:this.permission_actors_selected,anyone:this.anyone}).then((function(t){e.add_permission_response=t}))},toggle_anyone:function(e){this.anyone_can_take_permission="enable"==e}})},Ee=xe,Re=Object(u["a"])(Ee,ge,ke,!1,null,null,null),Ae=Re.exports,je={props:["default_selection","role_to_edit","item_id","item_model","modal_id","item_name"],components:{AddPermissionComponent:Ae},computed:{title:function(){return"Add permission to "+this.item_name},modal_id_to_use:function(){return this.modal_id?this.modal_id:"add-permission-modal"}}},Se=je,Pe=Object(u["a"])(Se,be,ve,!1,null,null,null),De=Pe.exports,Ie=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-modal",{attrs:{id:e.modal_id_to_use,title:e.title,size:"xl"}},[e.permissions.length?e._e():n("p",{staticClass:"mt-3"},[e._v("No permissions have been set yet.")]),e._l(e.permissions,(function(t){return n("edit-permission-component",{key:t.pk,staticClass:"mt-3",attrs:{permission:t,item_id:e.item_id,item_model:e.item_model}})}))],2)},Te=[],Me=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[n("error-component",{attrs:{message:e.error_message}}),n("action-response-component",{attrs:{response:e.edit_permission_response}}),n("b-button-group",{staticClass:"my-2",attrs:{id:e.pair_element_id}},[n("b-button",{staticClass:"rounded-left btn-sm",attrs:{variant:"light"}},[n("span",{staticClass:"permission-display",attrs:{id:"display_"+e.pair_element_id}},[e._v(e._s(e.permission.display))]),e.can_edit_permission?n("span",{staticClass:"badge badge-light ml-1 edit-permission",on:{click:function(t){e.edit_permission=!0}}},[e._v("")]):e._e(),e.user_permissions.remove_permission?n("span",{staticClass:"badge badge-light ml-1 delete-permission",on:{click:function(t){return e.delete_permission()}}},[e._v("")]):e._e()]),n("b-button",{staticClass:"rounded-right btn-sm"},[e.permission.condition?n("span",{attrs:{id:"condition_"+e.pair_element_id+"_existing"}},[n("span",[e._v("on the condition that "+e._s(e.permission.condition.how_to_pass_overall))]),e.user_permissions.remove_condition?n("router-link",{attrs:{to:{name:"conditions",params:{conditioned_on:e.permission.pk,dependency_scope:e.item_model}}}},[n("span",{staticClass:"badge badge-secondary ml-1 edit-condition",class:e.css_name(e.permission.change_name)},[e._v("")])]):e._e()],1):n("span",{attrs:{id:"condition_"+e.pair_element_id}},[e.user_permissions.add_condition?n("router-link",{attrs:{to:{name:"conditions",params:{conditioned_on:e.permission.pk,dependency_scope:e.item_model}}}},[n("b-button",{staticClass:"add-condition btn-sm"},[e._v("add condition")])],1):n("span",[e._v("no condition")])],1)])],1),e.edit_permission?n("span",[n("div",{staticClass:"p-3"},[e.role_to_edit?e._e():n("span",[n("p",{staticClass:"mt-3 font-weight-bold"},[e._v("Give people this permission")]),n("span",{staticClass:"text-left"},[e.anyone_can_take_permission?n("span",[e._v(" Anyone can take the action described by this permission. "),e.user_permissions.give_anyone_permission?n("span",[e._v(" You can remove the permission from anyone, and give it to the previous roles and/or actors specified. "),n("b-button",{attrs:{variant:"outline-secondary",size:"sm"},on:{click:function(t){return e.toggle_anyone("disable")}}},[e._v(" Remove from anyone")])],1):e._e()]):n("span",[e._v(" Currently, only the roles and actors below have this permission. "),e.user_permissions.remove_anyone_from_permission?n("span",[e._v(" You can give permission to everyone. "),n("b-button",{attrs:{variant:"outline-secondary",size:"sm"},on:{click:function(t){return e.toggle_anyone("enable")}}},[e._v(" Give to everyone")]),n("p")],1):e._e()])]),e.anyone_can_take_permission?e._e():n("span",{staticClass:"text-left"},[n("div",{staticClass:"input-group mb-3 permissionrolefield"},[e._v(" Roles who have this permission "),n("vue-multiselect",{attrs:{multiple:!0,options:e.rolesAsOptions,"allow-empty":!0,"close-on-select":!0,placeholder:"Select roles",label:"name","track-by":"name",name:"permission_role_select",disabled:e.permission_exists&&!(e.user_permissions.add_role_to_permission||e.user_permissions.remove_role_from_permission)},model:{value:e.permission_roles_selected,callback:function(t){e.permission_roles_selected=t},expression:"permission_roles_selected"}})],1),n("div",{staticClass:"input-group mb-3 permissionactorfield"},[e._v(" Actors who have this permission "),n("vue-multiselect",{attrs:{multiple:!0,options:e.groupMembersAsOptions,"allow-empty":!0,"close-on-select":!0,placeholder:"Select actors",label:"name","track-by":"pk",name:"permission_actor_select",disabled:e.permission_exists&&!(e.user_permissions.add_actor_to_permission||e.user_permissions.remove_actor_from_permission)},model:{value:e.permission_actors_selected,callback:function(t){e.permission_actors_selected=t},expression:"permission_actors_selected"}})],1)])]),n("div",{staticClass:"block"},[n("b-button",{staticClass:"mt-3",attrs:{size:"sm",id:"update_permission_button"},on:{click:function(t){return e.update_permission()}}},[e._v(" Update permission")]),n("b-button",{staticClass:"mt-3",attrs:{size:"sm",id:"discard_permission_button"},on:{click:function(t){e.edit_permission=!1}}},[e._v(" Discard changes")])],1)])]):e._e()],1)},Ne=[],Fe=(n("ac1f"),n("5319"),{props:["permission","role_to_edit","item_id","item_model"],store:c["a"],components:{"vue-multiselect":Oe.a,ErrorComponent:Ce["default"],ActionResponseComponent:m["default"]},mixins:[v["a"]],data:function(){return{permission_exists:!0,edit_permission:!1,edit_condition:!1,permission_roles_selected:[],permission_actors_selected:[],error_message:"",edit_permission_response:null}},created:function(){var e=this,t="permissionsitem_"+this.permission.pk;this.checkPermissions({permissions:{remove_permission:{alt_target:t},add_condition:{alt_target:t},remove_condition:{alt_target:t},add_actor_to_permission:{alt_target:t},remove_actor_from_permission:{alt_target:t},add_role_to_permission:{alt_target:t},remove_role_from_permission:{alt_target:t},give_anyone_permission:{alt_target:t},remove_anyone_from_permission:{alt_target:t}}}).catch((function(t){e.error_message=t,console.log(t)}))},watch:{permission:function(e){this.refresh_permission_data(e)},edit_permission:function(e){1==e&&this.refresh_permission_data(this.permission)}},computed:Object(a["a"])(Object(a["a"])(Object(a["a"])({},l["a"].mapState({permissions:function(e){return e.permissions.permissions},user_permissions:function(e){return e.permissions.current_user_permissions}})),l["a"].mapGetters(["rolesAsOptions","groupMembersAsOptions","role_to_options","user_pk_to_options"])),{},{anyone_can_take_permission:function(){return this.permission.anyone},item_or_role:function(){return this.role_to_edit?"role":this.item_id&&this.item_model?"item":void 0},pair_element_id:function(){return"permission_element_"+this.permission.pk},can_edit_permission:function(){return!!(this.user_permissions.add_actor_to_permission||this.user_permissions.remove_actor_from_permission||this.user_permissions.add_role_to_permission||this.user_permissions.remove_role_from_permission||this.user_permissions.give_anyone_permission||this.user_permissions.remove_anyone_from_permission)}}),methods:Object(a["a"])(Object(a["a"])({},l["a"].mapActions(["checkPermissions","removePermission","updatePermission","toggleAnyone"])),{},{get_roles:function(){return"role"==this.item_or_role?[this.role_to_edit]:"item"==this.item_or_role?this.permission_roles_selected:void 0},refresh_permission_data:function(e){e&&this.item_id&&this.item_model&&(this.permission_roles_selected=this.role_to_options(e.roles),this.permission_actors_selected=this.user_pk_to_options(e.actors))},clearState:function(){this.edit_permission=!1,this.edit_condition=!1,this.permission_roles_selected=[],this.permission_actors_selected=[]},css_name:function(e){return e.replace(" ","_")},delete_permission:function(){var e=this;this.removePermission({permission_id:this.permission.pk,item_id:this.item_id,item_model:this.item_model,item_or_role:this.item_or_role}).then((function(t){e.edit_permission_response=t,"implemented"==t.data.action_status&&e.clearState()}))},update_permission:function(){var e=this;this.updatePermission({permission_id:this.permission.pk,roles:this.get_roles(),actors:this.permission_actors_selected}).then((function(t){e.edit_permission_response=t,"implemented"==t.data.action_status&&e.clearState()}))},toggle_anyone:function(e){var t=this;this.toggleAnyone({permission_id:this.permission.pk,enable_or_disable:e}).then((function(e){t.edit_permission_response=e}))}})}),Le=Fe,Ue=Object(u["a"])(Le,Me,Ne,!1,null,null,null),$e=Ue.exports,Ge={props:["permissions","item_id","item_model","item_name","modal_id"],components:{EditPermissionComponent:$e},computed:{title:function(){return"Edit permissions for "+this.item_name},modal_id_to_use:function(){return this.modal_id?this.modal_id:"edit-permissions-modal"}}},qe=Ge,ze=Object(u["a"])(qe,Ie,Te,!1,null,null,null),Ve=ze.exports,Be=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-table",{attrs:{small:"","sticky-header":"390px","no-border-collapse":"",responsive:"",items:e.restructured_permissions,fields:e.fields,filter:e.filter_data,"filter-function":e.filter_function},scopedSlots:e._u([{key:"cell(condition)",fn:function(t){return[t.item.condition?n("span",[e._v("True")]):e._e()]}},{key:"cell(change_name)",fn:function(t){return[n("div",{staticClass:"text-nowrap"},[n("b-icon-info-circle-fill",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"mr-2",attrs:{title:t.item.display,"font-scale":".8"}}),n("small",[e._v(e._s(t.item.change_name))])],1)]}},{key:"cell(target)",fn:function(t){return[n("div",{staticClass:"text-nowrap"},[n("small",[e._v(e._s(t.item.target))])])]}},{key:"cell()",fn:function(t){return[void 0!=t.value.has_perm?n("span",[1==t.value.has_perm?n("b-icon-check-circle-fill",{attrs:{variant:"success"}}):e._e(),0==t.value.has_perm?n("b-icon-x",{attrs:{variant:"danger"}}):e._e(),t.value.has_perm&&t.value.more_info?n("b-icon-question-diamond",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip",value:{title:t.value.more_info,delay:0},expression:"{ title: data.value.more_info, delay: 0 }"}]}):e._e()],1):n("span",[e._v(" "+e._s(t.value)+" ")])]}}])})},We=[],Ye=(n("99af"),n("caad"),n("13d5"),n("4fad"),n("b64b"),n("07ac"),n("2532"),n("3835")),He={props:["permissions","filter_data"],store:c["a"],data:function(){return{prepend_constant_fields:[{key:"change_name",label:"Change",sortable:!0,stickyColumn:!0},{key:"target",label:"Target",sortable:!0},{key:"you",label:"You",sortable:!0}],append_constant_fields:[{key:"anyone",label:"Anyone",class:"text-center"}],error_message:""}},computed:Object(a["a"])(Object(a["a"])(Object(a["a"])({},l["a"].mapGetters(["allRoleNames","rolesForMember"])),l["a"].mapState({owner_condition:function(e){return e.permissions.owner_condition},governor_condition:function(e){return e.permissions.governor_condition},user_pk:function(e){return e.user_pk}})),{},{fields:function(){if(this.permissions){var e=[];return this.allRoleNames.forEach((function(t){return e.push({key:t,sortable:!1,class:"text-center"})})),this.prepend_constant_fields.concat(e.concat(this.append_constant_fields))}return this.constant_fields},restructured_permissions:function(){return this.get_restructured_permissions(this.permissions,this.allRoleNames)}}),methods:{get_restructured_permissions:function(e,t){var n=this,s={},i=this.rolesForMember(this.user_pk),o=function(o){var r=e[o],c=r.change_name+r.target,m=r.condition?r.condition.how_to_pass_overall:null;if(c in s){var _=s[c];return Object.entries(_).forEach((function(e){var t=Object(Ye["a"])(e,2),n=t[0],s=t[1];"owners"!=n&&"governors"!=n&&s.more_info&&m&&(s.more_info=s.more_info+" OR "+m)})),"continue"}var d={change_name:r.change_name,foundational:r.is_foundational,section:r.section,display:r.display,target:r.target,anyone:{has_perm:r.anyone,more_info:m}};a=n,t.forEach((function(e){var t={has_perm:!1};r.roles.includes(e)&&(t={has_perm:!0,more_info:m}),"owners"==e&&r.owner_permission&&(t={has_perm:!0},a.owner_condition&&(t["more_info"]=a.owner_condition.how_to_pass_overall)),"governors"==e&&r.governor_permission&&(t={has_perm:!0},a.governor_condition&&(t["more_info"]=a.governor_condition.how_to_pass_overall)),d[e]=t})),l={has_perm:!1,more_info:null},r.actors.includes(n.user_pk)&&(l=n.update_perm(l,!0,m)),r.anyone&&(l=n.update_perm(l,!0,m)),i.forEach((function(e){d[e]["has_perm"]&&(l="owners"==e&&a.owner_condition?a.update_perm(l,!0,a.owner_condition.how_to_pass_overall):"governors"==e&&a.governor_condition?a.update_perm(l,!0,a.governor_condition.how_to_pass_overall):a.update_perm(l,!0,m))})),d["you"]=l,s[c]=d};for(var r in e){var a,l;o(r)}return Object.values(s)},update_perm:function(e,t,n){return t?e.has_perm?e.more_info&&n?{has_perm:!0,more_info:e.more_info+" OR "+n}:{has_perm:!0,more_info:null}:{has_perm:t,more_info:n}:e},filter_function:function(e,t){if(Object.keys(t).includes("searchString")){var n=Object.values(e).reduce((function(e,t){return e?e+" "+t:t}),"");if(!n.includes(t["searchString"]))return!1}return!(Object.keys(t).includes("roleSelected")&&!e[t["roleSelected"]]["has_perm"])&&((!Object.keys(t).includes("targetSelected")||e["target"]==t["targetSelected"])&&(!Object.keys(t).includes("sectionSelected")||e["section"]==t["sectionSelected"]))}}},Ke=He,Je=Object(u["a"])(Ke,Be,We,!1,null,null,null),Xe=Je.exports,Qe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-modal",{attrs:{id:"apply_template_modal_"+e.scope,title:e.title_string,size:"xl","hide-footer":""}},[n("template-component",{attrs:{scope:e.new_scope,target_id:e.target_id,target_model:e.target_model}})],1)},Ze=[],et=n("a669"),tt={props:["scope","target_id","target_model"],components:{TemplateComponent:et["a"]},computed:{title_string:function(){return"Apply "+this.scope+" templates"},new_scope:function(){return"group"==this.scope?"community":this.scope}}},nt=tt,st=Object(u["a"])(nt,Qe,Ze,!1,null,null,null),it=st.exports,ot={components:{AddPermissionModalComponent:De,EditPermissionsModalComponent:Ve,PermissionsTableComponent:Xe,TemplateModal:it},props:["permissions","item_id","item_model","item_name","modal_id","default_selection","role_to_edit"],created:function(){var e=this.item_model+"_"+this.item_id;this.checkPermissions({permissions:{apply_template:{alt_target:e}}}).catch((function(e){console.log(e)}))},computed:Object(a["a"])(Object(a["a"])({},l["a"].mapState({group_pk:function(e){return e.group_pk},user_permissions:function(e){return e.permissions.current_user_permissions}})),{},{modal:function(){return this.modal_id?this.modal_id:"default"}}),methods:Object(a["a"])({},l["a"].mapActions(["checkPermissions"]))},rt=ot,at=Object(u["a"])(rt,fe,he,!1,null,null,null),lt=at.exports,ct={props:["item_id","item_model","item_name"],components:{SimplePermissionsDisplayComponent:lt},store:c["a"],created:function(){var e=this;this.getPermissionsForItem({item_id:this.item_id,item_model:this.item_model}).catch((function(t){e.error_message=t}))},computed:Object(a["a"])(Object(a["a"])({},l["a"].mapGetters(["permissionsForItem"])),{},{title_string:function(){return"Permissions for "+this.item_model+" '"+this.item_name+"'"},permissions:function(){return this.permissionsForItem(this.item_id+"_"+this.item_model,!0)}}),methods:Object(a["a"])({},l["a"].mapActions(["getPermissionsForItem"]))},mt=ct,_t=Object(u["a"])(mt,ue,pe,!1,null,null,null),dt=_t.exports,ut={components:{ItemPermissionsModal:dt,ActionResponseComponent:m["default"],FormButtonAndModal:A},props:["item_id","item_model","comment"],store:c["a"],data:function(){return{comment_text:"",error_message:"",edit_comment_response:null,delete_comment_response:null}},created:function(){var e=this,t="comment_"+this.comment.pk;this.checkPermissions({permissions:{edit_comment:{alt_target:t},delete_comment:{alt_target:t}}}).catch((function(t){e.error_message=t,console.log(t)})),this.comment_text=this.comment.text},computed:Object(a["a"])(Object(a["a"])({},l["a"].mapState({user_permissions:function(e){return e.permissions.current_user_permissions}})),l["a"].mapGetters(["getUserName"])),methods:Object(a["a"])(Object(a["a"])({},l["a"].mapActions(["checkPermissions","deleteComment"])),{},{display_date:function(e){return Date(e)},comment_name:function(e){return e.length>50?"Comment: "+e.substr(0,50)+"...'":"Comment: '"+e+"'"},delete_comment:function(e){var t=this;this.deleteComment({item_id:this.item_id,item_model:this.item_model,comment_pk:e}).then((function(e){"implemented"==!e.data.action_status&&(t.delete_comment_response=e)}))}})},pt=ut,ft=Object(u["a"])(pt,_e,de,!1,null,null,null),ht=ft.exports,bt={components:{ActionResponseComponent:m["default"],CommentComponent:ht},props:["item_id","item_model"],store:c["a"],data:function(){return{show_comments:!0,comment_text:"",edit_comment_response:null}},created:function(){var e=this;this.getComments({item_id:this.item_id,item_model:this.item_model}).catch((function(e){console.log("Error getting comment data")}));var t=this.item_model+"_"+this.item_id;this.checkPermissions({permissions:{add_comment:{alt_target:t}}}).catch((function(t){e.error_message=t,console.log(t)}))},computed:Object(a["a"])(Object(a["a"])(Object(a["a"])({},l["a"].mapState({user_permissions:function(e){return e.permissions.current_user_permissions}})),l["a"].mapGetters(["getCommentsForItem","getUserName"])),{},{item_comments:function(){return this.item_id&&this.item_model?this.getCommentsForItem(this.item_id+"_"+this.item_model):[]}}),methods:Object(a["a"])(Object(a["a"])({},l["a"].mapActions(["checkPermissions","getComments","addComment"])),{},{display_date:function(e){return Date(e)},comment_name:function(e){return e.length>50?"Comment: "+e.substr(0,50)+"...'":"Comment: '"+e+"'"},add_comment:function(){var e=this;this.addComment({item_id:this.item_id,item_model:this.item_model,text:this.comment_text}).then((function(t){e.edit_comment_response=t}))}})},vt=bt,gt=Object(u["a"])(vt,ce,me,!1,null,null,null),kt=gt.exports,wt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",["waiting"!=e.condition_status||e.user_has_taken_action?e._e():n("span",{staticClass:"my-5"},[e.can_approve?n("span",[e._m(0),n("b-form-radio-group",{attrs:{id:"btn-radios-1",options:e.button_options,buttons:"",name:"radios-btn-default","button-variant":"outline-primary"},model:{value:e.button_selected,callback:function(t){e.button_selected=t},expression:"button_selected"}}),n("b-button",{attrs:{id:"save_approve_choice"},on:{click:e.update_conditional}},[e._v("Save")])],1):n("span",[e._m(1)])]),e.user_has_taken_action?n("span",["approved"==e.condition_status||"rejected"==e.condition_status?n("span",{staticClass:"my-5"},[e._v(" You have "+e._s(e.condition_status)+" "+e._s(e.action_details.actor)+"'s action. Nothing further is needed from you. ")]):e._e()]):e._e(),e.user_has_taken_action?e._e():n("span",["approved"==e.condition_status||"rejected"==e.condition_status?n("span",{staticClass:"my-5"},[e._v(" "+e._s(e.action_details.actor)+"'s action has been "+e._s(e.condition_status)+". ")]):e._e()]),e.error_message?n("span",{staticClass:"text-danger mt-3"},[e._v(e._s(e.error_message))]):e._e()])},yt=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("p",{staticClass:"mb-3"},[n("b",[e._v("Please approve or reject this action.")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("p",{staticClass:"mb-3"},[n("b",[e._v("You do not have permission to approve or reject this action.")])])}],Ot=(n("96cf"),n("1da1")),Ct=n("583c"),xt={props:["condition_type","condition_pk","action_details"],store:c["a"],data:function(){return{user_has_taken_action:!1,button_options:["approve","reject"],button_selected:null,error_message:null,permission_details:null,condition_details:null}},created:function(){this.get_conditional_data()},computed:Object(a["a"])(Object(a["a"])({},l["a"].mapGetters(["url_lookup"])),{},{can_approve:function(){if(1==this.permission_details["concord.conditionals.state_changes.ApproveStateChange"][0]){var e=null;if(this.condition_details.fields.forEach((function(t){"self_approval_allowed"==t.field_name&&(e=t.field_value)})),1==e)return!0;if(c["a"].state.user_name!=this.action_details.actor)return!0}return!1},condition_status:function(){return this.condition_details?this.condition_details.status:null}}),methods:Object(a["a"])(Object(a["a"])({},l["a"].mapActions(["addOrUpdateAction"])),{},{get_conditional_data:function(){var e=this;return Object(Ot["a"])(regeneratorRuntime.mark((function t(){var n,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.url_lookup("get_conditional_data");case 2:return n=t.sent,s={condition_pk:e.condition_pk,condition_type:e.condition_type},t.abrupt("return",Ct["a"].post(n,s).then((function(t){e.permission_details=t.data.permission_details,e.condition_details=t.data.condition_details})).catch((function(e){console.log(e)})));case 5:case"end":return t.stop()}}),t)})))()},update_conditional:function(){var e=this;return Object(Ot["a"])(regeneratorRuntime.mark((function t(){var n,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.url_lookup("update_approval_condition");case 2:n=t.sent,s={condition_pk:e.condition_pk,action_to_take:e.button_selected},Ct["a"].post(n,s).then((function(t){var n=t.data.action_pk;e.user_has_taken_action=!0,e.get_conditional_data().then((function(t){"waiting"==e.condition_status?e.error_message="Before your decision to "+e.button_selected+" can be implemented, a condition must be satisfied.":(e.addOrUpdateAction({action_pk:e.action_details["action_pk"]}),e.addOrUpdateAction({action_pk:n}))})).catch((function(t){console.log("Error refreshing condition data:",t),e.error_message=t}))})).catch((function(t){console.log("Error updating condition: ",t),e.error_message=t}));case 5:case"end":return t.stop()}}),t)})))()}})},Et=xt,Rt=Object(u["a"])(Et,wt,yt,!1,null,null,null),At=Rt.exports,jt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[n("h5",{staticClass:"my-2"},[e._v("Discussion Status")]),e.is_resolved?n("span",[e._v("The condition was resolved with resolution "+e._s(e.condition_resolution_status)+". "),e.response_selected?n("span",[e._v("Your response was "),n("b",[e._v(e._s(e.response_selected))]),e._v(".")]):e._e()]):n("span",[e.can_be_resolved?n("span",[e._v("The minimum duration of "+e._s(e.minimum_duration)+" has passed. If the discussion was resolved right now, the result would be: "+e._s(e.current_result)+". "),e.can_resolve?n("b-button",{staticClass:"btn-sm",attrs:{variant:"outline-secondary",id:"resolve_button"},on:{click:function(t){return e.resolve_condition()}}},[e._v("Resolve this discussion?")]):e._e()],1):n("span",[e._v("The discussion cannot be resolved until the minimum duration of "+e._s(e.minimum_duration)+" has passed. This will happen in "+e._s(e.time_remaining)+". ")])]),n("b-container",{staticClass:"bv-example-row border border-info my-2 p-2",attrs:{id:"consensus_responses"}},[n("b-row",[n("b-col",{staticClass:"text-center my-2"},[e._v("Current Responses")])],1),n("b-row",{staticClass:"font-weight-bold"},[n("b-col",[e._v("Support")]),n("b-col",[e._v("Support With Reservations")]),n("b-col",[e._v("Stand Aside")]),n("b-col",[e._v("Block")]),n("b-col",[e._v("No Response")])],1),n("b-row",[n("b-col",{attrs:{id:"support_names"}},[e._v(e._s(e.get_names(e.response_data.support)))]),n("b-col",{attrs:{id:"reservatiions_names"}},[e._v(e._s(e.get_names(e.response_data.support_with_reservations)))]),n("b-col",{attrs:{id:"stand_aside_names"}},[e._v(e._s(e.get_names(e.response_data.stand_aside)))]),n("b-col",{attrs:{id:"block_names"}},[e._v(e._s(e.get_names(e.response_data.block)))]),n("b-col",{attrs:{id:"no_response_names"}},[e._v(e._s(e.get_names(e.response_data.no_response)))])],1)],1),e.is_resolved?e._e():n("div",{staticClass:"my-3"},[e.can_respond?n("span",[n("b-form-group",{attrs:{label:"Your Response"}},[n("b-form-radio-group",{attrs:{id:"user_response_radio_buttons",options:e.response_options,"button-variant":"outline-info",buttons:"",name:"user_response_radio_buttons"},model:{value:e.response_selected,callback:function(t){e.response_selected=t},expression:"response_selected"}})],1),n("b-button",{staticClass:"btn-sm",attrs:{id:"submit_response"},on:{click:function(t){return e.submit_response()}}},[e._v("Submit")])],1):n("span",[e._v("You are not a participant in this consensus decision.")])]),e.error_message?n("span",{staticClass:"text-danger"},[e._v(e._s(e.error_message))]):e._e()],1)},St=[],Pt=(n("a15b"),{props:["condition_type","condition_pk","action_details"],store:c["a"],data:function(){return{error_message:null,permission_details:null,condition_details:null,response_selected:null,minimum_duration:null,time_remaining:null,can_be_resolved:null,responses:null,response_options:null,current_result:null}},computed:Object(a["a"])(Object(a["a"])({},l["a"].mapGetters(["getUserName","url_lookup"])),{},{can_respond:function(){if(this.permission_details)return this.permission_details["concord.conditionals.state_changes.RespondConsensusStateChange"][0]},can_resolve:function(){if(this.permission_details)return this.permission_details["concord.conditionals.state_changes.ResolveConsensusStateChange"][0]},is_resolved:function(){if(this.condition_details)return!!["approved","rejected","implemented"].includes(this.condition_details.status)},response_data:function(){var e={};if(this.response_options)for(var t in this.response_options.forEach((function(t){return e[t.replace(/\s/g,"_")]=[]})),this.responses)e[this.responses[t].replace(/\s/g,"_")].push(t);return e},condition_resolution_status:function(){if(this.condition_details)return this.condition_details.status}}),created:function(){this.get_conditional_data()},methods:Object(a["a"])(Object(a["a"])({},l["a"].mapActions(["addOrUpdateAction"])),{},{get_conditional_data:function(){var e=this;return Object(Ot["a"])(regeneratorRuntime.mark((function t(){var n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.url_lookup("get_conditional_data");case 2:return n=t.sent,i={condition_pk:e.condition_pk,condition_type:e.condition_type},t.abrupt("return",Ct["a"].post(n,i).then((function(t){for(var n in e.permission_details=t.data.permission_details,e.condition_details=t.data.condition_details,e.condition_details.fields){var i=e.condition_details.fields[n]["field_name"],o=e.condition_details.fields[n]["field_value"];s["default"].set(e,i,o)}e.set_user_response()})).catch((function(e){console.log(e)})));case 5:case"end":return t.stop()}}),t)})))()},get_names:function(e){var t=this;if(e){var n=[];return e.forEach((function(e){return n.push(t.getUserName(parseInt(e)))})),n.join(", ")}return""},set_user_response:function(){for(var e in this.responses)e==c["a"].state.user_pk&&(this.response_selected=this.responses[e])},update_action:function(e){this.addOrUpdateAction({action_pk:this.action_details["action_pk"]}),this.addOrUpdateAction({action_pk:e})},submit_response:function(){var e=this;return Object(Ot["a"])(regeneratorRuntime.mark((function t(){var n,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.response_selected||(e.error_message="Please select a response"),e.response_selected!=e.user_response){t.next=4;break}return e.error_message="Your response has not changed",t.abrupt("return");case 4:return t.next=6,e.url_lookup("update_consensus_condition");case 6:n=t.sent,s={condition_pk:e.condition_pk,action_to_take:"respond",response:e.response_selected},Ct["a"].post(n,s).then((function(t){["implemented","waiting"].indexOf(t.data.action_status)>-1?(e.update_action(t.data.action_pk),e.get_conditional_data().catch((function(t){e.error_message=t}))):e.error_message=t.data.user_message})).catch((function(t){console.log("Error updating condition: ",t),e.error_message=t}));case 9:case"end":return t.stop()}}),t)})))()},resolve_condition:function(){var e=this;return Object(Ot["a"])(regeneratorRuntime.mark((function t(){var n,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.url_lookup("update_consensus_condition");case 2:n=t.sent,s={condition_pk:e.condition_pk,action_to_take:"resolve"},Ct["a"].post(n,s).then((function(t){["implemented","waiting"].indexOf(t.data.action_status)>-1?(e.update_action(t.data.action_pk),e.get_conditional_data().catch((function(t){e.error_message=t}))):e.error_message=t.data.user_message})).catch((function(t){console.log("Error updating condition: ",t),e.error_message=t}));case 5:case"end":return t.stop()}}),t)})))()}})}),Dt=Pt,It=Object(u["a"])(Dt,jt,St,!1,null,null,null),Tt=It.exports,Mt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[e.is_resolved?n("span",[e._v(" This vote ended on "+e._s(e.voting_deadline_display)+". The results were "+e._s(e.vote_results)+", which means the action was "+e._s(e.condition_details.status)+". It required a "+e._s(e.majority_or_plurality)+" vote and abstentions were "),e.allow_abstain?e._e():n("span",[e._v("not")]),e._v(" allowed. ")]):n("span",[e._v(" This vote will end on "+e._s(e.voting_deadline_display)+". The results so far are "+e._s(e.vote_results)+". It requires a "+e._s(e.majority_or_plurality)+" vote and abstentions are "),e.allow_abstain?e._e():n("span",[e._v("not")]),e._v(" allowed. ")]),e.is_resolved||e.user_has_taken_action?e._e():n("span",{staticClass:"my-5"},[e.can_vote&&e.not_yet_voted?n("span",[e._m(0),n("b-form-radio-group",{attrs:{id:"btn-radios-1",options:e.button_options,buttons:"",name:"radios-btn-default","button-variant":"outline-primary"},model:{value:e.button_selected,callback:function(t){e.button_selected=t},expression:"button_selected"}}),n("b-button",{attrs:{id:"save_vote_choice"},on:{click:e.update_condition}},[e._v("Submit")])],1):e.can_vote&&!e.not_yet_voted?n("span",[e._m(1)]):n("span",[e._m(2)])]),e.user_has_taken_action?n("span",[e._v(" Thank you for voting! No further action from you is needed. ")]):e._e(),e.error_message?n("span",{staticClass:"text-danger"},[e._v(e._s(e.error_message))]):e._e()])},Nt=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("p",{staticClass:"mb-3"},[n("b",[e._v("Please cast your vote")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("p",{staticClass:"mb-3"},[n("b",[e._v("You have already voted.")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("p",{staticClass:"mb-3"},[n("b",[e._v("You are not eligible to vote.")])])}],Ft={props:["condition_type","condition_pk","action_details"],store:c["a"],data:function(){return{user_has_taken_action:!1,button_selected:null,error_message:null,permission_details:null,condition_details:null,allow_abstain:null,require_majority:null,voting_deadline:null}},computed:Object(a["a"])(Object(a["a"])({},l["a"].mapGetters(["url_lookup"])),{},{voting_deadline_display:function(){if(this.voting_deadline)return Date(this.voting_deadline)},button_options:function(){return this.allow_abstain?1==this.allow_abstain?["yea","nay","abstain"]:["yea","nay"]:[]},majority_or_plurality:function(){return 1==this.require_majority?"majority (as opposed to plurality)":0==this.require_majority?"plurality (as opposed to majority)":void 0},vote_results:function(){if(this.condition_details){var e=this.current_yeas+" yeas and "+this.current_nays+" nays";return this.allow_abstain&&(e+=" with "+this.current_abstains+"  abstentions"),e}},can_vote:function(){if(this.permission_details)return this.permission_details["concord.conditionals.state_changes.AddVoteStateChange"][0]},not_yet_voted:function(){if(this.permission_details)return this.permission_details["user_condition_status"][0]},is_resolved:function(){if(this.condition_details)return!!["approved","rejected","implemented"].includes(this.condition_details.status)}}),created:function(){this.get_conditional_data()},methods:Object(a["a"])(Object(a["a"])({},l["a"].mapActions(["addOrUpdateAction"])),{},{get_conditional_data:function(){var e=this;return Object(Ot["a"])(regeneratorRuntime.mark((function t(){var n,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.url_lookup("get_conditional_data");case 2:return n=t.sent,s={condition_pk:e.condition_pk,condition_type:e.condition_type},t.abrupt("return",Ct["a"].post(n,s).then((function(t){for(var n in e.condition_details=t.data.condition_details,e.permission_details=t.data.permission_details,e.condition_details.fields){var s=e.condition_details.fields[n]["field_name"],i=e.condition_details.fields[n]["field_value"];e[s]=i}})).catch((function(e){console.log("Error calling get_conditional_data in vote condition: ",e)})));case 5:case"end":return t.stop()}}),t)})))()},update_condition:function(){var e=this;return Object(Ot["a"])(regeneratorRuntime.mark((function t(){var n,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.url_lookup("update_vote_condition");case 2:n=t.sent,s={condition_pk:e.condition_pk,action_to_take:e.button_selected},Ct["a"].post(n,s).then((function(t){var n=t.data.action_pk;e.user_has_taken_action=!0,e.get_conditional_data().then((function(t){"waiting"==e.condition_details.status||(e.addOrUpdateAction({action_pk:e.action_details["action_pk"]}),e.addOrUpdateAction({action_pk:n}))})).catch((function(t){console.log("Error refreshing condition data:",t),e.error_message=t}))})).catch((function(t){console.log("Error updating condition: ",t),e.error_message=t}));case 5:case"end":return t.stop()}}),t)})))()}})},Lt=Ft,Ut=Object(u["a"])(Lt,Mt,Nt,!1,null,null,null),$t=Ut.exports,Gt={props:["action_id"],components:{CommentListComponent:kt,ApprovalCondition:At,ConsensusCondition:Tt,VoteCondition:$t},store:c["a"],data:function(){return{ready_to_render:!1,action:null}},created:function(){this.action=this.getActionData(this.action_id),"undefined"===typeof this.action?this.addOrUpdateAction({action_pk:this.action_id}).catch((function(e){console.log(e)})):this.ready_to_render=!0},watch:{actions:function(e){this.action=this.getActionData(this.action_id),"undefined"!==typeof this.action&&(this.ready_to_render=!0)}},computed:Object(a["a"])(Object(a["a"])(Object(a["a"])({},l["a"].mapGetters(["getActionData"])),l["a"].mapState({actions:function(e){return e.concord_actions.actions}})),{},{ordered_conditions:function(){return this.action.has_condition.conditions.slice().sort((function(e,t){return e.pk<t.pk?-1:e.pk>t.pk?1:0}))}}),methods:Object(a["a"])({},l["a"].mapActions(["addOrUpdateAction"]))},qt=Gt,zt=Object(u["a"])(qt,ae,le,!1,null,null,null),Vt=zt.exports,Bt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-row",[n("b-col",{staticClass:"p-3",attrs:{cols:"3"}},[n("b-list-group",{staticClass:"mb-3"},[n("b-list-group-item",{attrs:{id:"leadership",active:"leadership"==e.selected_component},on:{click:function(t){e.selected_component="leadership"}}},[e._v(" Leadership")]),n("b-list-group-item",{attrs:{id:"membership",active:"membership"==e.selected_component},on:{click:function(t){e.selected_component="membership"}}},[e._v(" Members")]),n("b-list-group-item",{attrs:{id:"customroles",active:"customroles"==e.selected_component},on:{click:function(t){e.selected_component="customroles"}}},[e._v(" Custom Roles")])],1),e.governance_forum?n("b-card",{staticClass:"bg-white mb-3"},[n("router-link",{staticClass:"text-info",attrs:{to:{name:"forum-detail",params:{forum_id:e.governance_forum.pk}}}},[e._v(e._s(e.governance_forum.name))]),n("p",{staticClass:"my-2",attrs:{id:"forum-description"}},[e._v(" "+e._s(e.governance_forum.description)+" of "+e._s(e.group_name))])],1):e._e(),n("b-card",{staticClass:"bg-white mb-3"},[n("span",{directives:[{name:"b-modal",rawName:"v-b-modal.apply_template_modal_community",modifiers:{apply_template_modal_community:!0}}],staticClass:"text-info",attrs:{id:"community_templates_link"}},[e._v(" Community Templates")]),n("p",{staticClass:"my-2"},[e._v(" Browse pre-existing governance setups and apply them to your community.")])]),n("template-modal",{attrs:{scope:"community"}})],1),n("b-col",{attrs:{cols:"9"}},["leadership"==e.selected_component?n("leadership-component"):e._e(),"membership"==e.selected_component?n("group-membership-component"):e._e(),"customroles"==e.selected_component?n("role-component"):e._e()],1)],1)},Wt=[],Yt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[n("div",{staticClass:"bg-white pt-3 my-3"},[n("leadership-guide-alert")],1),n("div",{staticClass:"bg-white p-3 my-3"},[n("p",[e._v("This group's leadership structure is:")]),n("p",{staticClass:"mt-2 mx-5"},[e._v(e._s(e.governance_info_display))])]),n("change-leadership-component")],1)},Ht=[],Kt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"alert",attrs:{role:"alert"}},[n("div",{staticClass:"row"},[e._m(0),n("div",{staticClass:"col-3 text-right"},[n("span",{on:{click:function(t){e.info_visible=!e.info_visible}}},[e.info_visible?e._e():n("b-button",{staticClass:"btn-info btn-sm ml-2"},[e._v("Learn more")]),e.info_visible?n("b-icon-chevron-up"):e._e()],1)])]),n("b-collapse",{attrs:{id:"more-info"},model:{value:e.info_visible,callback:function(t){e.info_visible=t},expression:"info_visible"}},[n("div",{staticClass:"row text-justify",staticStyle:{"font-size":".9rem"}},[n("div",{staticClass:"col-12 px-5"},[n("p",[e._v("Groups can be owned by a combination of individuals and people with specific roles. There must always be at least one person who is an owner.")]),n("p",[e._v("If no conditions are set on the owners' power, this means any one owner can make arbitrary changes to the community, including deleting it. Most communities will not want this, so we recommend setting a condition on your owners. For instance, if you have a large group of owners, you may require that they vote together in order to exercise their power.")]),n("p",[e._v('Often we want to give people power in a community without granting it to them completely or permanently. For instance, if our owners are a large collective of people who take action by voting, we may want to appoint a smaller number of people who can act more quickly and freely. We call these people "governors". Unlike owners, governors are optional.')]),n("p",[e._v('By default, governors can do what they want within the community. However, there are limits. There are certain actions (see below) that only owners can take. Owners may also turn off the governors\' "default permissions" for individual resources. Owners may set conditions on governors, for instance, requiring the approval of one owner. And, finally, if they are unhappy with an individual governor or with the governors as a whole, they can remove them.')]),n("p",{staticClass:"font-italic"},[e._v("Permissions which require owner approval and cannot be delegated to governors are:")]),n("ul",[n("li",[e._v("adding and removing owners, both individuals and roles")]),n("li",[e._v("adding and removing governors, both individuals and roles")]),n("li",[e._v("making it so only owners can change a specific resource, or removing that restriction from a specific resource")]),e._v(" "),n("li",[e._v("making it so governors cannot change a specific resource, or removing that restriction from a specific resource")])])])])])],1)},Jt=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"col-9"},[n("p",{staticClass:"font-weight-bold"},[e._v("How does leadership work in Kybern?")])])}],Xt={data:function(){return{info_visible:!1}}},Qt=Xt,Zt=Object(u["a"])(Qt,Kt,Jt,!1,null,null,null),en=Zt.exports,tn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-container",[n("b-row",[n("b-col",{staticClass:"pl-0",attrs:{cols:"6"}},[n("div",{staticClass:"bg-white p-3"},[n("p",{staticClass:"font-weight-bold"},[e._v("Change Owners")]),n("edit-leadership-component",{attrs:{leadership_type:"owner"}}),n("h6",{staticClass:"font-italic"},[e._v("Condition on owners:")]),n("div",{staticClass:"border m-2 p-2 text-center"},[e.owner_condition_display?n("span",[e._v(e._s(e.owner_condition_display))]):n("span",[e._v("No condition set")]),e.user_permissions.add_owner_condition||e.user_permissions.remove_owner_condition?n("router-link",{attrs:{to:{name:"conditions",params:{conditioned_on:"owner"}}}},[n("span",{staticClass:"badge badge-secondary ml-1 edit-condition"},[e._v("edit")])]):e._e()],1)],1)]),n("b-col",{staticClass:"pr-0",attrs:{cols:"6"}},[n("div",{staticClass:"bg-white p-3"},[n("p",{staticClass:"font-weight-bold"},[e._v("Change Governors")]),n("edit-leadership-component",{attrs:{leadership_type:"governor"}}),n("h6",{staticClass:"font-italic"},[e._v("Condition on governors:")]),n("div",{staticClass:"border m-2 p-2 text-center"},[e.governor_condition_display?n("span",[e._v(e._s(e.governor_condition_display))]):n("span",[e._v("No condition set")]),e.user_permissions.add_governor_condition||e.user_permissions.remove_governor_condition?n("router-link",{attrs:{to:{name:"conditions",params:{conditioned_on:"governor"}}}},[n("span",{staticClass:"badge badge-secondary ml-1 edit-condition"},[e._v("edit")])]):e._e()],1)],1)])],1)],1)},nn=[],sn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-form",{attrs:{id:e.edit_leadership_id}},[n("div",{staticClass:"mb-3"},[n("b-input-group",{staticClass:"mb-2 mr-sm-2 mb-sm-0 flex-nowrap",attrs:{prepend:"Roles"}},[n("vue-multiselect",{attrs:{options:e.rolesAsOptions,multiple:!0,"close-on-select":!0,"clear-on-select":!1,placeholder:"No roles selected",disabled:!e.has_permission,label:"name","track-by":"name"},model:{value:e.roles_selected,callback:function(t){e.roles_selected=t},expression:"roles_selected"}})],1)],1),n("div",{staticClass:"mb-3"},[n("b-input-group",{staticClass:"mb-2 mr-sm-2 mb-sm-0 flex-nowrap",attrs:{prepend:"Individuals"}},[n("vue-multiselect",{attrs:{options:e.groupMembersAsOptions,multiple:!0,"close-on-select":!0,"clear-on-select":!0,placeholder:"No individuals selected",disabled:!e.has_permission,label:"name","track-by":"pk",prepend:"Individuals"},model:{value:e.actors_selected,callback:function(t){e.actors_selected=t},expression:"actors_selected"}})],1)],1),n("div",{staticClass:"mb-3"},[n("action-response-component",{attrs:{response:e.update_leadership_response}}),e.has_permission?n("b-button",{attrs:{variant:"outline-secondary"},on:{click:function(t){return e.update_leadership()}}},[e._v(" Update "+e._s(this.leadership_type)+"s")]):e._e()],1)])},on=[],rn=(n("d81d"),n("b0c0"),{props:["leadership_type"],components:{"vue-multiselect":Oe.a,ActionResponseComponent:m["default"]},store:c["a"],data:function(){return{update_leadership_response:null,actors_selected:[],roles_selected:[]}},created:function(){var e=this;this.checkPermissions({permissions:{add_owner_to_community:null,remove_owner_from_community:null,add_owner_role_to_community:null,remove_owner_role_from_community:null,add_governor_to_community:null,remove_governor_from_community:null,add_governor_role_to_community:null,remove_governor_role_from_community:null}}).catch((function(t){e.error_message=t})),this.get_existing_roles_and_actors()},computed:Object(a["a"])(Object(a["a"])(Object(a["a"])({},l["a"].mapState({user_permissions:function(e){return e.permissions.current_user_permissions}})),l["a"].mapGetters(["rolesAsOptions","groupMembersAsOptions","leadershipAsOptions"])),{},{edit_leadership_id:function(){return this.leadership_type+"_actors_and_roles"},has_permission:function(){return"owner"==this.leadership_type&&this.user_permissions?this.permission_to_update_owners():!("governor"!=this.leadership_type||!this.user_permissions)&&this.permission_to_update_governors()}}),watch:{leadershipAsOptions:function(e){this.get_existing_roles_and_actors()}},methods:Object(a["a"])(Object(a["a"])({},l["a"].mapActions(["checkPermissions","updateOwners","updateGovernors"])),{},{permission_to_update_owners:function(){return this.user_permissions.add_owner_to_community||this.user_permissions.remove_owner_from_community||this.user_permissions.add_owner_role_to_community||this.user_permissions.remove_owner_role_from_community},permission_to_update_governors:function(){return this.user_permissions.add_governor_to_community||this.user_permissions.remove_governor_from_community||this.user_permissions.add_governor_role_to_community||this.user_permissions.remove_governor_role_from_community},get_existing_roles_and_actors:function(){"owner"==this.leadership_type?(this.roles_selected=this.leadershipAsOptions.owner_role_options,this.actors_selected=this.leadershipAsOptions.owner_actor_options):"governor"==this.leadership_type&&(this.roles_selected=this.leadershipAsOptions.governor_role_options,this.actors_selected=this.leadershipAsOptions.governor_actor_options)},update_leadership:function(e){var t=this,n=this.roles_selected.map((function(e){return e.name})),s=this.actors_selected.map((function(e){return e.pk}));"owner"==this.leadership_type?this.updateOwners({roles:n,actors:s}).then((function(e){t.update_leadership_response=e})):"governor"==this.leadership_type&&this.updateGovernors({roles:n,actors:s}).then((function(e){t.update_leadership_response=e}))}})}),an=rn,ln=Object(u["a"])(an,sn,on,!1,null,null,null),cn=ln.exports,mn={components:{EditLeadershipComponent:cn},store:c["a"],mounted:function(){this.checkPermissions({permissions:{add_condition:{leadership_type:"owner"},remove_condition:{leadership_type:"owner"}},aliases:{add_condition:"add_owner_condition",remove_condition:"remove_owner_condition"}}).catch((function(e){console.log(e)})),this.checkPermissions({permissions:{add_condition:{leadership_type:"governor"},remove_condition:{leadership_type:"governor"}},aliases:{add_condition:"add_governor_condition",remove_condition:"remove_governor_condition"}}).catch((function(e){console.log(e)}))},computed:Object(a["a"])(Object(a["a"])(Object(a["a"])({},l["a"].mapState({owner_condition:function(e){return e.permissions.owner_condition},governor_condition:function(e){return e.permissions.governor_condition},user_permissions:function(e){return e.permissions.current_user_permissions},group_name:function(e){return e.group_name}})),l["a"].mapGetters(["rolesAsOptions","groupMembersAsOptions","leadershipAsOptions"])),{},{owner_condition_display:function(){return this.owner_condition?this.owner_condition.how_to_pass_overall:"No condition has been set on owners."},governor_condition_display:function(){return this.governor_condition?this.governor_condition.how_to_pass_overall:"No condition has been set on governors."}}),methods:Object(a["a"])({},l["a"].mapActions(["checkPermissions"]))},_n=mn,dn=Object(u["a"])(_n,tn,nn,!1,null,null,null),un=dn.exports,pn={components:{LeadershipGuideAlert:en,ChangeLeadershipComponent:un},store:c["a"],computed:Object(a["a"])(Object(a["a"])(Object(a["a"])({},l["a"].mapState({governance_info:function(e){return e.governance.governance_info}})),l["a"].mapGetters(["getUserName"])),{},{governance_info_display:function(){var e=this;function t(t){var n=/\d+/g,s=t.replace(n,(function(t){return e.getUserName(t)}));return s}var n=/individual\s\d+(\s|\.|\s)/g,s=/individuals(\s\d+,)*\s\d+\sand\s\d+(\s|\.|\s)/g,i=this.governance_info.replace(n,t);return i=i.replace(s,t),i}})},fn=pn,hn=Object(u["a"])(fn,Yt,Ht,!1,null,null,null),bn=hn.exports,vn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"mt-3"},[e.user_permissions.add_members_to_community||e.user_permissions.remove_members_from_community?n("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.group_membership_display",modifiers:{group_membership_display:!0}}],staticClass:"btn-sm btn-info mr-3 mb-3",attrs:{id:"group_membership_display_button"}},[e._v(" change members")]):e._e(),n("edit-membership-modal"),n("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.group_membership_settings_display",modifiers:{group_membership_settings_display:!0}}],staticClass:"btn-sm btn-info mb-3",attrs:{id:"group_membership_settings_button"}},[e._v(" change membership settings")]),n("membership-settings-modal"),n("div",{staticClass:"bg-white p-3",attrs:{id:"current_member_list"}},[n("b-table",{attrs:{small:"",items:e.members_and_roles,fields:e.fields},scopedSlots:e._u([{key:"cell(member)",fn:function(t){return[n("router-link",{staticClass:"text-info",attrs:{to:{name:"user-permissions",params:{user_pk:t.item.pk}}}},[e._v(" "+e._s(t.item.member)+" ")])]}},{key:"cell()",fn:function(e){return[void 0!=e.value&&1==e.value?n("span",[n("b-icon-check-circle-fill",{attrs:{variant:"success"}})],1):n("span",[n("b-icon-x",{attrs:{variant:"danger"}})],1)]}}])})],1)],1)},gn=[],kn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-modal",{staticClass:"modal fade",attrs:{id:"group_membership_display",title:"Group Membership",size:"lg","hide-footer":""}},[n("b",[e._v("Current Members:")]),n("span",{attrs:{id:"current_member_list"}},e._l(e.groupMembersAsOptions,(function(t){return n("b-badge",{key:t.pk,staticClass:"mx-1",attrs:{pill:"",variant:"info"}},[e._v(e._s(t.name))])})),1),n("hr"),n("action-response-component",{attrs:{response:e.change_member_response}}),e.user_permissions.add_members_to_community?n("span",[e.add_member_button_selected?n("span",[n("vue-multiselect",{attrs:{options:e.nonmembersAsOptions,multiple:!0,"close-on-select":!0,"clear-on-select":!1,placeholder:"No one selected",label:"name","track-by":"name"},model:{value:e.members_to_add_selected,callback:function(t){e.members_to_add_selected=t},expression:"members_to_add_selected"}}),n("b-button",{staticClass:"btn-sm mt-2 mb-3 mr-3",attrs:{id:"save_add_member_button"},on:{click:function(t){return e.add_members()}}},[e._v("Save")]),n("b-button",{staticClass:"btn-sm mt-2 mb-3",on:{click:function(t){e.add_member_button_selected=!1}}},[e._v("Discard")])],1):n("span",[e.remove_member_button_selected?e._e():n("span",[n("b-button",{staticClass:"btn-sm mb-3 mr-3",attrs:{id:"add_member_button"},on:{click:function(t){e.add_member_button_selected=!0}}},[e._v("Add Members")])],1)])]):e._e(),e.user_permissions.remove_members_from_community?n("span",[e.remove_member_button_selected?n("span",[n("vue-multiselect",{attrs:{options:e.groupMembersAsOptions,multiple:!0,"close-on-select":!0,"clear-on-select":!1,placeholder:"No one selected",label:"name","track-by":"name"},model:{value:e.members_to_remove_selected,callback:function(t){e.members_to_remove_selected=t},expression:"members_to_remove_selected"}}),n("b-button",{staticClass:"btn-sm mt-2 mb-3 mr-3",attrs:{id:"save_remove_member_button"},on:{click:function(t){return e.remove_members()}}},[e._v("Save")]),n("b-button",{staticClass:"btn-sm mt-2 mb-3",on:{click:function(t){e.remove_member_button_selected=!1}}},[e._v("Discard")])],1):n("span",[e.add_member_button_selected?e._e():n("span",[n("b-button",{staticClass:"btn-sm mb-3",attrs:{id:"remove_member_button"},on:{click:function(t){e.remove_member_button_selected=!0}}},[e._v("Remove Members")])],1)])]):e._e()],1)},wn=[],yn={store:c["a"],components:{ActionResponseComponent:m["default"],"vue-multiselect":Oe.a},data:function(){return{item_model:"group",add_member_button_selected:!1,remove_member_button_selected:!1,members_to_add_selected:[],members_to_remove_selected:[],change_member_response:null}},created:function(){var e=this;this.checkPermissions({permissions:{add_members_to_community:null,remove_members_from_community:null}}).catch((function(t){e.error_message=t,console.log(t)})),this.getPermissionsForItem({item_id:this.item_id,item_model:this.item_model}).catch((function(t){e.error_message=t,console.log(t)}))},computed:Object(a["a"])(Object(a["a"])({},l["a"].mapState({permissions:function(e){return e.permissions.permissions},user_permissions:function(e){return e.permissions.current_user_permissions},item_id:function(e){return e.group_pk}})),l["a"].mapGetters(["groupMembersAsOptions","nonmembersAsOptions"])),methods:Object(a["a"])(Object(a["a"])({},l["a"].mapActions(["getPermissionsForItem","checkPermissions","addMembers","removeMembers"])),{},{add_members:function(){var e=this,t=this.members_to_add_selected.map((function(e){return e.pk}));this.addMembers({user_pks:t}).then((function(t){e.change_member_response=t}))},remove_members:function(){var e=this,t=this.members_to_remove_selected.map((function(e){return e.pk}));this.removeMembers({user_pks:t}).then((function(t){e.change_member_response=t}))}})},On=yn,Cn=Object(u["a"])(On,kn,wn,!1,null,null,null),xn=Cn.exports,En=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-modal",{staticClass:"modalfade",attrs:{id:"group_membership_settings_display",title:"Membership Settings",size:"xl","hide-footer":""}},[e.user_permissions.apply_template?n("p",{staticClass:"mb-4"},[e._v(" Not sure what to pick? "),n("span",{directives:[{name:"b-modal",rawName:"v-b-modal.apply_template_modal_membership",modifiers:{apply_template_modal_membership:!0}}],staticClass:"text-info",attrs:{id:"membership_templates_link"}},[e._v(" Browse pre-existing membership templates and apply them to your community.")])]):e._e(),n("template-modal",{attrs:{scope:"membership"}}),n("error-component",{attrs:{message:e.error_message}}),n("span",{attrs:{id:"add_member_permissions"}},[n("p",{staticClass:"pb-1 font-weight-bold"},[e._v("Permissions for Adding Members")]),n("simple-permissions-display-component",{attrs:{permissions:e.addmember_permissions,item_id:e.item_id,item_model:e.item_model,item_name:"Adding Members",default_selection:e.add_member_state_change,modal_id:"addmember"}})],1),n("span",{attrs:{id:"remove_member_permissions"}},[n("p",{staticClass:"pt-4 pb-1 font-weight-bold"},[e._v("Permissions for Removing Members")]),n("simple-permissions-display-component",{attrs:{permissions:e.removemember_permissions,item_id:e.item_id,item_model:e.item_model,item_name:"Removing Members",default_selection:e.remove_member_state_change,modal_id:"removemember"}})],1)],1)},Rn=[],An=(n("4de4"),{store:c["a"],components:{ErrorComponent:Ce["default"],SimplePermissionsDisplayComponent:lt,TemplateModal:it},data:function(){return{item_model:"group",add_member_state_change:"concord.communities.state_changes.AddMembersStateChange",remove_member_state_change:"concord.communities.state_changes.RemoveMembersStateChange",error_message:null}},created:function(){var e=this;this.checkPermissions({permissions:{apply_template:null}}).catch((function(t){e.error_message=t,console.log(t)})),this.getPermissionsForItem({item_id:this.item_id,item_model:this.item_model}).catch((function(t){e.error_message=t,console.log(t)}))},computed:Object(a["a"])(Object(a["a"])({},l["a"].mapState({permissions:function(e){return e.permissions.permissions},user_permissions:function(e){return e.permissions.current_user_permissions},item_id:function(e){return e.group_pk}})),{},{addmember_permissions:function(){var e=this;return Object.values(this.permissions).filter((function(t){return t.change_type==e.add_member_state_change}))},removemember_permissions:function(){var e=this;return Object.values(this.permissions).filter((function(t){return t.change_type==e.remove_member_state_change}))}}),methods:Object(a["a"])({},l["a"].mapActions(["getPermissionsForItem","checkPermissions"]))}),jn=An,Sn=Object(u["a"])(jn,En,Rn,!1,null,null,null),Pn=Sn.exports,Dn={components:{EditMembershipModal:xn,MembershipSettingsModal:Pn},store:c["a"],created:function(){var e=this;this.checkPermissions({permissions:{add_members_to_community:null,remove_members_from_community:null}}).catch((function(t){e.error_message=t,console.log(t)}))},computed:Object(a["a"])(Object(a["a"])(Object(a["a"])({},l["a"].mapState({user_permissions:function(e){return e.permissions.current_user_permissions}})),l["a"].mapGetters(["groupMembersAsOptions","allRoleNames","rolesForMember"])),{},{members_and_roles:function(){var e=this,t=this,n=[];return this.groupMembersAsOptions.forEach((function(s){var i={member:s.name,pk:s.pk},o=e.rolesForMember(s.pk);t.fields.forEach((function(e){o.includes(e)&&(i[e]=!0)})),n.push(i)})),n},fields:function(){var e=[];return this.allRoleNames.forEach((function(t){"members"!=t&&e.push(t)})),["member"].concat(e)}}),methods:Object(a["a"])({},l["a"].mapActions(["checkPermissions"]))},In=Dn,Tn=Object(u["a"])(In,vn,gn,!1,null,null,null),Mn=Tn.exports,Nn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"bg-white p-3"},[n("p",[e._v('In addition to the required "members" role, groups can add custom roles which different people can be assigned to. Each role has different rights and responsibilities within the community.')]),e.user_permissions.add_role_to_community?n("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.add_role_modal",modifiers:{add_role_modal:!0}}],staticClass:"btn-sm mr-3 mb-3",attrs:{variant:"info",id:"add_role_button"}},[e._v("add a role")]):e._e(),e.user_permissions.apply_template?n("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.apply_template_modal_role",modifiers:{apply_template_modal_role:!0}}],staticClass:"btn-sm mb-3",attrs:{variant:"info",id:"apply_role_templates"}},[e._v("apply role templates")]):e._e(),n("action-response-component",{attrs:{response:e.remove_role_response}}),n("b-list-group",e._l(e.combined_roles,(function(t){return n("b-list-group-item",{key:t.id,staticClass:"d-flex justify-content-between align-items-center",attrs:{id:t.name+"_role"}},[n("span",{staticClass:"role_info"},[n("span",{staticClass:"role_name_display"},[e._v(e._s(t.name))]),n("small",{staticClass:"ml-2",attrs:{id:t.name+"_member_count"}},[e._v(" "+e._s(t.current_members.length)+" people ")])]),n("div",{staticClass:"role_interactions"},["members"!=t.name?n("div",{directives:[{name:"b-modal",rawName:"v-b-modal.role_membership_modal",modifiers:{role_membership_modal:!0}}],staticClass:"d-inline",attrs:{id:t.name+"_changemembers"},on:{click:function(n){e.role_selected=t.name}}},[n("b-icon-people",{staticClass:"mr-1"}),n("small",[e._v("change members")])],1):e._e(),n("div",{directives:[{name:"b-modal",rawName:"v-b-modal.role_permissions_modal",modifiers:{role_permissions_modal:!0}}],staticClass:"ml-3 d-inline",attrs:{id:t.name+"_editrole"},on:{click:function(n){e.role_selected=t.name}}},[n("b-icon-shield-lock",{staticClass:"mr-1"}),n("small",[e._v("change permissions")])],1),"members"!=t.name?n("div",{staticClass:"ml-3 d-inline",on:{click:function(n){return e.remove_role(t.name)}}},[n("b-icon-trash",{staticClass:"mr-1"}),n("small",[e._v("remove")])],1):e._e()])])})),1),n("add-role-modal"),n("role-membership-component",{attrs:{role_selected:e.role_selected}}),n("role-permissions-modal",{attrs:{role_to_edit:e.role_selected}}),n("template-modal",{attrs:{scope:"role"}})],1)},Fn=[],Ln=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-modal",{attrs:{id:"add_role_modal",title:"Add a new role","hide-footer":""}},[n("div",{staticClass:"input-group mb-3"},[n("div",{staticClass:"input-group-prepend"},[n("span",{staticClass:"input-group-text",attrs:{id:"role_name_prompt"}},[e._v("Role Name")])]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.new_role_name,expression:"new_role_name"}],staticClass:"form-control",attrs:{type:"text","aria-label":"role_name","aria-describedby":"role_name_prompt",name:"role_name"},domProps:{value:e.new_role_name},on:{input:function(t){t.target.composing||(e.new_role_name=t.target.value)}}})]),n("action-response-component",{attrs:{response:e.add_role_response}}),n("b-button",{attrs:{size:"sm",variant:"success",id:"save_role_button"},on:{click:function(t){return e.submitRoleName()}}},[e._v(" Save")])],1)},Un=[],$n={store:c["a"],components:{ActionResponseComponent:m["default"]},data:function(){return{add_role_response:null,new_role_name:""}},computed:Object(a["a"])({},l["a"].mapState({roles:function(e){return e.governance.roles}})),methods:Object(a["a"])(Object(a["a"])({},l["a"].mapActions(["addRole"])),{},{submitRoleName:function(){var e=this;this.addRole({role_name:this.new_role_name}).then((function(t){e.add_role_response=t}))}})},Gn=$n,qn=Object(u["a"])(Gn,Ln,Un,!1,null,null,null),zn=qn.exports,Vn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-modal",{attrs:{id:"role_membership_modal",title:e.title_string,"hide-footer":""}},[n("span",{staticClass:"font-weight-bold"},[e._v(e._s(e.permission_string))]),e.can_edit?n("div",[n("span",{attrs:{id:"change_membership_multiselect"}},[n("vue-multiselect",{staticClass:"mt-3",attrs:{options:e.people_to_choose_from,multiple:!0,"close-on-select":!0,"clear-on-select":!1,placeholder:"No one selected",label:"name","track-by":"pk"},model:{value:e.people_selected,callback:function(t){e.people_selected=t},expression:"people_selected"}})],1),n("action-response-component",{attrs:{response:e.add_people_response}}),n("action-response-component",{attrs:{response:e.remove_people_response}}),n("b-button",{staticClass:"btn-sm mt-3",attrs:{id:"save_member_changes"},on:{click:function(t){return e.updateMembers()}}},[e._v("Save your changes")])],1):n("div",{staticClass:"mt-3"},[n("span",{staticClass:"font-weight-bold"},[e._v("Current Members in Role")]),n("br"),e._l(e.people_selected,(function(t){return n("b-badge",{key:t.pk,staticClass:"mx-1",attrs:{pill:"",variant:"info"}},[e._v(" "+e._s(t.name))])}))],2)])},Bn=[],Wn={props:["role_selected"],store:c["a"],components:{"vue-multiselect":Oe.a,ActionResponseComponent:m["default"]},data:function(){return{add_people_response:null,remove_people_response:null,people_selected:[]}},created:function(){var e=this;this.checkPermissions({permissions:{add_people_to_role:{role_name:this.role_selected},remove_people_from_role:{role_name:this.role_selected}}}).catch((function(t){e.error_message=t,console.log(t)}))},computed:Object(a["a"])(Object(a["a"])(Object(a["a"])({},l["a"].mapState({user_permissions:function(e){return e.permissions.current_user_permissions}})),l["a"].mapGetters(["membersAsOptions"])),{},{people_to_choose_from:function(){return this.membersAsOptions("members")},people_in_role:function(){return this.role_selected?this.membersAsOptions(this.role_selected):[]},title_string:function(){return"Change members with role '"+this.role_selected+"'"},can_edit:function(){return!(!this.user_permissions.add_people_to_role&&!this.user_permissions.remove_people_from_role)},permission_string:function(){return this.user_permissions.add_people_to_role&&this.user_permissions.remove_people_from_role?"You have permission to add and remove people from this role.":this.user_permissions.add_people_to_role?"You have permission to add people to this role, but not to remove people from it.":this.user_permissions.remove_people_from_role?"You have permission to remove people from this role, but not to add people to it.":"You do not have permission to add people to or remove people from this role."}}),watch:{role_selected:function(){console.log(this.people_in_role),this.people_selected=this.people_in_role}},methods:Object(a["a"])(Object(a["a"])({},l["a"].mapActions(["checkPermissions","addUsersToRole","removeUsersFromRole"])),{},{updateMembers:function(){var e=this,t=this.people_in_role.map((function(e){return e.pk})),n=this.people_selected.map((function(e){return e.pk})),s=t.filter((function(e){return!n.includes(e)})),i=n.filter((function(e){return!t.includes(e)}));i.length>0&&this.addUsersToRole({role_name:this.role_selected,user_pks:i}).then((function(t){e.add_people_response=t})),s.length>0&&this.removeUsersFromRole({role_name:this.role_selected,user_pks:s}).then((function(t){e.remove_people_response=t}))}})},Yn=Wn,Hn=Object(u["a"])(Yn,Vn,Bn,!1,null,null,null),Kn=Hn.exports,Jn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-modal",{attrs:{id:"role_permissions_modal",title:e.title_string,size:"xl","hide-footer":""}},[n("p",{staticClass:"my-1"},[e._v("People with this role can...")]),n("simple-permissions-display-component",{attrs:{permissions:e.role_permissions,role_to_edit:e.role_to_edit,item_id:e.group_id,item_model:"group",item_name:"Role "+e.role_to_edit}})],1)},Xn=[],Qn={props:["role_to_edit"],components:{SimplePermissionsDisplayComponent:lt},store:c["a"],data:function(){return{error_message:""}},created:function(){this.role_to_edit&&this.prepEditRole()},computed:Object(a["a"])(Object(a["a"])(Object(a["a"])({},l["a"].mapGetters(["permissionsForRole"])),l["a"].mapState({group_id:function(e){return e.group_pk}})),{},{title_string:function(){return"Permissions for role '"+this.role_to_edit+"'"},role_permissions:function(){return this.role_to_edit?this.permissionsForRole(this.role_to_edit):[]}}),watch:{role_to_edit:function(){this.prepEditRole()}},methods:Object(a["a"])(Object(a["a"])({},l["a"].mapActions(["refreshRoleData"])),{},{prepEditRole:function(){var e=this;this.refreshRoleData({role:this.role_to_edit}).catch((function(t){e.error_message=t}))}})},Zn=Qn,es=Object(u["a"])(Zn,Jn,Xn,!1,null,null,null),ts=es.exports,ns={store:c["a"],components:{AddRoleModal:zn,RolePermissionsModal:ts,RoleMembershipComponent:Kn,TemplateModal:it,ActionResponseComponent:m["default"]},data:function(){return{role_selected:"",remove_role_response:null}},created:function(){var e=this;this.checkPermissions({permissions:{add_role_to_community:null,apply_template:null}}).catch((function(t){e.error_message=t,console.log(t)}))},computed:Object(a["a"])(Object(a["a"])({},l["a"].mapState({roles:function(e){return e.governance.roles},group_members:function(e){return e.governance.members},user_permissions:function(e){return e.permissions.current_user_permissions},group_pk:function(e){return e.group_pk}})),{},{combined_roles:function(){var e=[{name:"members",current_members:this.group_members}];return e.concat(this.roles)}}),methods:Object(a["a"])(Object(a["a"])({},l["a"].mapActions(["checkPermissions","removeRole"])),{},{remove_role:function(e){var t=this;this.removeRole({role_name:e}).then((function(e){t.remove_role_response=e}))}})},ss=ns,is=Object(u["a"])(ss,Nn,Fn,!1,null,null,null),os=is.exports,rs={components:{LeadershipComponent:bn,GroupMembershipComponent:Mn,RoleComponent:os,TemplateModal:it},store:c["a"],data:function(){return{error_message:null,selected_component:"leadership"}},computed:Object(a["a"])(Object(a["a"])({},l["a"].mapState({forums:function(e){return e.forums.forums},group_name:function(e){return e.group_name}})),{},{governance_forum:function(){var e=null;return this.forums.forEach((function(t){"Gov"==t.special&&(e=t)})),e}})},as=rs,ls=(n("9e74"),Object(u["a"])(as,Bt,Wt,!1,null,"d09fa746",null)),cs=ls.exports,ms=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("complex-permissions-display-component",{attrs:{permissions:e.permissions,item_id:e.group_pk,item_model:"group",item_name:e.group_name}})},_s=[],ds=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-container",{staticClass:"permission-container"},[n("b-row",{attrs:{"no-gutters":""}},[n("b-col",{staticClass:"py-3 pr-3",attrs:{cols:"2"}},[n("h5",{staticClass:"font-weight-bold mb-4"},[e._v("Filters")]),n("div",{staticClass:"my-3"},[n("h6",[e._v("Roles")]),n("b-form-select",{attrs:{options:e.role_names},model:{value:e.roleSelected,callback:function(t){e.roleSelected=t},expression:"roleSelected"}})],1),n("div",{staticClass:"my-3"},[n("h6",[e._v("Targets")]),n("b-form-select",{attrs:{options:e.target_names},model:{value:e.targetSelected,callback:function(t){e.targetSelected=t},expression:"targetSelected"}})],1),n("div",{staticClass:"my-3"},[n("h6",[e._v("Type of Change")]),n("b-form-select",{attrs:{options:e.section_names},model:{value:e.sectionSelected,callback:function(t){e.sectionSelected=t},expression:"sectionSelected"}})],1)]),n("b-col",{staticClass:"bg-white p-3 table-width"},[n("span",{staticClass:"big-text mr-2"},[e._v("All Group Permissions")]),n("b-icon-plus-circle",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}},{name:"b-modal",rawName:"v-b-modal",value:"add_permission_modal_"+e.modal,expression:"'add_permission_modal_'  + modal"}],staticClass:"mx-2",attrs:{title:"Add permission",variant:"warning","font-scale":"1.5",id:"add_permission_button"}}),n("add-permission-modal-component",{attrs:{item_name:e.item_name,item_id:e.item_id,item_model:e.item_model,modal_id:"add_permission_modal_"+e.modal}}),n("b-icon-pencil-fill",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}},{name:"b-modal",rawName:"v-b-modal",value:"edit_permissions_modal_"+e.modal,expression:"'edit_permissions_modal_'  + modal"}],staticClass:"mr-2",attrs:{title:"Edit permissions",variant:"warning","font-scale":"1.5",id:"edit_permissions_button"}}),n("edit-permissions-modal-component",{attrs:{permissions:e.permissions,item_name:e.item_name,item_id:e.item_id,item_model:e.item_model,modal_id:"edit_permissions_modal_"+e.modal}}),e.user_permissions.apply_template?n("b-icon-grid3x3-gap-fill",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}},{name:"b-modal",rawName:"v-b-modal",value:"apply_template_modal_"+e.item_model,expression:"'apply_template_modal_' + item_model"}],staticClass:"mr-2",attrs:{title:"Apply templates",variant:"warning","font-scale":"1.5",id:"apply_templates"}}):e._e(),n("template-modal",{attrs:{scope:e.item_model,target_id:e.item_id,target_model:e.item_model}}),n("b-iconstack",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}},{name:"b-modal",rawName:"v-b-modal.advanced_permissions_modal",modifiers:{advanced_permissions_modal:!0}}],staticClass:"mr-2",attrs:{"font-scale":"1.5",title:"View advanced permissions",id:"advanced_permissions_button"}},[n("b-icon",{attrs:{stacked:"",icon:"shield-lock-fill",variant:"warning"}}),n("b-icon",{attrs:{stacked:"",icon:"star-fill",scale:".5","shift-h":"4","shift-v":"5",variant:"info"}})],1),n("advanced-permissions-modal",{attrs:{item_name:e.item_name,item_id:e.item_id,item_model:e.item_model}}),n("b-form-input",{attrs:{id:"search_permissions",type:"search",placeholder:"Search permissions"},model:{value:e.permissionSearchString,callback:function(t){e.permissionSearchString=t},expression:"permissionSearchString"}}),n("permissions-table-component",{staticClass:"my-3",attrs:{permissions:e.permissions,filter_data:e.filter_data}})],1)],1)],1)},us=[],ps=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-modal",{attrs:{id:"advanced_permissions_modal",title:e.title_string,size:"xl","hide-footer":""}},[n("div",{staticClass:"my-3"},[n("p",[e._v("When the governing permission is turned on, any governor can take any action on this item, unless it is an action reserved only for owners. Governing permissions are typically turned on by default.")]),e.governing_permission_enabled?n("span",[e._v("The governing permission is "),n("b",[e._v("turned on")]),e._v(".")]):n("span",[e._v("The governing permission is "),n("b",[e._v("turned off")]),e._v(".")]),e.governing_permission_enabled&&e.user_permissions.disable_governing_permission?n("b-button",{staticStyle:{"font-size":"0.7em"},attrs:{size:"sm",pill:"",variant:"outline-secondary"},on:{click:function(t){return e.change_permission_override("governing","disable")}}},[e._v("Turn it off.")]):e._e(),!e.governing_permission_enabled&&e.user_permissions.enable_governing_permission?n("b-button",{staticStyle:{"font-size":"0.7em"},attrs:{size:"sm",pill:"",variant:"outline-secondary"},on:{click:function(t){return e.change_permission_override("governing","enable")}}},[e._v("Turn it on.")]):e._e()],1),n("div",{staticClass:"mt-3 mb-2"},[n("p",[e._v("When the foundational permission is turned on, only owners can act on the object. Any specific permissions set below will not apply, and neither will the governing permission. Foundational permissions are typically turned off by default.")]),e.foundational_permission_enabled?n("span",[e._v("The foundational permission is "),n("b",[e._v("turned on")]),e._v(", meaning all changes to this object must be approved by the group's owners. The permissions set below "),n("span",{staticClass:"text-danger"},[e._v("will not apply")]),e._v(".")]):n("span",[e._v("The foundational permission is "),n("b",[e._v("turned off")]),e._v(".")]),e.foundational_permission_enabled&&e.user_permissions.disable_foundational_permission?n("b-button",{staticStyle:{"font-size":"0.7em"},attrs:{size:"sm",pill:"",variant:"outline-secondary"},on:{click:function(t){return e.change_permission_override("foundational","disable")}}},[e._v("Turn it off.")]):e._e(),!e.foundational_permission_enabled&&e.user_permissions.enable_foundational_permission?n("b-button",{staticStyle:{"font-size":"0.7em"},attrs:{size:"sm",pill:"",variant:"outline-secondary"},on:{click:function(t){return e.change_permission_override("foundational","enable")}}},[e._v("Turn it on.")]):e._e()],1),n("action-response-component",{attrs:{response:e.override_response}})],1)},fs=[],hs={props:["item_id","item_model","item_name"],components:{ActionResponseComponent:m["default"]},store:c["a"],data:function(){return{override_response:null}},created:function(){var e=this;this.getFoundationalForItem()||this.getPermissionsForItem({item_id:this.item_id,item_model:this.item_model}).catch((function(t){e.error_message=t}));var t=this.item_model+"_"+this.item_id;this.checkPermissions({permissions:{enable_governing_permission:{alt_target:t},disable_governing_permission:{alt_target:t},enable_foundational_permission:{alt_target:t},disable_foundational_permission:{alt_target:t}}})},computed:Object(a["a"])(Object(a["a"])(Object(a["a"])({},l["a"].mapState({user_permissions:function(e){return e.permissions.current_user_permissions}})),l["a"].mapGetters(["permissionsForItem","getFoundationalForItem","getGoverningForItem"])),{},{title_string:function(){return"Advanced permissions for "+this.item_model+" '"+this.item_name+"'"},item_key:function(){return this.item_id+"_"+this.item_model},governing_permission_enabled:function(){return this.item_key?this.getGoverningForItem(this.item_key):void 0},foundational_permission_enabled:function(){return this.item_key?this.getFoundationalForItem(this.item_key):void 0}}),methods:Object(a["a"])(Object(a["a"])({},l["a"].mapActions(["checkPermissions","getPermissionsForItem","changePermissionOverride"])),{},{change_permission_override:function(e,t){var n=this;this.changePermissionOverride({item_id:this.item_id,item_model:this.item_model,enable_or_disable:t,governing_or_foundational:e}).then((function(e){n.override_response=e}))}})},bs=hs,vs=Object(u["a"])(bs,ps,fs,!1,null,null,null),gs=vs.exports,ks={props:["permissions","item_id","item_model","item_name"],components:{AddPermissionModalComponent:De,EditPermissionsModalComponent:Ve,PermissionsTableComponent:Xe,TemplateModal:it,AdvancedPermissionsModal:gs},store:c["a"],data:function(){return{permissionSearchString:"",roleSelected:null,targetSelected:null,sectionSelected:null}},created:function(){var e=this.item_model+"_"+this.item_id;this.checkPermissions({permissions:{apply_template:{alt_target:e}}}).catch((function(e){console.log(e)}))},computed:Object(a["a"])(Object(a["a"])(Object(a["a"])({},l["a"].mapState({user_permissions:function(e){return e.permissions.current_user_permissions}})),l["a"].mapGetters(["allRoleNames"])),{},{title_string:function(){return"Permissions for "+this.item_name},item_key:function(){return this.item_id+"_"+this.item_model},modal_id:function(){return this.item_key},modal:function(){return this.modal_id?this.modal_id:"default"},role_names:function(){return["","you","anyone"].concat(this.allRoleNames)},target_names:function(){return this.get_array("target")},section_names:function(){return this.get_array("section")},filter_data:function(){var e={};return this.permissionSearchString&&(e["searchString"]=this.permissionSearchString),this.roleSelected&&(e["roleSelected"]=this.roleSelected),this.targetSelected&&(e["targetSelected"]=this.targetSelected),this.sectionSelected&&(e["sectionSelected"]=this.sectionSelected),e}}),methods:Object(a["a"])(Object(a["a"])({},l["a"].mapActions(["checkPermissions"])),{},{get_array:function(e){var t=[""];return this.permissions.forEach((function(n){t.includes(n[e])||t.push(n[e])})),t}})},ws=ks,ys=(n("e087"),Object(u["a"])(ws,ds,us,!1,null,"6ed8d264",null)),Os=ys.exports,Cs={components:{ComplexPermissionsDisplayComponent:Os},props:["group_pk"],store:c["a"],created:function(){var e=this;this.getPermissionsForItem({item_id:this.group_pk,item_model:"group"}).catch((function(t){e.error_message=t}))},computed:Object(a["a"])(Object(a["a"])({},l["a"].mapGetters(["permissionsForGroup"])),{},{group_name:function(){return c["a"].state.group_name},permissions:function(){return this.permissionsForGroup()}}),methods:Object(a["a"])({},l["a"].mapActions(["getPermissionsForItem"]))},xs=Cs,Es=Object(u["a"])(xs,ms,_s,!1,null,null,null),Rs=Es.exports,As=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.user?n("span",[n("div",[n("b-card",{attrs:{title:e.title,"body-class":"text-center","header-tag":"nav"},scopedSlots:e._u([{key:"header",fn:function(){return[n("b-nav",{attrs:{"card-header":"",tabs:""}},[n("b-nav-item",{attrs:{"link-classes":"text-info",active:"roles"==e.tab},on:{click:function(t){e.tab="roles"}}},[e._v(" Roles")])],1)]},proxy:!0}],null,!1,186345035)},[n("b-card-text",["roles"==e.tab?n("div",{staticClass:"my-3 mx-5"},[n("h4",{staticClass:"font-weight-bold"},[e._v("Roles")]),n("error-component",{attrs:{message:e.error_message}}),n("p",{staticClass:"text-left mt-4 mb-2"},[e._v("Roles "+e._s(e.user.name)+" is in:")]),n("b-container",e._l(e.in_roles,(function(t){return n("b-row",{key:t.name,staticClass:"my-2"},[n("b-col",{staticClass:"text-left",attrs:{cols:"9"}},[n("span",{staticClass:"font-weight-bold"},[e._v(e._s(t.name))]),n("span",{staticClass:"ml-2 text-muted"},[e._v("permissions: "+e._s(e.to_list(t.permissions)))])]),n("b-col",[n("b-button",{staticClass:"btn-sm ml-3 float-right ",attrs:{variant:"outline-secondary"},on:{click:function(n){return e.remove_role(t)}}},[e._v("remove from role")])],1)],1)})),1),n("p",{staticClass:"text-left mt-4 mb-2"},[e._v("Roles "+e._s(e.user.name)+" is not part of:")]),n("b-container",e._l(e.out_roles,(function(t){return n("b-row",{key:t.name,staticClass:"my-2"},[n("b-col",{staticClass:"text-left",attrs:{cols:"9"}},[n("span",{staticClass:"font-weight-bold"},[e._v(e._s(t.name))]),n("span",{staticClass:"ml-2 text-muted"},[e._v("permissions: "+e._s(e.to_list(t.permissions)))])]),n("b-col",[n("b-button",{staticClass:"btn-sm ml-3 float-right ",attrs:{variant:"outline-secondary"},on:{click:function(n){return e.add_role(t)}}},[e._v("add to role")])],1)],1)})),1)],1):e._e()])],1)],1)]):e._e()},js=[],Ss={props:["user_pk"],components:{ErrorComponent:Ce["default"]},store:c["a"],data:function(){return{tab:"roles",error_message:""}},created:function(){var e=this;this.getGovernanceData(),this.getPermissionsForItem({item_id:this.group_pk,item_model:"group"}).catch((function(t){e.error_message=t,console.log(t)}))},computed:Object(a["a"])(Object(a["a"])(Object(a["a"])({},l["a"].mapState({user_permissions:function(e){return e.permissions.current_user_permissions},group_name:function(e){return e.group_name},group_pk:function(e){return e.group_pk},roles:function(e){return e.governance.roles}})),l["a"].mapGetters(["permissionsForItem","getUser","permissionsForRole"])),{},{title:function(){return this.user?this.user.name+"'s privileges in "+this.group_name:"user "+self.user_pk+"'s privileges in "+this.group_name},user:function(){return this.getUser(this.user_pk)},in_roles:function(){return this.user_annotated_roles.filter((function(e){return 1==e.user_is_member}))},out_roles:function(){return this.user_annotated_roles.filter((function(e){return 0==e.user_is_member}))},user_annotated_roles:function(){var e=[];for(var t in this.roles){var n=this.roles[t];n["user_is_member"]=n.current_members.indexOf(parseInt(this.user_pk))>-1,n["permissions"]=this.permissionsForRole(n.name),e.push(n)}return this.roles}}),methods:Object(a["a"])(Object(a["a"])({},l["a"].mapActions(["checkPermissions","getPermissionsForItem","addUsersToRole","removeUsersFromRole","getGovernanceData"])),{},{to_list:function(e){var t=Array.from(e,(function(e){return e.name}));return t.join(", ")},add_role:function(e){var t=this;this.addUsersToRole({role_name:e.name,user_pks:[parseInt(this.user_pk)]}).catch((function(e){t.error_message=e}))},remove_role:function(e){var t=this;this.removeUsersFromRole({role_name:e.name,user_pks:[parseInt(this.user_pk)]}).catch((function(e){t.error_message=e}))}})},Ps=Ss,Ds=Object(u["a"])(Ps,As,js,!1,null,null,null),Is=Ds.exports,Ts=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[n("h5",[e._v("Conditions for "),e.leadership_type?n("span",{staticClass:"text-info"},[e._v(e._s(e.group_name)+"'s "+e._s(e.leadership_type)+"s")]):e._e(),e.permission?n("span",[e._v("permission "),n("span",{staticClass:"text-info"},[e._v("'"+e._s(e.permission.display)+"'")])]):e._e()]),n("span",{attrs:{id:"existing_condition"}},[e._l(e.conditions,(function(t,s){return n("div",{key:t.element_id,staticClass:"mx-auto"},[n("div",{staticClass:"rounded bg-light border p-3 mt-3 text-center edit-condition-text"},[n("p",[e._v(e._s(t.how_to_pass)+" "),n("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal",value:"edit_condition_modal_"+t.element_id,expression:"'edit_condition_modal_'+condition.element_id"}],staticClass:"btn-sm btn-light border edit-condition-button"},[e._v("edit")])],1),n("edit-condition-component",{attrs:{element_id:t.element_id},on:{finished:e.clear_state}})],1),s<e.conditions.length-1?n("p",{staticClass:"text-center p-1"},[e._v("AND")]):e._e()])})),e.conditions&&0!=e.conditions.length?e._e():n("span",[e._v("There are no conditions set.")])],2),n("hr"),e.condition_selected?e._e():n("span",[e.show_select?e._e():n("b-button",{staticClass:"btm-sm mt-3",attrs:{id:"new_condition"},on:{click:function(t){e.show_select=!0}}},[e._v(" Add new condition")]),e.show_select&&!e.condition_selected?n("span",[n("b",[e._v("Select condition to add")]),[n("div",[n("b-form-select",{attrs:{options:e.processed_condition_options,"select-size":4,name:"condition_select"},model:{value:e.condition_selected,callback:function(t){e.condition_selected=t},expression:"condition_selected"}})],1)]],2):e._e(),n("error-component",{attrs:{message:e.error_message}})],1),e.condition_selected?n("edit-condition-component",{attrs:{condition_selected:e.condition_selected},on:{finished:e.clear_state}}):e._e()],1)},Ms=[],Ns=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-modal",{attrs:{id:e.modal_id,size:"lg",title:e.modal_title,"hide-footer":""},on:{hide:function(t){return e.wrap_up()}}},[e.element_id?n("b-button",{attrs:{id:"delete_condition_button"},on:{click:function(t){return e.remove_condition()}}},[e._v("delete condition")]):e._e(),e._l(e.configuration_fields,(function(t){return n("complex-configurable-field-component",{key:t.field_name,attrs:{field:t,conditioned_on:e.conditioned_on},on:{"field-changed":e.change_field}})})),n("error-component",{attrs:{message:e.error_message}}),e.condition_selected?n("b-button",{staticClass:"mt-3",attrs:{size:"sm",id:"save_condition_button"},on:{click:function(t){return e.add_condition()}}},[e._v(" add condition")]):e._e(),e.element_id?n("b-button",{staticClass:"mt-3",attrs:{size:"sm",id:"save_edit_condition_button"},on:{click:function(t){return e.edit_condition()}}},[e._v(" edit condition")]):e._e()],2)},Fs=[],Ls=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"my-3"},[e.can_be_dependency_field(e.field)?e._e():n("span",[n("field-component",{attrs:{initial_field:e.field},on:{"field-changed":e.change_field}})],1),e.can_be_dependency_field(e.field)&&!e.is_dependency_field(e.field.value)?n("span",[n("b-container",[n("b-row",[n("b-col",{attrs:{cols:"8"}},[n("field-component",{attrs:{initial_field:e.field},on:{"field-changed":e.change_field}})],1),n("b-col",[n("dependent-field-manager-component",{attrs:{field:e.field},on:{"field-changed":e.change_field}})],1)],1)],1)],1):e._e(),e.can_be_dependency_field(e.field)&&e.is_dependency_field(e.field.value)?n("span",[n("dependent-field-manager-component",{attrs:{field:e.field},on:{"field-changed":e.change_field}})],1):e._e()])},Us=[],$s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[e.model_selected?n("span",[e.field.display?n("span",[e._v(e._s(e.field.display))]):e._e(),e.field.label?n("span",[e._v(e._s(e.field.label))]):e._e(),n("b-button",{staticClass:"btn-sm btn-info"},[n("small",[n("b",[e._v("set as: "+e._s(e.model_selected)),e.field_selected?n("span",[e._v("'s "+e._s(e.field_selected))]):e._e()])]),n("span",{directives:[{name:"b-modal",rawName:"v-b-modal",value:e.dependent_field_modal_id,expression:"dependent_field_modal_id"}],staticClass:"badge badge-info ml-1 edit-dependent-field"},[e._v("")]),n("span",{staticClass:"badge badge-info ml-1 delete-dependent-field",on:{click:function(t){return e.remove_dependent_field()}}},[e._v("")])])],1):n("span",[n("span",{directives:[{name:"b-modal",rawName:"v-b-modal",value:e.dependent_field_modal_id,expression:"dependent_field_modal_id"}],staticClass:"badge badge-info add-dependent-field"},[e._v(" add dependency")])]),n("dependent-field-component",{attrs:{modal_id:e.dependent_field_modal_id,field:e.field,initial_model_selected:e.model_selected,initial_field_selected:e.field_selected},on:{"change-dependent-field":e.change_dependent_field}})],1)},Gs=[],qs=(n("1276"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-modal",{attrs:{size:"lg",title:"Configure your dependent field","hide-footer":"",id:e.modal_id}},[e._v(" Instead of providing a value now, you can make the value of this field depend on something related, for instance the action which is being evaluated by the permission/condition. "),n("hr"),e._v(" Choose object to depend on: "),n("span",{staticClass:"my-3",attrs:{id:"model_options"}},e._l(e.model_options,(function(t){return n("b-button",{key:t,staticClass:"mr-2",attrs:{id:"depend_on_model_"+t,variant:e.button_variant(t)},on:{click:function(n){e.model_selected=t}}},[e._v(e._s(t))])})),1),e.model_selected?n("div",{staticClass:"block my-2",attrs:{id:"model_config"}},[e._v(" Select field on "+e._s(e.model_selected)+" (leave blank to use "+e._s(e.model_selected)+" itself):"),n("br"),n("b-form-select",{staticClass:"dependent-field-select",attrs:{options:e.field_options,name:"dependent-field-select"},model:{value:e.field_selected,callback:function(t){e.field_selected=t},expression:"field_selected"}})],1):e._e(),n("error-component",{attrs:{message:e.error_message}}),n("hr"),n("div",{staticClass:"block mt-3"},[n("b-button",{attrs:{id:"save-dependent-field"},on:{click:function(t){return e.change_dependent_field()}}},[e._v("save "),e.model_selected?n("span",[e._v(" '"+e._s(e.model_selected)),e.field_selected?n("span",[e._v(" "+e._s(e.field_selected))]):e._e(),e._v("'")]):e._e()]),n("b-button",{on:{click:function(t){return e.remove_dependent_field()}}},[e._v("remove dependent field")])],1)],1)}),zs=[],Vs={props:["modal_id","field","initial_model_selected","initial_field_selected"],components:{ErrorComponent:Ce["default"]},store:c["a"],data:function(){return{model_selected:null,field_selected:null,field_options:[],permission:null,error_message:null}},inject:["dependency_scope"],created:function(){this.model_selected=this.initial_model_selected,this.field_selected=this.initial_field_selected,this.permission=this.$parent.$parent.$parent.$parent.$parent.$parent.permission},watch:{initial_model_selected:function(e){this.model_selected=e},initial_field_selected:function(e){this.field_selected=e},model_selected:function(e){this.field_options=this.get_field_options(e),this.field_selected=null}},computed:Object(a["a"])(Object(a["a"])({},l["a"].mapState({model_and_field_options_unprocessed:function(e){return e.permissions.dependent_field_options}})),{},{model_options:function(){var e=this,t=[];return this.permission.dependent_field_options.forEach((function(n){t.push(e.replace_generic_models(n))})),t},field_option_selected:function(){var e=this,t=null;return this.field_options.forEach((function(n){n.text==e.field_selected&&(t=n)})),t}}),methods:{get_field_options:function(e){var t=this,n=this.model_and_field_options_unprocessed[e],s=[];return"action"==e&&this.permission.change_field_options.forEach((function(e){return n.push(e)})),n.forEach((function(e){t.match_field_types(t.field.type,e.type)&&s.push(e)})),s},match_field_types:function(e,t){var n=["ActorListField","ActorPKField","ActorField"],s=["RoleListField","RoleField"];return n.indexOf(e)>-1&&n.indexOf(t)>-1||(s.indexOf(e)>-1&&s.indexOf(t)>-1||e==t)},replace_generic_models:function(e){var t={forum:{commented_object:"post",post:"commented_object"}};return this.dependency_scope in t&&e in t[this.dependency_scope]?t[this.dependency_scope][e]:e},get_transform_string:function(){if(!this.field_selected)return"";if("ActorListField"==this.field.type){if("ActorPKField"==this.field_option_selected.type)return"||to_list";if("ActorField"==this.field_option_selected.type)return"||to_pk_in_list"}if("ActorPKField"==this.field.type){if("ActorListField"==this.field_option_selected.type)return"||from_list";if("ActorField"==this.field_option_selected.type)return"||to_pk"}return"RoleListField"==this.field.type&&"RoleField"==this.field_option_selected.type?"||to_list":"RoleField"==this.field.type&&"RoleListField"==this.field_option_selected.type?"||from_list":void 0},is_change_field:function(){var e=this,t=!1;return this.permission.change_field_options.forEach((function(n){n.text==e.field_selected&&(t=!0)})),t},button_variant:function(e){return e==this.model_selected?"info":"secondary"},validate_selection:function(){return!(!this.field_selected&&"ObjectField"!=this.field.type)||(this.error_message="This field cannot be set to an object. You must chose a field on an object.",!1)},change_dependent_field:function(){this.validate_selection()&&(this.$emit("change-dependent-field",{model_selected:this.model_selected,field_selected:this.field_option_selected.text,transform_string:this.get_transform_string(),field_is_change_field:this.is_change_field()}),this.$bvModal.hide(this.modal_id))},remove_dependent_field:function(){this.$emit("change-dependent-field",{model_selected:null}),this.$bvModal.hide(this.modal_id)}}},Bs=Vs,Ws=Object(u["a"])(Bs,qs,zs,!1,null,null,null),Ys=Ws.exports,Hs={components:{DependentFieldComponent:Ys},store:c["a"],props:["field"],data:function(){return{model_selected:null,field_selected:null}},created:function(){this.parse_string(this.field.value)},watch:{field:function(e){this.parse_string(e.value)}},computed:{dependent_field_modal_id:function(){var e="configure_dependent_field_"+Math.random();return e.replace(".","")}},methods:{change_dependent_field:function(e){this.model_selected=e.model_selected,this.field_selected=e.field_selected;var t=this.reform_string(e.transform_string,e.field_is_change_field);this.$emit("field-changed",{field_name:this.field.field_name,new_value:t})},parse_string:function(e){if(e&&"string"==typeof e){var t=e.substring(2,e.length-2);t=t.split("||")[0];var n=t.split(".");"context"==n[0]?(this.model_selected=n[1],this.field_selected=null,n.length>=3&&("action"==n[1]&&"change"==n[2]?this.field_selected=n[3]:this.field_selected=n[2])):console.log("problem with "+e)}},reform_string:function(e,t){if(this.model_selected){var n="{{context."+this.model_selected.toLowerCase();return this.field_selected&&(t&&(n+=".change"),n+="."+this.field_selected),e&&(n+=e),n+="}}",n}return null}}},Ks=Hs,Js=Object(u["a"])(Ks,$s,Gs,!1,null,null,null),Xs=Js.exports,Qs={store:c["a"],props:["field","conditioned_on"],components:{FieldComponent:O["a"],DependentFieldManagerComponent:Xs},methods:{can_be_dependency_field:function(e){return!(!this.conditioned_on||"leadership"==this.conditioned_on)&&e.can_depend},is_dependency_field:function(e){return!(!e||"string"!=typeof e||"}}"!=e.substring(e.length-2,e.length)||"{{"!=e.substring(0,2))},change_field:function(e){this.$emit("field-changed",e)}}},Zs=Qs,ei=Object(u["a"])(Zs,Ls,Us,!1,null,null,null),ti=ei.exports,ni={components:{ErrorComponent:Ce["default"],ComplexConfigurableFieldComponent:ti},store:c["a"],mixins:[v["a"]],props:["element_id","condition_selected"],data:function(){return{configuration_fields:[],error_message:""}},computed:Object(a["a"])(Object(a["a"])({},l["a"].mapGetters(["getConditionConfigurationFields","getPermissionConditionConfigurationFieldsWithData","getLeadershipConditionConfigurationFieldsWithData"])),{},{modal_id:function(){return this.element_id?"edit_condition_modal_"+this.element_id:this.condition_selected?"edit_condition_modal_new":void 0},modal_title:function(){return this.element_id?"Configuring "+this.params.condition_type+" (id: "+this.element_id+")":this.condition_selected?"Configuring "+this.params.condition_type+" (new)":void 0},conditioned_on:function(){return"permission"in this.$parent&&this.$parent.permission?"permission":"leadership"},condition_type:function(){return this.condition_selected?this.condition_selected:this.element_id?this.$parent.conditions_with_keys[this.element_id]["type"]:void 0},params:function(){var e={condition_type:this.condition_type};return this.element_id&&Object.assign(e,{element_id:this.element_id}),"permission"==this.conditioned_on?Object.assign(e,{permission_or_leadership:"permission",permission_id:this.$parent.permission.pk}):Object.assign(e,{permission_or_leadership:"leadership",leadership_type:this.$parent.leadership_type}),e}}),created:function(){var e=this;this.configuration_fields=this.get_configuration_fields(),this.condition_selected&&this.$nextTick((function(){e.$bvModal.show(e.modal_id)}))},methods:Object(a["a"])(Object(a["a"])({},l["a"].mapActions(["addCondition","editCondition","removeCondition"])),{},{get_configuration_fields:function(){var e=[];if(this.condition_selected)return e=this.getConditionConfigurationFields(this.condition_selected),Object.values(e);if(this.element_id){if(this.$parent.permission)return e=this.getPermissionConditionConfigurationFieldsWithData(this.$parent.permission.pk,this.element_id),Object.values(e);if(this.$parent.leadership_type)return e=this.getLeadershipConditionConfigurationFieldsWithData(this.$parent.leadership_type,this.element_id),Object.values(e)}return[]},wrap_up:function(){this.$emit("finished"),this.$bvModal.hide(this.modal_id)},add_condition:function(){var e=this,t=this.params;t["combined_condition_data"]=this.configuration_fields,this.addCondition(t).then((function(t){return e.wrap_up()})).catch((function(t){return e.error_message=t}))},edit_condition:function(){var e=this,t=this.params;t["combined_condition_data"]=this.configuration_fields,this.editCondition(t).then((function(t){return e.wrap_up()})).catch((function(t){return e.error_message=t}))},remove_condition:function(){var e=this;this.removeCondition(this.params).then((function(t){return e.wrap_up()})).catch((function(t){return e.error_message=t}))}})},si=ni,ii=Object(u["a"])(si,Ns,Fs,!1,null,null,null),oi=ii.exports,ri={store:c["a"],props:["conditioned_on","dependency_scope"],components:{ErrorComponent:Ce["default"],EditConditionComponent:oi},data:function(){return{show_select:!1,leadership_type:null,condition_selected:"",error_message:""}},provide:function(){var e=this.dependency_scope?this.dependency_scope:"group";return{dependency_scope:e}},created:function(){["owner","governor"].indexOf(this.conditioned_on)>-1?this.leadership_type=this.conditioned_on:this.fetchMissingPermission({pk:this.conditioned_on}).catch((function(e){return console.log(e)}))},computed:Object(a["a"])(Object(a["a"])({},l["a"].mapState({owner_condition:function(e){return e.permissions.owner_condition},governor_condition:function(e){return e.permissions.governor_condition},condition_options:function(e){return e.permissions.condition_options},permissions:function(e){return e.permissions.permissions},group_name:function(e){return e.group_name}})),{},{processed_condition_options:function(){var e=this,t=[];return t.push({label:"Decision Conditions",options:this.condition_options.filter((function(e){return!e.value.includes("Filter")}))}),this.leadership_type||t.push({label:"Filter Conditions",options:this.condition_options.filter((function(t){if(t.value.includes("Filter")){if(!t.linked)return!0;if(e.permission.linked&&e.permission.linked.includes(t.value))return!0}return!1}))}),t},permission:function(){if(!this.leadership_type)return this.permissions[this.conditioned_on]},conditions_with_keys:function(){return this.permission&&this.permission.condition?this.permission.condition:"owner"==this.leadership_type&&this.owner_condition?this.owner_condition:"governor"==this.leadership_type&&this.governor_condition?this.governor_condition:void 0},conditions:function(){if(this.conditions_with_keys){var e=this.conditions_with_keys;return delete e.how_to_pass_overall,Object.values(e).sort((function(e,t){return e.how_to_pass<t.how_to_pass?-1:e.how_to_pass>t.how_to_pass?1:0}))}return[]}}),methods:Object(a["a"])(Object(a["a"])({},l["a"].mapActions(["fetchMissingPermission"])),{},{clear_state:function(){this.condition_selected=null,this.show_select=!1}})},ai=ri,li=Object(u["a"])(ai,Ts,Ms,!1,null,null,null),ci=li.exports,mi=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-row",[n("b-col",{attrs:{cols:"3"}},[n("resource-sidebar-component",{attrs:{highlight_model:"forum",highlight_pk:e.item_id}})],1),n("b-col",{attrs:{cols:"9"}},[n("forum-component",{attrs:{item_id:e.item_id}})],1)],1)},_i=[],di=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.forum?n("div",{staticClass:"bg-white p-3"},[n("h3",{staticClass:"mt-3"},[e._v(e._s(e.forum.name))]),n("p",[e._v(e._s(e.forum.description))]),e.user_permissions.edit_forum?n("form-button-and-modal",{attrs:{id_add:"main",item_id:e.item_id,item_model:"forum",button_text:"edit metadata"}}):e._e(),n("action-response-component",{attrs:{response:e.delete_forum_response}}),e.user_permissions.delete_forum&&!e.is_governance_forum?n("b-button",{staticClass:"btn-sm mr-2",attrs:{variant:"outline-secondary",id:"delete_forum_button"},on:{click:e.delete_forum}},[e._v("delete forum")]):e._e(),n("router-link",{attrs:{to:{name:"action-history",params:{item_id:e.item_id,item_model:"forum",item_name:e.forum.name}}}},[n("b-button",{staticClass:"btn-sm mr-2",attrs:{variant:"outline-secondary",id:"forum_history_button"}},[e._v("forum history")])],1),n("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.item_permissions_modal",modifiers:{item_permissions_modal:!0}}],staticClass:"btn-sm mr-2",attrs:{variant:"outline-secondary",id:"forum_permissions_button"}},[e._v("forum permissions")]),n("item-permissions-modal",{attrs:{item_id:e.item_id,item_model:"forum",item_name:e.forum.name}}),n("b-button",{staticClass:"btn-sm",attrs:{href:e.json_export_url,variant:"outline-secondary",download:""}},[e._v(" export as json")]),n("hr"),e.user_permissions.add_post?n("form-button-and-modal",{attrs:{item_model:"post",button_text:"+ add post",supplied_params:{forum_id:e.item_id}}}):e._e(),e._l(e.posts,(function(t){var s=t.pk,i=t.title,o=t.content,r=t.author,a=t.created;return n("b-card",{key:s,staticClass:"bg-light text-info border-secondary mt-3"},[n("router-link",{attrs:{to:{name:"post-detail",params:{forum_id:e.item_id,item_id:s}}}},[n("b-card-title",{staticClass:"post-link"},[e._v(e._s(i))])],1),n("p",{staticClass:"mb-1 text-secondary post-content"},[e._v(" "+e._s(e.shorten_text(o,100))+" ")]),n("small",{staticClass:"text-muted"},[e._v("Posted by "+e._s(r)+" on "+e._s(e.display_date(a)))])],1)})),0===Object.keys(e.posts).length?n("span",[e._v("There are no posts yet in this forum.")]):e._e()],2):e._e()},ui=[],pi={props:["item_id"],store:c["a"],components:{ItemPermissionsModal:dt,FormButtonAndModal:A,ActionResponseComponent:m["default"]},mixins:[v["b"]],data:function(){return{forum:null,posts:null,delete_forum_response:null,base_export_url:""}},created:function(){var e=this;this.forum=this.getForumData(this.item_id),this.forum||this.getForum({forum_pk:parseInt(this.item_id)}).then((function(t){e.forum=e.getForumData(e.item_id)})),this.posts=this.getPostsDataForForum(this.item_id),this.posts&&0!=this.posts.length||this.getPosts({forum_pk:parseInt(this.item_id)}).then((function(t){e.posts=e.getPostsDataForForum(e.item_id)}));var t="forum_"+this.item_id;this.checkPermissions({permissions:{edit_forum:{alt_target:t},delete_forum:{alt_target:t},add_post:{alt_target:t}}}),this.url_lookup("export_as_json").then((function(t){return e.base_export_url=t}))},watch:{forums:function(e){this.forum=this.getForumData(this.item_id)}},computed:Object(a["a"])(Object(a["a"])(Object(a["a"])({},l["a"].mapState({user_permissions:function(e){return e.permissions.current_user_permissions},forums:function(e){return e.forums.forums}})),l["a"].mapGetters(["getForumData","getPostsDataForForum","getUserName","url_lookup"])),{},{is_governance_forum:function(){if(this.forum)return"Gov"==this.forum.special},json_export_url:function(){return this.base_export_url+"?item_id="+this.item_id+"&item_model=forum"}}),methods:Object(a["a"])(Object(a["a"])({},l["a"].mapActions(["checkPermissions","getForum","getPosts","deleteForum"])),{},{display_date:function(e){return Date(e)},delete_forum:function(){var e=this;this.deleteForum({pk:this.item_id}).then((function(t){"implemented"==t.data.action_status?e.$router.push({name:"home"}):e.delete_forum_response=t}))}})},fi=pi,hi=Object(u["a"])(fi,di,ui,!1,null,null,null),bi=hi.exports,vi=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",e._l(e.resources,(function(t){var s=t.display,i=t.model,o=t.items;return n("div",{key:i,staticClass:"mb-4"},[n("h5",{staticClass:"font-weight-bold"},[e._v(" "+e._s(s)+" "),"simplelist"==i?n("router-link",{attrs:{to:{name:"add-new-list"}}},[e.user_permissions.add_list?n("b-button",{staticClass:"btn-sm ml-3",attrs:{variant:"light",id:"add_list_default_button"}},[e._v("+ add new")]):e._e()],1):e._e(),"forum"==i&&e.user_permissions.add_forum?n("form-button-and-modal",{attrs:{item_model:"forum",button_text:"+ add new",supplied_variant:"light",supplied_classes:"btn-sm ml-3"}}):e._e(),"document"==i&&e.user_permissions.add_document?n("form-button-and-modal",{attrs:{item_model:"document",button_text:"+ add new",supplied_variant:"light",supplied_classes:"btn-sm ml-3"}}):e._e()],1),n("b-list-group",e._l(o,(function(t){return n("b-list-group-item",{key:t.pk,attrs:{active:t.pk==e.highlight_pk&&i==e.highlight_model}},[n("router-link",{attrs:{to:e.get_router_ref(i,t)}},[e._v(" "+e._s(t.name)+" ")])],1)})),1),0===Object.keys(o).length?n("span",[e._v("There are no "+e._s(s.toLowerCase())+" yet.")]):e._e()],1)})),0)},gi=[],ki={components:{FormButtonAndModal:A},props:["highlight_model","highlight_pk"],created:function(){var e=this;0==this.lists.length&&this.getLists(),0==this.forums.length&&this.getForums(),0==this.documents.length&&this.getDocuments(),this.checkPermissions({permissions:{add_forum:null,add_list:null,add_document:null}}).catch((function(t){e.error_message=t,console.log(t)}))},computed:Object(a["a"])(Object(a["a"])({},l["a"].mapState({lists:function(e){return e.simplelists.lists},forums:function(e){return e.forums.forums},documents:function(e){return e.documents.documents},user_permissions:function(e){return e.permissions.current_user_permissions}})),{},{resources:function(){return[{display:"Forums",model:"forum",items:this.forums},{display:"Lists",model:"simplelist",items:this.lists},{display:"Documents",model:"document",items:this.documents}]}}),methods:Object(a["a"])(Object(a["a"])({},l["a"].mapActions(["checkPermissions","getLists","getForums","getDocuments"])),{},{get_router_ref:function(e,t){return"simplelist"==e?{name:"list-detail",params:{list_id:t.pk}}:"forum"==e?{name:"forum-detail",params:{item_id:t.pk}}:"document"==e?{name:"document-detail",params:{item_id:t.pk}}:void 0}})},wi=ki,yi=(n("6348"),Object(u["a"])(wi,vi,gi,!1,null,"32494b96",null)),Oi=yi.exports,Ci={components:{ForumComponent:bi,ResourceSidebarComponent:Oi},props:["item_id"]},xi=Ci,Ei=Object(u["a"])(xi,mi,_i,!1,null,null,null),Ri=Ei.exports,Ai=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-row",[n("b-col",{attrs:{cols:"3"}},[n("resource-sidebar-component",{attrs:{highlight_model:"forum",highlight_pk:e.forum_id}})],1),n("b-col",{attrs:{cols:"9"}},[e.post?n("div",{staticClass:"bg-white p-3"},[n("h3",[e._v(e._s(e.post.title))]),n("small",{staticClass:"text-muted"},[e._v("Posted in "+e._s(e.forum_name)+" on "+e._s(e.display_date(e.post.created))+" by "+e._s(e.getUserName(e.post.author)))]),n("div",{staticClass:"my-3"},[e.user_permissions.edit_post?n("form-button-and-modal",{attrs:{item_id:e.item_id,item_model:"post",button_text:"edit post",id_add:"main"}}):e._e(),n("action-response-component",{attrs:{response:e.delete_post_response}}),e.user_permissions.delete_post?n("b-button",{staticClass:"btn-sm mr-2",attrs:{variant:"outline-secondary",id:"delete_post_button"},on:{click:function(t){return e.delete_post(e.item_id)}}},[e._v("delete post")]):e._e(),n("router-link",{attrs:{to:{name:"action-history",params:{item_id:e.item_id,item_model:"post",item_name:e.post.title}}}},[n("b-button",{staticClass:"btn-sm mr-2",attrs:{variant:"outline-secondary",id:"post_history_button"}},[e._v("post history")])],1),n("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.item_permissions_modal",modifiers:{item_permissions_modal:!0}}],staticClass:"btn-sm mr-2",attrs:{variant:"outline-secondary",id:"post_permissions"}},[e._v("post permissions")]),n("item-permissions-modal",{attrs:{item_id:e.item_id,item_model:"post",item_name:e.post.title}})],1),n("p",{staticClass:"mb-3 text-secondary"},[e._v(" "+e._s(e.post.content)+" ")]),n("CommentListComponent",{staticClass:"mt-3",attrs:{item_id:e.item_id,item_model:"post"}})],1):e._e()])],1)},ji=[],Si={props:["forum_id","item_id"],store:c["a"],components:{CommentListComponent:kt,ResourceSidebarComponent:Oi,ItemPermissionsModal:dt,FormButtonAndModal:A,ActionResponseComponent:m["default"]},mixins:[v["b"]],data:function(){return{post:null,forum:null,delete_post_response:null}},created:function(){var e=this;this.getGovernanceData().then((function(t){e.post=e.getPostData(e.item_id),e.post||e.getPost({post_pk:e.item_id}).then((function(t){e.post=e.getPostData(e.item_id)}))})),this.forum=this.getForumData(this.forum_id),this.forum||this.getForum({forum_pk:parseInt(this.forum_id)}).then((function(t){e.forum=e.getForumData(e.forum_id)}));var t="post_"+this.item_id;this.checkPermissions({permissions:{edit_post:{alt_target:t},delete_post:{alt_target:t}}}).catch((function(t){e.error_message=t,console.log(t)}))},computed:Object(a["a"])(Object(a["a"])(Object(a["a"])({},l["a"].mapState({user_permissions:function(e){return e.permissions.current_user_permissions}})),l["a"].mapGetters(["getUserName","getPostData","getForumData"])),{},{forum_name:function(){return this.forum?this.forum.name:""}}),methods:Object(a["a"])(Object(a["a"])({},l["a"].mapActions(["checkPermissions","deletePost","getPost","getForum","getGovernanceData"])),{},{display_date:function(e){return Date(e)},delete_post:function(e){var t=this;this.deletePost({pk:e,forum_pk:this.forum_id}).then((function(e){"implemented"==e.data.action_status?t.$router.push({name:"forum-detail",params:{forum_id:t.forum_id}}):t.delete_post_response=e}))}})},Pi=Si,Di=Object(u["a"])(Pi,Ai,ji,!1,null,null,null),Ii=Di.exports,Ti=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-modal",{attrs:{id:"list_modal",title:e.title_string,size:"lg",visible:!0,"hide-footer":""},on:{hide:function(t){return e.$router.go(-1)}}},[n("b-form-group",{attrs:{id:"name_form_group",label:"List name:","label-for":"list_name"}},[n("b-form-input",{attrs:{id:"list_name",name:"list_name",required:"",placeholder:"Please pick a name"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),n("b-form-group",{attrs:{id:"description_form_group",label:"List description:","label-for":"list_description"}},[n("b-form-textarea",{attrs:{id:"list_description",name:"list_description",placeholder:"Add a description"},model:{value:e.description,callback:function(t){e.description=t},expression:"description"}})],1),n("span",{staticClass:"my-4",attrs:{id:"list_columns"}},[n("b-table-lite",{attrs:{striped:"",items:e.columns,"caption-top":""},scopedSlots:e._u([{key:"table-caption",fn:function(){return[e._v("Existing columns")]},proxy:!0},{key:"cell(delete)",fn:function(t){return[n("b-button",{attrs:{id:"delete_column_"+t.item.name},on:{click:function(n){return e.delete_column(t.item)}}},[e._v("delete")])]}}])}),n("error-component",{attrs:{message:e.column_error_message,dismissable:!0}}),n("p",{staticClass:"my-2"},[e._v("Add a new column:")]),n("b-form",{attrs:{inline:""}},[n("b-form-input",{staticClass:"mr-2",attrs:{id:"column_name",name:"column_name",placeholder:"column name",required:""},model:{value:e.column_name,callback:function(t){e.column_name=t},expression:"column_name"}}),n("b-form-input",{staticClass:"mr-2",attrs:{id:"column_default",name:"column_default",placeholder:"default value"},model:{value:e.column_default,callback:function(t){e.column_default=t},expression:"column_default"}}),n("input",{directives:[{name:"model",rawName:"v-model",value:e.column_required,expression:"column_required"}],staticClass:"mr-2",attrs:{type:"checkbox",id:"column_required",name:"column_required"},domProps:{checked:Array.isArray(e.column_required)?e._i(e.column_required,null)>-1:e.column_required},on:{change:function(t){var n=e.column_required,s=t.target,i=!!s.checked;if(Array.isArray(n)){var o=null,r=e._i(n,o);s.checked?r<0&&(e.column_required=n.concat([o])):r>-1&&(e.column_required=n.slice(0,r).concat(n.slice(r+1)))}else e.column_required=i}}}),e._v(" required "),n("b-button",{staticClass:"btn-sm ml-2",attrs:{variant:"info",id:"add_new_col_button"},on:{click:function(t){return e.add_column()}}},[e._v("add")])],1)],1),n("action-response-component",{attrs:{response:e.list_response}}),e.list_id?e._e():n("b-button",{staticClass:"btn-sm mt-4",attrs:{variant:"outline-secondary",id:"add_list_default_submit_button"},on:{click:e.add_list}},[e._v("submit")]),e.list_id?n("b-button",{staticClass:"btn-sm mt-4",attrs:{variant:"outline-secondary",id:"edit_list_main_submit_button"},on:{click:e.edit_list}},[e._v("submit")]):e._e(),n("error-component",{attrs:{message:e.error_message}})],1)},Mi=[],Ni=(n("a4d3"),n("e01a"),n("7db0"),n("a434"),{props:["list_id"],components:{ErrorComponent:Ce["default"],ActionResponseComponent:m["default"]},store:c["a"],data:function(){return{name:null,description:null,error_message:null,list_loaded:!1,columns:[],column_name:"",column_required:!1,column_default:"",column_error_message:null,list_response:null}},created:function(){this.list_id&&!this.lists_loaded&&this.getLists(),this.populate_columns()},watch:{lists_loaded:function(e){this.populate_columns()}},computed:Object(a["a"])(Object(a["a"])(Object(a["a"])({},l["a"].mapState({lists:function(e){return e.simplelists.lists}})),l["a"].mapGetters(["getListData"])),{},{title_string:function(){return this.list_id?"Edit list '"+this.name+"'":"Add a new list"},lists_loaded:function(){return 0!=this.lists.length}}),methods:Object(a["a"])(Object(a["a"])({},l["a"].mapActions(["getLists","addList","editList"])),{},{add_list:function(){var e=this;this.addList({name:this.name,description:this.description,configuration:this.reformat_columns_for_backend(this.columns)}).then((function(t){e.list_response=t}))},edit_list:function(){var e=this;this.editList({list_pk:parseInt(this.list_id),name:this.name,description:this.description,configuration:this.reformat_columns_for_backend(this.columns)}).then((function(t){e.list_response=t}))},populate_columns:function(){if(this.list_id){if(this.lists_loaded){var e=this.getListData(this.list_id);this.name=e.name,this.description=e.description,this.columns=this.reformat_columns(e.configuration)}}else this.columns=this.reformat_columns({content:{}})},reformat_columns:function(e){var t=[];for(var n in e){var s=!!e[n].required&&e[n].required,i=e[n].default_value?e[n].default_value:"";t.push({name:n,required:s,default_value:i,delete:null})}return t},reformat_columns_for_backend:function(e){var t={};for(var n in e){var s=e[n];t[s.name]={required:s.required,default_value:s.default_value}}return t},add_column:function(){var e=this;if(this.column_name){var t=this.columns.find((function(t){return t.name==e.column_name}));t?this.column_error_message="Columns must have unique names":this.list_id&&this.column_required&&""==this.column_default?this.column_error_message="If column is required, must supply default value":this.columns.push({name:this.column_name,required:this.column_required,default_value:this.column_default,delete:null})}else this.column_error_message="New column must have a name"},delete_column:function(e){if(1==this.columns.length)this.column_error_message="Must have at least one column";else{var t=0;for(var n in this.columns)this.columns[n].name==e.name&&this.columns.splice(t,1),t++}}})}),Fi=Ni,Li=Object(u["a"])(Fi,Ti,Mi,!1,null,null,null),Ui=Li.exports,$i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-modal",{attrs:{id:"list_modal",title:e.title_string,size:"md",visible:!0,"hide-footer":""},on:{hide:function(t){return e.$router.go(-1)}}},["create"==e.mode?n("b-form-group",{attrs:{id:"index_form_group"}},[e._v(" Index to add row at: "),n("b",[e._v(" "+e._s(e.index)+" ")]),n("b-form-input",{attrs:{id:"index",type:"range",min:"0",max:e.row_length},model:{value:e.index,callback:function(t){e.index=t},expression:"index"}})],1):n("span",{staticClass:"mb-3"},[e._v(" You are editing the item at index: "+e._s(e.index)+". ")]),n("span",{staticClass:"my-3"},e._l(e.columns,(function(t){return n("b-form-group",{key:t.name,attrs:{label:t.name,"label-for":t.name}},[n("b-form-input",{attrs:{id:t.name,name:t.name},model:{value:t.current_value,callback:function(n){e.$set(t,"current_value",n)},expression:"column.current_value"}}),n("b-form-text",[e.is_column_required(t)?n("span",[e._v("You must fill out a value for this column.")]):e._e(),t.default_value?n("span",[e._v("The default value for this column is "+e._s(t.default_value)+".")]):e._e()])],1)})),1),n("action-response-component",{attrs:{response:e.row_response}}),"create"==e.mode?n("b-button",{staticClass:"btn-sm",attrs:{variant:"outline-secondary",id:"add_row_save_button"},on:{click:e.add_row}},[e._v("submit")]):e._e(),"edit"==e.mode?n("b-button",{staticClass:"btn-sm",attrs:{variant:"outline-secondary",id:"edit_row_save_button"},on:{click:e.edit_row}},[e._v("submit")]):e._e(),n("error-component",{attrs:{message:e.error_message}})],1)},Gi=[],qi={props:["list_id","row_index","mode"],components:{ErrorComponent:Ce["default"],ActionResponseComponent:m["default"]},store:c["a"],data:function(){return{index:null,columns:[],row_length:0,error_message:null,row_response:null}},created:function(){var e=this;this.lists_loaded?this.get_initial_data():this.getLists().then((function(t){e.get_initial_data()}))},computed:Object(a["a"])(Object(a["a"])(Object(a["a"])({},l["a"].mapState({lists:function(e){return e.simplelists.lists}})),l["a"].mapGetters(["getListData"])),{},{lists_loaded:function(){return 0!=this.lists.length},title_string:function(){return"edit"==this.mode?"Edit row '"+this.row_index+"'":"Add a new row"}}),methods:Object(a["a"])(Object(a["a"])({},l["a"].mapActions(["getLists","addRow","editRow"])),{},{get_initial_data:function(){var e=this.getListData(this.list_id);this.row_length=e.rows.length,"edit"==this.mode?this.index=this.row_index:this.index=0;var t="edit"==this.mode?e.rows[this.index]:null;this.columns=this.initialize_columns(e.configuration,t)},initialize_columns:function(e,t){var n=[];for(var s in e){var i=e[s],o=t?t[s]:"";n.push({name:s,required:i.required,default_value:i.default_value,current_value:o})}return n},add_row:function(){var e=this;this.addRow({list_pk:this.list_id,index:parseInt(this.index),row_content:this.format_row_content()}).then((function(t){e.row_response=t}))},edit_row:function(){var e=this;this.editRow({list_pk:this.list_id,index:parseInt(this.index),row_content:this.format_row_content()}).then((function(t){e.row_response=t}))},format_row_content:function(){var e={};for(var t in this.columns){var n=this.columns[t];e[n.name]=document.getElementById(n.name).value}return e},is_column_required:function(e){return!(!e.required||""!=e.default_value)}})},zi=qi,Vi=Object(u["a"])(zi,$i,Gi,!1,null,null,null),Bi=Vi.exports,Wi=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"bg-white p-3"},[n("h3",[e._v(e._s(e.list_name))]),n("p",[e._v(e._s(e.list_description))]),e.user_permissions.edit_list?n("router-link",{attrs:{to:{name:"edit-list-info",params:{list_id:e.list_id}}}},[n("b-button",{staticClass:"btn-sm mr-2",attrs:{variant:"outline-secondary",id:"edit_list_main_button"}},[e._v(" edit list info")])],1):e._e(),n("action-response-component",{attrs:{response:e.delete_list_response}}),e.user_permissions.delete_list?n("b-button",{staticClass:"btn-sm mr-2",attrs:{variant:"outline-secondary",id:"delete_list_button"},on:{click:function(t){return e.delete_list(e.list_id)}}},[e._v("delete list")]):e._e(),n("router-link",{attrs:{to:{name:"action-history",params:{item_id:e.list_id,item_model:"simplelist",item_name:e.list_name}}}},[n("b-button",{staticClass:"btn-sm mr-2",attrs:{variant:"outline-secondary",id:"list_history_button"}},[e._v(" list history")])],1),n("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.item_permissions_modal",modifiers:{item_permissions_modal:!0}}],staticClass:"btn-sm mr-2",attrs:{variant:"outline-secondary",id:"list_permissions"}},[e._v("list permissions")]),n("item-permissions-modal",{attrs:{item_id:e.list_id,item_model:"simplelist",item_name:e.list_name}}),n("b-button",{staticClass:"btn-sm  mr-2",attrs:{href:e.csv_export_url,variant:"outline-secondary",download:""}},[e._v(" export as csv")]),e.user_permissions.add_row_to_list?n("router-link",{attrs:{to:{name:"add-list-row",params:{list_id:e.list_id,mode:"create"}}}},[n("b-button",{staticClass:"btn-sm",attrs:{variant:"outline-info",id:"add_row_button"}},[e._v(" add a row")])],1):e._e(),n("error-component",{attrs:{message:e.error_message}}),n("hr"),n("action-response-component",{attrs:{response:e.delete_row_response}}),n("b-table",{attrs:{striped:"",hover:"",items:e.list_data,fields:e.list_fields},scopedSlots:e._u([{key:"cell(change)",fn:function(t){return[n("b-form",{attrs:{inline:""}},[e.user_permissions.edit_row_in_list?n("router-link",{attrs:{to:{name:"edit-list-row",params:{list_id:e.list_id,mode:"edit",row_index:t.item.index}},id:"edit_row_"+t.item.index}},[n("b-button",{staticClass:"btn-sm mx-1",attrs:{variant:"outline-secondary"}},[e._v("edit")])],1):e._e(),e.user_permissions.delete_row_in_list?n("b-button",{staticClass:"btn-sm mx-1",attrs:{variant:"outline-secondary",id:"delete_row_"+t.item.index},on:{click:function(n){return e.delete_row(t.item)}}},[e._v(" delete")]):e._e(),e.user_permissions.move_row_in_list?n("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.move_row_modal",modifiers:{move_row_modal:!0}}],staticClass:"btn-sm mx-1",attrs:{variant:"outline-secondary",id:"move_row_"+t.item.index},on:{click:function(n){e.old_index=t.item.index}}},[e._v(" move")]):e._e()],1)]}}])}),0===Object.keys(e.rows).length?n("span",[e._v("There are no items yet in this list.")]):e._e(),n("b-modal",{attrs:{id:"move_row_modal",title:"Move Row",size:"sm",visible:!1,"hide-footer":""}},[e._v(" Current row index: "+e._s(e.old_index)+" "),n("b-input-group",{staticClass:"sm my-2 mx-1",attrs:{prepend:"New index"}},[n("b-form-input",{attrs:{type:"number",min:"0",max:e.list_data.length-1},model:{value:e.new_index,callback:function(t){e.new_index=t},expression:"new_index"}})],1),n("action-response-component",{attrs:{response:e.move_row_response}}),n("b-button",{staticClass:"btn-sm my-2",attrs:{variant:"outline-secondary",id:"move_row_save_button"},on:{click:function(t){return e.move_row()}}},[e._v("save")])],1)],1)},Yi=[],Hi={components:{ErrorComponent:Ce["default"],ItemPermissionsModal:dt,ActionResponseComponent:m["default"]},props:["list_id"],store:c["a"],mixins:[v["b"]],data:function(){return{error_message:"",delete_list_response:null,delete_row_response:null,move_row_response:null,old_index:null,new_index:null,base_export_url:""}},created:function(){var e=this;if(this.lists_loaded||this.getLists(),this.list_id){var t="simplelist_"+this.list_id;this.checkPermissions({permissions:{edit_list:{alt_target:t},delete_list:{alt_target:t},add_row_to_list:{alt_target:t},edit_row_in_list:{alt_target:t},move_row_in_list:{alt_target:t},delete_row_in_list:{alt_target:t}}}).catch((function(t){e.error_message=t}))}else console.log("Missing list_id in SimpleListComponent");this.url_lookup("export_as_csv").then((function(t){return e.base_export_url=t}))},computed:Object(a["a"])(Object(a["a"])(Object(a["a"])({},l["a"].mapState({lists:function(e){return e.simplelists.lists},user_permissions:function(e){return e.permissions.current_user_permissions}})),l["a"].mapGetters(["getListData","getUserName","url_lookup"])),{},{lists_loaded:function(){return 0!=this.lists.length},rows:function(){return this.lists_loaded?this.getListData(this.list_id).rows:[]},configuration:function(){return this.lists_loaded?this.getListData(this.list_id).configuration:{}},list_name:function(){return this.lists_loaded?this.getListData(this.list_id).name:""},list_description:function(){return this.lists_loaded?this.getListData(this.list_id).description:void 0},list_fields:function(){var e=[{key:"index",sortable:!0}];if(this.lists_loaded)for(var t in this.configuration)e.push({key:t,sortable:!0});return e.push("change"),e},list_data:function(){var e=[],t=0;for(var n in this.rows){var s={};for(var i in this.rows[n])s[i]=this.rows[n][i];s["index"]=t,e.push(s),t++}return e},csv_export_url:function(){return this.base_export_url+"?item_id="+this.list_id+"&item_model=simplelist"}}),methods:Object(a["a"])(Object(a["a"])({},l["a"].mapActions(["checkPermissions","getLists","deleteList","moveRow","deleteRow"])),{},{display_date:function(e){return Date(e)},delete_list:function(e){var t=this;this.deleteList({list_pk:e}).then((function(e){"implemented"==e.data.action_status?t.$router.push({name:"home"}):t.delete_list_response=e}))},delete_row:function(e){var t=this;this.deleteRow({list_pk:this.list_id,index:e.index}).then((function(e){t.delete_row_response=e}))},move_row:function(){var e=this;this.new_index=parseInt(this.new_index),this.old_index!=this.new_index?this.new_index>this.list_data.length-1?this.move_error_message="New index is too high":this.moveRow({list_pk:this.list_id,old_index:this.old_index,new_index:this.new_index}).then((function(t){"implemented"==t.data.action_status&&(e.old_index=null,e.new_index=null),e.move_row_response=t})):this.move_error_message="Must specify different index"}})},Ki=Hi,Ji=Object(u["a"])(Ki,Wi,Yi,!1,null,null,null),Xi=Ji.exports,Qi=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-row",[n("b-col",{attrs:{cols:"3"}},[n("resource-sidebar-component",{attrs:{highlight_model:"simplelist",highlight_pk:e.list_id}})],1),n("b-col",{attrs:{cols:"9"}},[n("simple-list-component",{attrs:{list_id:e.list_id}})],1)],1)},Zi=[],eo={components:{SimpleListComponent:Xi,ResourceSidebarComponent:Oi},props:["list_id"]},to=eo,no=Object(u["a"])(to,Qi,Zi,!1,null,null,null),so=no.exports,io=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-row",[n("b-col",{attrs:{cols:"3"}},[n("resource-sidebar-component",{attrs:{highlight_model:"document",highlight_pk:e.item_id}})],1),n("b-col",{attrs:{cols:"9"}},[n("document-component",{attrs:{item_id:e.item_id}})],1)],1)},oo=[],ro=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.document?n("div",{staticClass:"bg-white p-3"},[n("h3",{staticClass:"mt-3"},[e._v(e._s(e.document.name))]),n("p",[e._v(e._s(e.document.description))]),e.user_permissions.edit_document?n("form-button-and-modal",{attrs:{id_add:"main",item_id:e.item_id,item_model:"document",button_text:"edit metadata"}}):e._e(),e.user_permissions.edit_document&&!e.edit_mode?n("b-button",{staticClass:"btn-sm mr-2",attrs:{variant:"outline-secondary",id:"edit_content_start_button"},on:{click:function(t){e.edit_mode=!0}}},[e._v("edit content")]):e._e(),e.user_permissions.delete_document?n("b-button",{staticClass:"btn-sm mr-2",attrs:{variant:"outline-secondary",id:"delete_document_button"},on:{click:function(t){return e.delete_document(e.item_id)}}},[e._v("delete document")]):e._e(),n("action-response-component",{attrs:{response:e.delete_document_response}}),n("router-link",{attrs:{to:{name:"action-history",params:{item_id:e.item_id,item_model:"document",item_name:e.document.name}}}},[n("b-button",{staticClass:"btn-sm mr-2",attrs:{variant:"outline-secondary",id:"document_history_button"}},[e._v(" document history")])],1),n("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.item_permissions_modal",modifiers:{item_permissions_modal:!0}}],staticClass:"btn-sm mr-2",attrs:{variant:"outline-secondary",id:"document_permissions_button"}},[e._v("document permissions")]),n("item-permissions-modal",{attrs:{item_id:e.item_id,item_model:"document",item_name:e.document.name}}),n("router-link",{attrs:{to:{name:"document-full-page",params:{item_id:e.item_id}}}},[n("b-button",{staticClass:"btn-sm mr-2",attrs:{variant:"outline-secondary",id:"document_fullpage"}},[e._v(" view full page")])],1),e.edit_mode?n("DocumentMarkdownComponent",{ref:"markdown",attrs:{content:e.document.content}}):n("div",{staticClass:"pt-4",domProps:{innerHTML:e._s(e.rendered_content)}}),n("action-response-component",{attrs:{response:e.edit_document_content_response}}),e.edit_mode?n("b-button",{staticClass:"btn-sm",attrs:{variant:"outline-secondary",id:"edit_document_content_button"},on:{click:e.edit_content}},[e._v("save edits")]):e._e(),e.edit_mode?n("b-button",{staticClass:"btn-sm",attrs:{variant:"outline-secondary",id:"discard_content_edits"},on:{click:function(t){e.edit_mode=!1}}},[e._v("discard")]):e._e()],1):e._e()},ao=[],lo=n("0e54"),co=n.n(lo),mo=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[n("b-row",{staticClass:"py-3"},[n("b-col",{attrs:{cols:"12"}},[e._v(" Write your document below. You can use "),n("a",{attrs:{href:"https://www.markdownguide.org/basic-syntax/"}},[e._v("Markdown")]),e._v(" syntax for style. ")])],1),n("b-row",[n("b-col",{attrs:{cols:"6"}},[n("b-form-textarea",{staticClass:"w-100",attrs:{id:"document_content_textarea",name:"document_content_textarea",rows:"5"},on:{input:e.update},model:{value:e.current_content,callback:function(t){e.current_content=t},expression:"current_content"}})],1),n("b-col",{attrs:{cols:"6"}},[n("div",{domProps:{innerHTML:e._s(e.compiledMarkdown)}})])],1)],1)},_o=[],uo=n("2ef0"),po={props:["content"],store:c["a"],data:function(){return{current_content:"# hello!"}},created:function(){this.content&&(this.current_content=this.content)},watch:{content:function(e){console.log("Time to overwrite! with ",this.content),"undefined"!==typeof this.content&&(this.current_content=this.content)}},computed:{compiledMarkdown:function(){return co()(this.current_content,{sanitize:!0})}},methods:{update:Object(uo["debounce"])((function(e){this.current_content=e.target.value}),300)}},fo=po,ho=Object(u["a"])(fo,mo,_o,!1,null,null,null),bo=ho.exports,vo={props:["item_id"],store:c["a"],components:{ItemPermissionsModal:dt,DocumentMarkdownComponent:bo,FormButtonAndModal:A,ActionResponseComponent:m["default"]},mixins:[v["b"]],data:function(){return{error_message:null,edit_mode:!1,new_name:"",new_description:"",delete_document_response:null,edit_document_content_response:null}},created:function(){var e=this;this.document||this.getDocuments();var t="document_"+this.item_id;this.checkPermissions({permissions:{edit_document:{alt_target:t},delete_document:{alt_target:t}}}).catch((function(t){e.error_message=t,console.log(t)}))},computed:Object(a["a"])(Object(a["a"])(Object(a["a"])({},l["a"].mapState({user_permissions:function(e){return e.permissions.current_user_permissions}})),l["a"].mapGetters(["getDocumentData"])),{},{document:function(){return this.getDocumentData(this.item_id)},rendered_content:function(){return this.document?co()(this.document.content,{sanitize:!0}):null}}),methods:Object(a["a"])(Object(a["a"])({},l["a"].mapActions(["checkPermissions","getDocuments","deleteDocument","editDocument"])),{},{edit_content:function(e){var t=this;this.editDocument({pk:this.item_id,content:this.$refs.markdown.current_content}).then((function(e){"implemented"==e.data.action_status?t.edit_mode=!1:t.edit_document_content_response=e}))},delete_document:function(){var e=this;this.deleteDocument({document_pk:this.item_id}).then((function(t){"implemented"==t.data.action_status?e.$router.push({name:"home"}):e.edit_document_content_response=t}))}})},go=vo,ko=Object(u["a"])(go,ro,ao,!1,null,null,null),wo=ko.exports,yo={components:{DocumentComponent:wo,ResourceSidebarComponent:Oi},props:["item_id"]},Oo=yo,Co=Object(u["a"])(Oo,io,oo,!1,null,null,null),xo=Co.exports,Eo=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.document?n("div",{staticClass:"bg-white p-3"},[n("h3",{staticClass:"mt-3"},[e._v(e._s(e.document.name))]),n("p",[e._v(e._s(e.document.description))]),n("hr"),n("div",{staticClass:"pt-4",domProps:{innerHTML:e._s(e.rendered_content)}})]):e._e()},Ro=[],Ao={props:["item_id"],store:c["a"],created:function(){this.document||this.getDocuments()},computed:Object(a["a"])(Object(a["a"])({},l["a"].mapGetters(["getDocumentData"])),{},{document:function(){return this.getDocumentData(this.item_id)},rendered_content:function(){return this.document?co()(this.document.content,{sanitize:!0}):null}}),methods:Object(a["a"])({},l["a"].mapActions(["getDocuments"]))},jo=Ao,So=Object(u["a"])(jo,Eo,Ro,!1,null,null,null),Po=So.exports;s["default"].use(i["a"]);var Do=[{name:"home",path:"/",meta:{tab:"resources"},components:{sidebar:f,main:H}},{name:"edit-group",path:"/edit group",meta:{tab:"none"},components:{sidebar:f,main:H,modal:ee}},{name:"action-history",path:"/actions/history/:item_id/:item_model/:item_name",meta:{tab:"history"},props:{sidebar:!1,main:!0},components:{sidebar:f,main:re}},{name:"action-detail",path:"/actions/detail/:action_id",meta:{tab:"history"},props:{sidebar:!1,main:!0},components:{sidebar:f,main:Vt}},{name:"templates",path:"/templates/:scope/",meta:{tab:"governance"},props:{sidebar:!1,main:!0},components:{sidebar:f,main:et["a"]}},{name:"item-templates",path:"/templates/:scope/:target_id/:target_model",meta:{tab:"governance"},props:{sidebar:!1,main:!0},components:{sidebar:f,main:et["a"]}},{name:"governance",path:"/governance",meta:{tab:"governance"},components:{sidebar:f,main:cs}},{name:"change-leadership",path:"/governance/change-leadership",meta:{tab:"governance"},components:{sidebar:f,main:un}},{name:"group-permissions",path:"/permissions/:group_pk",meta:{tab:"permissions"},props:{sidebar:!1,main:!0},components:{sidebar:f,main:Rs}},{name:"user-permissions",path:"/permissions/user/:user_pk",meta:{tab:"permissions"},props:{sidebar:!1,main:!0},components:{sidebar:f,main:Is}},{name:"conditions",path:"/conditions/:conditioned_on/:dependency_scope",meta:{tab:"permissions"},props:{sidebar:!1,main:!0},components:{sidebar:f,main:ci}},{name:"forum-detail",path:"/forums/:item_id",meta:{tab:"resources"},props:{sidebar:!1,main:!0},components:{sidebar:f,main:Ri}},{name:"post-detail",path:"/forums/:forum_id/posts/:item_id",meta:{tab:"resources"},props:{sidebar:!1,main:!0},components:{sidebar:f,main:Ii}},{name:"add-new-list",path:"/lists/new",meta:{tab:"resources"},components:{sidebar:f,main:H,modal:Ui}},{name:"edit-list-info",path:"/lists/edit/:list_id",meta:{tab:"resources"},props:{sidebar:!1,main:!1,modal:!0},components:{sidebar:f,main:H,modal:Ui}},{name:"list-detail",path:"/lists/detail/:list_id",meta:{tab:"resources"},props:{sidebar:!1,main:!0},components:{sidebar:f,main:so}},{name:"edit-list-row",path:"/lists/detail/:list_id/rows/:mode/:row_index",meta:{tab:"resources"},props:{sidebar:!1,main:!0,modal:!0},components:{sidebar:f,main:Xi,modal:Bi}},{name:"add-list-row",path:"/lists/detail/:list_id/rows/:mode",meta:{tab:"resources"},props:{sidebar:!1,main:!0,modal:!0},components:{sidebar:f,main:Xi,modal:Bi}},{name:"document-detail",path:"/documents/detail/:item_id",meta:{tab:"resources"},props:{sidebar:!1,main:!0},components:{sidebar:f,main:xo}},{name:"document-full-page",path:"/documents/detail/full/:item_id/",meta:{tab:"resources"},props:{sidebar:!1,main:!0},components:{sidebar:f,main:Po}}],Io=new i["a"]({routes:Do});t["a"]=Io},a209:function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return i}));var s={methods:{shorten_text:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50;return"string"===typeof e&&e.length>t?e.substring(0,t)+"...":e}}},i={methods:{change_field:function(e){for(var t in this.configuration_fields||console.log("Error! Must set configuration_fields property."),this.configuration_fields)this.configuration_fields[t].field_name==e.field_name&&(this.configuration_fields[t].value=e.new_value)}}}},a669:function(e,t,n){"use strict";var s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[n("h4",{staticClass:"mb-3"},[e._v(e._s(e.capitalize(e.scope))+" Templates")]),n("error-component",{attrs:{message:e.error_message}}),e.selected_template?n("span",[e.create_group||e.user_permissions.apply_template?n("span",[n("template-info-component",{attrs:{template:e.selected_template,create_group:e.create_group,display_select:!1}}),e.configuration_fields.length>0?n("span",[n("h5",{staticClass:"mt-3 font-weight-bold"},[e._v("Configure fields for template: "+e._s(this.selected_template.name)+".")]),e._l(e.configuration_fields,(function(t){return n("field-component",{key:t.field_name,attrs:{initial_field:t},on:{"field-changed":e.change_field}})}))],2):n("span",[n("b",[e._v("There are no fields to configure.")])]),n("action-response-component",{attrs:{response:e.apply_template_response}}),e.create_group?e._e():n("b-button",{staticClass:"my-2",attrs:{id:"submit_apply_template",variant:"outline-dark",size:"sm"},on:{click:function(t){return e.apply_template(e.selected_template)}}},[e._v(" Apply template")])],1):n("span",[e._v("You do not have permisson to apply templates to this "+e._s(e.scope)+".")])]):n("span",[n("b-card-group",{attrs:{deck:""}},e._l(e.scope_templates,(function(t){return n("template-info-component",{key:t.pk,attrs:{template:t,create_group:e.create_group,display_select:!0},on:{"template-selected":e.select_template}})})),1)],1)],1)},i=[],o=n("5530"),r=n("2f62"),a=n("4360"),l=n("4ae4"),c=n("da66"),m=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-card",{key:e.template.pk,staticClass:"w-50",staticStyle:{display:"inline-block"},attrs:{title:e.template.name,id:e.slugify_name(e.template.name)}},[n("b-card-text",[e._v(e._s(e.template.description)+" "),n("div",[n("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle",value:"template_actions_"+e.slugify_name(e.template.name),expression:"'template_actions_' + slugify_name(template.name)"}],staticClass:"btn-sm mt-3"},[e._v(" Template Details")]),n("b-collapse",{staticClass:"mt-3",attrs:{id:"template_actions_"+e.slugify_name(e.template.name)}},[n("b-card",[n("small",[e.create_group?e._e():n("span",[e._v(e._s(e.template.action_breakdown.foundational))]),n("ol",{staticClass:"mt-3"},e._l(e.template.action_breakdown.actions,(function(t){return n("li",{key:t.pk},[e._v(e._s(t))])})),0)])])],1)],1)]),e.display_select?n("b-button",{staticClass:"my-2",attrs:{id:"select_template_"+e.slugify_name(e.template.name),variant:"outline-dark"},on:{click:function(t){return e.$emit("template-selected",e.template)}}},[e._v("select template")]):e._e()],1)},_=[],d=(n("ac1f"),n("5319"),{store:a["a"],props:["create_group","template","display_select"],data:function(){return{}},methods:{slugify_name:function(e){return e.toLowerCase().replace(/ /g,"_")}}}),u=d,p=n("2877"),f=Object(p["a"])(u,m,_,!1,null,null,null),h=f.exports,b=n("a209"),v=n("c33f"),g={store:a["a"],components:{ErrorComponent:l["default"],FieldComponent:c["a"],TemplateInfoComponent:h,ActionResponseComponent:v["default"]},mixins:[b["a"]],props:["scope","create_group","target_id","target_model"],data:function(){return{selected_template:null,browse_templates:!1,configuration_fields:[],error_message:null,apply_template_response:null}},created:function(){var e=this;this.getTemplatesForScope({scope:this.scope});var t=null,n=null;t=this.target_model?this.target_model:"group",n=this.target_id?this.target_id:a["a"].state.group_pk;var s=t+"_"+n;this.create_group||this.checkPermissions({permissions:{apply_template:{alt_target:s}}}).catch((function(t){e.error_message=t,console.log(t)}))},computed:Object(o["a"])(Object(o["a"])(Object(o["a"])({},r["a"].mapGetters(["scopeTemplates"])),r["a"].mapState({user_permissions:function(e){return e.permissions.current_user_permissions}})),{},{scope_templates:function(){return this.scopeTemplates(this.scope)}}),methods:Object(o["a"])(Object(o["a"])({},r["a"].mapActions(["getTemplatesForScope","applyTemplate","checkPermissions"])),{},{capitalize:function(e){return e[0].toUpperCase()+e.substring(1)},clearState:function(){this.selected_template=null,this.configuration_fields=[],this.fill_configuration_fields=!1,this.browse_templates=!1,this.error_message=""},select_template:function(e){e.supplied_fields?(this.selected_template=e,this.configuration_fields=e.supplied_fields):this.selected_template=e},validate_template:function(){for(var e in this.configuration_fields)if(this.configuration_fields[e]["required"]&&!this.configuration_fields[e]["value"])return this.error_message="Required field "+this.configuration_fields[e]["field_name"]+" needs a value",!1;return!0},apply_template:function(){var e=this;this.validate_template()&&this.applyTemplate({target_model:this.target_model,target_pk:this.target_id,supplied_fields:this.configuration_fields,template_model_pk:this.selected_template.pk}).then((function(t){e.apply_template_response=t}))}})},k=g,w=Object(p["a"])(k,s,i,!1,null,null,null);t["a"]=w.exports},c0a4:function(e,t,n){"use strict";n("0243")},c33f:function(e,t,n){"use strict";var s=n("dc99"),i=n("9c8e"),o=n("2877"),r=Object(o["a"])(i["default"],s["a"],s["b"],!1,null,null,null);t["default"]=r.exports},d2c4:function(e,t,n){"use strict";var s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"navbarVueApp"}},[n("b-navbar",{attrs:{toggleable:"lg",type:"dark",variant:"info"}},[n("b-navbar-brand",{attrs:{href:"/"}},[e._v("Kybern")]),n("b-navbar-toggle",{attrs:{target:"nav-collapse"}}),n("b-collapse",{attrs:{id:"nav-collapse","is-nav":""}},[n("b-navbar-nav",[n("b-nav-item",{attrs:{href:"/?hide_info=true"}},[e._v("Groups")]),n("b-nav-item",{attrs:{href:"/template-library"}},[e._v("Templates")])],1),n("b-navbar-nav",{staticClass:"ml-auto"},[e.signed_in?n("b-nav-item-dropdown",{attrs:{right:""},scopedSlots:e._u([{key:"button-content",fn:function(){return[n("em",[e._v(e._s(e.user_name))])]},proxy:!0}],null,!1,4202963060)},[n("b-dropdown-item",{attrs:{href:"/profile"}},[e._v("Your Profile")]),n("b-dropdown-item",{attrs:{href:"/logout"}},[e._v("Sign Out")])],1):n("b-nav-item",{attrs:{href:"/login"}},[e._v("Sign In")])],1)],1)],1)],1)},i=[],o={props:["user_name","signed_in"]},r=o,a=n("2877"),l=Object(a["a"])(r,s,i,!1,null,null,null);t["a"]=l.exports},d8c3:function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var s=n("2b0e"),i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[n("navbar-component",{attrs:{user_name:e.user_name,signed_in:e.signed_in}}),n("b-container",{attrs:{fluid:""}},[n("b-row",{staticClass:"bg-white"},[n("b-col",[n("router-view",{attrs:{name:"sidebar"}})],1)],1),n("b-row",[n("b-col",{staticClass:"p-4",attrs:{cols:"12"}},[n("router-view",{attrs:{name:"main"}})],1)],1),n("router-view",{attrs:{name:"modal"}})],1)],1)},o=[],r=n("5530"),a=n("4360"),l=n("d2c4"),c=JSON.parse(window.__INITIAL_STATE__),m={components:{NavbarComponent:l["a"]},store:a["a"],data:function(){return{user_name:c.user_name,signed_in:c.is_authenticated}},methods:Object(r["a"])({},Vuex.mapActions(["initialize_group_data","getPermissionData","getGovernanceData","getForums"])),created:function(){this.initialize_group_data({urls:c.urls,group_pk:c.group_pk,group_name:c.group_name,user_pk:c.user_pk,group_description:c.group_description,user_name:c.user_name}),this.getPermissionData(),this.getGovernanceData(),this.getForums()}},_=m,d=(n("74b7"),n("2877")),u=Object(d["a"])(_,i,o,!1,null,null,null),p=u.exports,f=n("a18c"),h=n("5f5b"),b=n("b1e0");s["default"].use(h["a"]),s["default"].use(b["a"]),s["default"].config.productionTip=!1,new s["default"]({router:f["a"],store:a["a"],render:function(e){return e(p)}}).$mount("#kybernApp")},da66:function(e,t,n){"use strict";var s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",["CharField"==e.field.type?n("div",{staticClass:"d-block"},[n("div",{staticClass:"input-group-prepend"},[n("span",{staticClass:"input-group-text",attrs:{id:e.field.field_name+"_label"}},[e._v(e._s(e.label(e.field)))])]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.field.value,expression:"field.value"}],staticClass:"form-control",attrs:{type:"text",id:e.field.field_name,name:e.field.field_name,"aria-label":e.field.field_name,"aria-describedby":e.field.field_name+"_label",required:e.field.required},domProps:{value:e.field.value},on:{input:function(t){t.target.composing||e.$set(e.field,"value",t.target.value)}}})]):e._e(),"PermissionedModelField"==e.field.type?n("div",{staticClass:"d-block"},[n("div",{staticClass:"input-group-prepend"},[n("span",{staticClass:"input-group-text",attrs:{id:e.field.field_name+"_label"}},[e._v(e._s(e.label(e.field)))])]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.field.value,expression:"field.value"}],staticClass:"form-control",attrs:{type:"text",id:e.field.field_name,name:e.field.field_name,"aria-label":e.field.field_name,"aria-describedby":"field.field_name + '_label'",required:e.field.required},domProps:{value:e.field.value},on:{input:function(t){t.target.composing||e.$set(e.field,"value",t.target.value)}}})]):e._e(),"BooleanField"==e.field.type?n("span",[n("b-form-checkbox",{attrs:{name:"checkbox-1",value:"true","unchecked-value":"false"},model:{value:e.field.value,callback:function(t){e.$set(e.field,"value",t)},expression:"field.value"}},[e._v(" "+e._s(e.label(e.field))+" ")])],1):e._e(),"IntegerField"==e.field.type?n("div",{staticClass:"d-block"},[n("div",{staticClass:"input-group-prepend"},[n("span",{staticClass:"input-group-text",attrs:{id:e.field.field_name+"_label"}},[e._v(e._s(e.label(e.field)))])]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.field.value,expression:"field.value"}],staticClass:"form-control",attrs:{type:"number","aria-label":e.field.field_name+"_label","aria-describedby":e.field.field_name+"_label",required:e.field.required},domProps:{value:e.field.value},on:{input:function(t){t.target.composing||e.$set(e.field,"value",t.target.value)}}})]):e._e(),"RoleField"==e.field.type||"RoleListField"==e.field.type?n("div",{staticClass:"permissionrolefield"},[n("b-input-group",{attrs:{prepend:e.label(e.field)}},[n("vue-multiselect",{staticClass:"w-50",attrs:{options:e.rolesAsOptions,"allow-empty":!0,multiple:e.select_field_is_multiple(e.field),"close-on-select":!0,placeholder:"Select roles",label:"name","track-by":"name"},model:{value:e.field.value,callback:function(t){e.$set(e.field,"value",t)},expression:"field.value"}})],1)],1):e._e(),"ActorField"==e.field.type||"ActorListField"==e.field.type?n("div",{staticClass:"permissionactorfield"},[n("b-input-group",{attrs:{prepend:e.label(e.field)}},[n("vue-multiselect",{staticClass:"w-50",attrs:{options:e.groupMembersAsOptions,"allow-empty":!0,multiple:e.select_field_is_multiple(e.field),"close-on-select":!0,placeholder:"Select actors",label:"name","track-by":"pk"},model:{value:e.field.value,callback:function(t){e.$set(e.field,"value",t)},expression:"field.value"}})],1)],1):e._e()])},i=[],o=(n("b0c0"),n("5530")),r=n("2f62"),a=n("4360"),l=n("8e5f"),c=n.n(l),m={store:a["a"],components:{"vue-multiselect":c.a},props:["initial_field"],data:function(){return{field:null}},created:function(){this.field=this.initial_field},watch:{field:function(e){this.$emit("field-value-change",{field_name:this.field.name,new_value:this.field.value})}},computed:Object(o["a"])({},r["a"].mapGetters(["rolesAsOptions","groupMembersAsOptions"])),methods:{select_field_is_multiple:function(e){return!e.other_data||!e.other_data.multiple||e["other_data"]["multiple"]},label:function(e){return e.display?e.display:e.label}}},_=m,d=n("2877"),u=Object(d["a"])(_,s,i,!1,null,null,null);t["a"]=u.exports},dc99:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return i}));var s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.response?n("div",[n("b-alert",{attrs:{show:e.showAlert,variant:e.variant,dismissible:""},on:{dismissed:function(t){e.showAlert=!1}}},["waiting"==e.status||"implemented"==e.status?n("span",{domProps:{innerHTML:e._s(e.processed_message)}}):n("span",[e._v(e._s(e.processed_message))])])],1):e._e()},i=[]},e087:function(e,t,n){"use strict";n("e7f1")},e7f1:function(e,t,n){},f4bc:function(e,t,n){},f7bd:function(e,t,n){"use strict";var s=n("07bb"),i=n.n(s);t["default"]=i.a}});