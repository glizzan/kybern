<div id="governance">

        <!-- <leadership-component></leadership-component>    -->
         <!-- root component is also a b-card -->

        <b-card header="Other Roles">

            <p class="card-text mt-2">
                Each group also has a variety of roles which different people can be assigned to. Each 
                role has different rights and responsibilities within the community.
            </p>

            <b-button class="btn-sm mb-3" v-b-modal.add_role_modal>Add a role</b-button>

            <b-list-group>

                    <b-list-group-item v-for="role in allRoles" v-bind:key="role.id" 
                        class="d-flex justify-content-between align-items-center"> 
                            <span>
                                [[ role.name ]] <small class="ml-2"> [[role.current_members.length ]] people </small>
                            </span>
                            <div>
                                <b-badge variant="primary" pill v-b-modal.edit_role_modal
                                    v-on:click="role_to_edit = role.name">
                                    edit role</b-badge>
                                <b-badge variant="secondary" pill v-b-modal.change_membership_modal
                                    v-on:click="role_to_change_membership = role.name">
                                    change members</b-badge>
                            </div>
                    </b-list-group-item>
                    
            </b-list-group>

        </b-card>

    <add-role-modal></add-role-modal>
    <change-membership-modal :role_selected=role_to_change_membership></change-membership-modal>
    <edit-role-modal :role_to_edit=role_to_edit></edit-role-modal>

</div>

{% include 'groups/leadership_include.html' %}    
{% include 'groups/add_role_include.html' %}
{% include 'groups/change_membership_include.html' %}
{% include 'groups/edit_role_include.html' %}


<script type="application/javascript">

    // Main vue instance for role app
    var roleApp = new Vue({
        delimiters: ['[[', ']]'],
        el: '#governance',
        store,
        data: {
            role_to_change_membership: '',                  // prop for add-people-to-role-modal
            role_to_edit: '',                           // propfor edit-role-modal
        },
        computed: {
            ...Vuex.mapState(['roles']),
            ...Vuex.mapGetters(['allRoles'])
        },
        methods: {
        }
    });

</script>